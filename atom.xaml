<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Codec42</title>
  
  <subtitle>ä¿æŒå¯¹æŠ€æœ¯çš„çƒ­çˆ±ï¼Excelsior!</subtitle>
  <link href="/atom.xaml" rel="self"/>
  
  <link href="http://www.codec.wang/"/>
  <updated>2020-04-15T02:35:07.530Z</updated>
  <id>http://www.codec.wang/</id>
  
  <author>
    <name>å°å¼ºæœ¬å¼º</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å®ä¾‹ï¼šæˆ‘çš„å°ç¨‹åºå·¥ç¨‹æ¶æ„3.0</title>
    <link href="http://www.codec.wang/mini-program-architecture-3/"/>
    <id>http://www.codec.wang/mini-program-architecture-3/</id>
    <published>2020-04-13T06:19:30.000Z</published>
    <updated>2020-04-15T02:35:07.530Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘æ˜¯å»å¹´10æœˆå¼€å§‹è´Ÿè´£å°ç¨‹åºçš„å¼€å‘ç»´æŠ¤å·¥ä½œï¼Œä¸€å¼€å§‹æˆ‘æ˜¯å†²ç€UI/UXå»æ”¹çš„ï¼Œå› ä¸ºæ—§ç‰ˆåœ¨è®¾è®¡å’Œäº¤äº’ä¸Šå­˜åœ¨å¤ªå¤šé—®é¢˜ï¼Œä¸ºæ­¤æˆ‘ç”¨Sketché‡æ–°è®¾è®¡äº†ä¸€å¥—å…¨æ–°UI/UXã€‚ä½†é˜…è¯»ä»£ç æ—¶ï¼Œå‘ç°æ¥å£è°ƒç”¨ã€åŸºç¡€é…ç½®ã€æ•°æ®å¤„ç†ã€é¡µé¢é€»è¾‘ã€æ—¥å¿—å¤„ç†ç­‰ç­‰éƒ½å†™åœ¨ä¸€èµ·ï¼Œéšä¾¿ä¸€ä¸ªå‡½æ•°å°±æ˜¯ç™¾æ¥è¡Œï¼Œçœ‹çš„æˆ‘ç®€ç›´ä¸è¦å¤ªå´©æºƒâ€¦â€¦å’‹åŠå‘¢ï¼Ÿå”‰ï¼Œä½œä¸ºä¸€åå¼ºè¿«ç—‡æ‚£è€…ï¼Œé‡<del>æ„</del>å†™èµ°èµ·å‘—ğŸ™ƒ<a id="more"></a></p><hr><blockquote><p>æœ¬ç¯‡æè¿°çš„å·¥ç¨‹æ¶æ„å®Œå…¨æ˜¯æˆ‘ä¾é è‡ªå·±çš„å·¥ç¨‹ç»éªŒæ„å»ºï¼Œæ¥æ‰‹æ—¶æˆ‘ä¹Ÿæ˜¯æ–°æ‰‹ï¼Œæ²¡æœ‰å‚è€ƒä»»ä½•å…¶ä»–å·¥ç¨‹ã€‚å†™å‡ºæ¥æ˜¯å› ä¸ºæ¯æ¬¡é‡æ„éƒ½æ˜¯å¯¹éœ€æ±‚çš„ä¿®æ”¹é‡åˆ°ç“¶é¢ˆï¼Œä¸æ–­çªç ´è¾¹ç•Œçš„è¿‡ç¨‹ï¼Œæ­¤æ—¶æˆ‘è‡ªå·±å¯¹æ¶æ„å’Œä»£ç çš„ç†è§£ä¹ŸåŠ æ·±äº†å¾ˆå¤šï¼Œæ‰€ä»¥æœ¬ç¯‡ä»…ä¾›å‚è€ƒã€‚æ¯”å¦‚æˆ‘åœ¨3.0ç‰ˆæœ¬ä¸­æå‡ºçš„<code>controller/norm</code>å±‚ï¼Œå¯èƒ½åªæœ‰æˆ‘è¿™ä¹ˆå–åï¼Œä½†æˆ‘ç›¸ä¿¡ä»»ä½•ä¸€ä¸ªä¼˜ç§€çš„å·¥ç¨‹æ¶æ„ç»å¯¹ä¼šåŒ…å«è¿™å…¶ä¸­çš„æ‰€æœ‰ç†å¿µã€‚</p></blockquote><h2 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h2><p>ä¸ºä¾¿äºè¯´æ˜ï¼Œæˆ‘è¿™é‡Œç®€åŒ–ä¸€ä¸ªå°ç¨‹åºçš„æ¡ˆä¾‹å¹¶ä¸€æ­¥æ­¥ä»‹ç»å¦‚ä½•å»ºç«‹å·¥ç¨‹ç›®å½•ã€‚</p><p>å‡è®¾æœ‰ä¸€ä¸ªæ–°é—»å°ç¨‹åºï¼Œåªæœ‰ä¸€ä¸ªé¡µé¢homeï¼Œå¦‚ä¸‹å›¾ã€‚å¯åŠ¨æ—¶ä¼šè°ƒç”¨ç™»é™†æ¥å£ï¼Œç™»é™†æˆåŠŸå°±è·å–æ–°é—»åˆ—è¡¨ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/my-mini-program-architecture-3-news-app.png_webp"><img class="image" src="http://blog.codec.wang/my-mini-program-architecture-3-news-app.png" alt=""></picture></p><p>å¾ˆç®€å•ï¼Œåªæœ‰2ä¸ªGETæ¥å£ã€‚æ­¤å¤–é¡µé¢è¿˜æœ‰ä¸ªåˆ·æ–°æŒ‰é’®ï¼ŒåŠŸèƒ½å°±æ˜¯è·å–æ–°é—»åˆ—è¡¨ã€‚</p><h2 id="1-0"><a href="#1-0" class="headerlink" title="1.0"></a>1.0</h2><p>æš‚ä¸”ç§°æˆ‘æ¥æ‰‹æ—¶çš„æ¶æ„ç‰ˆæœ¬ä¸º1.0ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„æ¶æ„ç®€å•æ¥è¯´å°±æ˜¯æ²¡æœ‰æ¶æ„ï¼Œåªä¸ºå®ç°åŠŸèƒ½ã€‚å„ç±»é€»è¾‘éƒ½å†™åœ¨ä¸€èµ·ï¼ŒUIä¸Šé‡å¤çš„ä»£ç ä¹Ÿæœªæå–æˆç»„ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â””â”€â”€ home<span class="comment"># é¡µé¢</span></span><br><span class="line">    â”œâ”€â”€ home.js</span><br><span class="line">    â””â”€â”€ home.wxml</span><br></pre></td></tr></table></figure><p>è¿™ä¹Ÿæ˜¯æ–°æ‰‹å¸¸å¸¸å†™å‡ºæ¥çš„ä»£ç ï¼Œå¤§å®¶è¦ä¸è¦å°è¯•é˜…è¯»ä¸‹ğŸ¤’(çœ‹ä¸ä¸‹å»å¯ä»¥ç›´æ¥ç•¥è¿‡)ï¼š</p><ul><li>home.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ä»¥ä¸‹ä»£ç ä»…ä½œä¸ºç¤ºä¾‹ï¼Œå¹¶éå®é™…è¿è¡Œä»£ç  */</span></span><br><span class="line"><span class="keyword">const</span> ENV = <span class="string">'test'</span>;</span><br><span class="line"><span class="keyword">const</span> domain = ENV === <span class="string">'test'</span> ? <span class="string">'http://api.jl.com/test/'</span> : <span class="string">'http://api.jl.com/prod'</span>;</span><br><span class="line"><span class="keyword">const</span> loginData = &#123;</span><br><span class="line">    appID: <span class="string">'testappid'</span>,</span><br><span class="line">    loginCode: <span class="string">'testloginCode'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onLoad: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    wx.showLoading(&#123; <span class="attr">title</span>: <span class="string">'æ•°æ®åŠ è½½ä¸­'</span> &#125;);</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">        url: domain + <span class="string">'/v1/login/?AppID='</span> + loginData.appID + <span class="string">'&amp;Code='</span> + loginData.loginCode,</span><br><span class="line">        method: <span class="string">'GET'</span>,</span><br><span class="line">        success(result) &#123;</span><br><span class="line">            wx.hideLoading();</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'login succeed: '</span>, result);</span><br><span class="line">            <span class="keyword">if</span> (result.statusCode == <span class="number">200</span> &amp;&amp; result.data.Status === <span class="string">'Succeed'</span>) &#123;</span><br><span class="line">                wx.request(&#123;</span><br><span class="line">                    url: domain + <span class="string">'/v1/getNews/'</span>,</span><br><span class="line">                    method: <span class="string">'GET'</span>,</span><br><span class="line">                    success(result) &#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">'get news succeed: '</span>, result);</span><br><span class="line">                        <span class="keyword">if</span> (result.statusCode == <span class="number">200</span> &amp;&amp; result.data.Status === <span class="string">'Succeed'</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (result.data.news.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="keyword">let</span> news = result.data.news;</span><br><span class="line">                                news = news.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">                                    item.color = index % <span class="number">2</span> === <span class="number">0</span> ? <span class="string">'red'</span> : <span class="string">'green'</span>;</span><br><span class="line">                                &#125;);</span><br><span class="line">                                <span class="keyword">this</span>.setData(&#123; news &#125;);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    fail(error) &#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">'get news failed: '</span>, error);</span><br><span class="line">                        <span class="keyword">this</span>.showToast(<span class="string">`ä½ å·²åˆ°ç«æ˜Ÿï½<span class="subst">$&#123;error&#125;</span>`</span>);</span><br><span class="line">                    &#125;,</span><br><span class="line">                    complete() &#123;</span><br><span class="line">                        <span class="comment">/* Do Nothing. */</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.showToast(<span class="string">'ä½ å·²åˆ°ç«æ˜Ÿï½'</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        fail(error) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'login failed: '</span>, error);</span><br><span class="line">            wx.hideLoading();</span><br><span class="line">            <span class="keyword">this</span>.showToast(<span class="string">`ä½ å·²åˆ°ç«æ˜Ÿï½<span class="subst">$&#123;error&#125;</span>`</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        complete() &#123;</span><br><span class="line">            <span class="comment">/* Do Nothing. */</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>è¿™å·²ç»æ˜¯æˆ‘ä»å®é™…ä»£ç ä¸­æå–å¹¶ç®€åŒ–å¾ˆå¤šåçš„ä»£ç äº†ã€‚å…¶å®é€»è¾‘å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸¤ä¸ªæ¥å£çš„è°ƒç”¨ã€‚é‚£ä¸ºä»€ä¹ˆçœ‹ä¸Šå»è¿™ä¹ˆå¤æ‚å‘¢ï¼ŸåŸå› å°±æ˜¯å°†å„ç±»æ¨¡å—å’ŒåŠŸèƒ½éƒ½æ‰æ‚åœ¨äº†ä¸€èµ·ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€æ­¥æ­¥æ‹†åˆ†ã€‚</p><h2 id="2-0"><a href="#2-0" class="headerlink" title="2.0"></a>2.0</h2><h3 id="é…ç½®å±‚"><a href="#é…ç½®å±‚" class="headerlink" title="é…ç½®å±‚"></a>é…ç½®å±‚</h3><p>è¿™æ˜¯æœ€ç®€å•çš„ä¸€å—ï¼šä»£ç çš„å‰ä¸¤è¡Œæ˜¯APIçš„ç¯å¢ƒï¼Œæµ‹è¯•ç¯å¢ƒtestè¿˜æ˜¯çº¿ä¸Šç¯å¢ƒprodï¼Œè¿™å±äºé¡¹ç›®çš„åŸºç¡€é…ç½®é¡¹ï¼Œä¸åº”è¯¥å‡ºç°åœ¨é¡µé¢é€»è¾‘ä»£ç ä¸­ã€‚æ‰€ä»¥æˆ‘ä»¬æå–ä¸€ä¸ªå«configçš„ç›®å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ config<span class="comment"># é…ç½®å±‚</span></span><br><span class="line">â”‚Â Â  â””â”€â”€ config.js</span><br><span class="line">â””â”€â”€ home<span class="comment"># é¡µé¢</span></span><br><span class="line">    â”œâ”€â”€ home.js</span><br><span class="line">    â””â”€â”€ home.wxml</span><br></pre></td></tr></table></figure><ul><li>config.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Author: codec.wang</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ENV: <span class="string">'test'</span>,</span><br><span class="line"></span><br><span class="line">    GetEnv: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> envConfig[<span class="keyword">this</span>.ENV];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> envConfig = &#123;</span><br><span class="line">    test: &#123;</span><br><span class="line">        domain: <span class="string">'http://api.jl.com/test/'</span>,</span><br><span class="line">        debug: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    prod: &#123;</span><br><span class="line">        domain: <span class="string">'http://api.jl.com/prod/'</span>,</span><br><span class="line">        debug: <span class="literal">false</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ¥å£å±‚"><a href="#æ¥å£å±‚" class="headerlink" title="æ¥å£å±‚"></a>æ¥å£å±‚</h3><p>è¿™éƒ¨åˆ†æ˜¯2.0æ¶æ„é‡æ„ä¸­çš„å…³é”®ï¼š<code>onLoad</code>ä¸­ä¸»è¦æ‰§è¡Œçš„æ˜¯æ¥å£è°ƒç”¨ï¼Œå¤§é‡é‡å¤ä»£ç é›†ä¸­åœ¨è¿™é‡Œï¼Œæ¯”å¦‚æ¥å£è°ƒç”¨æˆåŠŸçš„åˆ¤æ–­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (result.statusCode == <span class="number">200</span> &amp;&amp; result.data.Status === <span class="string">'Succeed'</span>) &#123;&#125;</span><br></pre></td></tr></table></figure><p>æ¥å£è°ƒç”¨æˆåŠŸæˆ–å¤±è´¥æ—¶çš„å¤„ç†(æ—¥å¿—æ‰“å°)ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">success(result) &#123;<span class="built_in">console</span>.log(<span class="string">'succeed: '</span>, result);&#125;</span><br><span class="line">fail(error) &#123;<span class="built_in">console</span>.log(<span class="string">'error: '</span>, error);&#125;</span><br></pre></td></tr></table></figure><p>æ˜¾ç„¶è¿™äº›é‡å¤çš„ä»£ç éƒ½éœ€é‡æ„ã€‚ä½†è¿™é‡Œè¿˜æœ‰ä¸ªæœ€å…³é”®çš„ç»´æŠ¤æ€§é—®é¢˜ï¼šæ¥å£æ•£è½åœ¨é¡µé¢ä»£ç ä¸­ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œç™»é™†æ¥å£çš„æ¥å£åæ˜¯<code>/v1/login</code>ã€‚å‡è®¾è¿™ä¸ªæ¥å£åç»­å˜äº†ï¼šæ¥å£åå˜ä¸º <code>/v2/loginServer</code>ï¼Œå‚æ•°å¤šåŠ äº†ä¸€ä¸ª<code>Time</code>å­—æ®µã€‚æ­¤æ—¶ï¼Œä½ éœ€è¦æ‰¾åˆ°ä½¿ç”¨æ­¤æ¥å£çš„æ‰€æœ‰é¡µé¢ï¼Œä¸€ä¸ªä¸ªæ›´æ”¹å­—ç¬¦æ–‡æœ¬ï¼Œè¿™ç§æ“ä½œç®€ç§°â€ä½œæ­»â€ğŸ™‚</p><p>ç»¼ä¸Šï¼Œæˆ‘ä»¬éœ€è¦æŠŠ<code>wx.request</code>å°è£…ä¸€å±‚ï¼Œå°†æ¥å£æˆåŠŸæˆ–å¤±è´¥æ—¶çš„é€šç”¨å¤„ç†å†™åœ¨è¿™å±‚ä¸­ã€‚ç„¶åæŠŠæ‰€æœ‰çš„æ¥å£è°ƒç”¨å†™åœ¨ä¸€ä¸ªæ–‡ä»¶<code>api.js</code>ä¸­ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ api<span class="comment"># æ¥å£å±‚</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ api.js<span class="comment"># æ‰€æœ‰æ¥å£è°ƒç”¨</span></span><br><span class="line">â”‚Â Â  â””â”€â”€ request.js<span class="comment"># HTTPè¯·æ±‚å°è£…</span></span><br><span class="line">â”œâ”€â”€ config<span class="comment"># é…ç½®å±‚</span></span><br><span class="line">â”‚Â Â  â””â”€â”€ config.js</span><br><span class="line">â””â”€â”€ home<span class="comment"># é¡µé¢</span></span><br><span class="line">    â”œâ”€â”€ home.js</span><br><span class="line">    â””â”€â”€ home.wxml</span><br></pre></td></tr></table></figure><p>  è¦å°è£…ä¸€å±‚å°ç¨‹åºçš„HTTPè¯·æ±‚ï¼Œéœ€è¦ç”¨åˆ°<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener">Promise</a>ã€‚æ­¤å¤„é€»è¾‘å…¶å®ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä½†éœ€è¦å¯¹Promiseæœ‰æ‰€äº†è§£ï¼š</p><ul><li>request.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°è£…wx.requestä¸ºPromiseå¯¹è±¡</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Author: codec.wang</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Request</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(params) &#123;</span><br><span class="line">        <span class="keyword">this</span>.baseUrl = params.baseUrl;<span class="comment">// APIæ ¹åœ°å€</span></span><br><span class="line">        <span class="keyword">this</span>.enableBaseUrl = params.enableBaseUrl; <span class="comment">// æ˜¯å¦å¯ç”¨æ ¹åœ°å€</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span>(url, data) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.request(url, data, <span class="string">'GET'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    post(url, data) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.request(url, data, <span class="string">'POST'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    put(url, data) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.request(url, data, <span class="string">'PUT'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    request(url, data, method = <span class="string">'GET'</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> actualUrl = <span class="keyword">this</span>.enableBaseUrl ? <span class="keyword">this</span>.baseUrl + url : url;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(</span><br><span class="line">            (resolve, reject) =&gt; &#123;</span><br><span class="line">                wx.request(&#123;</span><br><span class="line">                    url: actualUrl,</span><br><span class="line">                    data,</span><br><span class="line">                    header: &#123;&#125;,</span><br><span class="line">                    method: method,</span><br><span class="line">                    dataType: <span class="string">'json'</span>,</span><br><span class="line">                    responseType: <span class="string">'text'</span>,</span><br><span class="line">                    success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                        <span class="comment">// ç®€åŒ–å°ç¨‹åºè¯·æ±‚ï¼ŒPromiseçš„thenå³ä¸ºè¯·æ±‚+æ•°æ®æ­£å¸¸ï¼Œcatchä¸ºè¯·æ±‚å¤±è´¥æˆ–æ•°æ®æœ‰æ— </span></span><br><span class="line">                        <span class="keyword">if</span> (res.statusCode === <span class="number">200</span> &amp;&amp; res.data.Status === <span class="string">'succeed'</span>)</span><br><span class="line">                            resolve(res.data.Data);</span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;url&#125;</span> Return failed: <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(res.data)&#125;</span>`</span>);</span><br><span class="line">                            reject(res.data);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    fail: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;url&#125;</span> Request failed: <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(res)&#125;</span>`</span>);</span><br><span class="line">                        reject(res.data);</span><br><span class="line">                    &#125;,</span><br><span class="line">                    complete: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                        <span class="comment">/* Do Nothing. */</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å°ç¨‹åºçš„Promiseæ²¡æœ‰finallyæ–¹æ³•ï¼Œéœ€è¦è‡ªå·±æ‰©å±• */</span></span><br><span class="line"><span class="built_in">Promise</span>.prototype.finally = <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="built_in">Promise</span> = <span class="keyword">this</span>.constructor;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.then(</span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">Promise</span>.resolve(callback()).then(</span><br><span class="line">                <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> value;</span><br><span class="line">                &#125;</span><br><span class="line">            );</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">reason</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">Promise</span>.resolve(callback()).then(</span><br><span class="line">                <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">throw</span> reason;</span><br><span class="line">                &#125;</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;Request&#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯æ•´ä¸ªæ¥å£å±‚çš„é‡ç‚¹ï¼Œå¤§å®¶ç»†å“ä¸‹ã€‚å°è£…å¥½ä¹‹åï¼Œåœ¨<code>api.js</code>ä¸­ç»Ÿä¸€ç¼–å†™æ¥å£è°ƒç”¨ï¼š</p><ul><li>api.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿä¸€æ¥å£å®šä¹‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Author: codec.wang</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;Request&#125; <span class="keyword">from</span> <span class="string">'request'</span>;</span><br><span class="line"><span class="keyword">const</span> CONFIG = <span class="built_in">require</span>(<span class="string">'../config/config'</span>);</span><br><span class="line"><span class="keyword">const</span> REQUEST = <span class="keyword">new</span> Request(&#123;<span class="attr">baseUrl</span>: CONFIG.GetEnv().domain, <span class="attr">enableBaseUrl</span>: <span class="literal">true</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> API = &#123;</span><br><span class="line">    Login(data) &#123; <span class="comment">/* ç™»é™† */</span></span><br><span class="line">      <span class="keyword">return</span> REQUEST.get(<span class="string">'/v1/login/'</span>, data);</span><br><span class="line">    &#125;,</span><br><span class="line">  </span><br><span class="line">    GetNews(data) &#123; <span class="comment">/* è·å–æ–°é—»åˆ—è¡¨ */</span></span><br><span class="line">      <span class="keyword">return</span> REQUEST.get(<span class="string">'/v1/getNews'</span>, data);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> API;</span><br></pre></td></tr></table></figure><p>ä¸è¿‡æœ‰å¯çˆ±çš„å°ä¼™ä¼´è¦é—®äº†ï¼Œä½ è¿™ä»£ç å’‹è¶Šå†™è¶Šå¤šå‘¢ï¼Œæ„Ÿè§‰æ›´å¤æ‚äº†å•Šã€‚</p><p>è¿™æ ·æé—®çš„ç«¥é‹ä¸€å®šæ˜¯æ²¡åšè¿‡è¾ƒä¸ºå¤æ‚çš„å·¥ç¨‹é¡¹ç›®ã€‚æŠ½ç¦»åˆ†éš”çš„ç›®çš„æ˜¯ä½¿æ¯ä¸ªæ¨¡å—å„å¸å…¶èŒï¼Œæå‡é€»è¾‘æ¶æ„ï¼Œä½¿é¡µé¢åªå…³å¿ƒè‡ªå·±çš„æ•°æ®ç»“æ„å’Œç®—æ³•é€»è¾‘ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œç»è¿‡ä¸Šè¿°çš„é‡æ„ï¼Œhomeé¡µé¢çš„æ¥å£è°ƒç”¨å°±å¾ˆç®€å•äº†ï¼š</p><ul><li>home.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">onLoad: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    wx.showLoading(&#123; <span class="attr">title</span>: <span class="string">'æ•°æ®åŠ è½½ä¸­'</span> &#125;);</span><br><span class="line">    API.Login(loginData)</span><br><span class="line">        .then(<span class="function"><span class="params">_</span> =&gt;</span> <span class="keyword">this</span>.getNews())</span><br><span class="line">        .catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="keyword">this</span>.showToast(error))</span><br><span class="line">        .finally(<span class="function"><span class="params">()</span> =&gt;</span> wx.hideLoading());</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">getNews: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    API.GetNews(&#123;&#125;)</span><br><span class="line">        .then(<span class="function"><span class="params">data</span> =&gt;</span> <span class="keyword">this</span>.setData(&#123;<span class="attr">news</span>: data&#125;))</span><br><span class="line">        .catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="keyword">this</span>.showToast(error))</span><br><span class="line">        .finally(<span class="function"><span class="params">()</span> =&gt;</span> &#123;<span class="comment">/* Do Nothing. */</span>&#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œé¡µé¢ä¸Šçš„åˆ·æ–°æŒ‰é’®ç›´æ¥è°ƒç”¨<code>getNews</code>å°±è¡Œï¼Œæ•´ä¸ªé¡µé¢çš„é€»è¾‘éå¸¸æ˜äº†ã€‚</p><h3 id="æ—¥å¿—å±‚"><a href="#æ—¥å¿—å±‚" class="headerlink" title="æ—¥å¿—å±‚"></a>æ—¥å¿—å±‚</h3><p>ä»£ç ä¸­ç”¨äº†å¾ˆå¤šçš„<code>console.log()</code>æ¥æ‰“å°æ—¥å¿—ï¼Œçº¿ä¸Šç¯å¢ƒä¸åº”è¯¥ç›´æ¥è¿™æ ·ä½¿ç”¨ï¼Œè€Œæ˜¯åº”è¯¥æœ‰ä¸“é—¨çš„æ—¥å¿—æ¨¡å—ã€‚å°ç¨‹åºæ­£å¥½ä¹Ÿæä¾›äº†<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/realtimelog" target="_blank" rel="noopener">å®æ—¶æ—¥å¿—</a>åŠŸèƒ½ï¼Œå› æ­¤ï¼Œåœ¨æµ‹è¯•ç¯å¢ƒä¸Šç»Ÿä¸€ä½¿ç”¨<code>console.log</code>æ‰“å°æ—¥å¿—ï¼Œä¾¿äºæœ¬åœ°è°ƒè¯•ï¼Œè€Œçº¿ä¸Šç¯å¢ƒåˆ™ä½¿ç”¨å®æ—¶æ—¥å¿—åœ¨å°ç¨‹åºåå°ç®¡ç†ç«¯è®°å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ api<span class="comment"># æ¥å£å±‚</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ api.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ request.js</span><br><span class="line">â”œâ”€â”€ config<span class="comment"># é…ç½®å±‚</span></span><br><span class="line">â”‚Â Â  â””â”€â”€ config.js</span><br><span class="line">â”œâ”€â”€ home<span class="comment"># é¡µé¢</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ home.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ home.wxml</span><br><span class="line">â””â”€â”€ <span class="built_in">log</span><span class="comment"># æ—¥å¿—å±‚</span></span><br><span class="line">    â””â”€â”€ log.js</span><br></pre></td></tr></table></figure><ul><li>log.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°ç¨‹åºå®æ—¶æ—¥å¿—ï¼ˆæœ¬åœ°è°ƒè¯•æ‰“å°ï¼‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Author: codec.wang</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> CONFIG = <span class="built_in">require</span>(<span class="string">'../config/config'</span>);</span><br><span class="line"><span class="keyword">let</span> _log = wx.getRealtimeLogManager ? wx.getRealtimeLogManager() : <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">const</span> _isLogMode = CONFIG.GetEnv().debug;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    Info() &#123;</span><br><span class="line">        <span class="keyword">if</span> (!_log) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (!_isLogMode) _log.info.apply(_log, <span class="built_in">arguments</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    Warn() &#123;</span><br><span class="line">        <span class="keyword">if</span> (!_log) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (!_isLogMode) _log.warn.apply(_log, <span class="built_in">arguments</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Error</span>() &#123;</span><br><span class="line">        <span class="keyword">if</span> (!_log) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (!_isLogMode) _log.error.apply(_log, <span class="built_in">arguments</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å·¥å…·å±‚"><a href="#å·¥å…·å±‚" class="headerlink" title="å·¥å…·å±‚"></a>å·¥å…·å±‚</h3><p>åˆ°ç›®å‰ä¸ºæ­¢æ‰€æœ‰çš„æ”¹åŠ¨æˆ‘ç§°ä¸º2.0ã€‚å½“ç„¶å®é™…ä»£ç ä¸­è¿˜æœ‰å¾ˆå¤šå†…å®¹ï¼Œæ¯”å¦‚ä¸€ä¸ªé€šç”¨çš„æ•°æ®ç¼–ç ç®—æ³•ï¼Œæˆ‘ä¼šæåˆ°å·¥å…·å±‚utilsä¸­å»ã€‚è¿˜æœ‰ä¸€äº›æšä¸¾å­—æ®µçš„å®šä¹‰ï¼Œæ¯”å¦‚æ€§åˆ«ï¼Œæˆ‘ä¼šæ”¾åˆ°é…ç½®å±‚çš„<code>fields.js</code>ä¸­ç­‰ç­‰ã€‚æœ€ç»ˆ2.0ç‰ˆçš„ç›®å½•æ¶æ„å¦‚ä¸‹ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/my-mini-program-architecture-3-2.0-chart.png_webp"><img class="image" src="http://blog.codec.wang/my-mini-program-architecture-3-2.0-chart.png" alt=""></picture></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ api<span class="comment"># æ¥å£å±‚</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ api.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ request.js</span><br><span class="line">â”œâ”€â”€ config<span class="comment"># é…ç½®å±‚</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ config.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ fields.js</span><br><span class="line">â”œâ”€â”€ home<span class="comment"># é¡µé¢</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ home.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ home.wxml</span><br><span class="line">â”œâ”€â”€ <span class="built_in">log</span><span class="comment"># æ—¥å¿—å±‚</span></span><br><span class="line">â”‚Â Â  â””â”€â”€ log.js</span><br><span class="line">â””â”€â”€ utils<span class="comment"># å·¥å…·å±‚</span></span><br><span class="line">    â””â”€â”€ utils.js</span><br></pre></td></tr></table></figure><h2 id="3-0"><a href="#3-0" class="headerlink" title="3.0"></a>3.0</h2><p>åœ¨å‰é¢çš„é‡æ„ä¸­ï¼Œæˆ‘ä»¬å¿½ç•¥äº†è¿™æ ·ä¸€ä¸ªå¤„ç†ï¼šå¤§å®¶çœ‹ä¸‹1.0ç‰ˆæœ¬è·å–æ–°é—»åˆ—è¡¨åçš„æ“ä½œ(25ï½30è¡Œ)ã€‚è¿™é‡Œæ˜¯å¯¹åç«¯è¿”å›æ•°æ®çš„æ ¡éªŒ+é¢„å¤„ç†ã€‚å®é™…å¼€å‘ä¸­ï¼Œæˆ‘å‘ç°åŸºæœ¬æ‰€æœ‰æ¥å£æ•°æ®éƒ½éœ€è¦åœ¨å‰ç«¯åšä¸€æ¬¡å•ç‹¬çš„æ ¡éªŒå’Œé¢„å¤„ç†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸æŠŠå®ƒæå–åˆ°ä¸€ä¸ªæ¨¡å—ä¸­å‘¢ï¼Ÿ</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/my-mini-program-architecture-3-data-pre.png_webp"><img class="image" src="http://blog.codec.wang/my-mini-program-architecture-3-data-pre.png" alt=""></picture></p><p>å¦å¤–ï¼Œåœ¨1.0çš„ç™»é™†æ¥å£ä¸­(13è¡Œ)ï¼Œå‰åç«¯å‚æ•°åç§°ä¸ä¸€è‡´ï¼šå‰ç«¯æ˜¯<code>{appID, loginCode}</code>ï¼Œä½†è¯·æ±‚å®é™…éœ€è¦çš„å­—æ®µæ˜¯<code>{AppID, Code}</code>ã€‚åŒæ ·ï¼Œè¿™ç§é—®é¢˜åŸºæœ¬ä¸å¯é¿å…ï¼Œå› ä¸ºå‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼å’Œæ¥å£æ–‡æ¡£æ›´æ–°çš„æ—¶é—´å·®(ç ”å‘æµç¨‹)ï¼Œå¼€å‘äººå‘˜ç”¨å„è‡ªçš„å‘½åè§„èŒƒå¾ˆæ­£å¸¸ã€‚</p><h3 id="Normå±‚"><a href="#Normå±‚" class="headerlink" title="Normå±‚"></a>Normå±‚</h3><p>è¿™ä¸¤ä¸ªæ“ä½œéƒ½ä¸é¡µé¢æœ¬èº«æ— å…³ã€‚ç†æƒ³çŠ¶æ€ä¸‹ï¼Œé¡µé¢å°±æ˜¯å‘é€è¯·æ±‚åæ‹¿æ•°æ®æ¸²æŸ“å°±è¡Œã€‚è€Œæ­£å¥½ï¼Œè¿™ä¸¤ä¸ªæ“ä½œéƒ½è·ŸAPIè¯·æ±‚æœ‰å…³ï¼Œåˆ†åˆ«å‘ç”Ÿåœ¨è¯·æ±‚åå’Œè¯·æ±‚å‰ã€‚é‚£ä¹ˆï¼Œå°±å¯ä»¥åŠ å…¥ä¸€ä¸ªæ§åˆ¶å±‚<code>controller</code>æˆ–æ ‡å‡†åŒ–å±‚<code>norm</code>ç”¨æ¥å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒ+é¢„å¤„ç†ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/my-mini-program-architecture-3-norm.png_webp"><img class="image" src="http://blog.codec.wang/my-mini-program-architecture-3-norm.png" alt=""></picture></p><p>ç”±äºæ˜¯åœ¨è¯·æ±‚å‰ååŠ çš„ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ä¸‹è¯·æ±‚çš„å°è£…æ¥ä½¿ç”¨<code>fNormIn</code>å’Œ<code>fNormOut</code>ã€‚é‡æ–°ç¼–å†™å‰é¢çš„<code>request.js</code>æ–‡ä»¶ï¼š</p><ul><li>api/request.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">get</span>(url, data, fNormIn, fNormOut) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.request(url, data, <span class="string">'GET'</span>, fNormIn, fNormOut);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">request(url, data, method = <span class="string">'GET'</span>, fNormIn, fNormOut) &#123;</span><br><span class="line">    <span class="keyword">if</span>(fNormIn) data = fNormIn(data);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(</span><br><span class="line">        (resolve, reject) =&gt; &#123;</span><br><span class="line">            wx.request(&#123;</span><br><span class="line">                <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (res.statusCode === <span class="number">200</span> &amp;&amp; res.data.Status === <span class="string">'succeed'</span>) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (fNormOut) &#123;</span><br><span class="line">                            <span class="keyword">const</span> ret = fNormOut(res.data.Data);</span><br><span class="line">                            ret.isNormed ? resolve(ret.data.Data) : reject(ret.msg);</span><br><span class="line">                        &#125; <span class="keyword">else</span> resolve(res.data.Data);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;<span class="comment">/* çœç•¥ */</span>&#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                fail: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;<span class="comment">/* çœç•¥ */</span>&#125;,</span><br><span class="line">                complete: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;<span class="comment">/* Do Nothing. */</span>&#125;,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œåªéœ€å®šä¹‰å„ä¸ªæ¥å£çš„<code>Norm</code>å‡½æ•°å³å¯ï¼Œæ”¾ç½®äº<code>norm</code>å±‚ã€‚æœ€ç»ˆ3.0ç‰ˆçš„ç›®å½•æ¶æ„å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ api<span class="comment"># æ¥å£å±‚</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ api.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ request.js</span><br><span class="line">â”œâ”€â”€ config<span class="comment"># é…ç½®å±‚</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ config.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ fields.js</span><br><span class="line">â”œâ”€â”€ home<span class="comment"># é¡µé¢</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ home.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ home.wxml</span><br><span class="line">â”œâ”€â”€ <span class="built_in">log</span><span class="comment"># æ—¥å¿—å±‚</span></span><br><span class="line">â”‚Â Â  â””â”€â”€ log.js</span><br><span class="line">â”œâ”€â”€ norm<span class="comment"># æ§åˆ¶/æ ‡å‡†åŒ–å±‚</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ normIn.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ normOut.js</span><br><span class="line">â””â”€â”€ utils<span class="comment"># å·¥å…·å±‚</span></span><br><span class="line">    â””â”€â”€ utils.js</span><br></pre></td></tr></table></figure><p>å½“ç„¶è¿™åªæ˜¯æˆ‘è‡ªå·±å®šçš„æ¶æ„ï¼Œè¿˜æœ‰å¾ˆå¤šéœ€è¦ä¼˜åŒ–çš„åœ°æ–¹ï¼Œå‘å„ä½å¤§ä½¬å­¦ä¹ ğŸ‘Š</p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener">Promise</a></li><li><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/realtimelog/" target="_blank" rel="noopener">å°ç¨‹åºï¼šå®æ—¶æ—¥å¿—</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘æ˜¯å»å¹´10æœˆå¼€å§‹è´Ÿè´£å°ç¨‹åºçš„å¼€å‘ç»´æŠ¤å·¥ä½œï¼Œä¸€å¼€å§‹æˆ‘æ˜¯å†²ç€UI/UXå»æ”¹çš„ï¼Œå› ä¸ºæ—§ç‰ˆåœ¨è®¾è®¡å’Œäº¤äº’ä¸Šå­˜åœ¨å¤ªå¤šé—®é¢˜ï¼Œä¸ºæ­¤æˆ‘ç”¨Sketché‡æ–°è®¾è®¡äº†ä¸€å¥—å…¨æ–°UI/UXã€‚ä½†é˜…è¯»ä»£ç æ—¶ï¼Œå‘ç°æ¥å£è°ƒç”¨ã€åŸºç¡€é…ç½®ã€æ•°æ®å¤„ç†ã€é¡µé¢é€»è¾‘ã€æ—¥å¿—å¤„ç†ç­‰ç­‰éƒ½å†™åœ¨ä¸€èµ·ï¼Œéšä¾¿ä¸€ä¸ªå‡½æ•°å°±æ˜¯ç™¾æ¥è¡Œï¼Œçœ‹çš„æˆ‘ç®€ç›´ä¸è¦å¤ªå´©æºƒâ€¦â€¦å’‹åŠå‘¢ï¼Ÿå”‰ï¼Œä½œä¸ºä¸€åå¼ºè¿«ç—‡æ‚£è€…ï¼Œé‡&lt;del&gt;æ„&lt;/del&gt;å†™èµ°èµ·å‘—ğŸ™ƒ
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="å°ç¨‹åº" scheme="http://www.codec.wang/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
      <category term="å·¥ç¨‹æ¶æ„" scheme="http://www.codec.wang/tags/%E5%B7%A5%E7%A8%8B%E6%9E%B6%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>è§†é¢‘&amp;å›¾ç‰‡æ»‘åŠ¨å¯¹æ¯”ç»„ä»¶</title>
    <link href="http://www.codec.wang/video-compassion-slider/"/>
    <id>http://www.codec.wang/video-compassion-slider/</id>
    <published>2020-04-06T09:19:36.000Z</published>
    <updated>2020-04-17T11:04:46.346Z</updated>
    
    <content type="html"><![CDATA[<p>æ¬¢è¿å¤§å®¶ä½“éªŒå¹¶StarğŸ™‚ï¼š<a href="http://codec.wang/vsc" target="_blank" rel="noopener">http://codec.wang/vsc</a></p><p>å…ˆæ°´ç‚¹èƒŒæ™¯ï¼šç”±äºåœ¨åšè§†é¢‘&amp;å›¾åƒè´¨é‡è¯„æµ‹ç›¸å…³çš„äº‹ï¼Œä¸ºäº†äººçœ¼å¯ä»¥åŒºåˆ†å‰åç®—æ³•çš„æ•ˆæœï¼Œè‡ªç„¶è¦æƒ³ä¸ªåˆç†çš„å±•ç¤ºæ–¹å¼ã€‚ç›®å‰å¸¸è§çš„ä¸‰ç§æ–¹å¼æ˜¯ï¼š<a id="more"></a></p><ul><li>åºåˆ—å¯¹æ¯”ï¼šå…ˆçœ‹Aï¼Œå†çœ‹Bï¼Œç¼ºç‚¹æ˜¯æ— æ³•åŒæ—¶è§‚çœ‹ï¼Œè®°ä¸ä½ç»†èŠ‚é€ æˆéš¾ä»¥åŒºåˆ†</li><li>åŒçª—å¯¹æ¯”ï¼šABå·¦å³åŒæ—¶å±•ç¤ºï¼Œæ•ˆæœæ›´ä¼˜ã€‚ä½†è§†è§‰ä¸Šè¿˜æ˜¯è¦å·¦å³è·³è½¬ï¼Œå¯¹äºåŠ¨æ€çš„è§†é¢‘è€Œè¨€ï¼Œäººçœ¼åœ¨å·¦å³è·³è½¬æ—¶å¾ˆéš¾åŒæ­¥åˆ°åŒä¸€å¸§</li><li>æ»‘åŠ¨å¯¹æ¯”ï¼šABå åŠ åŒæ—¶å±•ç¤ºï¼Œé€šè¿‡æ»‘å—æ§åˆ¶æ˜¾ç¤ºçš„éƒ¨åˆ†ï¼Œæ•ˆæœæœ€ä½³</li></ul><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/vsc-compare-method.png_webp"><img class="image" src="http://blog.codec.wang/vsc-compare-method.png" alt=""></picture></p><hr><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>å¥½äº†ï¼Œæ­£æ–‡å¼€å§‹ï¼šè¦åœ¨H5ä¸­å®ç°åºåˆ—å’Œå·¦å³åŒçª—è¾ƒä¸ºç®€å•ã€‚ä½†æ»‘åŠ¨è¦æ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>ç®€å•ç†ä¸‹æ€è·¯ï¼šæŠŠABå åœ¨ä¸€èµ·ï¼ŒBæ”¾ä¸‹é¢ï¼ŒAæ”¾ä¸Šé¢ã€‚æ»‘åŠ¨æ¡æ»‘åŠ¨æ—¶ï¼ŒBä¸å˜ï¼ŒAéšè—æ‰éƒ¨åˆ†ã€‚</p><p>é‚£ä¹ˆæ€ä¹ˆéšè—æ‰éƒ¨åˆ†å‘¢ï¼ŸğŸ¤”éš¾é“æ»‘åŠ¨çš„æ—¶å€™è¦å®æ—¶è£åˆ‡è§†é¢‘å—ï¼Ÿè¿™è‚¯å®šæ˜¯ä¸è¡Œæ»´ï½ï½</p><p>è¿™æ—¶å€™å°±å¾—ç¿»å¼€æˆ‘ä»¬çš„CSSå¤§å…¨äº†ï¼Œæˆ‘å‘ç°æœ‰è¿™ä¹ˆä¸€ä¸ªå±æ€§ï¼š<strong>overflow</strong></p><p>å‚è€ƒï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/overflow" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/CSS/overflow</a></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/vcs-understand-css-overflow.png_webp"><img class="image" src="http://blog.codec.wang/vcs-understand-css-overflow.png" alt=""></picture></p><p>ç”±ä¸Šå›¾å¯è§ï¼Œ<code>overflow</code>è¡¨ç¤ºå…ƒç´ é‡Œé¢çš„å†…å®¹å¤ªå¤§ä»¥è‡³äºæ— æ³•å®¹çº³æ—¶åº”è¯¥åšä»€ä¹ˆã€‚<code>visible</code>è¯´ï¼šâ€è€å­å°±ç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼Œéš¾çœ‹å°±éš¾çœ‹(ç›´ç”·âš ï¸)â€ï¼Œè€Œä¼˜é›…çš„â€™<code>hidden</code>è¯´ï¼šâ€è¶…å‡ºçš„éƒ¨åˆ†ç»™æˆ‘æ¶ˆå¤±(éšè—)â€ğŸ˜—</p><p>è¿™ä¸å°±å®Œç¾è§£å†³æˆ‘ä»¬çš„é—®é¢˜äº†å˜›ï¼šåœ¨ä¸Šå±‚videoçš„å¤–é¢åŒ…ä¸€å±‚divï¼Œé»˜è®¤å®½åº¦ä¸è§†é¢‘ä¸€è‡´ã€‚ç„¶åæˆ‘ä»¬åªéœ€è¦æ§åˆ¶divçš„å®½åº¦ï¼Œè¶…å‡ºdivçš„videoéƒ¨åˆ†ä¼šè¢«è‡ªåŠ¨éšè—æ‰ã€‚Perfectï¼Œå¼€å¹²ï¼</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/vcs-understand-slider-compare.png_webp"><img class="image" src="http://blog.codec.wang/vcs-understand-slider-compare.png" alt=""></picture></p><blockquote><p>çŸ¥é“åŸç†å°±ä¼šå‘ç°å¾ˆç®€å•ã€‚ç„¶è€ŒçŸ¥é“åŸç†ä¹‹å‰å´å¾ˆéš¾ï¼Œä½ å¦‚æœè®¤çœŸæ”»ç ´äº†è¿™ä¸ªéš¾ç‚¹ï¼Œå³ä½¿è¿™ä¸ªéš¾ç‚¹æ˜¯â€œå¦‚æ­¤ç®€å•â€ï¼Œä½ çš„æˆé•¿å’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›æ˜¯åˆ«äººæ¯”ä¸äº†çš„ï¼Œè¿™ä¹Ÿå°†ä¼šæ˜¯ä½ çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚</p><p>The easy way is the hard way.</p></blockquote><h2 id="overflow"><a href="#overflow" class="headerlink" title="overflow"></a>overflow</h2><p>é¦–å…ˆæˆ‘ä»¬æŠŠæœ€åŸºæœ¬çš„htmlå†™å‡ºæ¥ï¼Œç”¨äºéªŒè¯ä¸Šè¿°åŸç†ï¼Œä¸ç”¨æ·»åŠ äº¤äº’åŠŸèƒ½ã€‚è§†é¢‘å¯åˆ°<a href="#å¼•ç”¨">å¼•ç”¨</a>å¤„ä¸‹è½½ã€‚</p><ul><li>index.html</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"video-container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"video-a"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">video</span> <span class="attr">autoplay</span> <span class="attr">muted</span> <span class="attr">loop</span> <span class="attr">src</span>=<span class="string">"videos/dolby_amaze_crf32_color.mp4"</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"video-b"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">video</span> <span class="attr">autoplay</span> <span class="attr">muted</span> <span class="attr">loop</span> <span class="attr">src</span>=<span class="string">"videos/dolby_amaze_crf32_gray.mp4"</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>index.css</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.video-container</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">448px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.video-a</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.video-b</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">video</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">448px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/vcs-start-image-compare.png_webp"><img class="image" src="http://blog.codec.wang/vcs-start-image-compare.png" alt=""></picture></p><p>è¿™æ ·æ•ˆæœå°±å‡ºæ¥äº†ï¼Œso easyã€‚ç”±äºè¦æŠŠä¸¤ä¸ªvideoå åŠ åœ¨ä¸€èµ·ï¼Œæ‰€ä»¥çˆ¶å®¹å™¨ç”¨<code>relative</code>å®šä½ï¼Œè§†é¢‘divç”¨<code>absolute</code>å®šä½ã€‚ç„¶åå°†ä¸Šå±‚çš„è§†é¢‘<code>video-a</code>è®¾ç½®å®½åº¦ä¸ºä¸€åŠï¼Œæœ€å…³é”®çš„<code>overflow</code>ä¸º<code>hidden</code>ã€‚</p><h2 id="æ»‘åŠ¨äº¤äº’"><a href="#æ»‘åŠ¨äº¤äº’" class="headerlink" title="æ»‘åŠ¨äº¤äº’"></a>æ»‘åŠ¨äº¤äº’</h2><p>æ¥ä¸‹æ¥å°±æ˜¯æ»‘åŠ¨æ¡çš„å®ç°ï¼Œä»¥åŠæ»‘åŠ¨çš„äº¤äº’äº†ã€‚è¿™éƒ¨åˆ†æˆ‘æš‚æ—¶ä¸å†™ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥ç›´æ¥çœ‹æºç ï¼Œå¤§å®¶â›½ï¸ï¼</p><blockquote><p>ä¿æŒå¯¹æŠ€æœ¯çš„çƒ­çˆ±ï¼</p></blockquote><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="http://codec.wang/vcs" target="_blank" rel="noopener">ç»„ä»¶ä½“éªŒ</a></li><li><a href="https://github.com/ex2tron/Image-Video-Comparsion-Slider" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://blog.codec.wang/dolby_amaze_crf32_color.mp4" target="_blank" rel="noopener">è§†é¢‘ç´ æï¼šæœæ¯”å½©è‰²</a></li><li><a href="http://blog.codec.wang/dolby_amaze_crf32_gray.mp4" target="_blank" rel="noopener">è§†é¢‘ç´ æï¼šæœæ¯”é»‘ç™½</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/overflow" target="_blank" rel="noopener">overflow</a></li><li><a href="https://www.w3schools.com/howto/howto_js_image_comparison.asp" target="_blank" rel="noopener">ImageComparsionSlider</a></li><li><a href="http://www.wufangbo.com/overflow-hidden-shi-xiao/" target="_blank" rel="noopener">css overflow:hiddenä¸ºä»€ä¹ˆä¼šå¤±æ•ˆ</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ¬¢è¿å¤§å®¶ä½“éªŒå¹¶StarğŸ™‚ï¼š&lt;a href=&quot;http://codec.wang/vsc&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://codec.wang/vsc&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å…ˆæ°´ç‚¹èƒŒæ™¯ï¼šç”±äºåœ¨åšè§†é¢‘&amp;amp;å›¾åƒè´¨é‡è¯„æµ‹ç›¸å…³çš„äº‹ï¼Œä¸ºäº†äººçœ¼å¯ä»¥åŒºåˆ†å‰åç®—æ³•çš„æ•ˆæœï¼Œè‡ªç„¶è¦æƒ³ä¸ªåˆç†çš„å±•ç¤ºæ–¹å¼ã€‚ç›®å‰å¸¸è§çš„ä¸‰ç§æ–¹å¼æ˜¯ï¼š
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="å›¾åƒå¯¹æ¯”" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%AF%B9%E6%AF%94/"/>
    
      <category term="è§†é¢‘å¯¹æ¯”" scheme="http://www.codec.wang/tags/%E8%A7%86%E9%A2%91%E5%AF%B9%E6%AF%94/"/>
    
  </entry>
  
  <entry>
    <title>å°ç¨‹åºH5é—®å·å¼€å‘2ï¼šæ¨¡ç‰ˆ&amp;è„šæœ¬</title>
    <link href="http://www.codec.wang/wechat-h5-questionnaire2/"/>
    <id>http://www.codec.wang/wechat-h5-questionnaire2/</id>
    <published>2020-03-20T08:29:15.000Z</published>
    <updated>2020-04-07T03:46:59.406Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šä¸€èŠ‚ä»‹ç»äº†é—®å·å¼€å‘çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œé€šè¿‡ä¸€ä¸ªå°demoèµ°äº†ä¸€éå°ç¨‹åºè°ƒç”¨H5è¿›è¡Œäº¤äº’çš„è¿‡ç¨‹ï¼Œä½†å…¶å®æœ€å¤§çš„å·¥ä½œé‡åœ¨H5ç½‘é¡µçš„åŠ¨æ€ç”Ÿæˆã€‚åŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>åˆ¶å®šJSONé—®å·æ ¼å¼ï¼Œå­˜å‚¨é—®å·é…ç½®</li><li>ç”¨æ¨¡ç‰ˆåº“å¦‚jinja2ï¼Œç¼–å†™HTMLæ¨¡ç‰ˆ</li><li>Pythonè¯»å–JSONé…ç½®ï¼Œå¡«å……æ¨¡ç‰ˆï¼Œç”Ÿæˆæœ€ç»ˆçš„H5ç½‘é¡µ<a id="more"></a></li></ol><ul><li><a href="http://codec.wang/h5-questionnaire" target="_blank" rel="noopener">é—®å·ç½‘é¡µç‰ˆDemoä½“éªŒ</a></li></ul><hr><h2 id="JSONé…ç½®"><a href="#JSONé…ç½®" class="headerlink" title="JSONé…ç½®"></a>JSONé…ç½®</h2><p>è¿™ä¸€å—æ²¡å•¥å¥½è¯´çš„ï¼ŒæŒ‰ç…§éœ€æ±‚å®šä¹‰å¥½å­—æ®µå°±è¡Œï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"qn_id"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"page_title"</span>: <span class="string">"è€ƒæ ¸é—®å·"</span>,</span><br><span class="line">    <span class="attr">"tips"</span>: [</span><br><span class="line">        <span class="string">"è¯·é¢„ç•™30åˆ†é’Ÿå¹¶è‡ªè¡Œå®Œæˆï¼›"</span>,</span><br><span class="line">        <span class="string">"ä¸­é€”é€€å‡ºç»“æœä¸ä¼šç¼“å­˜ï¼Œè¯·ä¸€æ¬¡æ€§ä½œç­”å®Œæ¯•ã€‚"</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"questions"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"question"</span>: <span class="string">"è§‚å¯Ÿå›¾ç‰‡ï¼Œå“ªä¸ªæ›´æ¸…æ™°ï¼Ÿ"</span>,</span><br><span class="line">            <span class="attr">"pic_a"</span>: <span class="string">"http://blog.codec.wang/wechat-h5-questionnaire.jpg_webp"</span>,</span><br><span class="line">            <span class="attr">"pic_b"</span>: <span class="string">"http://blog.codec.wang/wechat-h5-questionnaire.jpg_webp"</span>,</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"radio"</span>,</span><br><span class="line">            <span class="attr">"options"</span>: [<span class="string">"Aæ›´å¥½"</span>, <span class="string">"Bæ›´å¥½"</span>, <span class="string">"æ— æ³•åˆ¤æ–­"</span>],</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ†åˆ«è¡¨ç¤ºï¼šé—®å·IDã€é—®å·æ ‡é¢˜ã€æç¤ºã€é—®é¢˜ã€‚å…¶ä¸­typeè¡¨ç¤ºé—®é¢˜çš„ç±»å‹ï¼Œæœ‰å•é€‰æ¡†radioã€å¤šé€‰æ¡†checkboxå’Œè¾“å…¥æ¡†inputç­‰ã€‚</p><h2 id="æ¨¡ç‰ˆå¼•æ“"><a href="#æ¨¡ç‰ˆå¼•æ“" class="headerlink" title="æ¨¡ç‰ˆå¼•æ“"></a>æ¨¡ç‰ˆå¼•æ“</h2><p>è¦åŠ¨æ€ç”Ÿæˆæ–‡æœ¬æ–‡ä»¶ï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ã€‚ä½†æ˜¾ç„¶è¿™ç§æ–¹å¼å¯¹HTMLè¿™ç§æ ‡è®°è¯­è¨€æ¥è¯´å¤ªä¸ç°å®äº†ï¼Œäºæ˜¯å°±æœ‰äº†æ¨¡ç‰ˆã€‚</p><p>é¦–å…ˆï¼Œç¼–å†™ä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å†…å®¹é™¤äº†å¸¸è§„çš„HTMLæ ‡è®°å¤–ï¼Œä¸»è¦æ˜¯åµŒå…¥äº†ä¸€äº›å˜é‡å’ŒæŒ‡ä»¤ã€‚æˆ‘ä»¬ç§°è¿™ä¸ªæ–‡ä»¶ä¸ºæ¨¡ç‰ˆã€‚ç„¶åæ ¹æ®ä¼ å…¥çš„æ•°æ®æ‰§è¡Œæ›¿æ¢æ“ä½œï¼Œç”Ÿæˆæœ€ç»ˆçš„HTMLæ–‡ä»¶ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/templates-sample.png_webp"><img class="image" src="http://blog.codec.wang/templates-sample.png" alt=""></picture></p><p>ä¸åŒçš„æ¨¡ç‰ˆå¼•æ“çš„è¯­æ³•å’Œæ€§èƒ½æœ‰æ‰€ä¸åŒï¼Œå¸¸ç”¨çš„æœ‰<a href="https://ejs.bootcss.com/" target="_blank" rel="noopener">ejs</a>ã€<a href="https://docs.djangoproject.com/zh-hans/3.0/topics/templates/" target="_blank" rel="noopener">Djangoæ¨¡ç‰ˆ</a>ã€<a href="http://docs.jinkan.org/docs/jinja2/" target="_blank" rel="noopener">jinja2</a>ã€<a href="https://www.makotemplates.org/" target="_blank" rel="noopener">mako</a>ã€<a href="https://genshi.edgewall.org/" target="_blank" rel="noopener">genshi</a>ç­‰ï¼Œå…¶ä¸­jinja2æ˜¯ä¸€ä¸ªä»¿Djangoæ¨¡ç‰ˆçš„æ¨¡ç‰ˆå¼•æ“ï¼Œè½»é‡ç®€å•ï¼Œæˆ‘ç”¨èµ·æ¥ç†Ÿæ‚‰ç‚¹ã€‚</p><p>ç¼–å†™ä¹‹å‰ï¼Œå¯ä»¥å»<a href="http://docs.jinkan.org/docs/jinja2/" target="_blank" rel="noopener">å®˜ç½‘</a>å­¦ä¹ ä¸‹åŸºæœ¬çš„è¯­æ³•ï¼Œå¸¸ç”¨çš„å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­ç­‰éƒ½æ¯”è¾ƒç®€å•ã€‚</p><p>å½“ç„¶æ¨¡ç‰ˆå¼•æ“æ˜¯å¾ˆå¼ºå¤§çš„ï¼Œè¿™é‡Œä¸¾å‡ ä¸ªæˆ‘é‡åˆ°çš„æ“ä½œï¼š</p><ul><li>æ ¼å¼åŒ–å­—ç¬¦ä¸²</li></ul><p>æ¨¡ç‰ˆå¼•æ“ä¸­å¯ä»¥å°†å˜é‡ç»è¿‡æŸç§æ“ä½œè¿›è¡Œä¿®æ”¹ï¼Œè¯¥æ“ä½œç§°ä¹‹ä¸º<a href="http://docs.jinkan.org/docs/jinja2/templates.html#filters" target="_blank" rel="noopener">è¿‡æ»¤å™¨</a>ã€‚jinja2ä¸­æœ‰å¾ˆå¤š<a href="http://docs.jinkan.org/docs/jinja2/templates.html#builtin-filters" target="_blank" rel="noopener">å†…ç½®è¿‡æ»¤å™¨</a>ï¼Œæœ€å¸¸ç”¨çš„å°±æ˜¯æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; "%s. %s"|format(a, b) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœa = 1ï¼Œb = â€˜helloâ€™çš„è¯ï¼Œæœ€ç»ˆç”Ÿæˆå‡ºæ¥å°±æ˜¯ï¼š<code>1. hello</code></p><ul><li>è·å–å¾ªç¯ç´¢å¼•</li></ul><p>å‰é¢å®šä¹‰çš„JSONä¸­ï¼Œé—®å·çš„æç¤ºæ˜¯ä¸ªæ•°ç»„ï¼Œæ¸²æŸ“æ—¶æˆ‘æƒ³åœ¨æ¯ä¸ªæç¤ºå‰é¢åŠ ä¸ªæ ‡å·ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"tips"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>è¯„æµ‹æç¤º<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    &#123;% for tip in data.tips %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; "%s. %s"|format(loop.index, tip) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>loop.index</code>ç´¢å¼•ä»1å¼€å§‹ï¼Œ<code>loop.index0</code>ç´¢å¼•ä»0å¼€å§‹ï¼Œå‚è€ƒï¼š<a href="http://docs.jinkan.org/docs/jinja2/templates.html#id18" target="_blank" rel="noopener">å¾ªç¯For</a></p><ul><li>ä¸¤å±‚å¾ªç¯åµŒå¥—æ—¶çš„å†…å¤–ç´¢å¼•</li></ul><p>é—®å·çš„æ‰€æœ‰é¢˜ç›®æ˜¯ä¸ªæ•°ç»„ï¼Œé¢˜ç›®çš„å•é€‰/å¤šé€‰é€‰é¡¹ä¹Ÿæ˜¯ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥éœ€è¦ä¸¤ä¸ªå¾ªç¯ç”Ÿæˆã€‚æ­¤æ—¶ï¼Œå•é€‰æ¡†çš„idå¯ä»¥é€šè¿‡å†…å¤–ä¸¤ä¸ªç´¢å¼•å…±åŒå”¯ä¸€ç¡®å®šã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;% for item in data.questions %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"question"</span>&gt;</span></span><br><span class="line">    &#123;% if item.type == 'radio' or item.type == 'checkbox' %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        &#123;% set outer_loop = loop %&#125;</span><br><span class="line">        &#123;% for option in item.options %&#125;</span><br><span class="line">        &#123;% set id = '%s-%s'|format(outer_loop.index0, loop.index0) %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"&#123;&#123;id&#125;&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;option&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"&#123;&#123;item.type&#125;&#125;"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123;loop.index0&#125;&#125;"</span> <span class="attr">id</span>=<span class="string">"&#123;&#123;id&#125;&#125;"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"weui-icon-checked"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œåœ¨è¿›å…¥ç¬¬äºŒä¸ªå¾ªç¯ä¹‹å‰ï¼Œä½¿ç”¨äº†<code>set outer_loop = loop</code>ï¼Œç”¨outer_loopè¡¨ç¤ºå¤–éƒ¨å¾ªç¯ã€‚</p><h2 id="Pyè„šæœ¬"><a href="#Pyè„šæœ¬" class="headerlink" title="Pyè„šæœ¬"></a>Pyè„šæœ¬</h2><p>æœ‰äº†æ¨¡ç‰ˆå¼•æ“åï¼Œå°±éœ€è¦ä¸€ä¸ªæ•°æ®æä¾›å’Œæ‰§è¡Œç”Ÿæˆçš„è„šæœ¬ã€‚æœ€ç®€å•çš„å°±æ˜¯Pythonäº†ã€‚</p><ul><li>å®‰è£…æ¨¡ç‰ˆå¼•æ“</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip3 install jinja2</span><br></pre></td></tr></table></figure><ul><li>åŠ è½½æ¨¡ç‰ˆå¹¶ç”Ÿæˆ</li></ul><p>jinja2ä½¿ç”¨Environmentå¯¹è±¡è¡¨ç¤ºä¸€ä¸ªæ¨¡ç‰ˆç¯å¢ƒï¼Œæ¯”å¦‚æ¨¡ç‰ˆ<code>template.html</code>è·Ÿè„šæœ¬æ”¾åœ¨ç»Ÿä¸€ç›®å½•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> jinja2 <span class="keyword">import</span> Environment, FileSystemLoader</span><br><span class="line"></span><br><span class="line">env = Environment(loader=FileSystemLoader(<span class="string">'.'</span>))</span><br><span class="line">template = env.get_template(<span class="string">'template.html'</span>) <span class="comment"># åŠ è½½æ¨¡ç‰ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'index.html'</span>, <span class="string">'w+'</span>) <span class="keyword">as</span> fout:<span class="comment"># ç”Ÿæˆæœ€ç»ˆæ–‡ä»¶</span></span><br><span class="line">  html_content = template.render(title=<span class="string">'ç”Ÿæˆæ¨¡ç‰ˆ'</span>)</span><br><span class="line">  fout.write(html_content)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„æ•°æ®åªæœ‰<code>title</code>ã€‚å½“ç„¶çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œæ•°æ®æ˜¯ä»é—®å·é…ç½®æ–‡ä»¶<code>config.json</code>ä¸­è¯»å–ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'config.json'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> fin:</span><br><span class="line">  data = json.loads(fin.read())</span><br></pre></td></tr></table></figure><h2 id="UIç»„ä»¶"><a href="#UIç»„ä»¶" class="headerlink" title="UIç»„ä»¶"></a>UIç»„ä»¶</h2><p>å› ä¸ºæ˜¯å°ç¨‹åºä¸Šè°ƒç”¨ï¼Œæ‰€ä»¥æ„å»ºä¸€å¥—é€‚ç”¨äºç§»åŠ¨ç«¯çš„UIä¼šå¥½å¾ˆå¤šã€‚è‡ªå·±å†™å¤ªè´¹äº‹ä¹Ÿæ²¡å¿…è¦ï¼Œæ‰¾ä¸€å¥—UIç»„ä»¶å¥—ä¸Šå³å¯ã€‚æˆ‘è¿™é‡Œé€‰æ‹©äº†<a href="https://weui.io/" target="_blank" rel="noopener">WeUI</a>ï¼Œå®ƒæ˜¯å¾®ä¿¡å®˜æ–¹æ¨å‡ºçš„ä¸€å¥—ä¸å¾®ä¿¡åŸç”Ÿè§†è§‰ä½“éªŒä¸€è‡´çš„åŸºç¡€æ ·å¼åº“ï¼Œå®Œç¾ç¬¦åˆéœ€æ±‚ã€‚    </p><ul><li><a href="https://github.com/Tencent/weui/blob/master/README_cn.md" target="_blank" rel="noopener">WeUI Github</a></li></ul><p>åœ¨è‡ªå·±çš„H5é¡µé¢é“¾æ¥<a href="https://github.com/Tencent/weui/wiki" target="_blank" rel="noopener">CSSæ ·å¼æ–‡ä»¶</a>ï¼Œç»„ä»¶ä½¿ç”¨å‚è€ƒå®˜æ–¹Githubçš„<a href="https://github.com/Tencent/weui/tree/master/src/example" target="_blank" rel="noopener">æºç ç¤ºä¾‹</a>å³å¯ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/question-all-types-design.png_webp"><img class="image" src="http://blog.codec.wang/question-all-types-design.png" alt=""></picture></p><h2 id="å‰ç«¯äº¤äº’"><a href="#å‰ç«¯äº¤äº’" class="headerlink" title="å‰ç«¯äº¤äº’"></a>å‰ç«¯äº¤äº’</h2><p>ç½‘é¡µè™½ç„¶æ˜¯ä¸ªé™æ€æ–‡æœ¬ï¼Œä½†è¿˜æ˜¯éœ€è¦åŠ å…¥ä¸€äº›äº¤äº’ä»£ç ï¼Œå¦‚é—®å·é—®é¢˜çš„åˆ‡æ¢ï¼Œç»“æœçš„æäº¤ç­‰ã€‚</p><p>è¿™é‡Œå°±å¾ˆç®€å•ç²—æš´äº†ï¼Œæˆ‘åªä½¿ç”¨äº†åŸç”ŸJavaScriptï¼šé¦–å…ˆç”Ÿæˆæ‰€æœ‰çš„é¢˜ç›®ï¼Œé»˜è®¤å…¨éƒ¨éšè—ã€‚ç‚¹å‡»å¼€å§‹è¯„æµ‹åï¼Œæ˜¾ç¤ºç¬¬ä¸€é“é¢˜ï¼Œç„¶åç‚¹å‡»ä¸‹ä¸€æ­¥çš„æ—¶å€™éšè—ä¸Šä¸€é¢˜åŒæ—¶æ˜¾ç¤ºä¸‹ä¸€é¢˜â€¦â€¦</p><p>æ˜¾ç¤ºå’Œéšè—å¯é€šè¿‡<code>display</code>æˆ–<code>visibility</code>æ¥æ§åˆ¶ï¼Œå¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> tips = <span class="built_in">document</span>.getElementById(<span class="string">'tips'</span>);</span><br><span class="line">tips.style.display = <span class="string">'none'</span>;<span class="comment">// éšè—</span></span><br><span class="line">tips.style.display = <span class="string">'block'</span>;<span class="comment">// æ˜¾ç¤º</span></span><br></pre></td></tr></table></figure><p>å¯¹äºæœ€åçš„ç»“æœæäº¤ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œ</p><ol><li>é‡‡ç”¨ä¸Šä¸€èŠ‚æåˆ°çš„<code>postMessage</code>å°†æ•°æ®å‘é€åˆ°å°ç¨‹åºï¼Œå°ç¨‹åºå†è°ƒç”¨æ¥å£æäº¤</li><li>ç½‘é¡µæœ¬èº«å‘é€HTTPè¯·æ±‚æäº¤ç»“æœï¼Œæäº¤æˆåŠŸåˆ™é€€å‡ºç½‘é¡µï¼Œå¦åˆ™å¼¹å‡ºé”™è¯¯æç¤º</li></ol><p>ä¸¤ç§æ–¹å¼å„æœ‰ä¼˜åŠ£ã€‚ç¬¬ä¸€ç§å¥½å¤„æ˜¯ä¿è¯å°ç¨‹åºæ‰€æœ‰çš„æ¥å£åªæœ‰å°ç¨‹åºæœ¬èº«èƒ½è¯·æ±‚ï¼ŒH5åªèµ·åˆ°è®°å½•ç»“æœçš„ä½œç”¨ã€‚ç¬¬äºŒç§å¥½å¤„æ˜¯åœ¨ç½‘é¡µå†…éƒ¨è¯·æ±‚ï¼Œæ›´é€šç”¨ï¼Œä»¥åç§»æ¤åˆ°å…¶ä»–Webç³»ç»Ÿä¸Šï¼Œä¹Ÿå¾ˆä¾¿æ·ã€‚</p><p>æˆ‘è¿™é‡Œç”¨ç¬¬äºŒç§ï¼Œå…³é”®ä»£ç åœ¨äºHTTPè¯·æ±‚å’Œå¯¼èˆªé€€å‡ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* HTTP POST Demo */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Submit</span>(<span class="params"></span>) </span>&#123;   </span><br><span class="line">    <span class="keyword">const</span> data = &#123;&#125;;</span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">'http://api.test.com/'</span></span><br><span class="line">    <span class="keyword">const</span> httpRequest = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    httpRequest.open(<span class="string">'POST'</span>, url, <span class="literal">true</span>);</span><br><span class="line">    <span class="comment">// è®¾ç½®è¯·æ±‚å¤´</span></span><br><span class="line">    httpRequest.setRequestHeader(<span class="string">"Content-type"</span>, <span class="string">"application/json"</span>);</span><br><span class="line">    httpRequest.send(<span class="built_in">JSON</span>.stringify(data));</span><br><span class="line">  </span><br><span class="line">    httpRequest.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (httpRequest.status === <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(httpRequest.responseText);</span><br><span class="line">            wx.miniProgram.navigateBack();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œè¯„æµ‹ç»“æœdataæ˜¯åœ¨æ¯æ¬¡ç‚¹å‡»ä¸‹ä¸€æ­¥çš„æ—¶å€™è®°å½•çš„ï¼š</p><ul><li>å¯¹äºå•é€‰å’Œå¤šé€‰ï¼Œéå†å½“å‰çš„æ‰€æœ‰inputï¼Œé€‰æ‹©å‹¾é€‰çš„å¹¶è®°å½•</li><li>å¯¹äºè¾“å…¥æ¡†ï¼Œåˆ™ç›´æ¥è®°å½•å½“å‰inputçš„å†…å®¹å³å¯</li></ul><p>è¿™é‡Œå°±ä¸å†™Demoäº†ï¼Œå…·ä½“å¯ä»¥çœ‹æœ¬é¡¹ç›®çš„<a href="https://github.com/ex2tron/BlogCode/blob/master/WeChat-H5-Questionnaire/demo2/h5/js/qn.js" target="_blank" rel="noopener">qn.js</a>æ–‡ä»¶ã€‚</p><hr><p>å¥½äº†ï¼Œåˆ°è¿™é‡Œï¼Œè¿™ä¸ªåŸºç¡€é—®å·ç³»ç»Ÿå°±å·²ç»æˆå‹äº†ã€‚çµæ´»å¯é…ç½®ã€ä¹Ÿå¯ä»¥è·¨å¹³å°ä½¿ç”¨ï¼Œbingoï½</p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://developers.weixin.qq.com/s/cNn5uZmd75f0" target="_blank" rel="noopener">åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆ</a></li><li><a href="https://github.com/ex2tron/BlogCode/tree/master/WeChat-H5-Questionnaire/demo2" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017806952856928" target="_blank" rel="noopener">ä½¿ç”¨æ¨¡æ¿</a></li><li><a href="http://docs.jinkan.org/docs/jinja2/" target="_blank" rel="noopener">jinja2</a></li><li><a href="https://weui.io/" target="_blank" rel="noopener">WeUI</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸Šä¸€èŠ‚ä»‹ç»äº†é—®å·å¼€å‘çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œé€šè¿‡ä¸€ä¸ªå°demoèµ°äº†ä¸€éå°ç¨‹åºè°ƒç”¨H5è¿›è¡Œäº¤äº’çš„è¿‡ç¨‹ï¼Œä½†å…¶å®æœ€å¤§çš„å·¥ä½œé‡åœ¨H5ç½‘é¡µçš„åŠ¨æ€ç”Ÿæˆã€‚åŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ¶å®šJSONé—®å·æ ¼å¼ï¼Œå­˜å‚¨é—®å·é…ç½®&lt;/li&gt;
&lt;li&gt;ç”¨æ¨¡ç‰ˆåº“å¦‚jinja2ï¼Œç¼–å†™HTMLæ¨¡ç‰ˆ&lt;/li&gt;
&lt;li&gt;Pythonè¯»å–JSONé…ç½®ï¼Œå¡«å……æ¨¡ç‰ˆï¼Œç”Ÿæˆæœ€ç»ˆçš„H5ç½‘é¡µ
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="å¾®ä¿¡" scheme="http://www.codec.wang/tags/%E5%BE%AE%E4%BF%A1/"/>
    
      <category term="å°ç¨‹åº" scheme="http://www.codec.wang/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
      <category term="é—®å·" scheme="http://www.codec.wang/tags/%E9%97%AE%E5%8D%B7/"/>
    
      <category term="H5" scheme="http://www.codec.wang/tags/H5/"/>
    
  </entry>
  
  <entry>
    <title>å°ç¨‹åºH5é—®å·å¼€å‘1ï¼šæ–¹æ¡ˆ</title>
    <link href="http://www.codec.wang/wechat-h5-questionnaire/"/>
    <id>http://www.codec.wang/wechat-h5-questionnaire/</id>
    <published>2020-03-19T09:27:08.000Z</published>
    <updated>2020-04-07T03:46:13.524Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨åšä¸ªéœ€æ±‚ï¼šç”¨æˆ·åœ¨ä½¿ç”¨å°ç¨‹åºå‰å…ˆè¦å¡«å†™ä¸€ä¸ªé—®å·ï¼Œä¸‰ä¸ªè¦æ±‚ï¼š</p><ol><li>é—®å·å†…å®¹ä¸ä¼šç»å¸¸å˜åŠ¨ï¼Œä½†éœ€è¦å¯é…</li><li>é—®å·æäº¤ç»“æœæ•°æ®ç›´æ¥è®°å½•ç°æœ‰çš„æ•°æ®åº“ä¸Š</li><li>é¢˜å‹ï¼šå•é€‰/å¤šé€‰/è¾“å…¥æ¡†<a id="more"></a></li></ol><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/h5-questionnaire-sketch-design.png_webp"><img class="image" src="http://blog.codec.wang/h5-questionnaire-sketch-design.png" alt="æœ€ç»ˆUI/UXè®¾è®¡å›¾"></picture></p><ul><li><a href="http://codec.wang/h5-questionnaire" target="_blank" rel="noopener">é—®å·ç½‘é¡µç‰ˆDemoä½“éªŒ</a></li><li><a href="https://developers.weixin.qq.com/s/cNn5uZmd75f0" target="_blank" rel="noopener">åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆ</a></li></ul><hr><p>ä»éœ€æ±‚æ¥çœ‹ï¼Œé—®é¢˜çš„å…³é”®åœ¨äºåç«¯é—®å·æ•°æ®åº“å­˜å‚¨å’Œå‰ç«¯çš„é¡µé¢è®¾è®¡ã€‚</p><p>æ˜¾ç„¶ï¼Œæ•°æ®åº“ææˆå›ºå®šå­—æ®µï¼Œå®åœ¨å¤ªæ‰æ€¥äº†ï¼Œæ€»ä¸èƒ½é…ä¸€æ¬¡é—®å·å°±æ¢ä¸€å¼ è¡¨å§ã€‚æ‰€ä»¥æœ€ç®€å•çš„æ–¹æ¡ˆå°±æ˜¯ç”¨JSONæ•°æ®åº“ï¼Œå¦‚ï¼š</p><table><thead><tr><th>é—®å·ID</th><th>UserID</th><th>Result</th></tr></thead><tbody><tr><td>001</td><td>005</td><td>{1: â€˜wangâ€™, 2: 0, 3: [1, 2] }</td></tr></tbody></table><p>æ¥ä¸‹æ¥ï¼Œå°±æ˜¯é—®å·çš„ç•Œé¢è®¾è®¡ã€‚å…ˆæ¥è¯´ä¸‹æˆ‘è°ƒæŸ¥è¿‡çš„ä¸€äº›æ–¹æ¡ˆã€‚</p><h2 id="æ–¹æ¡ˆè°ƒæŸ¥"><a href="#æ–¹æ¡ˆè°ƒæŸ¥" class="headerlink" title="æ–¹æ¡ˆè°ƒæŸ¥"></a>æ–¹æ¡ˆè°ƒæŸ¥</h2><h3 id="ç¬¬ä¸‰æ–¹é—®å·ç³»ç»Ÿ"><a href="#ç¬¬ä¸‰æ–¹é—®å·ç³»ç»Ÿ" class="headerlink" title="ç¬¬ä¸‰æ–¹é—®å·ç³»ç»Ÿ"></a>ç¬¬ä¸‰æ–¹é—®å·ç³»ç»Ÿ</h3><p>è¿™æ˜¯æˆ‘æœ€å…ˆæƒ³åˆ°çš„ï¼šç›´æ¥ä½¿ç”¨è…¾è®¯é—®å·ä¹‹ç±»çš„ç¬¬ä¸‰æ–¹ç³»ç»Ÿã€‚ç»è¿‡è°ƒæŸ¥ï¼Œå¸¸ç”¨é—®å·ç³»ç»Ÿéƒ½å¯ä»¥ä½¿ç”¨ï¼š</p><ul><li><a href="https://wj.qq.com/article/single-348.html" target="_blank" rel="noopener">å°ç¨‹åºè·³è½¬è…¾è®¯é—®å·æŒ‡å¼•</a></li><li><a href="https://www.wjx.cn/help/help.aspx?helpid=430" target="_blank" rel="noopener">é—®å·æ˜Ÿï¼šåœ¨è‡ªå·±å°ç¨‹åºä¸­æ‰“å¼€é—®å·æˆ–è€ƒè¯•ï¼ˆå°ç¨‹åºè·³è½¬ï¼‰</a></li><li><a href="https://www.wjx.cn/help/help.aspx?helpid=399" target="_blank" rel="noopener">é—®å·æ˜Ÿï¼šåœ¨è‡ªå·±å°ç¨‹åºä¸­æ‰“å¼€é—®å·æˆ–è€ƒè¯•ï¼ˆè·³è½¬H5é¡µé¢ï¼‰</a></li></ul><p>ä¸€èˆ¬æ˜¯è‡ªå·±çš„å°ç¨‹åºè·³è½¬åˆ°ç›¸å…³é—®å·çš„å°ç¨‹åºä¸­ï¼Œæˆ–è€…åƒé—®å·æ˜Ÿä¸€æ ·ï¼Œåœ¨è‡ªå·±çš„å°ç¨‹åºä¸­è°ƒç”¨H5é—®å·ç½‘é¡µã€‚å—¯ï¼Œçœ‹ä¸Šå»ä¸é”™â€¦â€¦</p><p>ç­‰ç­‰ï¼Œæˆ‘ä»¬çš„éœ€æ±‚æ˜¯æäº¤æ—¶ç›´æ¥è®°å½•åœ¨è‡ªå·±çš„æ•°æ®åº“ä¸­ã€‚é‚£ä¹ˆè¿™äº›é—®å·ç³»ç»Ÿæœ‰å¼€æ”¾APIå—ï¼Ÿ</p><p>ç›®å‰è€Œè¨€ï¼Œè…¾è®¯é—®å·å®˜æ–¹æ²¡å¼€æ”¾APIï¼Œé—®å·æ˜Ÿæœ‰ï¼š<a href="https://www.wjx.cn/help/help.aspx?helpid=407" target="_blank" rel="noopener">æ•°æ®æ¨é€API</a></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/wenjuanxing-push-api.png_webp"><img class="image" src="http://blog.codec.wang/wenjuanxing-push-api.png" alt=""></picture></p><p>ä½†ï¼Œå°Šäº«ç‰ˆæœåŠ¡ï¼ŸæŸ¥äº†ä¸‹ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/wenjuanxing-vip-service.png_webp"><img class="image" src="http://blog.codec.wang/wenjuanxing-vip-service.png" alt=""></picture></p><p>å¥½å§ï¼Œå†è§ğŸ‘‹</p><h3 id="å°ç¨‹åºNativeå®ç°"><a href="#å°ç¨‹åºNativeå®ç°" class="headerlink" title="å°ç¨‹åºNativeå®ç°"></a>å°ç¨‹åºNativeå®ç°</h3><p>å¦‚æœç”¨å°ç¨‹åºç»„ä»¶åŸç”Ÿå®ç°ï¼Œéœ€æ±‚åŸºæœ¬æ˜¯å¯ä»¥æ»¡è¶³çš„ï¼Œä½†å¼€å‘é‡æ¯”è¾ƒå¤§ä¸”é™åˆ¶æ¯”è¾ƒå¤šã€‚æµç¨‹ä¸Šï¼šé¦–å…ˆåç«¯éœ€è¦è®¾è®¡è·å–é—®å·çš„æ¥å£ï¼Œå°ç¨‹åºè®¿é—®æ­¤æ¥å£ï¼Œå¾—åˆ°æ‰€æœ‰çš„é¢˜ç›®å’Œé¢˜å‹ï¼Œç„¶ååŠ¨æ€ç”ŸæˆUIã€‚ç›¸å½“äºå¼€å‘ä¸€ä¸ªç®€å•çš„é—®å·ç³»ç»Ÿäº†ï¼Œä¸”è¿™ç§æ–¹å¼ç”Ÿæˆçš„ç•Œé¢ä¹Ÿåªèƒ½åœ¨å°ç¨‹åºä¸Šç”¨ã€‚</p><h2 id="è‡ªå»ºH5æ–¹æ¡ˆ"><a href="#è‡ªå»ºH5æ–¹æ¡ˆ" class="headerlink" title="è‡ªå»ºH5æ–¹æ¡ˆ"></a>è‡ªå»ºH5æ–¹æ¡ˆ</h2><p>è‡ªå»ºH5çš„è¯æ²¡æœ‰é—®å·ç³»ç»Ÿé‚£ä¹ˆå¤æ‚ï¼Œä¹Ÿèƒ½ä¿è¯è¶³å¤Ÿçš„çµæ´»åº¦ã€‚æ‰€ä»¥è¿˜æ˜¯è‡ªå·±åŠ¨æ‰‹ï¼Œä¸°è¡£è¶³é£Ÿå•Šï¼Œæ–¹æ¡ˆå¦‚ä¸‹ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/custom-h5-design.jpg_webp"><img class="image" src="http://blog.codec.wang/custom-h5-design.jpg" alt=""></picture></p><ul><li>è™½ç„¶é—®å·å†…å®¹è¦æ±‚å¯é…ï¼Œä½†å› ä¸ºä¸ç»å¸¸æ”¹åŠ¨ï¼Œæ‰€ä»¥ä¸ç”¨åšé…ç½®ç•Œé¢ï¼Œæ”¹åŠ¨æ—¶ç”¨è„šæœ¬ç”Ÿæˆå³å¯</li><li>H5ç½‘é¡µæ˜¯è‡ªå·±ç¼–å†™çš„ï¼Œä¸”éƒ¨ç½²åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œè‡ªç„¶å¯ä»¥ç›´æ¥ç”¨è‡ªå·±çš„API</li><li>æœ€åå°ç¨‹åºç›´æ¥è°ƒç”¨H5è¿›è¡Œäº¤äº’å³å¯</li></ul><p>è¿™ç§æ–¹å¼åç«¯åªéœ€è¦è®¾è®¡ä¸€ä¸ªæ¥å£ï¼Œå³æäº¤é—®å·ç»“æœçš„æ¥å£ã€‚å› ä¸ºæ˜¯ç½‘é¡µï¼Œæ‰€ä»¥ä¹Ÿä¸ä»…é™äºå°ç¨‹åºä½¿ç”¨ï¼Œä»»ä½•æµè§ˆå™¨ä¸Šéƒ½å¯ä»¥ä½¿ç”¨ï¼Œå¤§å¤§æå‡çµæ´»æ€§ã€‚é‚£ä¹ˆå¼€å‘é‡ä¸»è¦é›†ä¸­åœ¨ï¼š</p><ol><li>HTMLæ¨¡ç‰ˆå’ŒH5è„šæœ¬ç¼–å†™</li><li>å°ç¨‹åºä¸H5äº¤äº’ï¼ˆé‰´æƒã€æ•°æ®äº¤äº’å’Œé¡µé¢è·³è½¬ï¼‰</li></ol><h3 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h3><p>ä¸ºä¾¿äºç†è§£å’Œèµ°é€šæ–¹æ¡ˆæµç¨‹ï¼Œé¦–å…ˆç¼–å†™ä¸€ä¸ªç®€å•çš„index.htmlï¼Œåœ¨å°ç¨‹åºä¸Šæ˜¾ç¤ºå¹¶äº¤äº’ï¼š<a href="https://github.com/ex2tron/BlogCode/tree/master/WeChat-H5-Questionnaire/demo1" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ç”¨çš„ç¼–è¾‘å™¨æ˜¯VSCodeï¼Œä½¿ç”¨<a href="https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer" target="_blank" rel="noopener">Live Server</a>æ’ä»¶å¯ä»¥å¿«é€Ÿå¯åŠ¨ä¸€ä¸ªæœ¬åœ°WebæœåŠ¡ï¼š<a href="http://127.0.0.1:5500/index.html" target="_blank" rel="noopener">http://127.0.0.1:5500/index.html</a></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/vscode-live-server.png_webp"><img class="image" src="http://blog.codec.wang/vscode-live-server.png" alt=""></picture></p><h3 id="å°ç¨‹åºweb-view"><a href="#å°ç¨‹åºweb-view" class="headerlink" title="å°ç¨‹åºweb-view"></a>å°ç¨‹åºweb-view</h3><p>å°ç¨‹åºæ‰¿è½½ç½‘é¡µçš„å®¹å™¨æ˜¯<a href="https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html" target="_blank" rel="noopener">web-view</a>ç»„ä»¶ï¼Œç»„ä»¶æœ¬èº«å¾ˆç®€å•ï¼ŒsrcæŒ‡å®šè¦è·³è½¬çš„ç½‘é¡µåœ°å€å³å¯ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/wechat-web-view-src.jpg_webp"><img class="image" src="http://blog.codec.wang/wechat-web-view-src.jpg" alt=""></picture></p><p>å¥½ï¼Œèµ¶ç´§è·³è½¬ä¸ªç™¾åº¦çœ‹çœ‹ğŸ™ƒâ€¦â€¦Noï¼Œä¸è¡Œï¼Œè‡ªå®šä¹‰ç½‘é¡µçš„åŸŸåéœ€è¦åœ¨å°ç¨‹åº<a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener">ç®¡ç†åå°é…ç½®</a></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/wechat-business-domain.jpg_webp"><img class="image" src="http://blog.codec.wang/wechat-business-domain.jpg" alt=""></picture></p><p>ä¸è¿‡ä¸ºå¼€å‘æ–¹ä¾¿ï¼Œæœ¬åœ°å¼€å‘æ—¶å‹¾é€‰<strong>ä¸æ ¡éªŒåˆæ³•åŸŸåã€web-viewï¼ˆä¸šåŠ¡åŸŸåï¼‰ã€TLSç‰ˆæœ¬ä»¥åŠHTTPSè¯ä¹¦</strong>ã€‚è¿™æ ·å°±ä¸ä¼šæ ¡éªŒï¼Œå¯ä»¥éšä¾¿è·³è½¬ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/donot-check-https-domain.png_webp"><img class="image" src="http://blog.codec.wang/donot-check-https-domain.png" alt=""></picture></p><h3 id="å°ç¨‹åºä¸H5äº¤äº’"><a href="#å°ç¨‹åºä¸H5äº¤äº’" class="headerlink" title="å°ç¨‹åºä¸H5äº¤äº’"></a>å°ç¨‹åºä¸H5äº¤äº’</h3><ul><li>å°ç¨‹åºä¼ å‚ç»™H5ç½‘é¡µ</li></ul><p>è¿™ä¸ªå¾ˆç®€å•ï¼Œå‚æ•°æ‹¼æ¥åœ¨åœ°å€ä¸Šå°±è¡Œã€‚å¦‚å°†å°ç¨‹åºçš„ç™»é™†ä¿¡æ¯å’Œç”¨æˆ·ä¿¡æ¯ä¼ é€’ç»™H5ï¼Œç›¸å½“äºç»™ç½‘é¡µé‰´æƒï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-view</span> <span class="attr">src</span>=<span class="string">"http://127.0.0.1:5500/index.html?userid=xxx&amp;cookie=xxx/"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-view</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>H5ä¼ å‚åŠå¯¼èˆªåˆ°å°ç¨‹åº</li></ul><p>é¦–å…ˆåœ¨H5é¡µé¢å¼•å…¥å¾®ä¿¡JSSDKæ‰å¯ä»¥ä½¿ç”¨å°ç¨‹åºç›¸å…³æ¥å£ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span></span></span><br><span class="line"><span class="tag"><span class="attr">src</span>=<span class="string">"https://res.wx.qq.com/open/js/jweixin-1.3.2.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åç½‘é¡µå¯ä»¥é€šè¿‡<code>wx.miniProgram.postMessage()</code> æ¥å£å‘é€ä¿¡æ¯ï¼Œæœ€åweb-viewç»„ä»¶è®¾ç½®<code>bindmessage</code>äº‹ä»¶æ¥æ”¶æ•°æ®ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/web-view-bindmessage-limit.png_webp"><img class="image" src="http://blog.codec.wang/web-view-bindmessage-limit.png" alt=""></picture></p><p>ä½†è¿™é‡Œæœ‰ä¸ªå‘ï¼šè¿™ä¸ªæ¶ˆæ¯åªæœ‰åœ¨ç‰¹å®šæ—¶æœºæ‰èƒ½æ”¶åˆ°ï¼Œå¦‚å°ç¨‹åºåé€€ã€ç»„ä»¶é”€æ¯ã€åˆ†äº«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåœ¨ç½‘é¡µä¸­åªä½¿ç”¨<code>wx.miniProgram.postMessage()</code>æ¥å£å‘é€æ¶ˆæ¯ï¼Œä½†æ²¡æœ‰è°ƒç”¨å°ç¨‹åºåé€€/åˆ†äº«ç­‰æ¥å£çš„è¯ï¼Œå°ç¨‹åºæ˜¯æ”¶ä¸åˆ°æ¶ˆæ¯çš„ï¼Œä¸¾ä¾‹ï¼š</p><p>æˆ‘åœ¨ç½‘é¡µä¸­åŠ äº†ä¸€ä¸ªæŒ‰é’®ï¼Œç”¨æ¥å‘å°ç¨‹åºå‘é€æ¶ˆæ¯ï¼š</p><ul><li>H5ä»£ç ï¼š</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"SendMsg()"</span>&gt;</span>Click Me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/qn.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://res.wx.qq.com/open/js/jweixin-1.3.2.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>H5 JSä»£ç ï¼š</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SendMsg</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸‹é¢è¿™å¥è¯è§¦å‘å°ç¨‹åºåé€€äº‹ä»¶</span></span><br><span class="line">    <span class="comment">// è¿™å¥è¯ä¸åŠ ï¼Œåˆ™åé¢ä¸¤å¥å‘é€çš„æ¶ˆæ¯å°ç¨‹åºæ¥æ”¶ä¸åˆ°</span></span><br><span class="line">    wx.miniProgram.navigateBack();</span><br><span class="line">  </span><br><span class="line">    wx.miniProgram.postMessage(&#123; <span class="attr">data</span>: <span class="string">'tencent'</span> &#125;);</span><br><span class="line">    wx.miniProgram.postMessage(&#123; <span class="attr">data</span>: &#123;<span class="attr">name</span>: <span class="string">'wang'</span>&#125; &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‘é€æ¶ˆæ¯çš„æ•°æ®ç»“æ„å¿…é¡»åœ¨dataä¸­ï¼Œå¦åˆ™å°ç¨‹åºæ¥æ”¶ä¸åˆ°ã€‚</p><p>ç„¶ååœ¨å°ç¨‹åºä¸­æ¥æ”¶æ¶ˆæ¯ï¼Œæ¥æ”¶åˆ°çš„æ•°æ®ä»¥æ•°ç»„å½¢å¼è®°å½•ï¼š</p><ul><li>å°ç¨‹åºwxmlä»£ç ï¼š</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-view</span> <span class="attr">src</span>=<span class="string">"http://127.0.0.1:5501/"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">bindmessage</span>=<span class="string">"handleMsg"</span>&gt;</span><span class="tag">&lt;/<span class="name">web-view</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å°ç¨‹åºjsä»£ç ï¼š</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">handleMsg: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"message: "</span>, e.detail.data);</span><br><span class="line">  <span class="comment">// message:  ['tencent', &#123;name: "wang"&#125;]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¯å¢ƒåˆ¤æ–­"><a href="#ç¯å¢ƒåˆ¤æ–­" class="headerlink" title="ç¯å¢ƒåˆ¤æ–­"></a>ç¯å¢ƒåˆ¤æ–­</h3><p>H5è¿˜å¯ä»¥ä½¿ç”¨æ›´å¤šçš„å°ç¨‹åºæ¥å£ï¼Œå…·ä½“è¯·å‚è€ƒï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html" target="_blank" rel="noopener">web-view</a></p><p>æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ä¸ªæ˜¯åˆ¤æ–­å½“å‰æ˜¯å¦æ˜¯å°ç¨‹åºç¯å¢ƒçš„æ¥å£<code>getEnv()</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wx.miniProgram.getEnv(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123; <span class="built_in">console</span>.log(res) &#125;);</span><br><span class="line"><span class="comment">// &#123;miniprogram: true&#125;</span></span><br></pre></td></tr></table></figure><p>ä¸è¿‡å®é™…ä¸­ï¼ŒåŒºåˆ†ç¯å¢ƒæœ€å¥½çš„å®è·µæ–¹å¼æ˜¯é€šè¿‡URLå‚æ•°æ¥åŒºåˆ†ã€‚</p><h3 id="H5é¡µé¢è°ƒè¯•"><a href="#H5é¡µé¢è°ƒè¯•" class="headerlink" title="H5é¡µé¢è°ƒè¯•"></a>H5é¡µé¢è°ƒè¯•</h3><p>åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸Šï¼Œè·³è½¬H5ç½‘é¡µåï¼Œå¯ä»¥åœ¨ä»»æ„åœ°æ–¹å³é”®ï¼Œæ‰“å¼€ç½‘é¡µè°ƒè¯•é¢æ¿ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/wechat-devtools-h5-debug.png_webp"><img class="image" src="http://blog.codec.wang/wechat-devtools-h5-debug.png" alt=""></picture></p><p>è¿™æ ·ä½¿ç”¨<code>debugger</code>æˆ–<code>console.log()</code>ä¹‹ç±»çš„è°ƒè¯•æ–¹æ³•å°±å¾ˆæ–¹ä¾¿ã€‚</p><p>åœ¨çœŸæœºä¸Šï¼Œç›®å‰æ²¡æœ‰æ¯”è¾ƒå¥½çš„æ–¹æ³•ï¼Œæ¯”è¾ƒç²—æš´çš„å°±æ˜¯alert()å¤§æ³•äº†ã€‚</p><p>Okayï¼Œæœ¬æ–‡ä¸»è¦åˆ†äº«äº†æˆ‘è¿™ä¸¤å¤©åšå°ç¨‹åºH5é—®å·æ—¶ä¸€äº›æ–¹æ¡ˆï¼Œä¸‹ä¸€èŠ‚å¼€å§‹Coding H5ä»£ç ã€‚</p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://developers.weixin.qq.com/s/zTlHfZmw7nfD" target="_blank" rel="noopener">åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆ</a></li><li><a href="https://github.com/ex2tron/BlogCode/tree/master/WeChat-H5-Questionnaire/demo1" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html" target="_blank" rel="noopener">å°ç¨‹åºweb-viewç»„ä»¶</a></li><li><a href="https://imweb.io/topic/5c0aa26f611a25cc7bf1d7ea" target="_blank" rel="noopener">å¾®ä¿¡å°ç¨‹åº web-view å¼€å‘è¸©å‘å¤§å…¨</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘åœ¨åšä¸ªéœ€æ±‚ï¼šç”¨æˆ·åœ¨ä½¿ç”¨å°ç¨‹åºå‰å…ˆè¦å¡«å†™ä¸€ä¸ªé—®å·ï¼Œä¸‰ä¸ªè¦æ±‚ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é—®å·å†…å®¹ä¸ä¼šç»å¸¸å˜åŠ¨ï¼Œä½†éœ€è¦å¯é…&lt;/li&gt;
&lt;li&gt;é—®å·æäº¤ç»“æœæ•°æ®ç›´æ¥è®°å½•ç°æœ‰çš„æ•°æ®åº“ä¸Š&lt;/li&gt;
&lt;li&gt;é¢˜å‹ï¼šå•é€‰/å¤šé€‰/è¾“å…¥æ¡†
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="å¾®ä¿¡" scheme="http://www.codec.wang/tags/%E5%BE%AE%E4%BF%A1/"/>
    
      <category term="å°ç¨‹åº" scheme="http://www.codec.wang/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
      <category term="é—®å·" scheme="http://www.codec.wang/tags/%E9%97%AE%E5%8D%B7/"/>
    
      <category term="H5" scheme="http://www.codec.wang/tags/H5/"/>
    
  </entry>
  
  <entry>
    <title>MightyPyï¼š(l/r)stripå‡½æ•°çš„å·¨å‘</title>
    <link href="http://www.codec.wang/mighty-py-strip/"/>
    <id>http://www.codec.wang/mighty-py-strip/</id>
    <published>2019-06-30T14:26:41.000Z</published>
    <updated>2020-04-07T03:43:57.760Z</updated>
    
    <content type="html"><![CDATA[<p>å…ˆæ¥çŒœä¸‹Pythonä¸­è¿™å¥è¯çš„è¾“å‡ºæ˜¯å•¥<a id="more"></a>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>filename = <span class="string">"journey_p4.mp4"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>filename.rstrip(<span class="string">".mp4"</span>)</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆæ˜¯ï¼š<code>journey_</code>ï¼Œé‚£<code>p4</code>å»å“ªäº†å‘¢ï¼Ÿæ€ä¹ˆæ ·ï¼Œæœ‰å…´è¶£çœ‹ä¸‹å»äº†å—ï¼Ÿâ†“</p><blockquote><p><em>I Am Iron Man.</em>  â€”â€”<a href="https://movie.douban.com/subject/1432146/" target="_blank" rel="noopener">ã€Šé’¢é“ä¾ ã€‹</a><br><em>æˆ‘å°±æ˜¯é’¢é“ä¾ ã€‚</em>â€”â€”<a href="https://movie.douban.com/subject/1432146/" target="_blank" rel="noopener">ã€ŠIron Manã€‹</a></p><p><strong>å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼š<a href="http://moviequotes.ex2tron.wang/" target="_blank" rel="noopener">MovieQuotes</a></strong></p></blockquote><hr><h2 id="strip-å‡½æ•°"><a href="#strip-å‡½æ•°" class="headerlink" title="strip()å‡½æ•°"></a>strip()å‡½æ•°</h2><p>Pythonä¸­å¸¸ç”¨<code>strip()</code>ä»å­—ç¬¦ä¸²çš„å¼€å¤´å’Œç»“å°¾ç§»é™¤æŒ‡å®šçš„å­—ç¬¦ï¼Œä¸æŒ‡å®šå‚æ•°çš„è¯ï¼Œé»˜è®¤ç§»é™¤çš„æ˜¯ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ç­‰ã€‚åŒæ ·<code>lstrip()</code>å’Œ<code>rstrip()</code>åˆ†åˆ«è¡¨ç¤ºå•ç‹¬ä»å¼€å¤´ã€ç»“å°¾ç§»é™¤æŒ‡å®šçš„å­—ç¬¦ã€‚</p><ul><li>å‡½æ•°åŸå‹ï¼š<a href="https://docs.python.org/3/library/stdtypes.html?highlight=strip#str.strip" target="_blank" rel="noopener">str.strip([chars])</a>ã€<a href="https://docs.python.org/3/library/stdtypes.html?highlight=lstrip#str.lstrip" target="_blank" rel="noopener">str.lstrip([chars])</a>ã€<a href="https://docs.python.org/3/library/stdtypes.html?highlight=rstrip#str.rstrip" target="_blank" rel="noopener">str.rstrip([chars])</a></li></ul><p>ä½†å¾ˆå¤šäººå¹¶ä¸çœŸæ­£äº†è§£å‡½æ•°ç”¨æ³•ï¼Œèƒ¡ä¹±ä½¿ç”¨å°±ä¼šå¯¼è‡´å¼€å¤´çš„é‚£ç§é—®é¢˜ï¼ŒåŒ…æ‹¬ä¹‹å‰çš„æˆ‘( â•¯â–¡â•° )ã€‚</p><h2 id="å¡«å‘"><a href="#å¡«å‘" class="headerlink" title="å¡«å‘"></a>å¡«å‘</h2><p>å…¶å®<a href="https://docs.python.org/3/library/stdtypes.html?highlight=strip#str.strip" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a>ä¸Šå†™çš„å¾ˆæ¸…æ¥šå¹¶ä¸¾äº†å‡ ä¸ªä¾‹å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The chars argument <span class="keyword">is</span> <span class="keyword">not</span> a prefix <span class="keyword">or</span> suffix; rather, all combinations of its values are stripped.</span><br></pre></td></tr></table></figure><p>ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼š</p><blockquote><p>stripå‡½æ•°çš„å‚æ•°å¹¶ä¸æ˜¯æŒ‡å‰ç¼€æˆ–åç¼€ï¼Œè€Œæ˜¯æ‰€æœ‰å…¶ç»„åˆå€¼éƒ½ä¼šè¢«åˆ é™¤æ‰ï¼</p></blockquote><p>å•¥æ„æ€å‘¢ï¼Ÿä»¥å¼€å¤´é—®é¢˜ä¸ºä¾‹ï¼Œè™½ç„¶æˆ‘ä»¬æŒ‡å®šäº†ä»å°¾éƒ¨åˆ é™¤<code>.mp4</code>è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œä½†å®ƒå¹¶ä¸ä¼šè€è€å®å®åªåˆ é™¤<code>.mp4</code>ï¼Œè€Œæ˜¯åŒ…å«<code>.mp4</code>æ‰€ä»¥ç»„åˆå€¼çš„å­—ç¬¦ä¸²éƒ½ä¼šè¢«åˆ é™¤ï¼Œæ¯”å¦‚æœ«å°¾åŒ…å«äº†<code>m/pm/mp/4p/p4/pm4</code>ç­‰ç­‰éƒ½ä¼šè¢«åˆ é™¤ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>filename = <span class="string">"journey_p4mmp.mp4"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>filename.rstrip(<span class="string">".mp4"</span>)</span><br><span class="line">journey_</span><br></pre></td></tr></table></figure><p>å†æ¥çœ‹äº›å®˜æ–¹çš„ä¾‹å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'www.example.com'</span>.strip(<span class="string">'cmowz.'</span>)</span><br><span class="line">example</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>comment_string = <span class="string">'#....... Section 3.2.1 Issue #32 .......'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>comment_string.strip(<span class="string">'.#! '</span>)</span><br><span class="line">Section <span class="number">3.2</span><span class="number">.1</span> Issue <span class="comment">#32</span></span><br></pre></td></tr></table></figure><p><code>strip()</code>å‡½æ•°ä¼šä»å¼€å¤´å’Œç»“å°¾å¼€å§‹æ£€ç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸æ»¡è¶³è¦æ±‚çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºæ­¢ã€‚æ‰€ä»¥ä¸Šé¢çš„ä¾‹å­ä»ç»“å°¾æ£€ç´¢æ—¶ï¼Œé‡åˆ°2ä¸æ»¡è¶³è¦æ±‚å°±ç»“æŸäº†ã€‚</p><p>ç»¼ä¸Šï¼Œ<code>strip()/lstrip()/rstrip()</code>è¦æ…ç”¨å™¢ã€‚</p><h3 id="å»æ‰©å±•å"><a href="#å»æ‰©å±•å" class="headerlink" title="å»æ‰©å±•å"></a>å»æ‰©å±•å</h3><p>p.s.å¼€å¤´é‚£ç§å»æ‰©å±•åå…¶å®æœ‰å¾ˆå¤šå®ç°æ–¹å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>filename = <span class="string">"journey_p4.mp4"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>filename.split(<span class="string">"."</span>)[<span class="number">0</span>]</span><br><span class="line">journey_p4</span><br></pre></td></tr></table></figure><p>æˆ–è€…ç”¨osæ¨¡å—ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.splitext(filename)</span><br><span class="line">(<span class="string">'journey_p4'</span>, <span class="string">'.mp4'</span>)</span><br></pre></td></tr></table></figure><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://docs.python.org/3/library/stdtypes.html?highlight=strip#str.strip" target="_blank" rel="noopener">str.strip([chars])</a></li><li><a href="https://docs.python.org/3/library/stdtypes.html?highlight=lstrip#str.lstrip" target="_blank" rel="noopener">str.lstrip([chars])</a></li><li><a href="https://docs.python.org/3/library/stdtypes.html?highlight=rstrip#str.rstrip" target="_blank" rel="noopener">str.rstrip([chars])</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…ˆæ¥çŒœä¸‹Pythonä¸­è¿™å¥è¯çš„è¾“å‡ºæ˜¯å•¥
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="strip" scheme="http://www.codec.wang/tags/strip/"/>
    
      <category term="lstrip" scheme="http://www.codec.wang/tags/lstrip/"/>
    
      <category term="rstrip" scheme="http://www.codec.wang/tags/rstrip/"/>
    
  </entry>
  
  <entry>
    <title>MightyPyï¼šå¤„ç†å‘½ä»¤è¡Œå‚æ•°å’Œé€‰é¡¹çš„å‡ ç§æ–¹å¼</title>
    <link href="http://www.codec.wang/mighty-py-command-line-arguments/"/>
    <id>http://www.codec.wang/mighty-py-command-line-arguments/</id>
    <published>2019-05-03T02:30:18.000Z</published>
    <updated>2020-04-07T03:44:47.855Z</updated>
    
    <content type="html"><![CDATA[<p>è®¾è®¡Pythonæ¨¡å—åŠŸèƒ½æ—¶ï¼Œå‘½ä»¤è¡Œå‚æ•°æ˜¯ä¸€ä¸ªéå¸¸çµæ´»ä¸”ä¾¿æ·çš„æ–¹æ³•ï¼š<strong>ä»å¤–éƒ¨è·å–é…ç½®å‚é‡ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹ä»£ç </strong>ã€‚Pythonå†…ç½®å‡ ç§å‘½ä»¤è¡Œå‚æ•°å’Œé€‰é¡¹çš„å¤„ç†æ–¹å¼ï¼Œå½“ç„¶ä¹Ÿæœ‰æ›´åŠ å¼ºå¤§çš„ç¬¬ä¸‰æ–¹çš„æ¨¡å—ï¼Œå¦‚ï¼š<a href="https://click.palletsprojects.com/en/7.x/" target="_blank" rel="noopener">click</a>ã€‚<a id="more"></a></p><p>ä¸€èˆ¬æ¥è¯´å†…ç½®å°±å¤Ÿç”¨äº†ï¼Œæ‰€ä»¥æœ¬èŠ‚ä¸»è¦çœ‹ä¸‹å†…ç½®çš„ä¸‰ç§æ–¹å¼ã€‚</p><blockquote><p><em>Louis, I think this is the beginning of a beautiful friendship.</em>  â€”â€”<a href="https://movie.douban.com/subject/1296753/" target="_blank" rel="noopener">ã€ŠCasablancaã€‹</a><br><em>è·¯æ˜“ï¼Œæˆ‘æƒ³è¿™æ˜¯ç¾å¥½å‹è°Šçš„å¼€å§‹ã€‚</em>â€”â€”<a href="https://movie.douban.com/subject/1296753/" target="_blank" rel="noopener">ã€Šå¡è¨å¸ƒå…°å¡ã€‹</a></p><p><strong>å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼š<a href="http://moviequotes.ex2tron.wang/" target="_blank" rel="noopener">MovieQuotes</a></strong></p></blockquote><hr><h2 id="sys-argv"><a href="#sys-argv" class="headerlink" title="sys.argv"></a>sys.argv</h2><p>è¿™æ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§æ–¹å¼ï¼Œå‘½ä»¤è¡Œä¼ å…¥çš„å‚æ•°å…¨éƒ¨å­˜å‚¨åœ¨sys.argv(argument values)è¿™ä¸ªåˆ—è¡¨ä¸­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">print(type(sys.argv)) <span class="comment"># list</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒPythonåé¢è·Ÿçš„ç¬¬ä¸€ä¸ªæ–‡æœ¬æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥ä¸€èˆ¬<strong>è„šæœ¬åæ˜¯ç¬¬ä¸€ä¸ªå‚æ•°</strong>ã€‚å¦‚ä¸‹é¢è„šæœ¬åä¸º<code>using_sys_argv.py</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"å‚æ•°ä¸ªæ•°ï¼š\t%s"</span>%len(sys.argv))</span><br><span class="line">print(<span class="string">'è„šæœ¬åï¼š\t%s'</span>%sys.argv[<span class="number">0</span>])</span><br><span class="line">print(<span class="string">'å‚æ•°åˆ—è¡¨ï¼š'</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len(sys.argv)):</span><br><span class="line">    print(<span class="string">'\t\tå‚æ•°%s: %s'</span>%(i,sys.argv[i]))</span><br></pre></td></tr></table></figure><ul><li>è¿è¡Œ<code>python using_sys_argv.py</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å‚æ•°ä¸ªæ•°ï¼š      1</span><br><span class="line">è„šæœ¬åï¼š        using_sys_argv.py</span><br><span class="line">å‚æ•°åˆ—è¡¨ï¼š</span><br></pre></td></tr></table></figure><ul><li>è¿è¡Œ<code>python using_sys_argv.py tencent wang</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å‚æ•°ä¸ªæ•°ï¼š      3</span><br><span class="line">è„šæœ¬åï¼š        using_sys_argv.py</span><br><span class="line">å‚æ•°åˆ—è¡¨ï¼š</span><br><span class="line">                å‚æ•°1: tencent</span><br><span class="line">                å‚æ•°2: wang</span><br></pre></td></tr></table></figure><p><strong>è¿™ç§æ–¹å¼è™½ç„¶å¾ˆç®€å•ï¼Œä½†ä¸èƒ½å¾ˆå¥½åœ°è¯†åˆ«å‘½ä»¤è¡Œé€‰é¡¹</strong>ï¼Œéœ€è¦è‡ªå·±å†™é¢å¤–ä»£ç ï¼Œå¦‚ï¼š</p><ul><li>è¿è¡Œ<code>python using_sys_argv.py -c tencent --name wang</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å‚æ•°ä¸ªæ•°ï¼š      5</span><br><span class="line">è„šæœ¬åï¼š        using_sys_argv.py</span><br><span class="line">å‚æ•°åˆ—è¡¨ï¼š</span><br><span class="line">                å‚æ•°1: -c</span><br><span class="line">                å‚æ•°2: tencent</span><br><span class="line">                å‚æ•°3: --name</span><br><span class="line">                å‚æ•°4: wang</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šï¼Œsys.argvç»Ÿä¸€è¯†åˆ«æˆäº†å‚æ•°é‡ã€‚</p><h2 id="argparse"><a href="#argparse" class="headerlink" title="argparse"></a>argparse</h2><p>argparseæ˜¯Pythonå†…ç½®çš„æ¨¡å—ï¼Œå®ƒä¼šä»sys.argvä¸­æ­£ç¡®<strong>è§£æå‡ºå‘½ä»¤è¡Œé€‰é¡¹å’Œå‚æ•°ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå¸®åŠ©å’Œä½¿ç”¨ä¿¡æ¯</strong>ã€‚</p><h3 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h3><p>argparseä½¿ç”¨åŸºæœ¬æ˜¯ä¸‰ä¸ªæ­¥éª¤ï¼š</p><ul><li>åˆ›å»º<code>ArgumentParser()</code>è§£æå™¨å¯¹è±¡</li><li>ä½¿ç”¨<code>add_argument()</code>æ·»åŠ å‚æ•°</li><li>ä½¿ç”¨<code>parse_args()</code>è§£æå‚æ•°</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.å®šä¹‰è§£æå™¨</span></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line"><span class="comment"># 2.æ·»åŠ å‚æ•°</span></span><br><span class="line">parser.add_argument(<span class="string">'integer'</span>,type=int,help=<span class="string">'base number x'</span>)</span><br><span class="line"><span class="comment"># 3.è§£æå‚æ•°</span></span><br><span class="line">args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">print(args.integer)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å°±æ˜¯argparseçš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼Œè¿è¡Œä¸‹çœ‹çœ‹æ•ˆæœï¼š</p><ul><li>ç›´æ¥è¿è¡Œ<code>python using_argparse.py</code>ï¼Œä¼šæŠ¥é”™ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">usage: using_argparse.py [-h] <span class="built_in">integer</span></span><br><span class="line">using_argparse.py: error: the following arguments are required: <span class="built_in">integer</span></span><br></pre></td></tr></table></figure><p>æç¤ºé€šè¿‡<code>-h</code>è·å–å¸®åŠ©ï¼Œå¹¶ä¸”<code>integer</code>è¿™ä¸ªå‚æ•°æ˜¯å¿…é¡»çš„ã€‚</p><ul><li>è¿è¡Œ<code>python using_argparse.py -h</code>ï¼Œæ˜¾ç¤ºå¸®åŠ©æ–‡æ¡£ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">usage: using_argparse.py [-h] <span class="built_in">integer</span></span><br><span class="line"></span><br><span class="line">positional arguments:</span><br><span class="line">  <span class="built_in">integer</span>     base number x</span><br><span class="line"></span><br><span class="line">optional arguments:</span><br><span class="line">  -h, --<span class="built_in">help</span>  show this <span class="built_in">help</span> message and <span class="built_in">exit</span></span><br></pre></td></tr></table></figure><ul><li>è¿è¡Œ<code>python using_argparse.py 100</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">100</span><br></pre></td></tr></table></figure><h3 id="å¯é€‰å‚æ•°"><a href="#å¯é€‰å‚æ•°" class="headerlink" title="å¯é€‰å‚æ•°"></a>å¯é€‰å‚æ•°</h3><p>å¹³å¸¸ä½¿ç”¨æœ€å¤šçš„åº”è¯¥æ˜¯æ·»åŠ çŸ­é€‰é¡¹<code>-</code>æˆ–é•¿é€‰é¡¹<code>--</code>çš„å¯é€‰å‚æ•°ï¼Œæ¯”å¦‚è¦è®¡ç®—ä¸€ä¸ªæ•°çš„næ¬¡æ–¹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.å®šä¹‰è§£æå™¨</span></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line"><span class="comment"># 2.æ·»åŠ ä½ç½®å‚æ•°</span></span><br><span class="line">parser.add_argument(<span class="string">'integer'</span>,type=int,help=<span class="string">'base number x'</span>)</span><br><span class="line"><span class="comment"># æ·»åŠ å¯é€‰å‚æ•°</span></span><br><span class="line">parser.add_argument(<span class="string">'--powern'</span>,type=int,help=<span class="string">'n power of a number'</span>)</span><br><span class="line"><span class="comment"># 3.è§£æå‚æ•°</span></span><br><span class="line">args = parser.parse_args()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> args.powern: <span class="comment"># åˆ¤æ–­å¯é€‰å‚æ•°</span></span><br><span class="line">    print(args.integer**args.powern)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(args.integer)</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä¸åŠ <code>--powern</code>çš„è¿è¡Œç»“æœè·Ÿä¹‹å‰ä¸€æ ·ï¼Œæ·»åŠ åï¼Œä¼šè®¡ç®—x^nï¼š</p><ul><li>è¿è¡Œ<code>python using_argparse.py 100 --powern 2</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10000</span><br></pre></td></tr></table></figure><h3 id="æ›´å¤šç”¨æ³•"><a href="#æ›´å¤šç”¨æ³•" class="headerlink" title="æ›´å¤šç”¨æ³•"></a>æ›´å¤šç”¨æ³•</h3><p>è™½è¯´ä¸»è¦é€šè¿‡ä¸‰ä¸ªæ–¹æ³•å®ç°ï¼Œä½†æ–¹æ³•çš„å‚æ•°å¾ˆå¤šï¼Œæˆ‘ä»¬æŒ‘å‡ ä¸ªå¸¸ç”¨çš„è¯´ä¸‹ï¼Œæ›´å¤šè¯·å‚è€ƒ<a href="#æ¥å£æ–‡æ¡£">æ¥å£æ–‡æ¡£</a>ã€‚</p><ul><li><strong>ArgumentParser()</strong></li></ul><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/depth_python_argparse_argumentparser_method.jpg_webp"><img class="image" src="http://blog.codec.wang/depth_python_argparse_argumentparser_method.jpg" alt=""></picture></p><p>å…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯<code>description</code>é¡¹ï¼Œåœ¨è„šæœ¬å¸®åŠ©æ–‡æ¡£ä¸­èµ·è¯´æ˜ä½œç”¨ï¼Œå¦‚å‰é¢ä»£ç æ›´æ”¹ä¸ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parser = argparse.ArgumentParser(description=<span class="string">'Basic Operations of an Integer.'</span>)</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶è¿è¡Œ<code>python using_argparse.py -h</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">usage: using_argparse.py [-h] [--powern POWERN] <span class="built_in">integer</span></span><br><span class="line"></span><br><span class="line">Basic Operations of an Integer.</span><br><span class="line"></span><br><span class="line">positional arguments:</span><br><span class="line">â€¦â€¦</span><br></pre></td></tr></table></figure><ul><li><strong>add_argument()</strong></li></ul><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/depth_python_argparse_add_argument_method.jpg_webp"><img class="image" src="http://blog.codec.wang/depth_python_argparse_add_argument_method.jpg" alt=""></picture></p><p>å…¶ä¸­å‚é‡ç±»å‹<code>type</code>å’Œå¸®åŠ©ä¿¡æ¯<code>help</code>ä¸ç”¨å¤šè®²ï¼Œå…¶ä»–å‡ ä¸ªå¸¸ç”¨çš„è¯´æ˜ä¸€ä¸‹ï¼š</p><ol><li><code>name of flags</code>ï¼Œæƒ³è®©è„šæœ¬åŒä¸€ä¸ªå¯é€‰å‚æ•°æ—¢æ”¯æŒçŸ­é€‰é¡¹<code>-</code>åˆæ”¯æŒé•¿é€‰é¡¹<code>--</code>ï¼Œå¯ä»¥ï¼š</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(<span class="string">'--foo'</span>,<span class="string">'-f'</span>)</span><br><span class="line">args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">print(args.foo) <span class="comment"># æ³¨æ„ä¸æ˜¯args.få™¢ï¼</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„è¯ï¼Œè¿è¡Œæ—¶<code>python script.py -f param</code>æˆ–<code>python script.py --foo param</code>éƒ½å¯ä»¥ã€‚</p><p>2.<code>nargs</code>ï¼Œè¦è¯»å–çš„å‘½ä»¤è¡Œå‚æ•°ä¸ªæ•°</p><ul><li><code>nargs=n</code>ï¼Œè¡¨ç¤ºè¦è¯»å–nä¸ªå‚æ•°ï¼Œå¦‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(<span class="string">'--foo'</span>,<span class="string">'-f'</span>,nargs=<span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>è¿è¡Œæ—¶éœ€è¦åœ¨<code>-f</code>ååŠ ä¸¤ä¸ªå‚æ•°ï¼š<code>python script.py -f p1 p2</code></p><ul><li><code>nargs=&#39;*&#39;/&#39;+&#39;</code>ï¼Œå°†æ‰€æœ‰å‚æ•°åˆåœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼ˆ<code>*</code>å·å’Œ<code>+</code>å·çš„åŒºåˆ«ï¼š<code>+</code>å·éœ€è‡³å°‘1ä¸ªå‚æ•°ï¼‰ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(<span class="string">'--foo'</span>,<span class="string">'-f'</span>,nargs=<span class="string">'+'</span>)</span><br></pre></td></tr></table></figure><p>è¿è¡Œ<code>python script.py -f p1 p2 p3</code>ç»“æœä¸ºï¼š<code>foo=[&#39;p1&#39;, &#39;p2&#39;, &#39;p3&#39;]</code></p><ul><li><code>nargs=&#39;?&#39;</code>ï¼Œå‚æ•°æ²¡æä¾›æ—¶ï¼Œä½¿ç”¨é»˜è®¤å€¼ï¼ˆå¯é€‰å‚æ•°æ˜¯constï¼Œä½ç½®å‚æ•°æ˜¯defaultï¼‰ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(<span class="string">'--foo'</span>,<span class="string">'-f'</span>,nargs=<span class="string">'?'</span>,const=<span class="string">'param'</span>)</span><br><span class="line">parser.add_argument(<span class="string">'integer'</span>,nargs=<span class="string">'?'</span>,default=<span class="string">'0'</span>)</span><br></pre></td></tr></table></figure><p>è¿è¡Œ<code>python script.py -f</code>ï¼Œç»“æœä¸ºï¼š<code>foo=&#39;param&#39;,integer=&#39;0&#39;</code></p><p>3.<code>required</code>ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œargparseä¼šæŠŠ<code>-</code>å’Œ<code>--</code>çš„å‚æ•°ä½œä¸ºå¯é€‰çš„ï¼Œå¦‚æœéœ€è¦æŒ‡å®šæˆå¿…é¡»çš„è¯ï¼Œå¯ä»¥å°†requiredè®¾ç½®ä¸ºTrueï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(<span class="string">'--foo'</span>,<span class="string">'-f'</span>,required=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>è¿è¡Œ<code>python script.py</code>ä¼šæç¤ºï¼š<code>error: the following arguments are required: --foo/-f</code></p><p>4.<code>choices</code>ï¼Œé™å®šå‚æ•°å€¼çš„èŒƒå›´ï¼Œå¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(<span class="string">'--foo'</span>,<span class="string">'-f'</span>,choices=[<span class="string">'p1'</span>,<span class="string">'p2'</span>,<span class="string">'p3'</span>])</span><br></pre></td></tr></table></figure><p>è¿è¡Œ<code>python scipt.py -f param</code>ä¼šæç¤ºï¼š<code>error: argument --foo/-f: invalid choice: &#39;param&#39; (choose from &#39;p1&#39;, &#39;p2&#39;, &#39;p3&#39;)</code></p><ul><li><strong>parse_args()</strong></li></ul><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/depth_python_argparse_parse_args_method.jpg_webp"><img class="image" src="http://blog.codec.wang/depth_python_argparse_parse_args_method.jpg" alt=""></picture></p><p>è¿™ä¸ªæ–¹æ³•æ²¡å•¥å¥½è®²çš„ï¼Œä¸»è¦æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°argsï¼Œé»˜è®¤æ˜¯ä»sys.argvå–å€¼ï¼Œè°ƒè¯•æ—¶ä¹Ÿå¯ä»¥æŠŠå‘½ä»¤è¡Œå‚æ•°åŠ ä¸Šå»ï¼Œè¿™æ ·å°±ä¸ç”¨åœ¨å‘½ä»¤è¡Œä¸­è®¾ç½®äº†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(<span class="string">'--foo'</span>,<span class="string">'-f'</span>,choices=[<span class="string">'p1'</span>,<span class="string">'p2'</span>,<span class="string">'p3'</span>])</span><br><span class="line">parser.add_argument(<span class="string">'integer'</span>,nargs=<span class="string">'?'</span>,default=<span class="string">'0'</span>)</span><br><span class="line"><span class="comment"># ç›´æ¥åœ¨ä»£ç ä¸­ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°</span></span><br><span class="line">args = parser.parse_args([<span class="string">'100'</span>,<span class="string">'-f'</span>,<span class="string">'p1'</span>])</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œåœ¨ç¼–è¾‘å™¨ä¸­ç›´æ¥è¿è¡Œæˆ–åœ¨å‘½ä»¤è¡Œä¸­ä¸åŠ å‚æ•°è¿è¡Œï¼š<code>python scipt.py</code>éƒ½èƒ½å¾—åˆ°æ­£ç¡®ç»“æœï¼š<code>integer=&#39;100&#39;,foo=&#39;p1&#39;</code></p><h2 id="getopt"><a href="#getopt" class="headerlink" title="getopt"></a>getopt</h2><p>Pythonè¿˜æœ‰ä¸€ä¸ªgetoptæ¨¡å—ï¼Œå®ƒçš„è®¾è®¡ä¸Cè¯­è¨€ä¸­çš„getoptç±»ä¼¼ã€‚Pythonå®˜æ–¹å»ºè®®æ˜¯ä½ å¦‚æœä¸ç†Ÿæ‚‰Cä¸­çš„getoptæˆ–è€…æƒ³å†™æ›´å°‘çš„ä»£ç çš„è¯ï¼Œæ›´æ¨èç”¨argparseï¼Œæ‰€ä»¥ä¸å†è¯¦è¿°ï¼Œæ„Ÿå…´è¶£å¯å‚è€ƒ<a href="#æ¥å£æ–‡æ¡£">æ¥å£æ–‡æ¡£</a>ï¼š</p><blockquote><p>Note: The <a href="https://docs.python.org/3/library/getopt.html#module-getopt" target="_blank" rel="noopener"><code>getopt</code></a> module is a parser for command line options whose API is designed to be familiar to users of the C <code>getopt()</code> function. Users who are unfamiliar with the C <code>getopt()</code> function or who would like to write less code and get better help and error messages should consider using the <a href="https://docs.python.org/3/library/argparse.html#module-argparse" target="_blank" rel="noopener"><code>argparse</code></a> module instead.</p></blockquote><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.python.org/3/library/sys.html" target="_blank" rel="noopener">Python sys</a></li><li><a href="https://docs.python.org/zh-cn/3/library/argparse.html" target="_blank" rel="noopener">Python argparse</a></li><li><a href="https://docs.python.org/3/library/getopt.html" target="_blank" rel="noopener">Python getopt</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è®¾è®¡Pythonæ¨¡å—åŠŸèƒ½æ—¶ï¼Œå‘½ä»¤è¡Œå‚æ•°æ˜¯ä¸€ä¸ªéå¸¸çµæ´»ä¸”ä¾¿æ·çš„æ–¹æ³•ï¼š&lt;strong&gt;ä»å¤–éƒ¨è·å–é…ç½®å‚é‡ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹ä»£ç &lt;/strong&gt;ã€‚Pythonå†…ç½®å‡ ç§å‘½ä»¤è¡Œå‚æ•°å’Œé€‰é¡¹çš„å¤„ç†æ–¹å¼ï¼Œå½“ç„¶ä¹Ÿæœ‰æ›´åŠ å¼ºå¤§çš„ç¬¬ä¸‰æ–¹çš„æ¨¡å—ï¼Œå¦‚ï¼š&lt;a href=&quot;https://click.palletsprojects.com/en/7.x/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;click&lt;/a&gt;ã€‚
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="argv" scheme="http://www.codec.wang/tags/argv/"/>
    
      <category term="å‘½ä»¤è¡Œå‚æ•°" scheme="http://www.codec.wang/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0/"/>
    
  </entry>
  
  <entry>
    <title>ã€æ ‘è“æ´¾ã€‘å˜èº«å…¨èƒ½æ— çº¿è·¯ç”±å™¨(2/2B)</title>
    <link href="http://www.codec.wang/raspberrypi-as-router/"/>
    <id>http://www.codec.wang/raspberrypi-as-router/</id>
    <published>2019-04-03T03:16:34.000Z</published>
    <updated>2020-04-07T08:21:44.688Z</updated>
    
    <content type="html"><![CDATA[<p>æ ‘è“æ´¾èƒ½åšçš„äº‹æƒ…å®åœ¨æ˜¯å¤ªå¤šäº†ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥æŠŠå®ƒæ”¹é€ æˆä¸€å°å…¨èƒ½çš„æ— çº¿è·¯ç”±å™¨ã€‚è¦çŸ¥é“æ ‘è“æ´¾çš„Socæ€§èƒ½å¯æ¯”å»‰ä»·è·¯ç”±å™¨é«˜å‡ºä¸å°‘ã€‚<a id="more"></a></p><blockquote><p><em>äººåœ¨é¡ºå¢ƒæ—¶å€™çš„å‹è°Šï¼Œå¯èƒ½ä¸æ˜¯é‚£ä¹ˆåšå›ºçš„ã€‚</em>  â€”â€”<a href="https://movie.douban.com/subject/30163509/" target="_blank" rel="noopener">ã€Šé£é©°äººç”Ÿã€‹</a></p><p><strong>å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼š<a href="http://moviequotes.ex2tron.wang/" target="_blank" rel="noopener">MovieQuotes</a></strong></p></blockquote><hr><h2 id="ç¡¬ä»¶-è½¯ä»¶ç‰ˆæœ¬è¯´æ˜"><a href="#ç¡¬ä»¶-è½¯ä»¶ç‰ˆæœ¬è¯´æ˜" class="headerlink" title="ç¡¬ä»¶/è½¯ä»¶ç‰ˆæœ¬è¯´æ˜"></a>ç¡¬ä»¶/è½¯ä»¶ç‰ˆæœ¬è¯´æ˜</h2><p>æˆ‘ä¸€å¼€å§‹æ˜¯ç”¨3B+çš„ï¼Œä½†å®˜æ–¹çš„å›ºä»¶çƒ§å†™åä¸æ–­é‡å¯ï¼Œæœ‰é—®é¢˜ï¼Œç½‘ä¸Šå¾ˆå¤šäººä¹Ÿé‡åˆ°ã€‚è™½ç„¶é€šè¿‡çƒ§å†™å¼€å‘ç‰ˆå›ºä»¶è§£å†³äº†ï¼Œä½†æœ¬æ–‡è¿˜æ˜¯å…ˆä»¥å®˜æ–¹å›ºä»¶ä¸ºä¸»ï¼Œåç»­å†å†™ç¯‡3B+çš„ã€‚</p><ul><li>æ ‘è“æ´¾ 2B</li><li>OSï¼šOpenWrt 18.06.2 </li><li>TFå¡ï¼šé—ªè¿ªSanDisk 16GB C10</li><li>USBæ— çº¿ç½‘å¡ï¼šEDUP EP-N8508GS</li></ul><h2 id="WANã€LANã€WLANåŒºåˆ«"><a href="#WANã€LANã€WLANåŒºåˆ«" class="headerlink" title="WANã€LANã€WLANåŒºåˆ«"></a>WANã€LANã€WLANåŒºåˆ«</h2><p>åœ¨å¼€å¹²ä¹‹å‰ï¼Œæœ‰å‡ ä¸ªå°æ¦‚å¿µè¿˜æ˜¯è¦äº†è§£ä¸€ä¸‹ï¼š</p><ul><li><a href="https://baike.baidu.com/item/LAN" target="_blank" rel="noopener">LAN</a>ï¼š<code>Local Area Network</code>å±€åŸŸç½‘</li><li><a href="https://baike.baidu.com/item/wan" target="_blank" rel="noopener">WAN</a>ï¼š<code>Wide Area Network</code>å¹¿åŸŸç½‘</li><li><a href="https://baike.baidu.com/item/wlan" target="_blank" rel="noopener">WLAN</a>ï¼š<code>Wireless Local Area Networks</code>æ— çº¿å±€åŸŸç½‘</li></ul><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_as_router_understand_wan_lan_wlan.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_as_router_understand_wan_lan_wlan.jpg" alt=""></picture></p><p>ç®€å•æ¥è¯´ï¼ŒLANå°±æ˜¯ç”¨æ¥ç»„å»ºæœ‰çº¿å±€åŸŸç½‘ï¼Œè€ŒWLANæ˜¯ç”¨æ¥ç»„å»ºæ— çº¿å±€åŸŸç½‘çš„ã€‚è¦ä½¿å±€åŸŸç½‘å†…çš„è®¾å¤‡è®¿é—®å¤–ç½‘ï¼Œå°±éœ€è¦WANå£æ¥å…¥ç½‘ç»œè¿è¥å•†æˆ–è€…ä¸Šå±‚ç½‘ç»œã€‚æ„Ÿå…´è¶£çš„å¯å‚è€ƒ<a href="#å¼•ç”¨">å¼•ç”¨</a>ã€‚</p><h2 id="å®‰è£…é…ç½®OpenWrt"><a href="#å®‰è£…é…ç½®OpenWrt" class="headerlink" title="å®‰è£…é…ç½®OpenWrt"></a>å®‰è£…é…ç½®OpenWrt</h2><p>OpenWrtå®˜ç½‘æä¾›äº†æ ‘è“æ´¾ç³»åˆ—çš„ç›¸å…³èµ„æ–™å’Œæœ€æ–°å›ºä»¶ä¸‹è½½ï¼š</p><ul><li><a href="https://openwrt.org/toh/raspberry_pi_foundation/raspberry_pi" target="_blank" rel="noopener">https://openwrt.org/toh/raspberry_pi_foundation/raspberry_pi</a></li></ul><table><thead><tr><th>å‹å·</th><th>SoC</th><th>CPU MHz</th><th>WLAN Hardware</th></tr></thead><tbody><tr><td>Raspberry Pi 2B</td><td>Broadcom BCM2836</td><td>900</td><td>æ— </td></tr></tbody></table><p>é¦–å…ˆæ˜ç¡®ä¸‹æˆ‘ä»¬è¦åšçš„äº‹æƒ…ï¼šå°†æ ‘è“æ´¾çš„æœ‰çº¿ç½‘å£ä½œä¸ºæ–°è·¯ç”±å™¨çš„WANå£ï¼Œç”±äº2/2Bä¸å¸¦æ— çº¿ç½‘å¡ï¼Œæ‰€ä»¥å°†USBæ— çº¿ç½‘å¡ä½œä¸ºWLANäº§ç”ŸWIFIã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_as_router_purpose.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_as_router_purpose.jpg" alt=""></picture></p><h3 id="ä¸‹è½½å›ºä»¶"><a href="#ä¸‹è½½å›ºä»¶" class="headerlink" title="ä¸‹è½½å›ºä»¶"></a>ä¸‹è½½å›ºä»¶</h3><p>å®‰è£…å›ºä»¶å’Œå‡çº§å›ºä»¶ä»»æ„ä¸‹è½½ä¸€ä¸ªå³å¯ï¼š</p><ul><li>å®‰è£…å›ºä»¶ï¼š<a href="http://downloads.openwrt.org/releases/18.06.2/targets/brcm2708/bcm2709/openwrt-18.06.2-brcm2708-bcm2709-rpi-2-ext4-factory.img.gz" target="_blank" rel="noopener">openwrt-18.06.2-brcm2708-bcm2709-rpi-2-ext4-factory.img.gz</a></li><li>å‡çº§å›ºä»¶ï¼š<a href="http://downloads.openwrt.org/releases/18.06.2/targets/brcm2708/bcm2709/openwrt-18.06.2-brcm2708-bcm2709-rpi-2-ext4-sysupgrade.img.gz" target="_blank" rel="noopener">openwrt-18.06.2-brcm2708-bcm2709-rpi-2-ext4-sysupgrade.img.gz</a></li></ul><h3 id="å›ºä»¶çƒ§å†™"><a href="#å›ºä»¶çƒ§å†™" class="headerlink" title="å›ºä»¶çƒ§å†™"></a>å›ºä»¶çƒ§å†™</h3><p>Windowsç³»ç»Ÿçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨<a href="https://sourceforge.net/projects/win32diskimager/" target="_blank" rel="noopener">Win32DiskImager</a>æˆ–<a href="https://www.balena.io/etcher/" target="_blank" rel="noopener">Etcher</a>ï¼Œæ“ä½œéƒ½å¾ˆç®€å•ï¼Œé€‰æ‹©å›ºä»¶å’ŒTFå¡ï¼Œç‚¹å‡»çƒ§å†™å°±å¯ä»¥äº†ã€‚åè€…çš„é¢œå€¼æ›´é«˜ä¸€äº›ï¼Œæˆ‘å–œæ¬¢(â—Ë‡âˆ€Ë‡â—)</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_as_router_etcher.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_as_router_etcher.jpg" alt=""></picture></p><h3 id="è¿›å…¥ç³»ç»Ÿ"><a href="#è¿›å…¥ç³»ç»Ÿ" class="headerlink" title="è¿›å…¥ç³»ç»Ÿ"></a>è¿›å…¥ç³»ç»Ÿ</h3><p>ç°åœ¨è·Ÿç©ä¼ ç»Ÿæ ‘è“æ´¾ä¸€æ ·ï¼Œæ¥ä¸Šç”µæºã€æ˜¾ç¤ºå±å’Œé”®ç›˜åï¼Œæ­£å¸¸å¼€æœºï¼Œéƒ½æ˜¯ç»ˆç«¯ç•Œé¢ï¼Œä¸éœ€è¦é¼ æ ‡ã€‚</p><p>å¯åŠ¨åï¼Œæ ¹æ®æç¤ºï¼ŒæŒ‰ä¸‹å›è½¦ï¼Œå°±å¯ä»¥è¿›å…¥ç»ˆç«¯ç•Œé¢ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Please press Enter to activate this console.</span><br><span class="line"></span><br><span class="line"> _______                     ________        __      </span><br><span class="line"> |       |.-----.-----.-----.|  |  |  |.----.|  |_    </span><br><span class="line"> |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|   </span><br><span class="line"> |_______||   __|_____|__|__||________||__|  |____|   </span><br><span class="line">          |__| W I R E L E S S   F R E E D O M        </span><br><span class="line"> -----------------------------------------------------</span><br><span class="line"> OpenWrt 18.06.2, r7676-cddd7b4c77                   </span><br><span class="line"> -----------------------------------------------------</span><br><span class="line">=== WARNING! =====================================    </span><br><span class="line">There is no root password defined on this device!     </span><br><span class="line">Use the "passwd" command to set up a new password     </span><br><span class="line">in order to prevent unauthorized SSH logins.          </span><br><span class="line">--------------------------------------------------    </span><br><span class="line">root@OpenWrt:~#</span><br></pre></td></tr></table></figure><h3 id="è¿›å…¥è·¯ç”±å™¨åå°"><a href="#è¿›å…¥è·¯ç”±å™¨åå°" class="headerlink" title="è¿›å…¥è·¯ç”±å™¨åå°"></a>è¿›å…¥è·¯ç”±å™¨åå°</h3><p>è¿›å…¥åå°æœ‰å¤šç§æ–¹å¼ï¼Œæˆ‘å½’çº³ä¸ºä¸¤ç§ï¼šç½‘çº¿ç›´è¿çš„æ–¹å¼å’Œç»ˆç«¯æ“ä½œçš„æ–¹å¼ã€‚æ¨èç»ˆç«¯æ“ä½œï¼Œè™½ç„¶çœ‹ä¸Šå»å¤æ‚äº†ç‚¹ï¼Œä½†å…¶å®æ›´å¿«æ·ã€‚</p><h4 id="æ–¹æ³•1ï¼šç½‘çº¿ç›´è¿"><a href="#æ–¹æ³•1ï¼šç½‘çº¿ç›´è¿" class="headerlink" title="æ–¹æ³•1ï¼šç½‘çº¿ç›´è¿"></a>æ–¹æ³•1ï¼šç½‘çº¿ç›´è¿</h4><p>å°†ç½‘çº¿çš„ä¸€ç«¯æ’å…¥æ ‘è“æ´¾ï¼Œå¦ä¸€ç«¯æ’å…¥ç”µè„‘ï¼Œæ–­å¼€ç”µè„‘çš„å…¶ä»–æœ‰çº¿æˆ–æ— çº¿è¿æ¥ã€‚å¾…ç½‘ç»œæˆåŠŸè¯†åˆ«åï¼Œæµè§ˆå™¨ä¸­è®¿é—®<code>192.168.1.1</code>ä¾¿å¯è¿›å…¥åå°ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_as_router_direct_connect.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_as_router_direct_connect.jpg" alt=""></picture></p><p>é»˜è®¤æ²¡æœ‰å¯†ç ç›´æ¥ç™»å½•ï¼Œè¿›å…¥ä¹‹åï¼Œéœ€è¦è®©æ ‘è“æ´¾è¿æ¥åˆ°å·²æœ‰çš„ç½‘ç»œä¸­ï¼šç‚¹å‡» â€˜Networkâ€™ - â€˜Interfaceâ€™ - â€˜Add new interfaceâ€™ï¼Œè¿™é‡Œæˆ‘è®©æ ‘è“æ´¾æ¥å…¥å®¶é‡Œè·¯ç”±å™¨LANå£åˆ†å‡ºçš„æœ‰çº¿ç½‘ç»œï¼Œæ‰€ä»¥åè®®é€‰æ‹© â€˜DHCP clientâ€™ï¼Œç‚¹å‡» â€˜Submitâ€™æäº¤ã€‚</p><p>å¦‚æœä½ æ‰“ç®—å°†æ ‘è“æ´¾æ¥å…¥ç½‘ç»œè¿è¥å•†è®¾å¤‡ï¼Œå¯èƒ½éœ€è¦è¾“å…¥å®½å¸¦è´¦å·å¯†ç ï¼Œåè®®é€‰æ‹©â€™PPPoEâ€™ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_as_router_add_wan_interface.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_as_router_add_wan_interface.jpg" alt=""></picture></p><p>ç‚¹å‡»â€™Submitâ€™æäº¤ä¹‹åå†ç‚¹å‡»â€™Save &amp; Applyâ€™ï¼Œä¼šå¼¹å‡º30sçš„é…ç½®åº”ç”¨æ—¶é—´ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_as_router_configure_waiting_time.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_as_router_configure_waiting_time.jpg" alt=""></picture></p><p>æ­¤æ—¶æ‹”æ‰æ ‘è“æ´¾ä¸ç”µè„‘çš„ç›´è¿ç½‘çº¿ï¼Œæ’å…¥æœ‰çº¿ç½‘ã€‚ç¼–è¾‘<code>/etc/config/network</code>ç½‘ç»œé…ç½®æ–‡ä»¶ï¼Œå°†lané…ç½®çš„ifnameä¸€è¡Œæ³¨é‡Šæ‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/config/network</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">config interface 'lan'</span><br><span class="line">        option type 'bridge'</span><br><span class="line"><span class="meta">#</span><span class="bash">       option ifname <span class="string">'eth0'</span></span></span><br><span class="line">        option proto 'static'</span><br><span class="line">        option ipaddr '192.168.1.1'</span><br><span class="line">        option netmask '255.255.255.0'</span><br><span class="line">        option ip6assign '60'</span><br></pre></td></tr></table></figure><p>ç”¨<code>ifconfig</code>æŸ¥çœ‹æ ‘è“æ´¾çš„IPåœ°å€ï¼Œå¦‚<code>192.168.1.112</code>ï¼Œåœ¨å±€åŸŸç½‘å†…çš„å…¶ä»–è®¾å¤‡ä¸Šè®¿é—®æ­¤IPå°±å¯ä»¥è¿›å…¥æ ‘è“æ´¾çš„è·¯ç”±å™¨åå°ã€‚</p><h4 id="æ–¹æ³•2ï¼šç»ˆç«¯æ“ä½œ"><a href="#æ–¹æ³•2ï¼šç»ˆç«¯æ“ä½œ" class="headerlink" title="æ–¹æ³•2ï¼šç»ˆç«¯æ“ä½œ"></a>æ–¹æ³•2ï¼šç»ˆç«¯æ“ä½œ</h4><p>å…¶å®æ–¹æ³•1æœ¬èº«å°±æ˜¯æ›´æ”¹<code>/etc/config/network</code>æ–‡ä»¶ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ç¼–è¾‘ï¼Œæ·»åŠ ä¸€ä¸ªå¹¿åŸŸç½‘wanå£é…ç½®ï¼Œå¹¶å°†lançš„ifnameä¸€è¡Œæ³¨é‡Šæ‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/config/network</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">config interface 'lan'</span><br><span class="line">        option type 'bridge'</span><br><span class="line"><span class="meta">#</span><span class="bash">       option ifname <span class="string">'eth0'</span></span></span><br><span class="line">        option proto 'static'</span><br><span class="line">        option ipaddr '192.168.1.1'</span><br><span class="line">        option netmask '255.255.255.0'</span><br><span class="line">        option ip6assign '60'</span><br><span class="line"></span><br><span class="line">config interface 'wan'</span><br><span class="line">        option proto 'dhcp'</span><br><span class="line">        option ifname 'eth0'</span><br></pre></td></tr></table></figure><p>å¦‚æœæ ‘è“æ´¾æ¥çš„æ˜¯å®¶é‡Œè·¯ç”±å™¨LANå£å‡ºæ¥çš„ç½‘çº¿ï¼Œä¸€èˆ¬é…ç½®æˆDHCPåè®®å°±å¯ä»¥äº†ã€‚å¦‚æœæ˜¯ç›´æ¥ä»ç½‘ç»œè¿è¥å•†è®¾å¤‡å‡ºæ¥çš„ç½‘çº¿ï¼Œåˆ™å¯èƒ½éœ€è¦è¾“å…¥å®½å¸¦è´¦å·å¯†ç ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">config interface 'wan'</span><br><span class="line">        option proto 'pppoe'</span><br><span class="line">        option ifname 'eth0'</span><br><span class="line">        option username 'xxxxxx'</span><br><span class="line">        option password 'xxxxxx'</span><br></pre></td></tr></table></figure><p>æ·»åŠ å®Œä¹‹åï¼Œä½¿ç”¨<code>/etc/init.d/network restart</code>é‡å¯ç½‘ç»œæœåŠ¡ï¼Œä½¿ç”¨ifconfigæŸ¥çœ‹ipåœ°å€ï¼šå¦‚<code>192.168.1.112</code>ï¼Œç„¶ååœ¨å±€åŸŸç½‘å†…çš„å…¶ä»–è®¾å¤‡ä¸Šè¾“å…¥æ­¤IPä¾¿å¯ä»¥è®¿é—®OpenWrt çš„åå°äº†ã€‚</p><p>å¦‚æœè®¿é—®æœ‰é—®é¢˜ï¼Œå¯ä»¥å…³é—­é˜²ç«å¢™è¯•ä¸‹ï¼š<code>/etc/init.d/firewall stop</code></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_as_router_terminal_configure.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_as_router_terminal_configure.jpg" alt=""></picture></p><p>ä¸è®ºä½¿ç”¨å“ªç§æ–¹æ³•ï¼Œè¿›å…¥ä¹‹åï¼Œé»˜è®¤éƒ½æ˜¯æ²¡æœ‰å¯†ç çš„ã€‚ä¸ºå®‰å…¨èµ·è§ï¼Œè¿™é‡Œå…ˆè®¾ç½®ä¸ªå¯†ç ï¼Œç‚¹å‡» â€˜Go to password configurationâ€¦â€™ï¼Œè¾“å…¥å¯†ç åï¼Œç›´æ¥ç‚¹å‡» â€˜Save &amp; Applyâ€™ï¼Œå…¶ä»–ä¸ç”¨ç®¡ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_as_router_change_password.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_as_router_change_password.jpg" alt=""></picture></p><h3 id="æ›´æ¢æº"><a href="#æ›´æ¢æº" class="headerlink" title="æ›´æ¢æº"></a>æ›´æ¢æº</h3><p>æ ‘è“æ´¾æˆåŠŸè”ç½‘åï¼Œéœ€è¦ä¸‹è½½ä¸€äº›æ’ä»¶ã€‚ä¸€æ–¹é¢å®˜æ–¹çš„æºäº²æµ‹æ˜¯ä¸åŒ…å«USBç½‘å¡é©±åŠ¨å’Œä¸­æ–‡æ’ä»¶çš„ï¼Œä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼Œå¦ä¸€æ–¹é¢å›½å†…çš„æºé€Ÿåº¦ä¼šå¿«å¾ˆå¤šï¼Œæ‰€ä»¥è¿™é‡Œç»Ÿä¸€æ¢æˆä¸­ç§‘å¤§çš„æºã€‚</p><ul><li>ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦å¼€æºé•œåƒç«™ LEDEï¼š<a href="http://mirrors.ustc.edu.cn/help/lede.html" target="_blank" rel="noopener">ä½¿ç”¨å¸®åŠ©</a></li></ul><p>å¯ä»¥åœ¨ç»ˆç«¯æ“ä½œï¼Œä¹Ÿå¯ä»¥åœ¨Webåå°æ“ä½œï¼š</p><h4 id="Webåå°æ“ä½œ"><a href="#Webåå°æ“ä½œ" class="headerlink" title="Webåå°æ“ä½œ"></a>Webåå°æ“ä½œ</h4><p>è¿›å…¥è·¯ç”±å™¨åå°ï¼Œä¾æ¬¡ç‚¹å‡» â€˜Systemâ€™ - â€˜Softwareâ€™ - â€˜Configurationâ€™ï¼Œåœ¨ â€˜Distribution feedsâ€™ä¸‹é¢æˆ‘ä»¬æ›´æ¢æˆå›½å†…çš„æºï¼Œæ³¨æ„ç‰ˆæœ¬å™¢ï¼ˆæœ€å¥½å…ˆå°†åŸæœ‰çš„å¤‡ä»½ä¸‹ï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">src/gz openwrt_core http://mirrors.ustc.edu.cn/lede/releases/18.06.2/targets/brcm2708/bcm2709/packages</span><br><span class="line">src/gz openwrt_base http://mirrors.ustc.edu.cn/lede/releases/18.06.2/packages/arm_cortex-a7_neon-vfpv4/base</span><br><span class="line">src/gz openwrt_luci http://mirrors.ustc.edu.cn/lede/releases/18.06.2/packages/arm_cortex-a7_neon-vfpv4/luci</span><br><span class="line">src/gz openwrt_packages http://mirrors.ustc.edu.cn/lede/releases/18.06.2/packages/arm_cortex-a7_neon-vfpv4/packages</span><br><span class="line">src/gz openwrt_routing http://mirrors.ustc.edu.cn/lede/releases/18.06.2/packages/arm_cortex-a7_neon-vfpv4/routing</span><br><span class="line">src/gz openwrt_telephony http://mirrors.ustc.edu.cn/lede/releases/18.06.2/packages/arm_cortex-a7_neon-vfpv4/telephony</span><br></pre></td></tr></table></figure><p>ç„¶ååˆ‡æ¢åˆ° â€˜Actionsâ€™æ ‡ç­¾ä¸‹ï¼Œç‚¹å‡» â€˜Update listsâ€™ä¾¿å¯ä»¥è·å–æ‰€æœ‰å¯ç”¨çš„ipkåŒ…ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_as_router_achieve_all_aviable_pkgs.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_as_router_achieve_all_aviable_pkgs.jpg" alt=""></picture></p><h4 id="ç»ˆç«¯æ“ä½œ"><a href="#ç»ˆç«¯æ“ä½œ" class="headerlink" title="ç»ˆç«¯æ“ä½œ"></a>ç»ˆç«¯æ“ä½œ</h4><p>é¦–å…ˆå°†åŸæœ‰çš„æºé…ç½®æ–‡ä»¶å¤‡ä»½ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /etc/opkg/distfeeds.conf /etc/opkg/distfeeds.conf.bak</span><br></pre></td></tr></table></figure><p>ç„¶åç”¨sedå‘½ä»¤æ›¿æ¢æ‰æºåœ°å€ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i 's|downloads.openwrt.org|mirrors.ustc.edu.cn/lede|g' /etc/opkg/distfeeds.conf</span><br></pre></td></tr></table></figure><p>æœ€åè®°å¾—æ‰§è¡Œæ›´æ–°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…"><a href="#å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…" class="headerlink" title="å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…"></a>å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…</h3><p>åœ¨è·¯ç”±å™¨åå°çš„ â€˜Systemâ€™ - â€˜Softwareâ€™ä¸‹é¢çš„ â€˜Filterâ€™ä¸­æœç´¢è¦å®‰è£…çš„è½¯ä»¶åŒ…ï¼Œæˆ–è€…åœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opkg install pkg_name</span><br></pre></td></tr></table></figure><p>éƒ½å¯ä»¥å®‰è£…ï¼Œä¸»è¦è£…3ä¸ªåŒ…ï¼š</p><ul><li>è·¯ç”±å™¨åå°ä¸­æ–‡æ’ä»¶ï¼š<code>luci-i18n-base-zh-cn</code></li><li>USBæ— çº¿ç½‘å¡é©±åŠ¨ï¼š<code>kmod-rtl8192cu</code></li><li>æ— çº¿é…ç½®å·¥å…·ï¼š<code>wireless-tools</code></li></ul><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_as_router_chinese_language_pkg.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_as_router_chinese_language_pkg.jpg" alt=""></picture></p><h3 id="é…ç½®æ— çº¿"><a href="#é…ç½®æ— çº¿" class="headerlink" title="é…ç½®æ— çº¿"></a>é…ç½®æ— çº¿</h3><p>å®‰è£…ä¸­æ–‡åŒ…åï¼Œåå°è‡ªåŠ¨å˜æˆäº†ä¸­æ–‡ã€‚æ­¤æ—¶èœå•æ â€™ç½‘ç»œâ€™ä¸­ä¼šå¤šå‡ºä¸ªâ€™æ— çº¿â€™ï¼Œç‚¹å‡»è¿›å…¥ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_as_router_wireless_interface.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_as_router_wireless_interface.jpg" alt=""></picture></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ— çº¿å¹¶æ²¡æœ‰å¯ç”¨ï¼Œåªéœ€ç‚¹å‡»å¯ç”¨å°±å¯ä»¥äº†ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_as_router_wireless_enable.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_as_router_wireless_enable.jpg" alt=""></picture></p><p>ä¸è¿‡è¿˜æœ‰ç‚¹å°é—®é¢˜ï¼Œé¦–å…ˆè¿™ä¸ªWiFiæ²¡å¯†ç ï¼Œå…¶æ¬¡ä¹Ÿæ²¡ç½‘ã€‚ç‚¹å‡»â€™ç¼–è¾‘â€™ï¼Œå°†ç½‘ç»œæ¥æºé€‰æ‹©ä¸ºWANï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_as_router_network_source.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_as_router_network_source.jpg" alt=""></picture></p><p>å…¶æ¬¡åœ¨â€™æ— çº¿å®‰å…¨â€™è¿™é‡Œç»™WiFiè®¾ç½®ä¸ªå¯†ç ï¼Œæœ€åä¿å­˜å°±å¯ä»¥äº†ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_as_router_wireless_password.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_as_router_wireless_password.jpg" alt=""></picture></p><p>ç°åœ¨æ‰‹æœºæˆ–ç”µè„‘å¯ä»¥è¿æ¥ä¸Šè¯•è¯•è¾£ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_as_router_phone_connect.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_as_router_phone_connect.jpg" alt=""></picture></p><h3 id="ä¸‡èƒ½è·¯ç”±å™¨"><a href="#ä¸‡èƒ½è·¯ç”±å™¨" class="headerlink" title="ä¸‡èƒ½è·¯ç”±å™¨"></a>ä¸‡èƒ½è·¯ç”±å™¨</h3><p>ä¹‹æ‰€ä»¥ç§°ä¹‹ä¸ºâ€™ä¸‡èƒ½è·¯ç”±å™¨â€™ï¼Œæ˜¯å› ä¸ºOpenWrtä¸ä»…å®Œå…¨å¼€æºï¼Œå¯ç©æ€§å¾ˆé«˜ï¼Œè€Œä¸”ç¬¬ä¸‰æ–¹æ’ä»¶éå¸¸ä¸°å¯Œï¼Œæ¯”å¦‚å¯ä»¥ç§‘å­¦ä¸Šç½‘çš„shadowsocksï¼Œå®‰è£…é…ç½®ä¹‹åï¼Œå…¨å¤©24hå‡ºå›½æ—…æ¸¸ä¸æˆé—®é¢˜å‘€ï¼ˆæœ‰ç©ºå†™ç¯‡( $ _ $ )ï¼‰ã€‚</p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://jingyan.baidu.com/article/3c343ff7e862850d3679637b.html" target="_blank" rel="noopener">LANã€WANã€WLANçš„åŒºåˆ«</a></li><li><a href="https://openwrt.org/toh/raspberry_pi_foundation/raspberry_pi" target="_blank" rel="noopener">OpenWrt Raspberry Pi</a></li><li><a href="http://blog.lxx1.com/3294" target="_blank" rel="noopener">æ ‘è“æ´¾å®‰è£… OpenWrt æ‰“é€ è¶…çº§è·¯ç”±å™¨</a></li><li><a href="https://www.vediotalk.com/?p=956" target="_blank" rel="noopener">VLOGä¸¨æ ‘è“æ´¾(raspberrypi Pi1-Pi3)å®‰è£…OPENWRT LEDEç§’å˜xxx</a></li></ul><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ ‘è“æ´¾èƒ½åšçš„äº‹æƒ…å®åœ¨æ˜¯å¤ªå¤šäº†ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥æŠŠå®ƒæ”¹é€ æˆä¸€å°å…¨èƒ½çš„æ— çº¿è·¯ç”±å™¨ã€‚è¦çŸ¥é“æ ‘è“æ´¾çš„Socæ€§èƒ½å¯æ¯”å»‰ä»·è·¯ç”±å™¨é«˜å‡ºä¸å°‘ã€‚
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="æ ‘è“æ´¾" scheme="http://www.codec.wang/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="OpenWrt" scheme="http://www.codec.wang/tags/OpenWrt/"/>
    
  </entry>
  
  <entry>
    <title>ã€æ ‘è“æ´¾ã€‘ç”¨PLEXæ‰“é€ å®¶åº­å½±éŸ³ä¸­å¿ƒï¼</title>
    <link href="http://www.codec.wang/raspberrypi-how-to-install-plex-server/"/>
    <id>http://www.codec.wang/raspberrypi-how-to-install-plex-server/</id>
    <published>2019-03-27T14:43:35.000Z</published>
    <updated>2020-04-07T03:53:27.982Z</updated>
    
    <content type="html"><![CDATA[<p>ç”µè„‘ä¸‹è½½äº†éƒ¨ç”µå½±ï¼Œæ™šä¸Šæƒ³åœ¨æ‰‹æœºä¸Šçœ‹ï¼Œè€å©†ä¹Ÿæƒ³çœ‹ï¼ˆå•¥ï¼Ÿï¼ï¼‰ï¼Œæ‹·è´ï¼Ÿæƒ³åœ¨æ‰‹æœºä¸Šçœ‹ä»¥å‰çš„ç”µå½±æˆ–è€…ç¡¬ç›˜é‡Œå­˜çš„è§†é¢‘/ç…§ç‰‡ï¼Œæ‹·è´ï¼Ÿä½¿ç”¨äº‘ç›˜å­˜å‚¨å‘¢ï¼Ÿé€Ÿåº¦ã€å®¹é‡ã€æ’­æ”¾ç ç‡ã€é‡å¤å ç”¨æœ¬åœ°å®¹é‡éƒ½æ˜¯é—®é¢˜ã€‚å¦‚æœæœ‰ä¸€å—å­˜æ”¾èµ„æºçš„ç¡¬ç›˜ï¼Œå®¶äººéƒ½å¯ä»¥é«˜é€Ÿè®¿é—®å®ƒï¼Œä½•ä¹è€Œä¸ä¸ºå‘¢ï¼Ÿæˆ‘è¯´çš„ä¸æ˜¯NASå™¢~<a id="more"></a></p><blockquote><p><em>May the force be with you.</em>  â€”â€”<a href="https://movie.douban.com/subject/1293838/" target="_blank" rel="noopener">ã€ŠStar Warsã€‹</a><br><em>æ„¿åŸåŠ›ä¸ä½ åŒåœ¨ï¼</em>â€”â€”<a href="https://movie.douban.com/subject/1293838/" target="_blank" rel="noopener">ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹</a></p><p><strong>å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼š<a href="http://moviequotes.ex2tron.wang/" target="_blank" rel="noopener">MovieQuotes</a></strong></p></blockquote><hr><h2 id="ç‰ˆæœ¬è¯´æ˜"><a href="#ç‰ˆæœ¬è¯´æ˜" class="headerlink" title="ç‰ˆæœ¬è¯´æ˜"></a>ç‰ˆæœ¬è¯´æ˜</h2><ul><li>æ ‘è“æ´¾ 3B+</li><li>OSï¼šRaspbian 9.4 (Stretch)</li><li>TFå¡ï¼šä¸‰æ˜ŸSAMSUNG 32GB EVO+</li><li>PMSï¼š1.15.2.793 armhf</li><li>ç§»åŠ¨ç¡¬ç›˜ï¼š1TB</li></ul><h2 id="ä»€ä¹ˆæ˜¯Plex"><a href="#ä»€ä¹ˆæ˜¯Plex" class="headerlink" title="ä»€ä¹ˆæ˜¯Plex"></a>ä»€ä¹ˆæ˜¯Plex</h2><p>Plexä¸»æ‰“æµåª’ä½“ä¼ è¾“æœåŠ¡ï¼Œç®€å•æ¥è¯´ï¼Œæœ‰ä¸€å°æ”¾æ»¡èµ„æ–™çš„è®¾å¤‡ï¼Œé€šè¿‡å®‰è£… <code>PMS(Plex Media Server)</code>ï¼Œå°±å¯ä»¥æ‰“é€šWindows/Linux/Macç”µè„‘ã€ç”µè§†TVã€Android/IOSæ‰‹æœºã€PS/XBOXæ¸¸æˆä¸»æœºç­‰ç­‰è®¾å¤‡ã€‚Plexæ˜¯åœ¨æœåŠ¡ç«¯è§£ç ï¼Œç„¶åå®ç°ä¸²æµï¼Œæ‰€ä»¥åœ¨æ ‘è“æ´¾ä¸Šå®‰è£…PlexæœåŠ¡çš„è¯ï¼Œå—æ€§èƒ½é™åˆ¶ï¼Œ720Pä»¥ä¸‹çš„æ„Ÿè§‰è¿˜è¡Œï¼Œæµç•…æ’­æ”¾ï¼Œå†é«˜å°±æœ‰ç‚¹åƒä¸æ¶ˆäº†ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_pi_plex_what_is_plex.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_pi_plex_what_is_plex.jpg" alt=""></picture></p><p>ç›¸æ¯”<a href="https://www.zhihu.com/question/30096498" target="_blank" rel="noopener">Kodi</a>ï¼ŒPlexçš„ç•Œé¢ç¾è§‚ç®€å•ã€äº¤äº’ä¼˜ç§€ã€æœåŠ¡å®Œæ•´ï¼Œé…ç½®èµ·æ¥å¯¹æ–°æ‰‹ä¹Ÿå‹å¥½ã€‚p.sæƒ³äº†è§£æ›´å¤šPlexçš„ä¸œè¥¿å¯ä»¥çœ‹ä¸‹<a href="#å¼•ç”¨">å¼•ç”¨</a>ï¼Œè¿™ç¯‡æˆ‘ä¸»è¦åˆ†äº«ä¸‹æ ‘è“æ´¾ä¸Šçš„å®‰è£…å’ŒæŒ‚è½½Uç›˜ç­‰æŠ€æœ¯é—®é¢˜ã€‚</p><h2 id="å®‰è£…PMS"><a href="#å®‰è£…PMS" class="headerlink" title="å®‰è£…PMS"></a>å®‰è£…PMS</h2><p><strong>å®˜ç½‘å·²ç»æœ‰äº†åŸºäºarmhf/ARMv7å¹¶æ”¯æŒæ ‘è“æ´¾çš„å®‰è£…åŒ…äº†ï¼Œéå¸¸æ–¹ä¾¿ï¼</strong></p><p>ä¹‹æ‰€ä»¥å¼ºè°ƒä¸Šé¢è¿™å¥è¯ï¼Œæ˜¯å› ä¸ºç½‘ä¸Šå¤§éƒ¨åˆ†èµ„æ–™éƒ½æ˜¯åŸºäº<a href="https://dev2day.de/plex-media-server-arm/" target="_blank" rel="noopener">dev2day.de</a>çš„ç‰ˆæœ¬ï¼Œè£…èµ·æ¥ç•¥å¾®éº»çƒ¦ä¸€ç‚¹ï¼Œå°±è¿è¿™ä¸ªåŒ…çš„<a href="https://github.com/uglymagoo/" target="_blank" rel="noopener">ä½œè€…</a>éƒ½è¡¨ç¤ºï¼š</p><blockquote><p>Plex now provides official packages. So, this project is considered EOL by me.</p></blockquote><p>å®˜æ–¹çš„ç‰ˆæœ¬è£…èµ·æ¥å°±å¾ˆå®¹æ˜“äº†ï¼Œå®‰è£…ä¹‹å‰ï¼Œå¤§å®¶éœ€è¦åˆ°<a href="https://plex.tv/" target="_blank" rel="noopener">Plexå®˜ç½‘</a>å…ˆæ³¨å†Œä¸ªè´¦å·ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼šæ›´æ–°æ ‘è“æ´¾åˆ°æœ€æ–°ã€‚å¯ä»¥æ›´æ¢æˆ<a href="/python-ubuntu-nodejs-change-sources/">å›½å†…æº</a>ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤šã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ›´æ¢æ¸…åå¤§å­¦æº</span></span><br><span class="line">sudo sed -i 's|raspbian.raspberrypi.org|mirrors.tuna.tsinghua.edu.cn/raspbian|g' /etc/apt/sources.list</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ›´æ–°ç³»ç»Ÿ</span></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt upgrade</span><br><span class="line"><span class="meta">#</span><span class="bash"> æœ€å¥½é‡å¯ä¸€ä¸‹</span></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><p>æ›´æ–°åï¼Œæœ€å¥½é‡å¯ä¸€ä¸‹ï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šæç¤ºé‡å¯ã€‚</p><p>ç¬¬äºŒæ­¥ï¼šä¸‹è½½å®˜æ–¹åŒ…å¹¶å®‰è£…ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://downloads.plex.tv/plex-media-server-new/1.15.2.793-782228f99/debian/plexmediaserver_1.15.2.793-782228f99_armhf.deb</span><br></pre></td></tr></table></figure><p>ä¸‹è½½æ…¢çš„è¯ï¼Œå¯ä»¥åˆ°å®˜ç½‘ä¸‹è½½ç¦»çº¿ç‰ˆï¼š<a href="https://www.plex.tv/media-server-downloads/" target="_blank" rel="noopener">https://www.plex.tv/media-server-downloads/</a>ï¼Œæ³¨æ„é€‰æ‹©ARMv7ç‰ˆæœ¬ï¼ˆarmhfä¸ARMv7ã€ARMv8ç­‰åŒºåˆ«å¯å‚è€ƒ<a href="#å¼•ç”¨">å¼•ç”¨</a>ï¼‰ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_pi_plex_download_plex.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_pi_plex_download_plex.jpg" alt=""></picture></p><p>debçš„åŒ…å®‰è£…å¤§å®¶åº”è¯¥å¾ˆç†Ÿæ‚‰äº†ï¼Œä¸€å¥è¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i plexmediaserver_1.15.2.793-782228f99_armhf.deb</span><br></pre></td></tr></table></figure><p>æœ€åçœ‹ä¸‹æœåŠ¡æœ‰æ²¡æœ‰å¯åŠ¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status plexmediaserver</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡ºç°runningçš„æç¤º ï¼Œå°±è¯´æ˜æœåŠ¡è¿è¡Œæ­£å¸¸ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â— plexmediaserver.service - Plex Media Server</span><br><span class="line">   Loaded: loaded (/lib/systemd/system/plexmediaserver.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since Wed 2019-03-27 17:30:23 CST; 2h 51min ago</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¯ä»¥åœ¨èœå•é‡Œé¢å¯åŠ¨ï¼Œæˆ–è€…ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼š<a href="http://localhost:32400/web/" target="_blank" rel="noopener">http://localhost:32400/web/</a></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_pi_plex_start_from_gui2.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_pi_plex_start_from_gui2.jpg" alt=""></picture></p><p>é¦–æ¬¡å¯åŠ¨éœ€è¦ä½ ç™»å½•Plexè´¦å·ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_pi_plex_login_in_plex2.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_pi_plex_login_in_plex2.jpg" alt=""></picture></p><p>è®¾ç½®æœåŠ¡å™¨çš„åç§°ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_pi_plex_name_your_server2.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_pi_plex_name_your_server2.jpg" alt=""></picture></p><p>åœ¨æ·»åŠ èµ„æ–™åº“è¿™é‡Œï¼Œé»˜è®¤æ˜¯ä¸æ”¯æŒæ ‘è“æ´¾ä¸ŠæŒ‚è½½çš„Uç›˜å’Œç§»åŠ¨ç¡¬ç›˜ï¼ˆwhatï¼Ÿæˆ‘çš„pianéƒ½åœ¨ç¡¬ç›˜é‡Œå•Šï¼‰ï¼Œåˆ«æ‹…å¿ƒï¼Œæˆ‘ä»¬åç»­è§£å†³ã€‚ç°åœ¨å…ˆä¸æ·»åŠ ï¼Œç›´æ¥ä¸‹ä¸€æ­¥ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_pi_plex_add_your_lib2.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_pi_plex_add_your_lib2.jpg" alt=""></picture></p><p>ç‚¹å‡»å®Œæˆå°±è¿›å…¥Plexçš„æ§åˆ¶é¢æ¿äº†ï¼Œå±€åŸŸç½‘å†…çš„ä»»ä½•è®¾å¤‡åœ¨æµè§ˆå™¨ä¸­è®¿é—®<a href="https://app.plex.tv/" target="_blank" rel="noopener">https://app.plex.tv</a>ä¹Ÿå¯ä»¥ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_pi_plex_config_complete2.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_pi_plex_config_complete2.jpg" alt=""></picture></p><h2 id="å¤–æŒ‚Uç›˜æˆ–ç§»åŠ¨ç¡¬ç›˜"><a href="#å¤–æŒ‚Uç›˜æˆ–ç§»åŠ¨ç¡¬ç›˜" class="headerlink" title="å¤–æŒ‚Uç›˜æˆ–ç§»åŠ¨ç¡¬ç›˜"></a>å¤–æŒ‚Uç›˜æˆ–ç§»åŠ¨ç¡¬ç›˜</h2><p> ç°åœ¨æ€»ä¸èƒ½æŠŠç”µå½±ã€èµ„æ–™å•¥çš„éƒ½å­˜åœ¨æ ‘è“æ´¾çš„TFå¡é‡Œå§ã€‚è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼šä½¿ç”¨åˆ†åŒºçš„å”¯ä¸€æ ‡è¯†ç ï¼ˆ<a href="https://baike.baidu.com/item/UUID" target="_blank" rel="noopener">Universally Unique Identifier/UUID</a>ï¼‰åœ¨fstabæ–‡ä»¶ä¸­è‡ªåŠ¨æŒ‚è½½åˆ†åŒºã€‚</p><p>é¦–å…ˆåœ¨æ ‘è“æ´¾ä¸Šæ’å…¥ç§»åŠ¨ç¡¬ç›˜ï¼Œæ‰“å°å‡ºå…¶çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚æˆ‘çš„è®¾å¤‡åœ°å€æ˜¯<code>/dev/sda1</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cat /proc/mounts</span><br><span class="line"><span class="meta">#</span><span class="bash"> /dev/sda1 /media/pi/ex2tronMovie fuseblk rw,nosuid,nodev,relatime,user_id=0,group_id=0,default_permissions,allow_other,blksize=4096 0 0</span></span><br></pre></td></tr></table></figure><p>å®‰è£…<a href="https://baike.baidu.com/item/NTFS-3G" target="_blank" rel="noopener">NTFS-3G</a>é©±åŠ¨ç¨‹åºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ntfs-3g</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<a href="https://linoxide.com/linux-command/linux-id-command/" target="_blank" rel="noopener">id</a>æŒ‡ä»¤æ‰“å°å‡º<code>User ID(UID)</code>å’Œ<code>Group ID(GID)</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">id -g pi  # 1000</span><br><span class="line">id -u pi  # 1000</span><br></pre></td></tr></table></figure><p>å†æ‰“å°å‡ºç¡¬ç›˜åˆ†åŒºçš„UUIDï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯ï¼š<code>B6A28862A2882947</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -l /dev/disk/by-uuid</span><br><span class="line"><span class="meta">#</span><span class="bash"> lrwxrwxrwx 1 root root 10 3æœˆ  27 16:13 B6A28862A2882947 -&gt; ../../sda1</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨åˆ›å»ºä¸€ä¸ªæŒ‚è½½ç¡¬ç›˜çš„ç›®å½•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /media/usb1</span><br></pre></td></tr></table></figure><p>Linuxç³»ç»Ÿå¼€æœºæ—¶ä¼šè¯»å–<code>/etc/fstab</code>æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œç„¶åæ ¹æ®é…ç½®æŒ‚è½½ç£ç›˜ã€‚æ‰€ä»¥ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨æœ«å°¾æ–°å¢ä¸€æ¡é…ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UUID=B6A28862A2882947 /media/usb1 auto nofail,uid=1000,gid=1000,noatime 0 0</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ä¸‰ä¸ªidæ ¹æ®å‰é¢æ‰“å°å‡ºæ¥çš„å®é™…æƒ…å†µå¡«å†™ã€‚</p><p>æ¥ä¸‹æ¥å…ˆå¸è½½ã€å†é‡æ–°æŒ‚è½½ç¡¬ç›˜ï¼Œæœ€åé‡å¯æ ‘è“æ´¾ç”Ÿæ•ˆï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo umount /dev/sda1</span><br><span class="line">sudo mount -a</span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ èµ„æºåº“"><a href="#æ·»åŠ èµ„æºåº“" class="headerlink" title="æ·»åŠ èµ„æºåº“"></a>æ·»åŠ èµ„æºåº“</h2><p>é‡å¯åï¼Œæ‰“å¼€Plexç½‘é¡µé¢æ¿ï¼Œåœ¨å·¦ä¾§ç‚¹å‡»â€æ·»åŠ èµ„æºåº“â€ï¼Œé€‰æ‹©usb1ï¼Œå“‡å•¦ï¼Œå‡ºæ¥å’¯ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_pi_plex_add_libraries.png_webp"><img class="image" src="http://blog.codec.wang/raspberry_pi_plex_add_libraries.png" alt=""></picture></p><p>æˆ‘é‡Œé¢æ”¾äº†å‡ éƒ¨ç”µå½±ï¼Œæ·»åŠ åï¼ŒPlexä¼šè‡ªåŠ¨è§£ç å¹¶æ£€ç´¢å½±ç‰‡çš„ç›¸å…³ä¿¡æ¯ï¼Œæ¯”å¦‚å½±ç‰‡å°é¢/èµ„æ–™ç­‰ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_pi_plex_my_movies2.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_pi_plex_my_movies2.jpg" alt=""></picture></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_pi_plex_my_movies_detail2.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_pi_plex_my_movies_detail2.jpg" alt=""></picture></p><p><strong>ä¸€ä¸ªå­—ï¼šçˆ½~ï¼</strong></p><p>æœ€åï¼Œæˆ‘æµ‹è¯•äº†ä¸‹åœ¨å±€åŸŸç½‘å†…å…¶ä»–è®¾å¤‡ä¸Šçš„æ’­æ”¾é€Ÿåº¦è¡¨ç°ï¼Œå¦‚é¢„æœŸï¼Œ720P 2Gä»¥ä¸‹çš„æµç•…æ’­æ”¾ï¼Œè¡¨ç°ä¸é”™ã€‚å…¶ä»–çš„å˜›ï¼Œâ€è¦ä»€ä¹ˆè‡ªè¡Œè½¦ï¼ï¼ï¼â€</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_pi_plex_actual_running2.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_pi_plex_actual_running2.jpg" alt=""></picture></p><p>å…³äºPlexè®¾ç½®è¿œç¨‹è®¿é—®å’Œæ›´å¤šé…ç½®ç©æ³•ï¼Œå¤§å®¶è‡ªè¡Œæ¢ç´¢å•Šï¼Œä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œæœ‰æ—¶é—´æˆ‘ä¹Ÿä¼šåˆ†äº«ä¸‹æˆ‘çš„ç»éªŒã€‚p.s.çœ‹çœ‹æˆ‘è¿™ä¸ªâ€ç”µå½±è¾¾äººâ€çš„ç‰‡(â—Ë‡âˆ€Ë‡â—)ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/raspberry_pi_plex_all_movies2.jpg_webp"><img class="image" src="http://blog.codec.wang/raspberry_pi_plex_all_movies2.jpg" alt=""></picture></p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://forums.plex.tv/t/read-me-first-about-server-armv7-and-armv8-ubuntu-debian/226567" target="_blank" rel="noopener">About Server ARMv7 and ARMv8 Ubuntu / Debian</a></li><li><a href="https://dev2day.de/plex-media-server-arm/" target="_blank" rel="noopener">Plex Media Server on Debian armhf</a></li><li><a href="https://flixed.io/install-plex-raspberry-pi/" target="_blank" rel="noopener">How to Install Plex on a Raspberry Pi â€“ Raspberry Pi Plex Server</a></li><li><a href="https://www.raspberrypi.org/forums/viewtopic.php?t=214655" target="_blank" rel="noopener">HOWTO - Using Raspberry Pi 3+ as Plex Media Server</a></li><li><a href="http://support.plex.tv/articles/categories/media-preparation/" target="_blank" rel="noopener">å®˜æ–¹ï¼šæ›´å¥½çš„å‘½åä½ çš„èµ„æºæ–‡ä»¶</a></li><li><a href="http://shumeipai.nxez.com/2019/01/17/fstab-and-mobile-hard-disk-mounting-method.html" target="_blank" rel="noopener">æ ‘è“æ´¾å®éªŒå®¤ï¼šæµ…æ fstab ä¸ç§»åŠ¨ç¡¬ç›˜æŒ‚è½½æ–¹æ³•</a></li><li><a href="https://www.vediotalk.com/?p=267" target="_blank" rel="noopener">VLOGä¸¨æ ‘è“æ´¾Raspberry Pi 3å®‰è£…PLEXâ€¦</a>]</li><li><a href="http://www.howtoip.com/how-to-set-up-plex-and-watch-your-movies-on-any-device/" target="_blank" rel="noopener">å¦‚ä½•è®¾ç½®Plexï¼ˆå¹¶åœ¨ä»»ä½•è®¾å¤‡ä¸Šè§‚çœ‹æ‚¨çš„ç”µå½±ï¼‰</a></li><li><a href="https://post.smzdm.com/p/552816/" target="_blank" rel="noopener">æ ‘è“æ´¾PI3çš„å……åˆ†åˆ©ç”¨ ç¯‡ä¸‰ï¼šæå®šæ ‘è“æ´¾ç«¯çš„PlexæœåŠ¡ç«¯â€¦</a></li></ul><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç”µè„‘ä¸‹è½½äº†éƒ¨ç”µå½±ï¼Œæ™šä¸Šæƒ³åœ¨æ‰‹æœºä¸Šçœ‹ï¼Œè€å©†ä¹Ÿæƒ³çœ‹ï¼ˆå•¥ï¼Ÿï¼ï¼‰ï¼Œæ‹·è´ï¼Ÿæƒ³åœ¨æ‰‹æœºä¸Šçœ‹ä»¥å‰çš„ç”µå½±æˆ–è€…ç¡¬ç›˜é‡Œå­˜çš„è§†é¢‘/ç…§ç‰‡ï¼Œæ‹·è´ï¼Ÿä½¿ç”¨äº‘ç›˜å­˜å‚¨å‘¢ï¼Ÿé€Ÿåº¦ã€å®¹é‡ã€æ’­æ”¾ç ç‡ã€é‡å¤å ç”¨æœ¬åœ°å®¹é‡éƒ½æ˜¯é—®é¢˜ã€‚å¦‚æœæœ‰ä¸€å—å­˜æ”¾èµ„æºçš„ç¡¬ç›˜ï¼Œå®¶äººéƒ½å¯ä»¥é«˜é€Ÿè®¿é—®å®ƒï¼Œä½•ä¹è€Œä¸ä¸ºå‘¢ï¼Ÿæˆ‘è¯´çš„ä¸æ˜¯NASå™¢~
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="æ ‘è“æ´¾" scheme="http://www.codec.wang/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="Plex" scheme="http://www.codec.wang/tags/Plex/"/>
    
  </entry>
  
  <entry>
    <title>ä¸²å£ä¼ è¾“ä¸­å¯¹floatæ•°æ®çš„å¤„ç†</title>
    <link href="http://www.codec.wang/float-data-in-serialport/"/>
    <id>http://www.codec.wang/float-data-in-serialport/</id>
    <published>2019-03-25T08:16:35.000Z</published>
    <updated>2020-04-07T03:54:25.206Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘æœ¬ä¸“ä¸šæ˜¯ææ§åˆ¶çš„ï¼Œè½¯ä»¶ä¸Šå°±æ˜¯å¤©å¤©è·Ÿä¸Š/ä¸‹ä½æœºã€é€šè®¯åè®®æ‰“äº¤é“ã€‚ä¸€æ¬¡ï¼Œæœ‰ä¸ªå­¦å¼Ÿé—®æˆ‘ï¼Œä»–å•ç‰‡æœºé‡‡é›†çš„æ¸©åº¦æ˜¯å°æ•°ï¼Œä¸²å£åº”è¯¥æ€ä¹ˆå‘ï¼Œåè®®æ€ä¹ˆè®¾è®¡ã€‚<a id="more"></a></p><hr><blockquote><p><em>çˆ±ä½ æ‰€çˆ±ï¼Œè¡Œä½ æ‰€è¡Œï¼Œå¬ä»ä½ å¿ƒï¼Œæ— é—®è¥¿ä¸œã€‚</em>â€”â€”<a href="https://movie.douban.com/subject/6874741/" target="_blank" rel="noopener">ã€Šæ— é—®è¥¿ä¸œã€‹</a></p><p><strong>å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼š<a href="http://moviequotes.ex2tron.wang/" target="_blank" rel="noopener">MovieQuotes</a></strong></p></blockquote><p>ä»–çš„æƒ³æ³•æ˜¯æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†åˆ†å¼€å‘ï¼Œæ¯”å¦‚100.3ï¼Œ1ä¸ªå­—èŠ‚ä»£è¡¨æ•´æ•°éƒ¨åˆ†ï¼Œ1ä¸ªå­—èŠ‚ä»£è¡¨å°æ•°éƒ¨åˆ†ï¼Œé‚£å¦‚æœæ˜¯300.421å‘¢ï¼Ÿè¶…å‡ºäº†1ä¸ªå­—èŠ‚çš„è¡¨ç¤ºèŒƒå›´ï¼Œè´Ÿæ•°-3.14åˆè¯¥æ€ä¹ˆå‘å‘¢ï¼Ÿå½“ç„¶å¯ä»¥è®¾ç½®å¤šä¸ªå­—èŠ‚è¡¨ç¤ºæ•°æ®ï¼Œç„¶åå•ç‹¬è®¾ç½®1ä¸ªå­—èŠ‚è¡¨ç¤ºæ­£è´Ÿï¼Œä½†æ˜¾ç„¶è¿™ç§æ–¹å¼å³éº»çƒ¦åˆä¸åˆç†ã€‚</p><p>å…¶å®ï¼Œfloatç±»å‹æ•°æ®ï¼Œæ— è®ºæ­£è´Ÿ/å¤§å°ï¼Œå®ƒéƒ½æ˜¯å ç”¨4ä¸ªå­—èŠ‚çš„ã€‚å› æ­¤ï¼Œä¸‹ä½æœºå¯ä»¥å°†ä¼ æ„Ÿå™¨æ•°æ®è½¬æˆ4ä¸ªå­—èŠ‚ï¼Œä¸Šä½æœºå†æŠŠå››ä¸ªå­—èŠ‚è½¬æˆfloatå³å¯ï¼Œå¹¶ä¸”è½¬æ¢åœ¨Cå’ŒC#ç­‰è¯­è¨€ä¸­éƒ½æ˜¯ä¸€å¥è¯çš„äº‹ã€‚å®Œæ•´ä»£ç å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><ul><li><a href="http://lostphp.com/hexconvert/" target="_blank" rel="noopener">IEE 754æµ®ç‚¹æ•°16è¿›åˆ¶åœ¨çº¿è½¬æ¢</a></li></ul><h2 id="å¤§å°ç«¯æ¨¡å¼"><a href="#å¤§å°ç«¯æ¨¡å¼" class="headerlink" title="å¤§å°ç«¯æ¨¡å¼"></a>å¤§å°ç«¯æ¨¡å¼</h2><p><a href="https://baike.baidu.com/item/å¤§å°ç«¯æ¨¡å¼" target="_blank" rel="noopener">å¤§å°ç«¯æ¨¡å¼</a>å¤§å®¶åº”è¯¥æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼Œå¤§ç«¯æ¨¡å¼æ˜¯é«˜å­—èŠ‚å­˜æ”¾åœ¨ä½åœ°å€ä¸­ï¼Œä½å­—èŠ‚å­˜æ”¾åœ¨é«˜åœ°å€ä¸­ã€‚ç±»ä¼¼æˆ‘ä»¬æ­£å¸¸çš„ä»å·¦åˆ°å³é˜…è¯»ï¼Œæ•°æ®ç”±å°åˆ°å¤§ï¼Œå°ç«¯æ¨¡å¼åä¹‹ã€‚è¿™é‡Œä¹‹æ‰€ä»¥æåŠï¼Œæ˜¯å› ä¸ºæœ‰æ—¶å€™ä¸åŒçš„ç³»ç»Ÿ/å·¥å…·å¾—åˆ°çš„ç»“æœæ˜¯åçš„ï¼Œæ­¤æ—¶ä¸ç”¨åœ¨æ„ï¼Œæ˜¯æ²¡é”™çš„ã€‚</p><h2 id="Cè¯­è¨€-ä¸‹ä½æœº"><a href="#Cè¯­è¨€-ä¸‹ä½æœº" class="headerlink" title="Cè¯­è¨€/ä¸‹ä½æœº"></a>Cè¯­è¨€/ä¸‹ä½æœº</h2><ul><li><a href="https://c.runoob.com/compile/11" target="_blank" rel="noopener">èœé¸ŸCåœ¨çº¿å·¥å…·</a></li></ul><p>ä¸‹ä½æœºä¸€èˆ¬æ˜¯Cè¯­è¨€ç¼–å†™çš„ï¼Œå¯ä»¥å°†ä¼ æ„Ÿå™¨æ•°æ®è½¬æˆå­—èŠ‚æ•°ç»„ï¼ŒCä¸­ä¹Ÿå°±æ˜¯å­—ç¬¦æ•°ç»„ï¼Œæœ‰å¤šç§æ–¹å¼ï¼š</p><blockquote><p>æœ‰çš„å•ç‰‡æœºèŠ¯ç‰‡ï¼Œå½“ä½¿ç”¨unsigned charæ—¶ï¼Œä¸²å£å‘é€ä¸äº†ï¼Œæ­¤æ—¶å¯ä»¥å»æ‰unsignedè¯•ä¸‹ã€‚</p></blockquote><h3 id="æ–¹æ³•ä¸€ï¼šå¼ºåˆ¶æŒ‡é’ˆç±»å‹è½¬æ¢"><a href="#æ–¹æ³•ä¸€ï¼šå¼ºåˆ¶æŒ‡é’ˆç±»å‹è½¬æ¢" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå¼ºåˆ¶æŒ‡é’ˆç±»å‹è½¬æ¢"></a>æ–¹æ³•ä¸€ï¼šå¼ºåˆ¶æŒ‡é’ˆç±»å‹è½¬æ¢</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// float -&gt; char []</span></span><br><span class="line"><span class="keyword">float</span> sensorData = <span class="number">-3.14</span>;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> *arr = (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)(&amp;sensorData);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%02X,%02X,%02X,%02X\n"</span>, arr[<span class="number">0</span>], arr[<span class="number">1</span>], arr[<span class="number">2</span>], arr[<span class="number">3</span>]);</span><br><span class="line"><span class="comment">// ç»“æœï¼šC3,F5,48,C0</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³ä¿å­˜åˆ°charæ•°ç»„ä¸­ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> charArr[<span class="number">4</span>], i;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) charArr[i] = *arr++;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥åå‘è½¬æ¢ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// char [] -&gt; float</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> sBuf[<span class="number">4</span>];</span><br><span class="line">sBuf[<span class="number">0</span>] = <span class="number">0xC3</span>;</span><br><span class="line">sBuf[<span class="number">1</span>] = <span class="number">0xF5</span>;</span><br><span class="line">sBuf[<span class="number">2</span>] = <span class="number">0x48</span>;</span><br><span class="line">sBuf[<span class="number">3</span>] = <span class="number">0xC0</span>;</span><br><span class="line"><span class="keyword">float</span> *data = (<span class="keyword">float</span>*)(&amp;sBuf);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%f\n"</span>, *data); <span class="comment">// ç»“æœï¼š-3.140000</span></span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒï¼šä½¿ç”¨è”åˆä½“"><a href="#æ–¹æ³•äºŒï¼šä½¿ç”¨è”åˆä½“" class="headerlink" title="æ–¹æ³•äºŒï¼šä½¿ç”¨è”åˆä½“"></a>æ–¹æ³•äºŒï¼šä½¿ç”¨è”åˆä½“</h3><p>åˆ©ç”¨è”åˆä½“å…±äº«å†…å­˜çš„åŸç†ï¼Œå¯ä»¥åœ¨è”åˆä½“å†…åŒæ—¶å®šä¹‰floatå’Œcharæ•°ç»„ç±»å‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> &#123;</span><br><span class="line">    <span class="keyword">float</span> data;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span> arr[<span class="number">4</span>];</span><br><span class="line">&#125; dataFormat;</span><br></pre></td></tr></table></figure><p>ç„¶åè½¬æ¢å°±æ¯”è¾ƒç®€å•äº†ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// float -&gt; char []</span></span><br><span class="line">dataFormat.data = <span class="number">-3.14</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%02X,%02X,%02X,%02X\n"</span>, dataFormat.arr[<span class="number">0</span>], dataFormat.arr[<span class="number">1</span>], dataFormat.arr[<span class="number">2</span>], dataFormat.arr[<span class="number">3</span>]);</span><br><span class="line"><span class="comment">// ç»“æœï¼šC3,F5,48,C0</span></span><br></pre></td></tr></table></figure><p>åå‘è½¬ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// char [] -&gt; float</span></span><br><span class="line">dataFormat.arr[<span class="number">0</span>] = <span class="number">0xC3</span>;</span><br><span class="line">dataFormat.arr[<span class="number">1</span>] = <span class="number">0xF5</span>;</span><br><span class="line">dataFormat.arr[<span class="number">2</span>] = <span class="number">0x48</span>;</span><br><span class="line">dataFormat.arr[<span class="number">3</span>] = <span class="number">0xC0</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%f\n"</span>, dataFormat.data); <span class="comment">// ç»“æœï¼š-3.140000</span></span><br></pre></td></tr></table></figure><p>Cè¯­è¨€è¿˜æ˜¯å¾ˆæ·±å¥¥çš„ï¼Œä¸Šé¢ä¸¤ç§æ˜¯æœ€é€šä¿—æ˜“æ‡‚çš„æ–¹å¼ï¼Œæ›´å¤šç‰›é€¼çš„æ–¹å¼å°½åœ¨Googleâ€¦ï¼ï¹ï¼œ</p><h2 id="C-ä¸Šä½æœº"><a href="#C-ä¸Šä½æœº" class="headerlink" title="C#/ä¸Šä½æœº"></a>C#/ä¸Šä½æœº</h2><ul><li><a href="https://c.runoob.com/compile/14" target="_blank" rel="noopener">èœé¸ŸC#åœ¨çº¿å·¥å…·</a></li></ul><p>æˆ‘ä¸€èˆ¬ä½¿ç”¨C#ç¼–å†™ä¸Šä½æœºï¼Œæ‰€ä»¥ä»¥å®ƒä¸ºä¾‹ã€‚ä¸€èˆ¬è¿™ç±»è¯­è¨€ä¸­éƒ½æœ‰è‡ªå¸¦çš„å‡½æ•°å¯ä»¥ä¸€å¥è§£å†³ï¼Œæ¯”å¦‚C#ä¸­ç”¨<code>BitConverter.ToSingle()</code>å’Œ<code>BitConverter.GetBytes()</code>ä¾¿å¯å®ç°è½¬æ¢ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// byte[] -&gt; float</span></span><br><span class="line"><span class="keyword">byte</span>[] recData = &#123;<span class="number">0xC3</span>,<span class="number">0XF5</span>,<span class="number">0X48</span>,<span class="number">0XC0</span>&#125;;</span><br><span class="line"><span class="keyword">float</span> sensorData = BitConverter.ToSingle(recData,<span class="number">0</span>); </span><br><span class="line">Console.WriteLine(sensorData); <span class="comment">// ç»“æœï¼š-3.14</span></span><br></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// float -&gt; byte[]</span></span><br><span class="line"><span class="keyword">float</span> sData = <span class="number">-3.14f</span>;</span><br><span class="line"><span class="keyword">byte</span>[] rData = BitConverter.GetBytes(sData);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">byte</span> data <span class="keyword">in</span> rData) Console.Write(<span class="string">"&#123;0:X000&#125;,"</span>, data);</span><br><span class="line"><span class="comment">// ç»“æœï¼šC3,F5,48,C0,</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­å¤§å°ç«¯ï¼šConsole.WriteLine(BitConverter.IsLittleEndian);</span></span><br></pre></td></tr></table></figure><h2 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h2><ol><li>æ—¢ç„¶çŸ¥é“äº†floatæ•°æ®æ€ä¹ˆå¤„ç†ï¼Œé‚£int/doubleå‘¢ï¼Ÿï¼ˆåŸç†æ˜¯ä¸€æ ·çš„ï¼‰</li></ol><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/BlogCode/tree/master/Float-In-SerialPort" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/float" target="_blank" rel="noopener">Microsoft float (C# Reference)</a></li><li><a href="https://blog.csdn.net/sijigang/article/details/1546117" target="_blank" rel="noopener">æµ®ç‚¹å‹(FLOAT)ä¸CHARå‹è½¬æ¢</a></li><li><a href="https://blog.csdn.net/sygdp21/article/details/20476697" target="_blank" rel="noopener">floatå‹æ•°æ®ä¸å­—èŠ‚æ•°ç»„çš„è½¬åŒ–</a></li></ul><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘æœ¬ä¸“ä¸šæ˜¯ææ§åˆ¶çš„ï¼Œè½¯ä»¶ä¸Šå°±æ˜¯å¤©å¤©è·Ÿä¸Š/ä¸‹ä½æœºã€é€šè®¯åè®®æ‰“äº¤é“ã€‚ä¸€æ¬¡ï¼Œæœ‰ä¸ªå­¦å¼Ÿé—®æˆ‘ï¼Œä»–å•ç‰‡æœºé‡‡é›†çš„æ¸©åº¦æ˜¯å°æ•°ï¼Œä¸²å£åº”è¯¥æ€ä¹ˆå‘ï¼Œåè®®æ€ä¹ˆè®¾è®¡ã€‚
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="ä¸²å£" scheme="http://www.codec.wang/tags/%E4%B8%B2%E5%8F%A3/"/>
    
      <category term="float" scheme="http://www.codec.wang/tags/float/"/>
    
  </entry>
  
  <entry>
    <title>é€Ÿåº¦UPï¼Python/Ubuntu/NodeJS/æ ‘è“æ´¾ç­‰æ›´æ¢å›½å†…æºæ±‡æ€»</title>
    <link href="http://www.codec.wang/python-ubuntu-nodejs-change-sources/"/>
    <id>http://www.codec.wang/python-ubuntu-nodejs-change-sources/</id>
    <published>2019-03-21T07:08:09.000Z</published>
    <updated>2020-04-07T03:55:42.910Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨Python/Linux/Node.jså¼€å‘ä¸­ï¼Œè¦ç»å¸¸ä¸‹è½½å„ç§å„æ ·çš„çš„åŒ…ï¼Œç„¶è€Œç”±äºé»˜è®¤çš„å®‰è£…æºå¤§éƒ¨åˆ†æ˜¯åœ¨å›½å¤–çš„æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥ä¸‹è½½é€Ÿåº¦å˜›â€¦â€¦<a id="more"></a></p><blockquote><p><em>Youâ€˜ll never win with violence, Tony, you only win when you maintain your dignity.</em>  â€”â€”<a href="https://movie.douban.com/subject/27060077/" target="_blank" rel="noopener">ã€ŠGreen Bookã€‹</a></br><br><em>æš´åŠ›æ°¸è¿œæ— æ³•å–èƒœï¼Œæ‰˜å°¼ï¼Œåªæœ‰åšå®ˆå°Šä¸¥æ‰ä¼šèµ¢ã€‚</em>â€”â€”<a href="https://movie.douban.com/subject/27060077/" target="_blank" rel="noopener">ã€Šç»¿çš®ä¹¦ã€‹</a></p><p><strong>å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼š<a href="http://moviequotes.ex2tron.wang/" target="_blank" rel="noopener">MovieQuotes</a></strong></p></blockquote><hr><p>æœ‰æ—¶çœŸçš„æ˜¯å¾ˆæ‰æ€¥å‘€ï¼Œæ‰€ä»¥å­¦ä¼šæ›´æ”¹å®‰è£…æºè¿˜æ˜¯å¾ˆæœ‰å¿…è¦æ»´â€¦â€¦Pythoné»˜è®¤æºï¼š<a href="https://pypi.org/" target="_blank" rel="noopener">https://pypi.org/</a>ï¼ŒUbuntué»˜è®¤æºï¼š<a href="http://mirrors.ubuntu.com/" target="_blank" rel="noopener">http://mirrors.ubuntu.com/</a>ï¼ŒNodeé»˜è®¤æºï¼š<a href="http://registry.npmjs.org" target="_blank" rel="noopener">http://registry.npmjs.org</a>ã€‚</p><h2 id="Python-pipæ›´æ¢æº"><a href="#Python-pipæ›´æ¢æº" class="headerlink" title="Python/pipæ›´æ¢æº"></a>Python/pipæ›´æ¢æº</h2><h3 id="æ›´æ¢å‰åé€Ÿåº¦å¯¹æ¯”"><a href="#æ›´æ¢å‰åé€Ÿåº¦å¯¹æ¯”" class="headerlink" title="æ›´æ¢å‰åé€Ÿåº¦å¯¹æ¯”"></a>æ›´æ¢å‰åé€Ÿåº¦å¯¹æ¯”</h3><p>å…·ä½“é€Ÿåº¦æå‡è·Ÿç½‘ç»œä¹Ÿæœ‰å…³ç³»ï¼Œä¸è¿‡ä¸€èˆ¬æ¥è¯´ï¼Œæå‡è¿˜æ˜¯ç›¸å½“æ˜æ˜¾çš„ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/python_ubuntu_node_before_change.jpg_webp"><img class="image" src="http://blog.codec.wang/python_ubuntu_node_before_change.jpg" alt="é»˜è®¤æºï¼Œè¿™é€Ÿåº¦å¤Ÿæˆ‘å‡ºå»æ—…æ¸¸ä¸€è¶Ÿäº†(ã€‚ï¹ã€‚)"></picture></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/python_ubuntu_node_after_change.jpg_webp"><img class="image" src="http://blog.codec.wang/python_ubuntu_node_after_change.jpg" alt="æ¸…åå¤§å­¦æº"></picture></p><h3 id="å¸¸ç”¨å›½å†…æº"><a href="#å¸¸ç”¨å›½å†…æº" class="headerlink" title="å¸¸ç”¨å›½å†…æº"></a>å¸¸ç”¨å›½å†…æº</h3><ul><li>æ¸…åå¤§å­¦ï¼š<a href="https://pypi.tuna.tsinghua.edu.cn/simple/" target="_blank" rel="noopener">https://pypi.tuna.tsinghua.edu.cn/simple/</a> | <a href="https://mirror.tuna.tsinghua.edu.cn/help/pypi/" target="_blank" rel="noopener">pypié•œåƒä½¿ç”¨å¸®åŠ©</a></li><li>é˜¿é‡Œå·´å·´ï¼š<a href="https://mirrors.aliyun.com/pypi/simple/" target="_blank" rel="noopener">https://mirrors.aliyun.com/pypi/simple/</a> </li><li>è…¾è®¯äº‘ï¼š<a href="http://mirrors.cloud.tencent.com/pypi/simple/" target="_blank" rel="noopener">http://mirrors.cloud.tencent.com/pypi/simple/</a></li><li>è±†ç“£ï¼š<a href="https://pypi.doubanio.com/simple/" target="_blank" rel="noopener">https://pypi.doubanio.com/simple/</a></li></ul><h3 id="ä¸´æ—¶æ›´æ”¹"><a href="#ä¸´æ—¶æ›´æ”¹" class="headerlink" title="ä¸´æ—¶æ›´æ”¹"></a>ä¸´æ—¶æ›´æ”¹</h3><p>ä¸´æ—¶æ›´æ¢æºåªéœ€è¦å¤šåŠ ä¸€ä¸ª<code>-i</code>å‚æ•°ï¼ˆiè¡¨ç¤ºindexç´¢å¼•ï¼‰ï¼Œæ¯”å¦‚è¿™é‡Œæ›´æ¢æˆæ¸…åæºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pkg -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure><h3 id="æ°¸ä¹…æ›´æ”¹"><a href="#æ°¸ä¹…æ›´æ”¹" class="headerlink" title="æ°¸ä¹…æ›´æ”¹"></a>æ°¸ä¹…æ›´æ”¹</h3><p>å¦‚æœä¸æƒ³æ¯æ¬¡éƒ½è¿™ä¹ˆéº»çƒ¦çš„è¯ï¼Œå¯ä»¥å†™å…¥é…ç½®æ–‡ä»¶ã€‚æ–°ç‰ˆçš„pip(&gt;=10.0.0)ç›´æ¥ç”¨ä¸‹é¢ä¸€å¥è¯å°±è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹pipç‰ˆæœ¬ï¼špip --version</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œåï¼ŒWindows/Linuxéƒ½ä¼šåœ¨ç”¨æˆ·ç›®å½•ç”Ÿæˆpipé…ç½®æ–‡ä»¶ï¼Œå¦‚æˆ‘çš„Windowsæ˜¯åœ¨ï¼š <code>C:\Users\ex2tron\AppData\Roaming\pip\pip.ini</code>ï¼ŒLinuxæ˜¯åœ¨ï¼š <code>/home/ex2tron/.config/pip/pip.conf</code>ã€‚</p><p>å¦‚æœæ˜¯æ—§ç‰ˆçš„pipï¼Œå¯ä»¥æ‰‹åŠ¨æ–°å»ºä¸Šé¢ä¸¤ä¸ªæ–‡ä»¶ï¼Œç„¶åç¼–è¾‘å†…å®¹ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url &#x3D; https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple</span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶ä¹Ÿå¯ä»¥ç›´æ¥å»ºåœ¨ç”¨æˆ·ç›®å½•ä¸‹ï¼Œå¦‚Windowsï¼š<code>C:\Users\ex2tron\pip\pip.ini</code>ï¼ŒLinuxï¼š<code>/home/ex2tron/.pip/pip.conf</code>ã€‚ä¿å­˜åï¼Œç…§å¸¸<code>pip install pkg</code>å³å¯ã€‚</p><h2 id="Ubuntu-aptæ›´æ¢æº"><a href="#Ubuntu-aptæ›´æ¢æº" class="headerlink" title="Ubuntu/aptæ›´æ¢æº"></a>Ubuntu/aptæ›´æ¢æº</h2><h3 id="å›¾å½¢ç•Œé¢é…ç½®ï¼ˆæ–°æ‰‹æ¨èï¼‰"><a href="#å›¾å½¢ç•Œé¢é…ç½®ï¼ˆæ–°æ‰‹æ¨èï¼‰" class="headerlink" title="å›¾å½¢ç•Œé¢é…ç½®ï¼ˆæ–°æ‰‹æ¨èï¼‰"></a>å›¾å½¢ç•Œé¢é…ç½®ï¼ˆæ–°æ‰‹æ¨èï¼‰</h3><p>å¦‚æœä½¿ç”¨çš„æ˜¯Ubuntuçš„Desktopç‰ˆæœ¬ï¼Œæ›´æ¢èµ·æ¥å°±æ¯”è¾ƒå®¹æ˜“äº†ï¼šæ‰“å¼€â€™è½¯ä»¶å’Œæ›´æ–°â€™ï¼Œâ€™ä¸‹è½½è‡ªâ€™è¿™é‡Œé€‰æ‹©â€™å…¶ä»–ç«™ç‚¹â€™ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/python_ubuntu_node_change_ubuntu_source.png_webp"><img class="image" src="http://blog.codec.wang/python_ubuntu_node_change_ubuntu_source.png" alt=""></picture></p><p>ç„¶ååœ¨å¼¹å‡ºçš„ç•Œé¢ä¸­é€‰æ‹©ä½ è¦æ›´æ¢çš„æœåŠ¡å™¨ï¼Œæ¯”å¦‚è¿™é‡Œæ›´æ¢ä¸ºé˜¿é‡Œäº‘ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/python_ubuntu_node_ubuntu_china_source.png_webp"><img class="image" src="http://blog.codec.wang/python_ubuntu_node_ubuntu_china_source.png" alt=""></picture></p><p>ç‚¹å‡»â€™é€‰æ‹©æœåŠ¡å™¨â€™åéœ€è¦éªŒè¯å¯†ç ï¼Œæ‰§è¡Œæ›´æ–°æ“ä½œå°±å¯ä»¥äº†ã€‚</p><h3 id="æ‰‹åŠ¨é…ç½®"><a href="#æ‰‹åŠ¨é…ç½®" class="headerlink" title="æ‰‹åŠ¨é…ç½®"></a>æ‰‹åŠ¨é…ç½®</h3><p>å¦‚æœæ˜¯ä¸å¸¦GUIçš„UbuntuæœåŠ¡å™¨ï¼Œæˆ–æ˜¯æƒ³è£…Xï¼Œé‚£ä¹ˆå¯ä»¥æ‰‹åŠ¨æ›´æ¢ã€‚æ›´æ¢æºæ—¶è·ŸUbuntuç³»ç»Ÿçš„ç‰ˆæœ¬ä¹Ÿæœ‰å…³ç³»ï¼Œè¿™é‡Œæˆ‘ä»¥Ubuntu 18.04å’Œæ¸…åé•œåƒä¸ºä¾‹ï¼Œåé¢æˆ‘å†™äº†ä¸ªå°è„šæœ¬ï¼Œæ–¹ä¾¿ä¸åŒç‰ˆæœ¬çš„ç«¥é‹ä½¿ç”¨ã€‚</p><p>é¦–å…ˆéœ€è¦çŸ¥é“çš„æ˜¯ï¼ŒLinuxæŠŠæºåˆ—è¡¨å­˜åœ¨<code>/etc/apt/sources.list</code>é‡Œé¢ï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹ä¸‹å…¶ä¸­å†…å®¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">more /etc/apt/sources.list</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æ›´æ¢æ–¹æ³•éƒ½ä¸€æ ·ï¼Œå¾ˆå¤šå¼€æºé•œåƒç«™å®˜æ–¹ä¹Ÿæœ‰è¯´æ˜ï¼Œæ¯”å¦‚ï¼š</p><ul><li><a href="https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/" target="_blank" rel="noopener">æ¸…åå¤§å­¦Ubuntué•œåƒä½¿ç”¨å¸®åŠ©</a></li><li><a href="http://mirrors.ustc.edu.cn/help/ubuntu.html" target="_blank" rel="noopener">ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦Ubuntué•œåƒä½¿ç”¨å¸®åŠ©</a></li><li><a href="https://opsx.alibaba.com/mirror?lang=zh-CN" target="_blank" rel="noopener">é˜¿é‡Œäº‘Ubuntué•œåƒä½¿ç”¨å¸®åŠ© ç‚¹Ubuntué¡¹å³ä¾§çš„å¸®åŠ©</a></li><li><a href="http://mirrors.163.com/.help/ubuntu.html" target="_blank" rel="noopener">ç½‘æ˜“Ubuntué•œåƒä½¿ç”¨å¸®åŠ©</a></li></ul><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/python_ubuntu_node_tuna_tsinghua_help.jpg_webp"><img class="image" src="http://blog.codec.wang/python_ubuntu_node_tuna_tsinghua_help.jpg" alt=""></picture></p><p>ç¬¬ä¸€æ­¥ï¼šå…ˆå°†åŸæœ‰çš„å¤‡ä»½ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ï¼šsudoç¼–è¾‘<code>sources.listæ–‡ä»¶</code>ï¼Œä¿®æ”¹å…¶å†…å®¹ä¸ºé•œåƒç«™æä¾›çš„ï¼Œå¦‚æ¸…åé•œåƒç«™18.04ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š</span><br><span class="line">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic main restricted universe multiverse</span><br><span class="line"># deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic main restricted universe multiverse</span><br><span class="line">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiverse</span><br><span class="line"># deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiverse</span><br><span class="line">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiverse</span><br><span class="line"># deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiverse</span><br><span class="line">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiverse</span><br><span class="line"># deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiverse</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰æ­¥ï¼šä¿å­˜å…³é—­åï¼Œæ‰§è¡Œæ›´æ–°ç´¢å¼•çš„æ“ä½œå°±å¯ä»¥äº†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><p>å…¶å®åªè¦Ubuntuç³»ç»Ÿçš„ç‰ˆæœ¬ä»£å·å¯¹åº”èµ·æ¥å°±è¡Œã€‚Ubuntu X.XXï¼Œç¬¬ä¸€ä¸ªXä»£è¡¨å¹´ä»½ï¼Œåä¸¤ä¸ªXä»£è¡¨æœˆä»½ï¼Œä¸€èˆ¬4æœˆä»½ä¼šå‘å¸ƒLTS(<code>Long Term Support</code>)é•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼Œå¸¸è§çš„ç‰ˆæœ¬å·å’Œä»£ç å¦‚ä¸‹ï¼š</p><p>æ„Ÿå…´è¶£çš„å¯ä»¥çœ‹<a href="#å¼•ç”¨">å¼•ç”¨</a>ã€‚</p><table><thead><tr><th align="center">ç‰ˆæœ¬</th><th align="center">ä»£å·</th><th align="center">æ—¥æœŸ</th></tr></thead><tbody><tr><td align="center">14.04 LTS</td><td align="center">Trusty Tahr / å¯é çš„å¡”å°”ç¾Š</td><td align="center">2014å¹´4æœˆ</td></tr><tr><td align="center">16.04 LTS</td><td align="center">Xenial Xerus / å¥½å®¢çš„éæ´²åœ°æ¾é¼ </td><td align="center">2016å¹´4æœˆ</td></tr><tr><td align="center">18.04 LTS</td><td align="center">Bionic Beaver / ä»¿ç”Ÿæµ·ç‹¸</td><td align="center">2018å¹´4æœˆ</td></tr></tbody></table><h3 id="è‡ªåŠ¨åŒ–è„šæœ¬"><a href="#è‡ªåŠ¨åŒ–è„šæœ¬" class="headerlink" title="è‡ªåŠ¨åŒ–è„šæœ¬"></a>è‡ªåŠ¨åŒ–è„šæœ¬</h3><p>ä¸ºäº†æ–¹ä¾¿åœ¨Ubuntuå¸¸è§çš„ç‰ˆæœ¬ä¸Šæ›´æ¢æºï¼Œæˆ‘å†™äº†ä¸ªè‡ªåŠ¨åŒ–å°è„šæœ¬ï¼š<a href="https://github.com/ex2tron/MyLibsAndSamples/blob/master/016.Ubuntu%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%8D%A2%E5%9B%BD%E5%86%85%E6%BA%90%28Shell%29/UbuntuAutoChangeSource.sh" target="_blank" rel="noopener">UbuntuAutoChangeSource.sh</a>ã€‚è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹Ubuntuç³»ç»Ÿç‰ˆæœ¬ï¼Œç„¶åé€‰æ‹©ä½ æƒ³æ›´æ¢çš„é•œåƒæºå°±å¯ä»¥äº†ï¼š</p><p><img src="http://blog.codec.wang/python_ubuntu_node_auto_scripts.gif" alt=""></p><h2 id="æ ‘è“æ´¾Raspbian"><a href="#æ ‘è“æ´¾Raspbian" class="headerlink" title="æ ‘è“æ´¾Raspbian"></a>æ ‘è“æ´¾Raspbian</h2><h3 id="å¸¸ç”¨æº"><a href="#å¸¸ç”¨æº" class="headerlink" title="å¸¸ç”¨æº"></a>å¸¸ç”¨æº</h3><p>æ ‘è“æ´¾æ”¯æŒçš„OSå¾ˆå¤šï¼Œç»å¸¸ç”¨çš„ä¹Ÿæ˜¯å®˜æ–¹æ¨èçš„æ˜¯<a href="https://www.raspberrypi.org/downloads/" target="_blank" rel="noopener">Raspbian</a>ã€‚å®˜ç½‘ä¸Šæœ‰ä¸ªé•œåƒåˆ—è¡¨ï¼š<a href="http://www.raspbian.org/RaspbianMirrors" target="_blank" rel="noopener">http://www.raspbian.org/RaspbianMirrors</a>ï¼Œå›½å†…å¸¸ç”¨ï¼š</p><ul><li>æ¸…åå¤§å­¦ï¼š<a href="http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/" target="_blank" rel="noopener">http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/</a> | <a href="https://mirror.tuna.tsinghua.edu.cn/help/raspbian/" target="_blank" rel="noopener">ä½¿ç”¨å¸®åŠ©</a></li><li>ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ï¼š<a href="http://mirrors.ustc.edu.cn/raspbian/raspbian/" target="_blank" rel="noopener">http://mirrors.ustc.edu.cn/raspbian/raspbian/</a> | <a href="http://mirrors.ustc.edu.cn/help/raspbian.html" target="_blank" rel="noopener">ä½¿ç”¨å¸®åŠ©</a></li></ul><h3 id="æ›´æ¢æ–¹æ³•"><a href="#æ›´æ¢æ–¹æ³•" class="headerlink" title="æ›´æ¢æ–¹æ³•"></a>æ›´æ¢æ–¹æ³•</h3><p>æºåˆ—è¡¨åŒæ ·å­˜å‚¨åœ¨ <code>/etc/apt/sources.list</code>ä¸­ï¼Œæ‰€ä»¥æœ€å¥½å…ˆå¤‡ä»½ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</span><br></pre></td></tr></table></figure><p>æ›´æ¢æ—¶ä¹Ÿè·Ÿç‰ˆæœ¬æœ‰å…³ï¼Œæ¯”å¦‚åŸºäºDebian 9 Stretchæ„å»ºçš„<code>Raspbian 2018-11-13</code>ç‰ˆæœ¬ä¿®æ”¹æˆæ¸…åå¤§å­¦çš„æºï¼ˆå¯å°†åŸå…ˆçš„ç”¨#æ³¨é‡Šæ‰ï¼Œä¹Ÿå¯ä»¥è¦†ç›–ä¿®æ”¹ï¼Œåæ­£å·²ç»å¤‡ä»½äº†ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deb http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;raspbian&#x2F;raspbian&#x2F; stretch main contrib non-free rpi</span><br><span class="line">deb-src http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;raspbian&#x2F;raspbian&#x2F; stretch main contrib non-free rpi</span><br></pre></td></tr></table></figure><p>è™½è¯´è·Ÿç‰ˆæœ¬æœ‰å…³ï¼Œä½†åŸºæœ¬ä¸Šåªè¦æŠŠæºçš„åœ°å€æ”¹æ‰å°±å¥½äº†ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¿®æ”¹æ–¹å¼ä¹Ÿå¯ä»¥ä½¿ç”¨sedå·¥å…·ä¸€é”®ä¿®æ”¹ï¼ˆé’ˆå¯¹<code>Raspbian 2018-04-19</code>åçš„ç‰ˆæœ¬ï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i 's|raspbian.raspberrypi.org|mirrors.tuna.tsinghua.edu.cn/raspbian|g' /etc/apt/sources.list</span><br></pre></td></tr></table></figure><p>æœ€åè®°å¾—æ›´æ–°ä¸€ä¸‹å°±å¥½äº†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><h2 id="Node-js-npmæ›´æ¢æº"><a href="#Node-js-npmæ›´æ¢æº" class="headerlink" title="Node.js/npmæ›´æ¢æº"></a>Node.js/npmæ›´æ¢æº</h2><h3 id="ä¸´æ—¶æ›´æ¢"><a href="#ä¸´æ—¶æ›´æ¢" class="headerlink" title="ä¸´æ—¶æ›´æ¢"></a>ä¸´æ—¶æ›´æ¢</h3><p>å›½å†…æœ€å¸¸ç”¨çš„npmé•œåƒç«™æ˜¯æ·˜å®çš„ï¼š<a href="http://npm.taobao.org/" target="_blank" rel="noopener">http://npm.taobao.org/</a> ã€‚ä¸´æ—¶æ›´æ¢å°±æ˜¯åŠ ä¸Š<code>--registry</code>é€‰é¡¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install pkg --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><h3 id="æ°¸ä¹…æ›´æ”¹-1"><a href="#æ°¸ä¹…æ›´æ”¹-1" class="headerlink" title="æ°¸ä¹…æ›´æ”¹"></a>æ°¸ä¹…æ›´æ”¹</h3><p>ç±»ä¼¼äºpipï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>npm config</code>è®¾ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><p>éªŒè¯æœ‰æ— ç”Ÿæ•ˆï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config get registry</span><br></pre></td></tr></table></figure><p>è¦æ¢å¤é»˜è®¤çš„è¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry http://registry.npmjs.org</span><br></pre></td></tr></table></figure><p>é€Ÿåº¦å¯¹æ¯”æˆ‘å°±ä¸æ”¾äº†ï¼Œæ€»ä¹‹ï¼Œå„ç±»åŒ…ç®¡ç†å™¨ï¼Œæ›´æ¢ä¸ºå›½å†…çš„æºä¹‹åï¼Œé€Ÿåº¦éƒ½ä¼šå¤§å¹…æå‡ã€‚</p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://mirrors.tuna.tsinghua.edu.cn/" target="_blank" rel="noopener">æ¸…åå¤§å­¦å¼€æºé•œåƒç«™</a></li><li><a href="https://opsx.alibaba.com/mirror" target="_blank" rel="noopener">é˜¿é‡Œå·´å·´å¼€æºé•œåƒç«™</a></li><li><a href="http://mirrors.163.com/" target="_blank" rel="noopener">ç½‘æ˜“å¼€æºé•œåƒç«™</a></li><li><a href="http://mirrors.zju.edu.cn/" target="_blank" rel="noopener">æµ™æ±Ÿå¤§å­¦å¼€æºé•œåƒç«™</a></li><li><a href="http://mirrors.ustc.edu.cn/" target="_blank" rel="noopener">ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦å¼€æºé•œåƒç«™</a></li><li><a href="https://npm.taobao.org/" target="_blank" rel="noopener">æ·˜å®NPMé•œåƒç«™</a></li><li><a href="https://github.com/ex2tron/MyLibsAndSamples/tree/master/016.Ubuntu%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%8D%A2%E5%9B%BD%E5%86%85%E6%BA%90%28Shell%29" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="https://wiki.ubuntu.com/DevelopmentCodeNames" target="_blank" rel="noopener">Ubuntuå®˜ç½‘ç‰ˆæœ¬å·åŠä»£å·è¯´æ˜ï¼šDevelopmentCodeNames</a></li></ul><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨Python/Linux/Node.jså¼€å‘ä¸­ï¼Œè¦ç»å¸¸ä¸‹è½½å„ç§å„æ ·çš„çš„åŒ…ï¼Œç„¶è€Œç”±äºé»˜è®¤çš„å®‰è£…æºå¤§éƒ¨åˆ†æ˜¯åœ¨å›½å¤–çš„æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥ä¸‹è½½é€Ÿåº¦å˜›â€¦â€¦
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="Ubuntu" scheme="http://www.codec.wang/tags/Ubuntu/"/>
    
      <category term="NodeJS" scheme="http://www.codec.wang/tags/NodeJS/"/>
    
      <category term="pip" scheme="http://www.codec.wang/tags/pip/"/>
    
      <category term="nmp" scheme="http://www.codec.wang/tags/nmp/"/>
    
      <category term="apt" scheme="http://www.codec.wang/tags/apt/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntuä¸Šå®‰è£…Windows10åŒç³»ç»Ÿæ­¥éª¤åŠå¸¸è§é—®é¢˜</title>
    <link href="http://www.codec.wang/install-windows10-on-ubuntu/"/>
    <id>http://www.codec.wang/install-windows10-on-ubuntu/</id>
    <published>2019-03-17T12:42:59.000Z</published>
    <updated>2020-04-07T04:46:51.592Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰æƒ³è£…ä¸ªWindows10+Ubuntuçš„åŒç³»ç»Ÿï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹æ˜¯Windowsä¸Šæ€ä¹ˆå®‰è£…Ubuntuçš„ï¼Œå¯æˆ‘ç”µè„‘TMDæœ¬èº«å°±æ˜¯Ubuntuå•Šï¼Œåœ¨Ubuntuä¸Šå®‰è£…Windowsçš„èµ„æ–™ç›¸å¯¹è¾ƒå°‘ï¼ŒçœŸæ˜¯ç¥å‘ã€‚ä¸‹é¢åˆ†äº«ä¸‹æˆ‘çš„æ•™ç¨‹ï¼š<a id="more"></a></p><blockquote><p><em>The world is full of lonely people waiting to make the first move.</em>  â€”â€”<a href="https://movie.douban.com/subject/27060077/" target="_blank" rel="noopener">ã€ŠGreen Bookã€‹</a></br><br><em>ä¸–ç•Œä¸Šæœ‰å¤ªå¤šå­¤ç‹¬çš„äººå®³æ€•å…ˆè¸å‡ºç¬¬ä¸€æ­¥ã€‚</em>â€”â€”<a href="https://movie.douban.com/subject/27060077/" target="_blank" rel="noopener">ã€Šç»¿çš®ä¹¦ã€‹</a></p><p><strong>å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼š<a href="http://moviequotes.ex2tron.wang/" target="_blank" rel="noopener">MovieQuotes</a></strong></p></blockquote><hr><p>åˆ†åŒºå’Œå®‰è£…æœ‰é£é™©ï¼Œä¸ç†Ÿæ‚‰çš„åŒå­¦è¯·æå‰<strong>å¤‡ä»½æ•°æ®</strong>å¹¶<strong>è°¨æ…æ“ä½œ</strong>ï¼ï¼ï¼</p><ul><li>Ubuntu 16.04.5</li><li>Windows 10 1809</li></ul><h2 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h2><h3 id="åˆ†åŒº"><a href="#åˆ†åŒº" class="headerlink" title="åˆ†åŒº"></a>åˆ†åŒº</h3><p>åˆ†åŒºæ˜¯æœ€ä¸ºå…³é”®çš„æ­¥éª¤ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æƒ…å†µï¼š</p><ol><li><p>ä½ çš„ç”µè„‘ä¸Šå·²ç»æœ‰ä¸€ä¸ªå•ç‹¬çš„ä¸ç”¨çš„åˆ†åŒºï¼Œæ¯”å¦‚æœ‰çš„ç”µè„‘ä¸Šæ˜¯SSD+HDDçš„ï¼Œè¿™ç§æƒ…å†µä¸‹ä½ å¯ä»¥å°†Windowsç›´æ¥å®‰è£…åœ¨è¿™ä¸ªåˆ†åŒºä¸Šï¼Œæœ€ååªè¦æ·»åŠ ä¸‹å¼•å¯¼å°±è¡Œã€‚</p></li><li><p>å¦‚æœä¸æ˜¯ä¸Šé¢çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªç¡¬ç›˜éƒ½åœ¨ä¸ºUbuntuæ‰€ä½¿ç”¨ï¼Œå°±è¦åˆ†å‡ºä¸€ä¸ªåŒºæ¥ï¼š</p></li></ol><p><strong>ç®€å•çš„åˆ†åŒºæ–¹å¼ï¼ˆç®€å•çš„ä¸è¡Œå¯ä»¥çœ‹åé¢å¤æ‚çš„ï¼‰</strong></p><p>Ubuntuä¸Šå®‰è£…<code>gparted</code>å›¾å½¢åŒ–åˆ†åŒºå·¥å…·ï¼š<code>sudo apt install gparted</code>ã€‚æ‰“å¼€ä¹‹åï¼Œé€‰æ‹©è¦åˆ†åŒºçš„åŒºåŸŸï¼Œæ¯”å¦‚æˆ‘è¦ä»<code>/dev/sda1</code>ä¸­åˆ†åŒºï¼Œç„¶åç‚¹å‡»èœå•æ çš„è°ƒæ•´åˆ†åŒºå¤§å°æŒ‰é’®ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/ubuntu_windows_install_gparted.jpg_webp"><img class="image" src="http://blog.codec.wang/ubuntu_windows_install_gparted.jpg" alt=""></picture></p><p>å¦‚æœå‡ºæ¥çš„ç•Œé¢æŸäº›é¡¹æ˜¯ç°è‰²çš„ï¼ˆå°±åƒä¸Šå›¾è¿™æ ·ï¼‰ï¼Œè¯´æ˜ä¸å¯ä»¥ç”¨è¿™ç§æ–¹å¼åˆ†åŒºã€‚</p><p><strong>ç•¥å¾®å¤æ‚çš„æ–¹å¼</strong></p><p>éœ€è¦ä¸€ä¸ªUbuntuçš„Uç›˜é•œåƒï¼ˆä¸å¿…è·Ÿä½ åŸæ¥çš„Ubuntuç³»ç»ŸåŒç‰ˆæœ¬ï¼‰ï¼Œä»¥æ™®é€šçš„è£…æœºæ–¹å¼è¿›å…¥å®‰è£…ç¨‹åºåï¼Œåˆ°å®‰è£…ç±»å‹è¿™ä¸€æ­¥ï¼Œåƒä¸‡ä¸è¦ä¹±é€‰ï¼Œä¸€å®šè¦é€‰<strong>å…¶ä»–é€‰é¡¹</strong>ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/ubuntu_windows_disk_part_with_install_ubuntu.jpg_webp"><img class="image" src="http://blog.codec.wang/ubuntu_windows_disk_part_with_install_ubuntu.jpg" alt=""></picture></p><p>ç„¶åé€‰æ‹©ä½ è¦åˆ†åŒºçš„åŒºåŸŸï¼Œç‚¹å‡»ä¸‹æ–¹çš„æ›´æ”¹ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/ubuntu_windows_disk_part_with_install_ubuntu2.jpg_webp"><img class="image" src="http://blog.codec.wang/ubuntu_windows_disk_part_with_install_ubuntu2.jpg" alt=""></picture></p><p>åœ¨å¼¹å‡ºçš„æ›´æ”¹åŒºåŸŸå¤§å°ä¸­ï¼Œè¾“å…¥æ–°åˆ†åŒºçš„å¤§å°ï¼Œç‚¹å‡»OKï¼ŒæˆåŠŸä¹‹åï¼Œ<strong>å°±é€€å‡ºå®‰è£…</strong>ï¼Œä¸è¦å†å®‰è£…ä¸€ä¸ªUbuntuäº†ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/ubuntu_windows_disk_part_with_install_ubuntu3.jpg_webp"><img class="image" src="http://blog.codec.wang/ubuntu_windows_disk_part_with_install_ubuntu3.jpg" alt=""></picture></p><p>å‰é¢å°±å®ç°äº†åˆ†åŒºï¼Œä½†Windowsçš„åˆ†åŒºæ ¼å¼è·ŸUbuntuä¸ä¸€æ ·ï¼Œæ‰€ä»¥éœ€è¦å›åˆ°Ubuntuç³»ç»Ÿï¼Œæ‰“å¼€gpartedï¼Œå°†åˆ†åŒºè½¬æ¢æˆntfsæ ¼å¼ï¼Œç”¨äºå®‰è£…Windowsï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/ubuntu_windows_convert_ntfs2.jpg_webp"><img class="image" src="http://blog.codec.wang/ubuntu_windows_convert_ntfs2.jpg" alt=""></picture></p><h3 id="å®‰è£…Windows"><a href="#å®‰è£…Windows" class="headerlink" title="å®‰è£…Windows"></a>å®‰è£…Windows</h3><p>è¿™ä¸€æ­¥å°±æ˜¯æ­£å¸¸çš„Windowså®‰è£…æµç¨‹ï¼ˆä¸èµ˜è¿°ï¼Œå®‰è£…çš„æ—¶å€™è®°å¾—é€‰æ‹©æˆ‘ä»¬åˆšåˆ†å¥½çš„åŒºï¼‰</p><h3 id="å¼•å¯¼é¡¹ä¿®å¤"><a href="#å¼•å¯¼é¡¹ä¿®å¤" class="headerlink" title="å¼•å¯¼é¡¹ä¿®å¤"></a>å¼•å¯¼é¡¹ä¿®å¤</h3><p>å®‰è£…å®ŒWindowsåï¼ŒUbuntuçš„å¼•å¯¼é¡¹å°±ä¸è§äº†ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯åœ¨Windowsä¸Šå®‰è£…ä½¿ç”¨<a href="https://neosmart.net/EasyBCD/" target="_blank" rel="noopener">EasyBCD</a>å¼•å¯¼Ubuntuï¼š</p><p><strong>é¦–å…ˆæ·»åŠ å¼•å¯¼é¡¹ï¼Œä¸€å®šè®°å¾—é€‰Swapäº¤æ¢åˆ†åŒº</strong></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/ubuntu_windows_boot_grub_add.jpg_webp"><img class="image" src="http://blog.codec.wang/ubuntu_windows_boot_grub_add.jpg" alt=""></picture></p><p><strong><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/ubuntu_windows_boot_grub_add2.jpg_webp"><img class="image" src="http://blog.codec.wang/ubuntu_windows_boot_grub_add2.jpg" alt=""></picture></strong></p><p><strong>ç„¶åç‚¹å‡»â€œç¼–è¾‘å¼•å¯¼èœå•â€å¹¶ä¿å­˜è®¾ç½®</strong></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/ubuntu_windows_boot_grub_add3.jpg_webp"><img class="image" src="http://blog.codec.wang/ubuntu_windows_boot_grub_add3.jpg" alt=""></picture></p><p>è¿™æ ·å°±å®Œæˆäº†å…¨éƒ¨å®‰è£…æµç¨‹ã€‚</p><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><p><strong>é—®é¢˜1ï¼šå¦‚æœå¼€æœºé€‰æ‹©Ubuntuç³»ç»Ÿæ—¶å‡ºç°ï¼š</strong></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/ubuntu_windows_cannot_bootin_ubuntu.jpg_webp"><img class="image" src="http://blog.codec.wang/ubuntu_windows_cannot_bootin_ubuntu.jpg" alt=""></picture></p><p>è§£å†³æ–¹æ¡ˆï¼šè¿›å…¥Windowsç³»ç»Ÿï¼Œä½¿ç”¨EasyBCDé‡æ–°å¼•å¯¼å³å¯ï¼Œå…·ä½“æ­¥éª¤ï¼š</p><ul><li>å…ˆå°†åŸæœ‰çš„Ubuntuå¼•å¯¼é¡¹åˆ é™¤</li></ul><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/ubuntu_windows_delete_boot_option.jpg_webp"><img class="image" src="http://blog.codec.wang/ubuntu_windows_delete_boot_option.jpg" alt=""></picture></p><ul><li>ç„¶åé‡å¤ä¹‹å‰æ·»åŠ å¼•å¯¼é¡¹çš„æ­¥éª¤å³å¯ã€‚</li></ul><p><strong>é—®é¢˜2ï¼šä½¿ç”¨åˆ»å½•çš„Ubuntu Uç›˜é•œåƒå®‰è£…ç³»ç»Ÿæ—¶å‡ºç°ï¼š</strong></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/ubuntu_windows_install_ubuntu_problem.jpg_webp"><img class="image" src="http://blog.codec.wang/ubuntu_windows_install_ubuntu_problem.jpg" alt=""></picture></p><p>è§£å†³æ–¹æ¡ˆï¼šæŒ‰ä¸‹<strong>tabé”®</strong>ï¼Œä¼šå¼¹å‡ºå¦‚ä¸‹æç¤ºï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/ubuntu_windows_install_ubuntu_problem2.jpg_webp"><img class="image" src="http://blog.codec.wang/ubuntu_windows_install_ubuntu_problem2.jpg" alt=""></picture></p><p>æŒ‰ç…§æç¤ºï¼Œè¾“å…¥<code>live live-install</code>å›è½¦å³å¯ã€‚</p><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¹‹å‰æƒ³è£…ä¸ªWindows10+Ubuntuçš„åŒç³»ç»Ÿï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹æ˜¯Windowsä¸Šæ€ä¹ˆå®‰è£…Ubuntuçš„ï¼Œå¯æˆ‘ç”µè„‘TMDæœ¬èº«å°±æ˜¯Ubuntuå•Šï¼Œåœ¨Ubuntuä¸Šå®‰è£…Windowsçš„èµ„æ–™ç›¸å¯¹è¾ƒå°‘ï¼ŒçœŸæ˜¯ç¥å‘ã€‚ä¸‹é¢åˆ†äº«ä¸‹æˆ‘çš„æ•™ç¨‹ï¼š
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="Build" scheme="http://www.codec.wang/tags/Build/"/>
    
      <category term="Windows" scheme="http://www.codec.wang/tags/Windows/"/>
    
      <category term="Ubuntu" scheme="http://www.codec.wang/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ç¯å¢ƒå˜é‡é¿å…åœ¨ä»£ç ä¸­å†™æ˜å¯†ç å’Œå¯†é’¥ç­‰é‡è¦ä¿¡æ¯</title>
    <link href="http://www.codec.wang/hiding-passwds-secret-keys-in-environment-variables/"/>
    <id>http://www.codec.wang/hiding-passwds-secret-keys-in-environment-variables/</id>
    <published>2019-01-19T14:29:07.000Z</published>
    <updated>2020-04-07T03:55:17.425Z</updated>
    
    <content type="html"><![CDATA[<p>å¾ˆå¤šäººä¼šåœ¨ä»£ç ä¸­ç›´æ¥æ˜ç å†™ä¸Šæ•°æ®åº“ç”¨æˆ·å/å¯†ç ã€API Keyè¿™äº›é‡è¦ä¿¡æ¯ï¼Œè¿™ç§æ–¹å¼å¾ˆä¸å®‰å…¨ï¼Œå› ä¸ºåˆ«äººåœ¨çœ‹åˆ°ä»£ç åæ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›ä¿¡æ¯çš„ã€‚<a id="more"></a>æœ‰å¾ˆå¤šéšè—å¯†ç çš„æŠ€å·§ï¼Œç¯å¢ƒå˜é‡ä¾¿æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚</p><hr><p>ä½¿ç”¨ç¯å¢ƒå˜é‡çš„å¥½å¤„åœ¨äºï¼Œä½ ä»ç„¶å¯ä»¥å®Œå…¨å…±äº«ä½ çš„ä»£ç è€Œä¸ç”¨æ‹…å¿ƒæ³„éœ²é‡è¦ä¿¡æ¯ã€‚</p><iframe src="//player.bilibili.com/player.html?aid=41137201&cid=72253896&page=1" width="640" height="480"  scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><h2 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h2><p>ä»¥ä¸‹é¢è¿™æ®µPythonä»£ç ä¸ºä¾‹ï¼Œä»£ç ä¸­ç›´æ¥å†™æ˜äº†æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db_user = <span class="string">"ex2tron"</span></span><br><span class="line">db_passwd = <span class="string">"ex2tron12345"</span></span><br><span class="line"></span><br><span class="line">print(db_user, db_passwd)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çœ‹ä¸‹å¦‚ä½•ä½¿ç”¨ç¯å¢ƒå˜é‡éšè—è¿™äº›ä¿¡æ¯ï¼š</p><h2 id="Linuxä¸‹éšè—æ–¹å¼"><a href="#Linuxä¸‹éšè—æ–¹å¼" class="headerlink" title="Linuxä¸‹éšè—æ–¹å¼"></a>Linuxä¸‹éšè—æ–¹å¼</h2><p>Linuxç³»ç»Ÿçš„è¿è¡Œæ˜¯ä»¥å„ç§å¯è‡ªç”±ç¼–è¾‘çš„é…ç½®æ–‡ä»¶ä¸ºåŸºç¡€çš„ï¼Œä»¥Ubuntuä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–è¾‘å½“å‰ç”¨æˆ·çš„ç»ˆç«¯é…ç½®æ–‡ä»¶<code>.bashrc</code>ã€‚</p><blockquote><p>å¤§éƒ¨åˆ†é…ç½®æ–‡ä»¶ä½äºå½“å‰ç”¨æˆ·ç›®å½•ä¸‹ï¼Œå¦‚æœåœ¨å…¶ä»–ç›®å½•çš„è¯ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥cdå¿«é€Ÿåˆ‡æ¢ã€‚</p></blockquote><p>åœ¨<code>.bashrc</code>æ–‡ä»¶çš„æœ«å°¾æ·»åŠ ä¸‹é¢ä¸¤å¥ï¼Œæ³¨æ„ç­‰å·å·¦å³æ— ç©ºæ ¼å™¢ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export DB_USER="ex2tron"</span><br><span class="line">export DB_PASSWD="ex2tron12345"</span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨å½“å‰ç»ˆç«¯<code>source ~/.bashrc</code>æˆ–é‡å¯ç»ˆç«¯ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚ä¹‹åä»£ç åªéœ€ç•¥ä½œä¿®æ”¹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">db_user = os.environ.get(<span class="string">"DB_USER"</span>)</span><br><span class="line">db_passwd = os.environ.get(<span class="string">"DB_PASSWD"</span>)</span><br><span class="line"></span><br><span class="line">print(db_user, db_passwd)</span><br></pre></td></tr></table></figure><h2 id="Windowsä¸‹éšè—æ–¹å¼"><a href="#Windowsä¸‹éšè—æ–¹å¼" class="headerlink" title="Windowsä¸‹éšè—æ–¹å¼"></a>Windowsä¸‹éšè—æ–¹å¼</h2><p>ç†Ÿæ‚‰Windowsé…ç½®è½¯ä»¶çš„ç«¥é‹åº”è¯¥ç»å¸¸ç”¨åˆ°Pathç¯å¢ƒå˜é‡ï¼ŒåŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å»ºä¸¤ä¸ªè‡ªå·±çš„ç¯å¢ƒå˜é‡ã€‚åœ¨å¼€å§‹èœå•æœç´¢ç¯å¢ƒå˜é‡ï¼Œæ‰“å¼€ç³»ç»Ÿå±æ€§çª—å£å¹¶ç‚¹å‡»â€œç¯å¢ƒå˜é‡â€ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/hiding_info_open_environment_variables.jpg_webp"><img class="image" src="http://blog.codec.wang/hiding_info_open_environment_variables.jpg" alt=""></picture></p><p>åœ¨ç¯å¢ƒå˜é‡ç•Œé¢ï¼Œå¯ä»¥åœ¨ç”¨æˆ·ç¯å¢ƒå˜é‡ä¸‹ç‚¹å‡»æ–°å»ºï¼Œæ–°å»ºä¸¤ä¸ªå˜é‡ç”¨æ¥å­˜å‚¨æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DB_USERex2tron</span><br><span class="line">DB_PASSWDex2tron12345</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/hiding_info_add_new_variable.jpg_webp"><img class="image" src="http://blog.codec.wang/hiding_info_add_new_variable.jpg" alt=""></picture></p><p>ç¼–è¾‘å¥½ä¹‹åï¼Œä»£ç è·Ÿå‰é¢çš„ä¿®æ”¹æ–¹å¼ä¸€æ ·ã€‚å¦‚æœæ‰“å°å‡ºæ¥ä¸ºç©ºï¼Œè¯´æ˜ç¯å¢ƒå˜é‡æ²¡æœ‰ç”Ÿæ•ˆï¼Œå¯ä»¥é‡å¯ä½ çš„IDEã€‚</p><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¾ˆå¤šäººä¼šåœ¨ä»£ç ä¸­ç›´æ¥æ˜ç å†™ä¸Šæ•°æ®åº“ç”¨æˆ·å/å¯†ç ã€API Keyè¿™äº›é‡è¦ä¿¡æ¯ï¼Œè¿™ç§æ–¹å¼å¾ˆä¸å®‰å…¨ï¼Œå› ä¸ºåˆ«äººåœ¨çœ‹åˆ°ä»£ç åæ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›ä¿¡æ¯çš„ã€‚
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="Build" scheme="http://www.codec.wang/tags/Build/"/>
    
      <category term="hiding-info" scheme="http://www.codec.wang/tags/hiding-info/"/>
    
      <category term="environment-variables" scheme="http://www.codec.wang/tags/environment-variables/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ä½¿ç”¨Windows 10çš„OpenSSH Clientå’ŒServer</title>
    <link href="http://www.codec.wang/how-to-use-ssh-on-windows10/"/>
    <id>http://www.codec.wang/how-to-use-ssh-on-windows10/</id>
    <published>2019-01-02T13:00:54.000Z</published>
    <updated>2020-04-07T03:54:51.684Z</updated>
    
    <content type="html"><![CDATA[<p>SSHç›®å‰æ˜¯Unixå’ŒLinuxä¸Šç”¨äºåŠ å¯†è¿æ¥è¿œç¨‹æœåŠ¡å™¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¾®è½¯ä¹Ÿåœ¨æœ€æ–°çš„Windows10ä¸­é›†æˆäº†OpenSSHï¼Œä¸‹é¢å°±æ¥çœ‹ä¸‹æ€ä¹ˆå¼€å¯å¹¶ä½¿ç”¨ã€‚<a id="more"></a></p><hr><iframe src="//player.bilibili.com/player.html?aid=39769302&cid=69862435&page=1" width="640" height="480"  scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><h2 id="ç‰ˆæœ¬è¯´æ˜"><a href="#ç‰ˆæœ¬è¯´æ˜" class="headerlink" title="ç‰ˆæœ¬è¯´æ˜"></a>ç‰ˆæœ¬è¯´æ˜</h2><p>æ–°ç‰ˆWindows 10ï¼ˆ1803åŠä»¥ä¸Šï¼‰éƒ½å·²é¢„è£…äº†OpenSSH Clientï¼Œä½†é»˜è®¤å¹¶æ²¡æœ‰è£…SSH Serverã€‚è¦æµ‹è¯•æœ‰æ²¡æœ‰å®‰è£…çš„è¯ï¼Œå¯ä»¥æ‰“å¼€å‘½ä»¤è¡Œcmdï¼Œè¾“å…¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh -V</span><br><span class="line"><span class="comment"># OpenSSH_for_Windows_7.6p1, LibreSSL 2.6.4</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ çš„Win10ç‰ˆæœ¬è¾ƒä½çš„è¯ï¼Œå¯èƒ½æ²¡æœ‰é¢„è£…ï¼Œä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œä¸‹é¢æ¥çœ‹ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>Windows 10å¼€å§‹èœå•æœç´¢â€œç®¡ç†å¯é€‰åŠŸèƒ½â€ï¼Œæˆ–æ‰“å¼€Windows 10çš„è®¾ç½®ï¼Œæ‰¾åˆ°åº”ç”¨å’ŒåŠŸèƒ½ï¼Œå¹¶é€‰æ‹©â€œç®¡ç†å¯é€‰åŠŸèƒ½â€ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/win10-ssh-client-app-features.jpg_webp"><img class="image" src="http://blog.codec.wang/win10-ssh-client-app-features.jpg" alt=""></picture></p><p>åœ¨ç®¡ç†å¯é€‰åŠŸèƒ½é¡µé¢ï¼Œç‚¹å‡»â€œæ·»åŠ åŠŸèƒ½â€ï¼Œæ‰¾åˆ°<code>OpenSSH å®¢æˆ·ç«¯</code>å’Œ<code>OpenSSH æœåŠ¡å™¨</code>ï¼Œå®¢æˆ·ç«¯æ²¡æœ‰çš„è¯ï¼Œè¯´æ˜å·²ç»å®‰è£…äº†ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/win10-ssh-client-app-features-add-server-client.jpg_webp"><img class="image" src="http://blog.codec.wang/win10-ssh-client-app-features-add-server-client.jpg" alt=""></picture></p><p>å¦‚æœä½ åªæ˜¯æƒ³ä½¿ç”¨SSHè¿æ¥æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯æŠŠè‡ªå·±çš„ç”µè„‘å½“ä½œæœåŠ¡å™¨çš„è¯ï¼ŒServeræ˜¯ä¸éœ€è¦å®‰è£…çš„ã€‚å®‰è£…è·¯å¾„æ˜¯åœ¨<code>C:\Windows\System32\OpenSSH\</code>ç›®å½•ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°é™¤äº†SSHï¼ŒWindows 10ä¹Ÿè‡ªå¸¦äº†scpï¼Œsftpç­‰å¾ˆå®ç”¨çš„å·¥å…·ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dir C:\Windows\System32\OpenSSH</span><br><span class="line"><span class="comment"># scp.exe</span></span><br><span class="line"><span class="comment"># sftp.exe</span></span><br><span class="line"><span class="comment"># ssh-keygen.exe</span></span><br><span class="line"><span class="comment"># â€¦â€¦</span></span><br></pre></td></tr></table></figure><h2 id="SSH-Clientçš„ä½¿ç”¨"><a href="#SSH-Clientçš„ä½¿ç”¨" class="headerlink" title="SSH Clientçš„ä½¿ç”¨"></a>SSH Clientçš„ä½¿ç”¨</h2><p>å®‰è£…å¥½ä¹‹åï¼Œå°±å’Œæ­£å¸¸ä½¿ç”¨SSHæ²¡æœ‰åŒºåˆ«äº†ï¼Œæ¯”å¦‚å±€åŸŸç½‘å†…æœ‰å°æœåŠ¡å™¨IPåœ°å€æ˜¯<code>192.168.1.110</code>ï¼Œé‚£ä¹ˆåœ¨Win10 cmdä¸‹è¾“å…¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh username@192.168.1.110</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯çš„ä½¿ç”¨è·ŸLinuxä¸‹SSHçš„ä½¿ç”¨ä¸€è‡´ï¼Œå°±ä¸èµ˜è¿°äº†ã€‚ä¸»è¦æ¥çœ‹ä¸‹Win10ä¸ŠServerçš„é…ç½®ã€‚</p><h2 id="SSH-Serverçš„ä½¿ç”¨"><a href="#SSH-Serverçš„ä½¿ç”¨" class="headerlink" title="SSH Serverçš„ä½¿ç”¨"></a>SSH Serverçš„ä½¿ç”¨</h2><p>å®‰è£…å¥½<code>OpenSSH Server</code>åï¼ŒWin10å¼€å§‹èœå•æœç´¢æœåŠ¡ï¼Œæ‰“å¼€æœåŠ¡ï¼Œæ‰¾åˆ°<code>OpenSSH SSH Server</code>ï¼Œç›®å‰å®ƒçš„çŠ¶æ€æ˜¯æ‰‹åŠ¨å¹¶å·²åœæ­¢æœåŠ¡ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/win10-ssh-sever-services-status.jpg_webp"><img class="image" src="http://blog.codec.wang/win10-ssh-sever-services-status.jpg" alt=""></picture></p><p>æˆ‘ä»¬å¯ä»¥å³é”®å¯åŠ¨æœåŠ¡ï¼Œå¦‚æœä½ ç»å¸¸ç”¨åˆ°å®ƒçš„è¯ï¼Œå¯ä»¥åœ¨å±æ€§ä¸­è®¾ç½®ä¸ºè‡ªåŠ¨å¯åŠ¨ã€‚</p><p>è¦æ£€æµ‹SSHæœåŠ¡æœ‰æ²¡æœ‰è¿è¡Œçš„è¯ï¼Œå¯ä»¥åœ¨cmdä¸­è¾“å…¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -a | findstr 22</span><br><span class="line"><span class="comment"># TCP    0.0.0.0:22             ex2tronSurface:0       LISTENING</span></span><br></pre></td></tr></table></figure><p>ç¡®è®¤å¼€å¯åï¼Œæœ¬æœºWin10å°±å¯ä»¥æ¥æ”¶å¤–éƒ¨SSHè¿æ¥äº†ã€‚åœ¨cmdè¾“å…¥<code>ipconfig</code>ï¼Œè·å–ç°åœ¨Win10çš„IPï¼Œæ¯”å¦‚æ˜¯<code>192.168.1.199</code>ï¼Œç”¨å¦ä¸€å°ä»»æ„æ“ä½œç³»ç»Ÿçš„ç”µè„‘ä½¿ç”¨SSHä¾¿å¯è¿æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh username@192.168.1.199</span><br></pre></td></tr></table></figure><p>æ³¨æ„æ­¤æ—¶ç”¨æˆ·åå’Œå¯†ç æ˜¯ä½ Win10çš„ç”¨æˆ·åå’Œå¯†ç ã€‚</p><h2 id="sshd-é…ç½®æ–‡ä»¶"><a href="#sshd-é…ç½®æ–‡ä»¶" class="headerlink" title="sshd é…ç½®æ–‡ä»¶"></a>sshd é…ç½®æ–‡ä»¶</h2><p>SSHæœåŠ¡å¼€å¯åï¼Œé»˜è®¤çš„é…ç½®æ–‡ä»¶åœ¨<code>C:\Windows\System32\OpenSSH\</code>ç›®å½•ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dir C:\Windows\System32\OpenSSH\</span><br><span class="line"><span class="comment"># sshd_config_default</span></span><br></pre></td></tr></table></figure><p>ä½†å®é™…è¿è¡Œçš„é…ç½®æ–‡ä»¶æ˜¯<code>C:\ProgramData\ssh\sshd_config</code>ï¼Œç†Ÿæ‚‰SSHçš„åŒå­¦å¯¹é‡Œé¢çš„é…ç½®é¡¹åº”è¯¥éƒ½äº†è§£ï¼Œæ¯”å¦‚sshé»˜è®¤å¯åŠ¨è·¯å¾„<code>ChrootDirectory</code>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œsshè¿æ¥åï¼Œå¯åŠ¨è·¯å¾„æ˜¯Windowsçš„ä¸ªäººæ–‡ä»¶å¤¹ï¼Œå¦‚<code>C:\Users\ex2tron</code>ï¼Œæˆ‘ä¸€èˆ¬ä¼šæ›´æ”¹åˆ°æˆ‘çš„å·¥ä½œè·¯å¾„ï¼Œå¦‚ï¼š<code>D:\Surface</code>ï¼Œå°±å¯ä»¥è¿™æ ·ä¿®æ”¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ChrootDirectory D:\Surface</span><br></pre></td></tr></table></figure><p>å…¶ä»–é…ç½®é¡¹å¸¸ç”¨çš„æœ‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PermitRootLogin # æ˜¯å¦å…è®¸rootç™»é™†</span><br><span class="line">PasswordAuthentication # æ˜¯å¦è¿è¡Œä½¿ç”¨å¯†ç ç™»é™†ï¼Œå¦‚æœä½ å·²ç»å»ºç«‹å¥½sshå…¬é’¥çš„è¯ï¼Œå¯ä»¥è®¾ç½®ä¸ºnoå…å¯†ç™»é™†ï¼Œæ›´å®‰å…¨</span><br><span class="line">PermitEmptyPasswords # æ˜¯å¦å…è®¸ç©ºå¯†ç </span><br><span class="line">AuthorizedKeysFile # sshå…¬é’¥ç›®å½•</span><br></pre></td></tr></table></figure><p>é…ç½®å®Œä¹‹åä¸€å®šè®°å¾—é‡å¯<code>ssh server</code>ï¼Œå¦åˆ™æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚ä¸€ç§æ–¹æ³•æ˜¯æœåŠ¡é‡Œé¢ï¼Œå³é”®é€‰æ‹©é‡å¯ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/win10-ssh-server-config-reboot-service.jpg_webp"><img class="image" src="http://blog.codec.wang/win10-ssh-server-config-reboot-service.jpg" alt=""></picture></p><p>è¿˜æœ‰ä¸€ç§å°±æ˜¯åœ¨cmdä¸‹ç›´æ¥é‡å¯ï¼Œcmdéœ€ä»¥ç®¡ç†å‘˜æƒé™æ‰“å¼€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net stop sshd</span><br><span class="line">net start sshd</span><br></pre></td></tr></table></figure><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;SSHç›®å‰æ˜¯Unixå’ŒLinuxä¸Šç”¨äºåŠ å¯†è¿æ¥è¿œç¨‹æœåŠ¡å™¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¾®è½¯ä¹Ÿåœ¨æœ€æ–°çš„Windows10ä¸­é›†æˆäº†OpenSSHï¼Œä¸‹é¢å°±æ¥çœ‹ä¸‹æ€ä¹ˆå¼€å¯å¹¶ä½¿ç”¨ã€‚
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="Build" scheme="http://www.codec.wang/tags/Build/"/>
    
      <category term="Windows10" scheme="http://www.codec.wang/tags/Windows10/"/>
    
      <category term="SSH" scheme="http://www.codec.wang/tags/SSH/"/>
    
      <category term="SSH-Server" scheme="http://www.codec.wang/tags/SSH-Server/"/>
    
  </entry>
  
  <entry>
    <title>2018æœ€åä¸€ä¸ªå·¥ä½œæ—¥ï¼Œä¸€ä»½å°ç¤¼ç‰©</title>
    <link href="http://www.codec.wang/a-gift-for-2019-moviequotes/"/>
    <id>http://www.codec.wang/a-gift-for-2019-moviequotes/</id>
    <published>2018-12-29T10:00:31.000Z</published>
    <updated>2020-04-07T03:54:06.736Z</updated>
    
    <content type="html"><![CDATA[<center>[**moviequotes.ex2tron.wang**](http://moviequotes.ex2tron.wang)</center><hr><blockquote><p>2018æ˜¯æ„Ÿä¼¤çš„ä¸€å¹´ï¼Œå¾ˆå¤šäººç¦»æˆ‘ä»¬è€Œå»ï¼Œå¤ªå¤šçš„ä¸å¼€å¿ƒâ€¦å¥½åœ¨å°±è¦ç»“æŸäº†ã€‚ä»Šå¤©æ˜¯æœ€åä¸€ä¸ªå·¥ä½œæ—¥ï¼ˆå…¶å®åœ¨å­¦æ ¡æˆ‘æ¯å¤©éƒ½åœ¨æ”¾å‡(â—Ë‡âˆ€Ë‡â—)ï¼‰ï¼Œç‰¹é€ä¸Šä¸€ä»½å°ç¤¼ç‰©ç»™å¤§å®¶ï¼š<a href="http://moviequotes.ex2tron.wang" target="_blank" rel="noopener">MovieQuotes</a></p></blockquote><a id="more"></a>è¿™æ˜¯ä¸ªç®€å•çš„ç”µå½±ç»å…¸å°è¯ç½‘ç«™ï¼Œçµæ„Ÿæ¥è‡ªæˆ‘ä»¥å‰åœ¨è…¾è®¯å­¦ä¹ Scrapyæ—¶çš„ä¸€ä¸ªç½‘ç«™[quotes.toscrape.com](http://quotes.toscrape.com)ï¼Œè¿™ä¸Šé¢æ˜¯ä¸€äº›åäººåå¥ã€‚å› ä¸ºæˆ‘å¹³å¸¸å–œæ¬¢çœ‹ç”µå½±ï¼Œå†™åšå®¢çš„æ—¶å€™ä¹Ÿç»å¸¸åœ¨å¼€å¤´æ”¾ä¸€å¥ç»å…¸å°è¯ï¼Œæ‰€ä»¥å¹³æ—¶æœé›†äº†ä¸å°‘ï¼Œäºæ˜¯å°±æœ‰äº†è¿™ä¸ªç½‘ç«™ã€‚ç½‘ç«™æœ¬èº«å¾ˆç®€å•ï¼Œç”¨Pythonå’ŒDjangoæ­çš„ï¼Œæ²¡ä»€ä¹ˆéš¾çš„ä¸œè¥¿ï¼Œä¸‹é¢æ˜¯ä¸€äº›æˆªå›¾ï¼š<p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/moviequotes_phone_ui_demo2.jpg_webp"><img class="image" src="http://blog.codec.wang/moviequotes_phone_ui_demo2.jpg" alt="æ‰‹æœº æ˜¾ç¤ºæ•ˆæœå›¾"></picture></p><p>å„ä½çœ‹å®˜ä¸è¦å«ŒUIä¸‘å•Šï¼Œæˆ‘æ˜¯å®Œå…¨æ¨¡ä»¿åŸç½‘ç«™åšçš„ã€‚åæœŸå¦‚æœæœ‰æ—¶é—´æˆ‘ä¼šæ›´æ¢ä¸€å¥—è‡ªå·±çš„UIã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/moviequotes_pc_ui_demo.jpg_webp"><img class="image" src="http://blog.codec.wang/moviequotes_pc_ui_demo.jpg" alt="PC æ˜¾ç¤ºæ•ˆæœå›¾"></picture></p><p>å…¶å®æ¯å¥ç”µå½±å°è¯é…ä¸€å¼ æˆªå›¾æœ€å¥½äº†ï¼Œä¸è¿‡åŠ ä¸Šå»æœ‰ç‚¹ä¸‘ï¼Œæ‰€ä»¥æ²¡æ”¾å‡ºæ¥ã€‚å¦å¤–ï¼Œå¤šç”¨æˆ·ç™»é™†æ³¨å†Œå’Œåˆ†äº«çš„åŠŸèƒ½åŒæ ·ä¹Ÿæ²¡æ”¾å‡ºæ¥ï¼Œç›®å‰ä¸€åˆ‡ä»ç®€ã€‚æœ‰æƒ³è¦è´¡çŒ®è¯æ¡çš„åŒå­¦å¯ä»¥è”ç³»æˆ‘å™¢ï¼Œæœ€å<strong>ç¥å¤§å®¶å…ƒæ—¦å¿«ä¹ï¼</strong>(â˜†â–½â˜†)</p><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;center&gt;[**moviequotes.ex2tron.wang**](http://moviequotes.ex2tron.wang)&lt;/center&gt;

&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;2018æ˜¯æ„Ÿä¼¤çš„ä¸€å¹´ï¼Œå¾ˆå¤šäººç¦»æˆ‘ä»¬è€Œå»ï¼Œå¤ªå¤šçš„ä¸å¼€å¿ƒâ€¦å¥½åœ¨å°±è¦ç»“æŸäº†ã€‚ä»Šå¤©æ˜¯æœ€åä¸€ä¸ªå·¥ä½œæ—¥ï¼ˆå…¶å®åœ¨å­¦æ ¡æˆ‘æ¯å¤©éƒ½åœ¨æ”¾å‡(â—Ë‡âˆ€Ë‡â—)ï¼‰ï¼Œç‰¹é€ä¸Šä¸€ä»½å°ç¤¼ç‰©ç»™å¤§å®¶ï¼š&lt;a href=&quot;http://moviequotes.ex2tron.wang&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;MovieQuotes&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="Build" scheme="http://www.codec.wang/tags/Build/"/>
    
      <category term="Django" scheme="http://www.codec.wang/tags/Django/"/>
    
      <category term="ç”µå½±å°è¯" scheme="http://www.codec.wang/tags/%E7%94%B5%E5%BD%B1%E5%8F%B0%E8%AF%8D/"/>
    
  </entry>
  
  <entry>
    <title>MightyPyï¼šBase64</title>
    <link href="http://www.codec.wang/mighty-py-base64/"/>
    <id>http://www.codec.wang/mighty-py-base64/</id>
    <published>2018-04-28T14:20:53.000Z</published>
    <updated>2020-04-07T03:43:24.716Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬çŸ¥é“æ—¥å¸¸çš„å›¾ç‰‡ã€è§†é¢‘ã€pdfã€exeç­‰ç­‰è¿™äº›æ–‡ä»¶éƒ½æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚æœç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å®ƒä»¬ï¼ŒåŸºæœ¬éƒ½æ˜¯ä¹±ç ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§ç®€å•çš„äºŒè¿›åˆ¶è½¬æˆå­—ç¬¦ä¸²çš„æ–¹å¼å‘¢ï¼Ÿ<a id="more"></a></p><blockquote><p><em>Valar Morghulis, Valar Dohaeris.</em>  â€”â€”<a href="https://movie.douban.com/subject/3016187/" target="_blank" rel="noopener">ã€ŠGame of Thronesã€‹</a><br><em>å‡¡äººçš†æœ‰ä¸€æ­»ï¼Œå‡¡äººçš†é¡»ä¾å¥‰ã€‚</em>â€”â€”<a href="https://movie.douban.com/subject/3016187/" target="_blank" rel="noopener">ã€ŠæƒåŠ›çš„æ¸¸æˆã€‹</a></p><p><strong>å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼š<a href="http://moviequotes.ex2tron.wang/" target="_blank" rel="noopener">MovieQuotes</a></strong></p></blockquote><hr><h2 id="Base64"><a href="#Base64" class="headerlink" title="Base64"></a>Base64</h2><p>Base64æ˜¯ä¸€ç§ç”¨64ä¸ªå¯æ‰“å°å­—ç¬¦æ¥è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„ä¸€ç§æ–¹æ³•ã€‚</p><p>åŸç†å…¶å®å¾ˆç®€å•ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªé•¿åº¦ä¸º64çš„å­—ç¬¦æ•°ç»„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base = [<span class="string">'A'</span>, <span class="string">'B'</span>, ..., <span class="string">'Z'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, ..., <span class="string">'z'</span>, <span class="string">'0'</span>, <span class="string">'1'</span>, ..., <span class="string">'9'</span>, <span class="string">'+'</span>, <span class="string">'/'</span>]</span><br></pre></td></tr></table></figure><p>æ ‡å‡†çš„Base64ç¼–ç æ˜¯ç”±26ä¸ªå¤§å†™å­—æ¯ã€26ä¸ªå°å†™å­—æ¯ã€[0-9]10ä¸ªæ•°å­—ã€â€™+â€™ã€â€™/â€˜å…±64ä¸ªå­—ç¬¦ç»„æˆçš„ã€‚ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è¿™äº›å­—ç¬¦æ¥å®ç°è‡ªå·±çš„Base64ç¼–ç ã€‚</p><p>å°†åŸäºŒè¿›åˆ¶æ•°æ®æ¯3ä¸ªå­—èŠ‚ä¸ºä¸€ç»„è¿›è¡Œåˆ’åˆ†ï¼Œä¸€å…±3Ã—8=24bitï¼Œåˆ’åˆ†æˆ4ç»„ï¼Œä¹Ÿå°±æ˜¯æ¯ç»„6bitï¼Œ6bitå¯è¡¨ç¤ºçš„é•¿åº¦ä¸º2^6=64ï¼Œè¿™å°±æ˜¯Base64åç§°çš„ç”±æ¥ã€‚ç„¶åå°†æ¯ç»„6bitå¯¹åº”çš„å€¼ä½œä¸ºç´¢å¼•ï¼Œåœ¨å‰é¢å®šä¹‰çš„æ•°ç»„ä¸­æŸ¥è¡¨ï¼Œå°±å¾—åˆ°äº†ç¼–ç åå¯¹åº”çš„4ä¸ªå­—ç¬¦ã€‚</p><p>æ¯”å¦‚ï¼ŒæŠŠâ€Manâ€è¿›è¡ŒBase64ç¼–ç ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/depth_python_base64_sample2.jpg_webp"><img class="image" src="http://blog.codec.wang/depth_python_base64_sample2.jpg" alt=""></picture></p><p>Pythonä¸­å¯ä»¥ç›´æ¥ç”¨å†…ç½®çš„<a href="#æ¥å£æ–‡æ¡£">base64</a>æ¨¡å—ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line">print(base64.b64encode(<span class="string">b'Man'</span>))  <span class="comment"># 'TWFu'</span></span><br><span class="line"><span class="comment"># æˆ–ï¼šbase64.b64encode(b'\x4D\x61\x6E')</span></span><br><span class="line">print(base64.b64decode(<span class="string">'TWFu'</span>))  <span class="comment"># 'man'</span></span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/depth_python_base64_index_table.jpg_webp"><img class="image" src="http://blog.codec.wang/depth_python_base64_index_table.jpg" alt="@ç»´åŸºç™¾ç§‘ Base64"></picture></p><h3 id="ä¸æ˜¯3çš„å€æ•°"><a href="#ä¸æ˜¯3çš„å€æ•°" class="headerlink" title="ä¸æ˜¯3çš„å€æ•°"></a>ä¸æ˜¯3çš„å€æ•°</h3><p>Base64æ˜¯æ¯3ä¸ªå­—èŠ‚ç¼–ç çš„ï¼Œé‡åˆ°ä¸è¶³3ä¸ªå­—èŠ‚çš„æƒ…å†µæ—¶ï¼Œä¼šåœ¨æœ«å°¾è¡¥0ï¼Œå†åœ¨æœ«å°¾åŠ ä¸ª1ä¸ªæˆ–2ä¸ª â€˜=â€™å·è¡¨ç¤ºè¡¥äº†å¤šå°‘ä¸ªå­—èŠ‚ï¼Œè§£ç æ—¶å†å°†â€™=â€™å»æ‰ã€‚</p><p>æ¯”å¦‚å‚è€ƒå‰é¢çš„â€™Manâ€™ï¼Œå¯¹â€™Mâ€™å•ç‹¬è¿›è¡Œç¼–ç ï¼šç¬¬ä¸€ç»„è¿˜æ˜¯åŸæœ‰çš„6bitï¼Œç»“æœæ˜¯å­—ç¬¦â€™Tâ€™ï¼›ç¬¬äºŒç»„åªå‰©ä¸‹â€™01â€™ï¼Œè¡¥å……4ä¸ª0ï¼Œå³â€™010000â€™ï¼Œç´¢å¼•å€¼ä¸º16ï¼Œå¯¹åº”çš„å­—ç¬¦æ˜¯â€™Qâ€™ï¼›ç¬¬ä¸‰å’Œç¬¬å››ç»„éƒ½æ˜¯0äº†ï¼Œæ‰€ä»¥å†åŠ ä¸¤ä¸ªâ€™=â€™ï¼Œæœ€ç»ˆç»“æœæ˜¯â€™TQ==â€™ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(base64.b64encode(<span class="string">b'M'</span>))  <span class="comment"># 'TQ=='</span></span><br></pre></td></tr></table></figure><p><strong>æ€»ä¹‹ï¼ŒBase64ç¼–ç åçš„é•¿åº¦æ°¸è¿œæ˜¯4çš„å€æ•°ï¼</strong></p><h3 id="URLä¸­ç‰¹æ®Šå­—ç¬¦çš„å¤„ç†"><a href="#URLä¸­ç‰¹æ®Šå­—ç¬¦çš„å¤„ç†" class="headerlink" title="URLä¸­ç‰¹æ®Šå­—ç¬¦çš„å¤„ç†"></a>URLä¸­ç‰¹æ®Šå­—ç¬¦çš„å¤„ç†</h3><p>æ ‡å‡†Base64ç¼–ç ä¸­ä¼šå‡ºç°â€™+â€™å’Œâ€™/â€˜å­—ç¬¦ï¼Œå¦‚æœåœ¨urlä¸­ä½¿ç”¨ï¼Œurlç¼–ç å™¨ä¼šè½¬æ¢æˆâ€™%2Bâ€™å’Œâ€™%2Fâ€™ï¼Œè§£ç æˆ–æ•°æ®åº“å­˜å‚¨æ—¶éœ€è¦å°†%å†æ¬¡è½¬æ¢ã€‚ä¸ºé¿å…å‡ºé”™å¹¶ç®€åŒ–æ“ä½œï¼Œæå‡ºäº†ä¸€ç§å¯ç”¨äºurlçš„æ”¹è¿›Base64ç¼–ç ï¼šå°†â€™+â€™å’Œâ€™/â€˜åˆ†åˆ«æ”¹æˆâ€™-â€˜å’Œâ€™_â€™ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(base64.b64encode(<span class="string">b'\xFB\xfe'</span>))  <span class="comment"># '+/4='</span></span><br><span class="line">print(base64.urlsafe_b64encode(<span class="string">b'\xFB\xfe'</span>))  <span class="comment"># '-_4='</span></span><br></pre></td></tr></table></figure><h3 id="å›¾ç‰‡Base64ç¼–ç "><a href="#å›¾ç‰‡Base64ç¼–ç " class="headerlink" title="å›¾ç‰‡Base64ç¼–ç "></a>å›¾ç‰‡Base64ç¼–ç </h3><p>å›¾ç‰‡çš„Base64ç¼–ç ç”¨çš„è¾ƒå¤šã€‚Pythonæ‰“å¼€æ–‡ä»¶æ—¶ï¼ŒæŒ‡å®šâ€™rbâ€™å‚æ•°ï¼Œå¯ä»¥è·å–åŸå§‹çš„äºŒè¿›åˆ¶æ•°æ®ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'lena.jpg'</span>, <span class="string">'rb'</span>) <span class="keyword">as</span> pic:</span><br><span class="line">    pic_str_data = base64.b64encode(pic.read())</span><br><span class="line"></span><br><span class="line">print(pic_str_data)</span><br></pre></td></tr></table></figure><h3 id="ä¸­æ–‡Base64ç¼–ç "><a href="#ä¸­æ–‡Base64ç¼–ç " class="headerlink" title="ä¸­æ–‡Base64ç¼–ç "></a>ä¸­æ–‡Base64ç¼–ç </h3><p>Base64åªè·ŸäºŒè¿›åˆ¶æœ‰å…³ç³»ï¼Œè·Ÿå­—ç¬¦é›†æ— å…³ã€‚å¯¹äºä¸­æ–‡çš„è¯ï¼ŒæŒ‰ç…§ä½ ä½¿ç”¨çš„å­—ç¬¦é›†ï¼ˆæ¯”å¦‚utf-8ï¼‰ç¼–ç æˆäºŒè¿›åˆ¶åå†ç”¨Base64å°±å¯ä»¥äº†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ch_bytes = <span class="string">'ä¸­'</span>.encode(<span class="string">'utf-8'</span>) <span class="comment"># b'\xe4\xb8\xad'</span></span><br><span class="line"><span class="comment"># encode()é»˜è®¤æ˜¯utf-8ï¼Œå¯çœç•¥</span></span><br><span class="line">print(ch_bytes.decode()) <span class="comment"># 'ä¸­'</span></span><br><span class="line"></span><br><span class="line">print(base64.b64encode(ch_bytes))</span><br></pre></td></tr></table></figure><h3 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h3><p>ä½œä¸ºä¸€ç§äºŒè¿›åˆ¶åˆ°å­—ç¬¦ä¸²çš„ç¼–ç æ–¹å¼ï¼ŒBase64å¯ä»¥ç¼–ç ä»»æ„çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œä¾¿äºæ–‡æœ¬æ˜¾ç¤ºå’Œæ¥å£å¤„ç†ï¼›ä½†å› ä¸ºæ˜¯å°†3ä¸ªå­—èŠ‚ç¼–ç æˆ4ä¸ªå­—èŠ‚ï¼ŒäºŒè¿›åˆ¶æ•°æ®é•¿åº¦ç›¸å½“äºå¢åŠ äº†1/3=33%å·¦å³ã€‚</p><h2 id="æ‰‹åŠ¨å®ç°Base64"><a href="#æ‰‹åŠ¨å®ç°Base64" class="headerlink" title="æ‰‹åŠ¨å®ç°Base64"></a>æ‰‹åŠ¨å®ç°Base64</h2><p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å®ç°è‡ªå·±çš„Base64ç¼–ç ï¼Œä¸è¿‡ä¸€èˆ¬æ²¡æœ‰å¿…è¦ã€‚æ¯”å¦‚ä¸‹é¢æ˜¯æˆ‘è‡ªå·±å®ç°çš„æ ‡å‡†Base64ç¼–ç ï¼Œæ•ˆç‡æ…¢äº†8å€å·¦å³ï¼Œä»…ä¾›å­¦ä¹ å‚è€ƒï¼Œç½‘ä¸Šä¹Ÿæœ‰å…¶ä»–æ–¹å¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> string</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰64å­—ç¬¦</span></span><br><span class="line">base_charset = string.ascii_uppercase+string.ascii_lowercase+string.digits+<span class="string">"+/"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_b64_encode</span><span class="params">(ori_bytes)</span>:</span></span><br><span class="line">    ret, ori_len = <span class="string">""</span>, len(ori_bytes)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, ori_len, <span class="number">3</span>):</span><br><span class="line">        <span class="comment"># ç¬¬ä¸€ç»„</span></span><br><span class="line">        first = (ori_bytes[i] &amp; <span class="number">0xFC</span>) &gt;&gt; <span class="number">2</span></span><br><span class="line">        ret += base_charset[first]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç¬¬äºŒç»„</span></span><br><span class="line">        <span class="keyword">if</span> i+<span class="number">1</span> &gt;= ori_len:</span><br><span class="line">            second = (ori_bytes[i] &amp; <span class="number">0x03</span>)*<span class="number">16</span></span><br><span class="line">            ret += base_charset[second] + <span class="string">"=="</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        second = (ori_bytes[i] &amp; <span class="number">0x03</span>)*<span class="number">16</span> + ((ori_bytes[i+<span class="number">1</span>] &amp; <span class="number">0xF0</span>) &gt;&gt; <span class="number">4</span>)</span><br><span class="line">        ret += base_charset[second]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç¬¬ä¸‰ç»„</span></span><br><span class="line">        <span class="keyword">if</span> i+<span class="number">2</span> &gt;= ori_len:</span><br><span class="line">            third = (ori_bytes[i+<span class="number">1</span>] &amp; <span class="number">0x0F</span>)*<span class="number">4</span></span><br><span class="line">            ret += base_charset[third] + <span class="string">"="</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        third = (ori_bytes[i+<span class="number">1</span>] &amp; <span class="number">0x0F</span>)*<span class="number">4</span> + ((ori_bytes[i+<span class="number">2</span>] &amp; <span class="number">0xC0</span>) &gt;&gt; <span class="number">6</span>)</span><br><span class="line">        ret += base_charset[third]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç¬¬å››ç»„</span></span><br><span class="line">        fourth = ori_bytes[i+<span class="number">2</span>] &amp; <span class="number">0x3F</span></span><br><span class="line">        ret += base_charset[fourth]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line">print(my_b64_encode(<span class="string">b'ManM'</span>))  <span class="comment"># TWFuTQ==</span></span><br></pre></td></tr></table></figure><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.python.org/3/library/base64.html" target="_blank" rel="noopener">Python base64</a></li><li><a href="https://docs.python.org/3/library/string.html" target="_blank" rel="noopener">Python string</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/BlogCode/tree/master/DepthPython/Base64" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="https://zh.wikipedia.org/wiki/Base64" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘ Base64</a></li><li><a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431954588961d6b6f51000ca4279a3415ce14ed9d709000" target="_blank" rel="noopener">å»–é›ªå³°Pythonæ•™ç¨‹</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘ä»¬çŸ¥é“æ—¥å¸¸çš„å›¾ç‰‡ã€è§†é¢‘ã€pdfã€exeç­‰ç­‰è¿™äº›æ–‡ä»¶éƒ½æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚æœç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å®ƒä»¬ï¼ŒåŸºæœ¬éƒ½æ˜¯ä¹±ç ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§ç®€å•çš„äºŒè¿›åˆ¶è½¬æˆå­—ç¬¦ä¸²çš„æ–¹å¼å‘¢ï¼Ÿ
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="Base64" scheme="http://www.codec.wang/tags/Base64/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹æŒ‘æˆ˜ä»»åŠ¡ï¼šè½¦é“æ£€æµ‹</title>
    <link href="http://www.codec.wang/opencv-python-lane-road-detection/"/>
    <id>http://www.codec.wang/opencv-python-lane-road-detection/</id>
    <published>2017-12-28T03:38:11.000Z</published>
    <updated>2020-04-07T04:59:50.572Z</updated>
    
    <content type="html"><![CDATA[<p>æŒ‘æˆ˜ä»»åŠ¡ï¼šå®é™…å…¬è·¯çš„è½¦é“çº¿æ£€æµ‹ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="æŒ‘æˆ˜å†…å®¹"><a href="#æŒ‘æˆ˜å†…å®¹" class="headerlink" title="æŒ‘æˆ˜å†…å®¹"></a>æŒ‘æˆ˜å†…å®¹</h2><blockquote><p><strong>1. åœ¨æ‰€æä¾›çš„å…¬è·¯å›¾ç‰‡ä¸Šæ£€æµ‹å‡ºè½¦é“çº¿å¹¶æ ‡è®°ï¼š</strong></p></blockquote><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_lane_detection_result_sample.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_lane_detection_result_sample.jpg" alt=""></picture></p><blockquote><p><strong>2. åœ¨æ‰€æä¾›çš„å…¬è·¯è§†é¢‘ä¸Šæ£€æµ‹å‡ºè½¦é“çº¿å¹¶æ ‡è®°ï¼š</strong></p></blockquote><video autoplay muted loop src="http://blog.codec.wang/cv2_white_lane_green_mark.mp4"></video>æœ¬æ¬¡æŒ‘æˆ˜å†…å®¹æ¥è‡ªUdacityè‡ªåŠ¨é©¾é©¶çº³ç±³å­¦ä½è¯¾ç¨‹ï¼Œç´ æä¸­è½¦é“ä¿æŒä¸å˜ï¼Œè½¦é“çº¿æ¸…æ™°æ˜ç¡®ï¼Œæ˜“äºæ£€æµ‹ï¼Œæ˜¯è½¦é“æ£€æµ‹çš„åŸºç¡€ç‰ˆæœ¬ï¼Œç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šé’ˆå¯¹å¤æ‚åœºæ™¯çš„é«˜çº§å®ç°ï¼Œæ„Ÿå…´è¶£çš„ç«¥é‹å¯ä»¥è‡ªè¡Œäº†è§£ã€‚<p><strong>æŒ‘æˆ˜é¢˜ä¸ä¼šåšä¹Ÿæœ¨æœ‰å…³ç³»ï¼Œä½†è¯·åŠ¡å¿…åœ¨è‡ªè¡Œå°è¯•åï¼Œå†çœ‹ä¸‹é¢çš„è§£ç­”å™¢ï¼Œ</strong>ä¸ç„¶â€¦æˆ‘ä¹Ÿæ²¡åŠæ³•(ï¿£â–½ï¿£)â€</p><hr><h2 id="æŒ‘æˆ˜è§£ç­”"><a href="#æŒ‘æˆ˜è§£ç­”" class="headerlink" title="æŒ‘æˆ˜è§£ç­”"></a>æŒ‘æˆ˜è§£ç­”</h2><h3 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h3><p>è¦æ£€æµ‹å‡ºå½“å‰è½¦é“ï¼Œå°±æ˜¯è¦æ£€æµ‹å‡ºå·¦å³ä¸¤æ¡è½¦é“ç›´çº¿ã€‚ç”±äºæ— äººè½¦ä¸€ç›´ä¿æŒåœ¨å½“å‰è½¦é“ï¼Œé‚£ä¹ˆæ— äººè½¦ä¸Šçš„ç›¸æœºæ‹æ‘„çš„è§†é¢‘ä¸­ï¼Œè½¦é“çº¿çš„ä½ç½®åº”è¯¥åŸºæœ¬å›ºå®šåœ¨æŸä¸€ä¸ªèŒƒå›´å†…ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_lane_detection_roi_sample.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_lane_detection_roi_sample.jpg" alt=""></picture></p><p>å¦‚æœæˆ‘ä»¬æ‰‹åŠ¨æŠŠè¿™éƒ¨åˆ†ROIåŒºåŸŸæŠ å‡ºæ¥ï¼Œå°±ä¼šæ’é™¤æ‰å¤§éƒ¨åˆ†å¹²æ‰°ã€‚æ¥ä¸‹æ¥æ£€æµ‹ç›´çº¿è‚¯å®šæ˜¯ç”¨éœå¤«å˜æ¢ï¼Œä½†ROIåŒºåŸŸå†…çš„è¾¹ç¼˜ç›´çº¿ä¿¡æ¯è¿˜æ˜¯å¾ˆå¤šï¼Œè€ƒè™‘åˆ°åªæœ‰å·¦å³ä¸¤æ¡è½¦é“çº¿ï¼Œä¸€æ¡æ–œç‡ä¸ºæ­£ï¼Œä¸€æ¡ä¸ºè´Ÿï¼Œå¯å°†æ‰€æœ‰çš„çº¿åˆ†ä¸ºä¸¤ç»„ï¼Œæ¯ç»„å†é€šè¿‡å‡å€¼æˆ–æœ€å°äºŒä¹˜æ³•æ‹Ÿåˆçš„æ–¹å¼ç¡®å®šå”¯ä¸€ä¸€æ¡çº¿å°±å¯ä»¥å®Œæˆæ£€æµ‹ã€‚æ€»ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>ç°åº¦åŒ–</li><li>é«˜æ–¯æ¨¡ç³Š</li><li>Cannyè¾¹ç¼˜æ£€æµ‹</li><li>ä¸è§„åˆ™ROIåŒºåŸŸæˆªå–</li><li>éœå¤«ç›´çº¿æ£€æµ‹</li><li>è½¦é“è®¡ç®—</li></ol><p>å¯¹äºè§†é¢‘æ¥è¯´ï¼Œåªè¦ä¸€å¹…å›¾èƒ½æ£€æŸ¥å‡ºæ¥ï¼Œåˆæˆä¸‹å°±å¯ä»¥äº†ï¼Œé—®é¢˜ä¸å¤§ã€‚</p><h3 id="å›¾åƒé¢„å¤„ç†"><a href="#å›¾åƒé¢„å¤„ç†" class="headerlink" title="å›¾åƒé¢„å¤„ç†"></a>å›¾åƒé¢„å¤„ç†</h3><p>ç°åº¦åŒ–å’Œæ»¤æ³¢æ“ä½œæ˜¯å¤§éƒ¨åˆ†å›¾åƒå¤„ç†çš„å¿…è¦æ­¥éª¤ã€‚ç°åº¦åŒ–ä¸å¿…å¤šè¯´ï¼Œå› ä¸ºä¸æ˜¯åŸºäºè‰²å½©ä¿¡æ¯è¯†åˆ«çš„ä»»åŠ¡ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦ç”¨å½©è‰²å›¾ï¼Œå¯ä»¥å¤§å¤§å‡å°‘è®¡ç®—é‡ã€‚è€Œæ»¤æ³¢ä¼šå‰Šå¼±å›¾åƒå™ªç‚¹ï¼Œæ’é™¤å¹²æ‰°ä¿¡æ¯ã€‚å¦å¤–ï¼Œæ ¹æ®å‰é¢å­¦ä¹ çš„çŸ¥è¯†ï¼Œè¾¹ç¼˜æå–æ˜¯åŸºäºå›¾åƒæ¢¯åº¦çš„ï¼Œæ¢¯åº¦å¯¹å™ªå£°å¾ˆæ•æ„Ÿï¼Œæ‰€ä»¥å¹³æ»‘æ»¤æ³¢æ“ä½œå¿…ä¸å¯å°‘ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_lane_detection_gray_blur_result.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_lane_detection_gray_blur_result.jpg" alt="åŸå›¾ vs ç°åº¦æ»¤æ³¢å›¾"></picture></p><p>è¿™æ¬¡çš„ä»£ç æˆ‘ä»¬åˆ†æ¨¡å—æ¥å†™ï¼Œè§„èŒƒä¸€ç‚¹ã€‚å…¶ä¸­<code>process_an_image()</code>æ˜¯ä¸»è¦çš„å›¾åƒå¤„ç†æµç¨‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># é«˜æ–¯æ»¤æ³¢æ ¸å¤§å°</span></span><br><span class="line">blur_ksize = <span class="number">5</span></span><br><span class="line"><span class="comment"># Cannyè¾¹ç¼˜æ£€æµ‹é«˜ä½é˜ˆå€¼</span></span><br><span class="line">canny_lth = <span class="number">50</span></span><br><span class="line">canny_hth = <span class="number">150</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">process_an_image</span><span class="params">(img)</span>:</span></span><br><span class="line">    <span class="comment"># 1. ç°åº¦åŒ–ã€æ»¤æ³¢å’ŒCanny</span></span><br><span class="line">    gray = cv2.cvtColor(img, cv2.COLOR_RGB2GRAY)</span><br><span class="line">    blur_gray = cv2.GaussianBlur(gray, (blur_ksize, blur_ksize), <span class="number">1</span>)</span><br><span class="line">    edges = cv2.Canny(blur_gray, canny_lth, canny_hth)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    img = cv2.imread(<span class="string">'test_pictures/lane.jpg'</span>)</span><br><span class="line">    result = process_an_image(img)</span><br><span class="line">    cv2.imshow(<span class="string">"lane"</span>, np.hstack((img, result)))</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_lane_detection_canny_result.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_lane_detection_canny_result.jpg" alt="è¾¹ç¼˜æ£€æµ‹ç»“æœå›¾"></picture></p><h3 id="ROIæˆªå–"><a href="#ROIæˆªå–" class="headerlink" title="ROIæˆªå–"></a>ROIæˆªå–</h3><p>æŒ‰ç…§å‰é¢æè¿°çš„æ–¹æ¡ˆï¼Œåªéœ€ä¿ç•™è¾¹ç¼˜å›¾ä¸­çš„çº¢çº¿éƒ¨åˆ†åŒºåŸŸç”¨äºåç»­çš„éœå¤«ç›´çº¿æ£€æµ‹ï¼Œå…¶ä½™éƒ½æ˜¯æ— ç”¨çš„ä¿¡æ¯ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_lane_detection_canny_roi_reserve.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_lane_detection_canny_roi_reserve.jpg" alt=""></picture></p><p>å¦‚ä½•å®ç°å‘¢ï¼Ÿè¿˜è®°å¾—å›¾åƒæ··åˆä¸­çš„è¿™å¼ å›¾å—ï¼Ÿ</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_mask.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_mask.jpg" alt=""></picture></p><p> æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ¢¯å½¢çš„maskæ©è†œï¼Œç„¶åä¸è¾¹ç¼˜æ£€æµ‹ç»“æœå›¾æ··åˆè¿ç®—ï¼Œæ©è†œä¸­ç™½è‰²çš„éƒ¨åˆ†ä¿ç•™ï¼Œé»‘è‰²çš„éƒ¨åˆ†èˆå¼ƒã€‚æ¢¯å½¢çš„å››ä¸ªåæ ‡éœ€è¦æ‰‹åŠ¨æ ‡è®°ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_lane_detection_mask_sample.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_lane_detection_mask_sample.jpg" alt="æ©è†œmask"></picture></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">process_an_image</span><span class="params">(img)</span>:</span></span><br><span class="line">    <span class="comment"># 1. ç°åº¦åŒ–ã€æ»¤æ³¢å’ŒCanny</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2. æ ‡è®°å››ä¸ªåæ ‡ç‚¹ç”¨äºROIæˆªå–</span></span><br><span class="line">    rows, cols = edges.shape</span><br><span class="line">    points = np.array([[(<span class="number">0</span>, rows), (<span class="number">460</span>, <span class="number">325</span>), (<span class="number">520</span>, <span class="number">325</span>), (cols, rows)]])</span><br><span class="line">    <span class="comment"># [[[0 540], [460 325], [520 325], [960 540]]]</span></span><br><span class="line">    roi_edges = roi_mask(edges, points)</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">roi_mask</span><span class="params">(img, corner_points)</span>:</span></span><br><span class="line">    <span class="comment"># åˆ›å»ºæ©è†œ</span></span><br><span class="line">    mask = np.zeros_like(img)</span><br><span class="line">    cv2.fillPoly(mask, corner_points, <span class="number">255</span>)</span><br><span class="line"></span><br><span class="line">    masked_img = cv2.bitwise_and(img, mask)</span><br><span class="line">    <span class="keyword">return</span> masked_img</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œç»“æœå›¾â€roi_edgesâ€åº”è¯¥æ˜¯ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_lane_detection_masked_roi_edges.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_lane_detection_masked_roi_edges.jpg" alt="åªä¿ç•™å…³é”®åŒºåŸŸçš„è¾¹ç¼˜æ£€æµ‹å›¾"></picture></p><h3 id="éœå¤«ç›´çº¿æå–"><a href="#éœå¤«ç›´çº¿æå–" class="headerlink" title="éœå¤«ç›´çº¿æå–"></a>éœå¤«ç›´çº¿æå–</h3><p>ä¸ºäº†æ–¹ä¾¿åç»­è®¡ç®—ç›´çº¿çš„æ–œç‡ï¼Œæˆ‘ä»¬ä½¿ç”¨ç»Ÿè®¡æ¦‚ç‡éœå¤«ç›´çº¿å˜æ¢ï¼ˆå› ä¸ºå®ƒèƒ½ç›´æ¥å¾—åˆ°ç›´çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹åæ ‡ï¼‰ã€‚éœå¤«å˜æ¢çš„å‚æ•°æ¯”è¾ƒå¤šï¼Œå¯ä»¥æ”¾åœ¨ä»£ç å¼€å¤´ï¼Œä¾¿äºä¿®æ”¹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éœå¤«å˜æ¢å‚æ•°</span></span><br><span class="line">rho = <span class="number">1</span></span><br><span class="line">theta = np.pi / <span class="number">180</span></span><br><span class="line">threshold = <span class="number">15</span></span><br><span class="line">min_line_len = <span class="number">40</span></span><br><span class="line">max_line_gap = <span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">process_an_image</span><span class="params">(img)</span>:</span></span><br><span class="line">    <span class="comment"># 1. ç°åº¦åŒ–ã€æ»¤æ³¢å’ŒCanny</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2. æ ‡è®°å››ä¸ªåæ ‡ç‚¹ç”¨äºROIæˆªå–</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3. éœå¤«ç›´çº¿æå–</span></span><br><span class="line">    drawing, lines = hough_lines(roi_edges, rho, theta, threshold, min_line_len, max_line_gap)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hough_lines</span><span class="params">(img, rho, theta, threshold, min_line_len, max_line_gap)</span>:</span></span><br><span class="line">    <span class="comment"># ç»Ÿè®¡æ¦‚ç‡éœå¤«ç›´çº¿å˜æ¢</span></span><br><span class="line">    lines = cv2.HoughLinesP(img, rho, theta, threshold, minLineLength=min_line_len, maxLineGap=max_line_gap)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ–°å»ºä¸€å‰¯ç©ºç™½ç”»å¸ƒ</span></span><br><span class="line">    drawing = np.zeros((img.shape[<span class="number">0</span>], img.shape[<span class="number">1</span>], <span class="number">3</span>), dtype=np.uint8)</span><br><span class="line">    <span class="comment"># draw_lines(drawing, lines)     # ç”»å‡ºç›´çº¿æ£€æµ‹ç»“æœ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> drawing, lines</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">draw_lines</span><span class="params">(img, lines, color=[<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>], thickness=<span class="number">1</span>)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">        <span class="keyword">for</span> x1, y1, x2, y2 <span class="keyword">in</span> line:</span><br><span class="line">            cv2.line(img, (x1, y1), (x2, y2), color, thickness)</span><br></pre></td></tr></table></figure><p><code>draw_lines()</code>æ˜¯ç”¨æ¥ç”»ç›´çº¿æ£€æµ‹çš„ç»“æœï¼Œåé¢æˆ‘ä»¬ä¼šæ¥ç€å¤„ç†ç›´çº¿ï¼Œæ‰€ä»¥è¿™é‡Œæ³¨é‡Šæ‰äº†ï¼Œå¯ä»¥å–æ¶ˆæ³¨é‡Šçœ‹ä¸‹æ•ˆæœï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_lane_detection_hough_lines_direct_result.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_lane_detection_hough_lines_direct_result.jpg" alt="éœå¤«å˜æ¢ç»“æœå›¾"></picture></p><p>å¯¹æœ¬ä¾‹çš„è¿™å¼ æµ‹è¯•å›¾æ¥è¯´ï¼Œå¦‚æœæ‰“å°å‡ºç›´çº¿çš„æ¡æ•°<code>print(len(lines))</code>ï¼Œåº”è¯¥æ˜¯æœ‰16æ¡ã€‚</p><h3 id="è½¦é“è®¡ç®—"><a href="#è½¦é“è®¡ç®—" class="headerlink" title="è½¦é“è®¡ç®—"></a>è½¦é“è®¡ç®—</h3><p>è¿™éƒ¨åˆ†åº”è¯¥ç®—æ˜¯æœ¬æ¬¡æŒ‘æˆ˜ä»»åŠ¡çš„æ ¸å¿ƒå†…å®¹äº†ï¼šå‰é¢é€šè¿‡éœå¤«å˜æ¢å¾—åˆ°äº†å¤šæ¡ç›´çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯é€šè¿‡æŸç§ç®—æ³•åªå¾—åˆ°å·¦å³ä¸¤æ¡è½¦é“çº¿ã€‚</p><p><strong>ç¬¬ä¸€æ­¥ã€æ ¹æ®æ–œç‡æ­£è´Ÿåˆ’åˆ†æŸæ¡çº¿æ˜¯å·¦è½¦é“è¿˜æ˜¯å³è½¦é“ã€‚</strong><br>$$<br>æ–œç‡=\frac{y_2-y_1}{x_2-x_1}(\leq0:å·¦,&gt;0:å³)<br>$$</p><blockquote><p>ç»éªŒä¹‹è°ˆï¼šå†æ¬¡å¼ºè°ƒï¼Œæ–œç‡è®¡ç®—æ˜¯åœ¨å›¾åƒåæ ‡ç³»ä¸‹ï¼Œæ‰€ä»¥æ–œç‡æ­£è´Ÿ/å·¦å³è·Ÿå¹³é¢åæ ‡æœ‰åŒºåˆ«ã€‚</p></blockquote><p><strong>ç¬¬äºŒæ­¥ã€è¿­ä»£è®¡ç®—å„ç›´çº¿æ–œç‡ä¸æ–œç‡å‡å€¼çš„å·®ï¼Œæ’é™¤æ‰å·®å€¼è¿‡å¤§çš„å¼‚å¸¸æ•°æ®ã€‚</strong></p><p>æ³¨æ„è¿™é‡Œè¿­ä»£çš„å«ä¹‰ï¼Œæ„æ€æ˜¯ç¬¬ä¸€æ¬¡è®¡ç®—å®Œæ–œç‡å‡å€¼å¹¶æ’é™¤æ‰å¼‚å¸¸å€¼åï¼Œå†åœ¨å‰©ä½™çš„æ–œç‡ä¸­å–å‡å€¼ï¼Œç»§ç»­æ’é™¤â€¦â€¦è¿™æ ·è¿­ä»£ä¸‹å»ã€‚</p><p><strong>ç¬¬ä¸‰æ­¥ã€æœ€å°äºŒä¹˜æ³•æ‹Ÿåˆå·¦å³è½¦é“çº¿ã€‚</strong></p><p>ç»è¿‡ç¬¬äºŒæ­¥çš„ç­›é€‰ï¼Œå°±åªå‰©ä¸‹å¯èƒ½çš„å·¦å³è½¦é“çº¿äº†ï¼Œè¿™æ ·åªéœ€ä»å¤šæ¡ç›´çº¿ä¸­æ‹Ÿåˆå‡ºä¸€æ¡å°±è¡Œã€‚æ‹Ÿåˆæ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œæœ€å¸¸ç”¨çš„ä¾¿æ˜¯æœ€å°äºŒä¹˜æ³•ï¼Œå®ƒé€šè¿‡æœ€å°åŒ–è¯¯å·®çš„å¹³æ–¹å’Œæ¥å¯»æ‰¾æ•°æ®çš„æœ€ä½³åŒ¹é…å‡½æ•°ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå‡è®¾ç›®å‰å¯èƒ½çš„å·¦è½¦é“çº¿æœ‰6æ¡ï¼Œä¹Ÿå°±æ˜¯12ä¸ªåæ ‡ç‚¹ï¼ŒåŒ…æ‹¬12ä¸ªxå’Œ12ä¸ªyï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯æ‹Ÿåˆå‡ºè¿™æ ·ä¸€æ¡ç›´çº¿ï¼š<br>$$<br>f(x_i) = ax_i+b<br>$$<br>ä½¿å¾—è¯¯å·®å¹³æ–¹å’Œæœ€å°ï¼š<br>$$<br>E=\sum(f(x_i)-y_i)^2<br>$$</p><p>Pythonä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨<code>np.polyfit()</code>è¿›è¡Œæœ€å°äºŒä¹˜æ³•æ‹Ÿåˆã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">process_an_image</span><span class="params">(img)</span>:</span></span><br><span class="line">    <span class="comment"># 1. ç°åº¦åŒ–ã€æ»¤æ³¢å’ŒCanny</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2. æ ‡è®°å››ä¸ªåæ ‡ç‚¹ç”¨äºROIæˆªå–</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3. éœå¤«ç›´çº¿æå–</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 4. è½¦é“æ‹Ÿåˆè®¡ç®—</span></span><br><span class="line">    draw_lanes(drawing, lines)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 5. æœ€ç»ˆå°†ç»“æœåˆåœ¨åŸå›¾ä¸Š</span></span><br><span class="line">    result = cv2.addWeighted(img, <span class="number">0.9</span>, drawing, <span class="number">0.2</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">draw_lanes</span><span class="params">(img, lines, color=[<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>], thickness=<span class="number">8</span>)</span>:</span></span><br><span class="line">    <span class="comment"># a. åˆ’åˆ†å·¦å³è½¦é“</span></span><br><span class="line">    left_lines, right_lines = [], []</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">        <span class="keyword">for</span> x1, y1, x2, y2 <span class="keyword">in</span> line:</span><br><span class="line">            k = (y2 - y1) / (x2 - x1)</span><br><span class="line">            <span class="keyword">if</span> k &lt; <span class="number">0</span>:</span><br><span class="line">                left_lines.append(line)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                right_lines.append(line)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (len(left_lines) &lt;= <span class="number">0</span> <span class="keyword">or</span> len(right_lines) &lt;= <span class="number">0</span>):</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># b. æ¸…ç†å¼‚å¸¸æ•°æ®</span></span><br><span class="line">    clean_lines(left_lines, <span class="number">0.1</span>)</span><br><span class="line">    clean_lines(right_lines, <span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># c. å¾—åˆ°å·¦å³è½¦é“çº¿ç‚¹çš„é›†åˆï¼Œæ‹Ÿåˆç›´çº¿</span></span><br><span class="line">    left_points = [(x1, y1) <span class="keyword">for</span> line <span class="keyword">in</span> left_lines <span class="keyword">for</span> x1, y1, x2, y2 <span class="keyword">in</span> line]</span><br><span class="line">    left_points = left_points + [(x2, y2) <span class="keyword">for</span> line <span class="keyword">in</span> left_lines <span class="keyword">for</span> x1, y1, x2, y2 <span class="keyword">in</span> line]</span><br><span class="line">    right_points = [(x1, y1) <span class="keyword">for</span> line <span class="keyword">in</span> right_lines <span class="keyword">for</span> x1, y1, x2, y2 <span class="keyword">in</span> line]</span><br><span class="line">    right_points = right_points + [(x2, y2) <span class="keyword">for</span> line <span class="keyword">in</span> right_lines <span class="keyword">for</span> x1, y1, x2, y2 <span class="keyword">in</span> line]</span><br><span class="line"></span><br><span class="line">    left_results = least_squares_fit(left_points, <span class="number">325</span>, img.shape[<span class="number">0</span>])</span><br><span class="line">    right_results = least_squares_fit(right_points, <span class="number">325</span>, img.shape[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ³¨æ„è¿™é‡Œç‚¹çš„é¡ºåº</span></span><br><span class="line">    vtxs = np.array([[left_results[<span class="number">1</span>], left_results[<span class="number">0</span>], right_results[<span class="number">0</span>], right_results[<span class="number">1</span>]]])</span><br><span class="line">    <span class="comment"># d. å¡«å……è½¦é“åŒºåŸŸ</span></span><br><span class="line">    cv2.fillPoly(img, vtxs, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æˆ–è€…åªç”»è½¦é“çº¿</span></span><br><span class="line">    <span class="comment"># cv2.line(img, left_results[0], left_results[1], (0, 255, 0), thickness)</span></span><br><span class="line">    <span class="comment"># cv2.line(img, right_results[0], right_results[1], (0, 255, 0), thickness)</span></span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">clean_lines</span><span class="params">(lines, threshold)</span>:</span></span><br><span class="line">    <span class="comment"># è¿­ä»£è®¡ç®—æ–œç‡å‡å€¼ï¼Œæ’é™¤æ‰ä¸å·®å€¼å·®å¼‚è¾ƒå¤§çš„æ•°æ®</span></span><br><span class="line">    slope = [(y2 - y1) / (x2 - x1) <span class="keyword">for</span> line <span class="keyword">in</span> lines <span class="keyword">for</span> x1, y1, x2, y2 <span class="keyword">in</span> line]</span><br><span class="line">    <span class="keyword">while</span> len(lines) &gt; <span class="number">0</span>:</span><br><span class="line">        mean = np.mean(slope)</span><br><span class="line">        diff = [abs(s - mean) <span class="keyword">for</span> s <span class="keyword">in</span> slope]</span><br><span class="line">        idx = np.argmax(diff)</span><br><span class="line">        <span class="keyword">if</span> diff[idx] &gt; threshold:</span><br><span class="line">            slope.pop(idx)</span><br><span class="line">            lines.pop(idx)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">            </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">least_squares_fit</span><span class="params">(point_list, ymin, ymax)</span>:</span></span><br><span class="line">    <span class="comment"># æœ€å°äºŒä¹˜æ³•æ‹Ÿåˆ</span></span><br><span class="line">    x = [p[<span class="number">0</span>] <span class="keyword">for</span> p <span class="keyword">in</span> point_list]</span><br><span class="line">    y = [p[<span class="number">1</span>] <span class="keyword">for</span> p <span class="keyword">in</span> point_list]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># polyfitç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºæ‹Ÿåˆå¤šé¡¹å¼çš„é˜¶æ•°ï¼Œæ‰€ä»¥1ä»£è¡¨çº¿æ€§</span></span><br><span class="line">    fit = np.polyfit(y, x, <span class="number">1</span>)</span><br><span class="line">    fit_fn = np.poly1d(fit)  <span class="comment"># è·å–æ‹Ÿåˆçš„ç»“æœ</span></span><br><span class="line"></span><br><span class="line">    xmin = int(fit_fn(ymin))</span><br><span class="line">    xmax = int(fit_fn(ymax))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> [(xmin, ymin), (xmax, ymax)]</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ¯”è¾ƒå¤šï¼Œè¯·æ¯ä¸ªæ­¥éª¤å•ç‹¬æ¥çœ‹ã€‚æœ€åå¾—åˆ°çš„æ˜¯å·¦å³ä¸¤æ¡è½¦é“çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹åæ ‡ï¼Œå¯ä»¥é€‰æ‹©ç”»å‡ºè½¦é“çº¿ï¼Œè¿™é‡Œæˆ‘ç›´æ¥å¡«å……äº†æ•´ä¸ªåŒºåŸŸï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_lane_detection_result_sample.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_lane_detection_result_sample.jpg" alt=""></picture></p><h3 id="è§†é¢‘å¤„ç†"><a href="#è§†é¢‘å¤„ç†" class="headerlink" title="è§†é¢‘å¤„ç†"></a>è§†é¢‘å¤„ç†</h3><p>æå®šäº†ä¸€å¼ å›¾ï¼Œè§†é¢‘ä¹Ÿå°±æ²¡ä»€ä¹ˆé—®é¢˜äº†ï¼Œå…³é”®å°±æ˜¯è§†é¢‘å¸§çš„æå–å’Œåˆæˆï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬è¦ç”¨åˆ°Pythonçš„è§†é¢‘ç¼–è¾‘åŒ…<a href="https://pypi.org/project/moviepy/#files" target="_blank" rel="noopener">moviepy</a>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install moviepy</span><br></pre></td></tr></table></figure><p>å¦å¤–è¿˜éœ€è¦ffmpegï¼Œé¦–æ¬¡è¿è¡Œmoviepyæ—¶ä¼šè‡ªåŠ¨ä¸‹è½½ï¼Œä¹Ÿå¯<a href="https://github.com/imageio/imageio-binaries/tree/master/ffmpeg" target="_blank" rel="noopener">æ‰‹åŠ¨</a>ä¸‹è½½ã€‚</p><p>åªéœ€åœ¨å¼€å¤´å¯¼å…¥moviepyï¼Œç„¶åå°†ä¸»å‡½æ•°æ”¹æ‰å°±å¯ä»¥äº†ï¼Œå…¶ä½™ä»£ç ä¸éœ€è¦æ›´æ”¹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼€å¤´å¯¼å…¥moviepy</span></span><br><span class="line"><span class="keyword">from</span> moviepy.editor <span class="keyword">import</span> VideoFileClip</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸»å‡½æ•°æ›´æ”¹ä¸ºï¼š</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    output = <span class="string">'test_videos/output.mp4'</span></span><br><span class="line">    clip = VideoFileClip(<span class="string">"test_videos/cv2_white_lane.mp4"</span>)</span><br><span class="line">    out_clip = clip.fl_image(process_an_image)</span><br><span class="line">    out_clip.write_videofile(output, audio=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><p>æœ¬æ–‡å®ç°äº†è½¦é“æ£€æµ‹çš„åŸºç¡€ç‰ˆæœ¬ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥è‡ªè¡Œæœç´¢æˆ–å‚è€ƒå¼•ç”¨éƒ¨åˆ†äº†è§£æ›´å¤šã€‚</p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="http://blog.codec.wang/cv2_lane_detection_material.zip" target="_blank" rel="noopener">å›¾ç‰‡å’Œè§†é¢‘ç´ æ</a></li><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/%E6%8C%91%E6%88%98%E4%BB%BB%E5%8A%A13%EF%BC%9A%E8%BD%A6%E9%81%93%E6%A3%80%E6%B5%8B" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="https://zhuanlan.zhihu.com/p/25354571" target="_blank" rel="noopener">ä»é›¶å¼€å§‹å­¦ä¹ æ— äººé©¾é©¶æŠ€æœ¯ â€” è½¦é“æ£€æµ‹</a></li><li><a href="https://blog.csdn.net/u010665216/article/details/80152458" target="_blank" rel="noopener">æ— äººé©¾é©¶ä¹‹é«˜çº§è½¦é“çº¿æ£€æµ‹</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æŒ‘æˆ˜ä»»åŠ¡ï¼šå®é™…å…¬è·¯çš„è½¦é“çº¿æ£€æµ‹ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="è½¦é“æ£€æµ‹" scheme="http://www.codec.wang/tags/%E8%BD%A6%E9%81%93%E6%A3%80%E6%B5%8B/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹17ï¼šéœå¤«å˜æ¢</title>
    <link href="http://www.codec.wang/opencv-python-hough-transform/"/>
    <id>http://www.codec.wang/opencv-python-hough-transform/</id>
    <published>2017-12-28T03:35:11.000Z</published>
    <updated>2020-04-07T04:55:46.735Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ ä½¿ç”¨éœå¤«å˜æ¢è¯†åˆ«å‡ºå›¾åƒä¸­çš„ç›´çº¿å’Œåœ†ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>ç†è§£éœå¤«å˜æ¢çš„å®ç°</li><li>åˆ†åˆ«ä½¿ç”¨éœå¤«çº¿å˜æ¢å’Œåœ†å˜æ¢æ£€æµ‹å›¾åƒä¸­çš„ç›´çº¿å’Œåœ†</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.HoughLines()</code>, <code>cv2.HoughLinesP()</code>, <code>cv2.HoughCircles()</code></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><h3 id="ç†è§£éœå¤«å˜æ¢"><a href="#ç†è§£éœå¤«å˜æ¢" class="headerlink" title="ç†è§£éœå¤«å˜æ¢"></a>ç†è§£éœå¤«å˜æ¢</h3><p>éœå¤«å˜æ¢å¸¸ç”¨æ¥åœ¨å›¾åƒä¸­æå–ç›´çº¿å’Œåœ†ç­‰å‡ ä½•å½¢çŠ¶ï¼Œæˆ‘æ¥åšä¸ªç®€æ˜“çš„è§£é‡Šï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_hough_transform.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_hough_transform.jpg" alt=""></picture></p><p>å­¦è¿‡å‡ ä½•çš„éƒ½çŸ¥é“ï¼Œç›´çº¿å¯ä»¥åˆ†åˆ«ç”¨ç›´è§’åæ ‡ç³»å’Œæåæ ‡ç³»æ¥è¡¨ç¤ºï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_line_expression_in_coordinate.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_line_expression_in_coordinate.jpg" alt=""></picture></p><p>é‚£ä¹ˆç»è¿‡æŸä¸ªç‚¹(x0,y0)çš„æ‰€æœ‰ç›´çº¿éƒ½å¯ä»¥ç”¨è¿™ä¸ªå¼å­æ¥è¡¨ç¤ºï¼š</p><p>$$<br>r_\theta=x_0\cdot\cos \theta+y_0\cdot\sin \theta<br>$$</p><p>ä¹Ÿå°±æ˜¯è¯´æ¯ä¸€ä¸ª(r,Î¸)éƒ½è¡¨ç¤ºä¸€æ¡ç»è¿‡(x0,y0)ç›´çº¿ï¼Œé‚£ä¹ˆåŒä¸€æ¡ç›´çº¿ä¸Šçš„ç‚¹å¿…ç„¶ä¼šæœ‰åŒæ ·çš„(r,Î¸)ã€‚å¦‚æœå°†æŸä¸ªç‚¹æ‰€æœ‰çš„(r,Î¸)ç»˜åˆ¶æˆä¸‹é¢çš„æ›²çº¿ï¼Œé‚£ä¹ˆåŒä¸€æ¡ç›´çº¿ä¸Šçš„ç‚¹çš„(r,Î¸)æ›²çº¿ä¼šç›¸äº¤äºä¸€ç‚¹ï¼š</p><p>  <picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_curve_of_r_theta.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_curve_of_r_theta.jpg" alt=""></picture> </p><p>OpenCVä¸­é¦–å…ˆè®¡ç®—(r,Î¸) ç´¯åŠ æ•°ï¼Œç´¯åŠ æ•°è¶…è¿‡ä¸€å®šå€¼åå°±è®¤ä¸ºåœ¨åŒä¸€ç›´çº¿ä¸Šã€‚</p><h3 id="éœå¤«ç›´çº¿å˜æ¢"><a href="#éœå¤«ç›´çº¿å˜æ¢" class="headerlink" title="éœå¤«ç›´çº¿å˜æ¢"></a>éœå¤«ç›´çº¿å˜æ¢</h3><p>OpenCVä¸­ç”¨<code>cv2.HoughLines()</code>åœ¨äºŒå€¼å›¾ä¸Šå®ç°éœå¤«å˜æ¢ï¼Œå‡½æ•°è¿”å›çš„æ˜¯ä¸€ç»„ç›´çº¿çš„(r,Î¸)æ•°æ®ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.åŠ è½½å›¾ç‰‡ï¼Œè½¬ä¸ºäºŒå€¼å›¾</span></span><br><span class="line">img = cv2.imread(<span class="string">'shapes.jpg'</span>)</span><br><span class="line">drawing = np.zeros(img.shape[:], dtype=np.uint8)</span><br><span class="line">gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)</span><br><span class="line">edges = cv2.Canny(gray, <span class="number">50</span>, <span class="number">150</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.éœå¤«ç›´çº¿å˜æ¢</span></span><br><span class="line">lines = cv2.HoughLines(edges, <span class="number">0.8</span>, np.pi / <span class="number">180</span>, <span class="number">90</span>)</span><br></pre></td></tr></table></figure><p>å‡½æ•°ä¸­ï¼š</p><ul><li>å‚æ•°1ï¼šè¦æ£€æµ‹çš„äºŒå€¼å›¾ï¼ˆä¸€èˆ¬æ˜¯é˜ˆå€¼åˆ†å‰²æˆ–è¾¹ç¼˜æ£€æµ‹åçš„å›¾ï¼‰</li><li>å‚æ•°2ï¼šè·ç¦»rçš„ç²¾åº¦ï¼Œå€¼è¶Šå¤§ï¼Œè€ƒè™‘è¶Šå¤šçš„çº¿</li><li>å‚æ•°3ï¼šè§’åº¦Î¸çš„ç²¾åº¦ï¼Œå€¼è¶Šå°ï¼Œè€ƒè™‘è¶Šå¤šçš„çº¿</li><li>å‚æ•°4ï¼šç´¯åŠ æ•°é˜ˆå€¼ï¼Œå€¼è¶Šå°ï¼Œè€ƒè™‘è¶Šå¤šçš„çº¿</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3.å°†æ£€æµ‹çš„çº¿ç”»å‡ºæ¥ï¼ˆæ³¨æ„æ˜¯æåæ ‡å™¢ï¼‰</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">    rho, theta = line[<span class="number">0</span>]</span><br><span class="line">    a = np.cos(theta)</span><br><span class="line">    b = np.sin(theta)</span><br><span class="line">    x0 = a * rho</span><br><span class="line">    y0 = b * rho</span><br><span class="line">    x1 = int(x0 + <span class="number">1000</span> * (-b))</span><br><span class="line">    y1 = int(y0 + <span class="number">1000</span> * (a))</span><br><span class="line">    x2 = int(x0 - <span class="number">1000</span> * (-b))</span><br><span class="line">    y2 = int(y0 - <span class="number">1000</span> * (a))</span><br><span class="line"></span><br><span class="line">    cv2.line(drawing, (x1, y1), (x2, y2), (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>))</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_hough_line_function.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_hough_line_function.jpg" alt=""></picture></p><h3 id="ç»Ÿè®¡æ¦‚ç‡éœå¤«ç›´çº¿å˜æ¢"><a href="#ç»Ÿè®¡æ¦‚ç‡éœå¤«ç›´çº¿å˜æ¢" class="headerlink" title="ç»Ÿè®¡æ¦‚ç‡éœå¤«ç›´çº¿å˜æ¢"></a>ç»Ÿè®¡æ¦‚ç‡éœå¤«ç›´çº¿å˜æ¢</h3><p>å‰é¢çš„æ–¹æ³•åˆç§°ä¸ºæ ‡å‡†éœå¤«å˜æ¢ï¼Œå®ƒä¼šè®¡ç®—å›¾åƒä¸­çš„æ¯ä¸€ä¸ªç‚¹ï¼Œè®¡ç®—é‡æ¯”è¾ƒå¤§ï¼Œå¦å¤–å®ƒå¾—åˆ°çš„æ˜¯æ•´ä¸€æ¡çº¿ï¼ˆrå’ŒÎ¸ï¼‰ï¼Œå¹¶ä¸çŸ¥é“åŸå›¾ä¸­ç›´çº¿çš„ç«¯ç‚¹ã€‚æ‰€ä»¥æå‡ºäº†ç»Ÿè®¡æ¦‚ç‡éœå¤«ç›´çº¿å˜æ¢(Probabilistic Hough Transform)ï¼Œæ˜¯ä¸€ç§æ”¹è¿›çš„éœå¤«å˜æ¢ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">drawing = np.zeros(img.shape[:], dtype=np.uint8)</span><br><span class="line"><span class="comment"># 3.ç»Ÿè®¡æ¦‚ç‡éœå¤«çº¿å˜æ¢</span></span><br><span class="line">lines = cv2.HoughLinesP(edges, <span class="number">0.8</span>, np.pi / <span class="number">180</span>, <span class="number">90</span>,</span><br><span class="line">                        minLineLength=<span class="number">50</span>, maxLineGap=<span class="number">10</span>)</span><br></pre></td></tr></table></figure><p>å‰é¢å‡ ä¸ªå‚æ•°è·Ÿä¹‹å‰çš„ä¸€æ ·ï¼Œæœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼š</p><ul><li><code>minLineLength</code>ï¼šæœ€çŸ­é•¿åº¦é˜ˆå€¼ï¼Œæ¯”è¿™ä¸ªé•¿åº¦çŸ­çš„çº¿ä¼šè¢«æ’é™¤</li><li><code>maxLineGap</code>ï¼šåŒä¸€ç›´çº¿ä¸¤ç‚¹ä¹‹é—´çš„æœ€å¤§è·ç¦»</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3.å°†æ£€æµ‹çš„çº¿ç”»å‡ºæ¥</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">    x1, y1, x2, y2 = line[<span class="number">0</span>]</span><br><span class="line">    cv2.line(drawing, (x1, y1), (x2, y2), (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">1</span>, lineType=cv2.LINE_AA)</span><br></pre></td></tr></table></figure><p><code>cv2.LINE_AA</code>åœ¨ä¹‹å‰ç»˜å›¾åŠŸèƒ½ä¸­è®²è§£è¿‡ï¼Œè¡¨ç¤ºæŠ—é”¯é½¿çº¿å‹ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_hough_lines_p_function.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_hough_lines_p_function.jpg" alt=""></picture></p><h3 id="éœå¤«åœ†å˜æ¢"><a href="#éœå¤«åœ†å˜æ¢" class="headerlink" title="éœå¤«åœ†å˜æ¢"></a>éœå¤«åœ†å˜æ¢</h3><p>éœå¤«åœ†å˜æ¢è·Ÿç›´çº¿å˜æ¢ç±»ä¼¼ï¼Œåªä¸è¿‡çº¿æ˜¯ç”¨(r,Î¸)è¡¨ç¤ºï¼Œåœ†æ˜¯ç”¨(x_center,y_center,r)æ¥è¡¨ç¤ºï¼Œä»äºŒç»´å˜æˆäº†ä¸‰ç»´ï¼Œæ•°æ®é‡å˜å¤§äº†å¾ˆå¤šï¼›æ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨éœå¤«æ¢¯åº¦æ³•å‡å°‘è®¡ç®—é‡ï¼Œå¯¹è¯¥ç®—æ³•æ„Ÿå…´è¶£çš„åŒå­¦å¯å‚è€ƒï¼š<a href="https://en.wikipedia.org/wiki/Circle_Hough_Transform" target="_blank" rel="noopener">Circle Hough Transform</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">drawing = np.zeros(img.shape[:], dtype=np.uint8)</span><br><span class="line"><span class="comment"># 2.éœå¤«åœ†å˜æ¢</span></span><br><span class="line">circles = cv2.HoughCircles(edges, cv2.HOUGH_GRADIENT, <span class="number">1</span>, <span class="number">20</span>, param2=<span class="number">30</span>)</span><br><span class="line">circles = np.int0(np.around(circles))</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ</p><ul><li>å‚æ•°2ï¼šå˜æ¢æ–¹æ³•ï¼Œä¸€èˆ¬ä½¿ç”¨éœå¤«æ¢¯åº¦æ³•ï¼Œè¯¦æƒ…ï¼š<a href="https://docs.opencv.org/3.3.1/d7/dbd/group__imgproc.html#ga073687a5b96ac7a3ab5802eb5510fe65" target="_blank" rel="noopener">HoughModes</a></li><li>å‚æ•°3 dp=1ï¼šè¡¨ç¤ºéœå¤«æ¢¯åº¦æ³•ä¸­ç´¯åŠ å™¨å›¾åƒçš„åˆ†è¾¨ç‡ä¸åŸå›¾ä¸€è‡´</li><li>å‚æ•°4ï¼šä¸¤ä¸ªä¸åŒåœ†åœ†å¿ƒçš„æœ€çŸ­è·ç¦»</li><li>å‚æ•°5ï¼šparam2è·Ÿéœå¤«ç›´çº¿å˜æ¢ä¸­çš„ç´¯åŠ æ•°é˜ˆå€¼ä¸€æ ·</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†æ£€æµ‹çš„åœ†ç”»å‡ºæ¥</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> circles[<span class="number">0</span>, :]:</span><br><span class="line">    cv2.circle(drawing, (i[<span class="number">0</span>], i[<span class="number">1</span>]), i[<span class="number">2</span>], (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)  <span class="comment"># ç”»å‡ºå¤–åœ†</span></span><br><span class="line">    cv2.circle(drawing, (i[<span class="number">0</span>], i[<span class="number">1</span>]), <span class="number">2</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">3</span>)  <span class="comment"># ç”»å‡ºåœ†å¿ƒ</span></span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_hough_circles_function.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_hough_circles_function.jpg" alt=""></picture></p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li>éœå¤«å˜æ¢ç”¨æ¥æå–å›¾åƒä¸­çš„ç›´çº¿å’Œåœ†ç­‰å‡ ä½•å½¢çŠ¶ã€‚</li><li>éœå¤«ç›´çº¿å˜æ¢ï¼š<code>cv2.HoughLines()</code>ï¼ˆæ•´æ¡ç›´çº¿ï¼‰, <code>cv2.HoughLinesP()</code>ã€‚</li><li>éœå¤«åœ†å˜æ¢ï¼š<code>cv2.HoughCircles()</code>ã€‚</li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/17.%20%E9%9C%8D%E5%A4%AB%E5%8F%98%E6%8D%A2" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_houghlines/py_houghlines.html" target="_blank" rel="noopener">Hough Line Transform</a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_houghcircles/py_houghcircles.html" target="_blank" rel="noopener">Hough Circle Transform</a></li><li><a href="https://en.wikipedia.org/wiki/Hough_transform" target="_blank" rel="noopener">Hough transform</a></li><li><a href="https://blog.csdn.net/YuYunTan/article/details/80141392" target="_blank" rel="noopener">ç»å…¸éœå¤«å˜æ¢ï¼ˆHough Transformï¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ ä½¿ç”¨éœå¤«å˜æ¢è¯†åˆ«å‡ºå›¾åƒä¸­çš„ç›´çº¿å’Œåœ†ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="éœå¤«å˜æ¢" scheme="http://www.codec.wang/tags/%E9%9C%8D%E5%A4%AB%E5%8F%98%E6%8D%A2/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹16ï¼šæ¨¡æ¿åŒ¹é…</title>
    <link href="http://www.codec.wang/opencv-python-template-matching/"/>
    <id>http://www.codec.wang/opencv-python-template-matching/</id>
    <published>2017-12-27T08:45:31.000Z</published>
    <updated>2020-04-07T04:56:15.137Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ ä½¿ç”¨æ¨¡æ¿åŒ¹é…åœ¨å›¾åƒä¸­å¯»æ‰¾ç‰©ä½“ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>ä½¿ç”¨æ¨¡æ¿åŒ¹é…åœ¨å›¾åƒä¸­å¯»æ‰¾ç‰©ä½“</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.matchTemplate()</code>, <code>cv2.minMaxLoc()</code></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><h3 id="æ¨¡æ¿åŒ¹é…"><a href="#æ¨¡æ¿åŒ¹é…" class="headerlink" title="æ¨¡æ¿åŒ¹é…"></a>æ¨¡æ¿åŒ¹é…</h3><p><a href="https://baike.baidu.com/item/æ¨¡æ¿åŒ¹é…" target="_blank" rel="noopener">æ¨¡æ¿åŒ¹é…</a>å°±æ˜¯ç”¨æ¥åœ¨å¤§å›¾ä¸­æ‰¾å°å›¾ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ä¸€å‰¯å›¾åƒä¸­å¯»æ‰¾å¦å¤–ä¸€å¼ æ¨¡æ¿å›¾åƒçš„ä½ç½®ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_template_matching.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_template_matching.jpg" alt=""></picture></p><p>ç”¨<code>cv2.matchTemplate()</code>å®ç°æ¨¡æ¿åŒ¹é…ã€‚é¦–å…ˆæˆ‘ä»¬æ¥è¯»å…¥å›¾ç‰‡å’Œæ¨¡æ¿ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'lena.jpg'</span>, <span class="number">0</span>)</span><br><span class="line">template = cv2.imread(<span class="string">'face.jpg'</span>, <span class="number">0</span>)</span><br><span class="line">h, w = template.shape[:<span class="number">2</span>]  <span class="comment"># rows-&gt;h, cols-&gt;w</span></span><br></pre></td></tr></table></figure><p>åŒ¹é…å‡½æ•°è¿”å›çš„æ˜¯ä¸€å‰¯ç°åº¦å›¾ï¼Œæœ€ç™½çš„åœ°æ–¹è¡¨ç¤ºæœ€å¤§çš„åŒ¹é…ã€‚ä½¿ç”¨<code>cv2.minMaxLoc()</code>å‡½æ•°å¯ä»¥å¾—åˆ°æœ€å¤§åŒ¹é…å€¼çš„åæ ‡ï¼Œä»¥è¿™ä¸ªç‚¹ä¸ºå·¦ä¸Šè§’è§’ç‚¹ï¼Œæ¨¡æ¿çš„å®½å’Œé«˜ç”»çŸ©å½¢å°±æ˜¯åŒ¹é…çš„ä½ç½®äº†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç›¸å…³ç³»æ•°åŒ¹é…æ–¹æ³•ï¼šcv2.TM_CCOEFF</span></span><br><span class="line">res = cv2.matchTemplate(img, template, cv2.TM_CCOEFF)</span><br><span class="line">min_val, max_val, min_loc, max_loc = cv2.minMaxLoc(res)</span><br><span class="line"></span><br><span class="line">left_top = max_loc  <span class="comment"># å·¦ä¸Šè§’</span></span><br><span class="line">right_bottom = (left_top[<span class="number">0</span>] + w, left_top[<span class="number">1</span>] + h)  <span class="comment"># å³ä¸‹è§’</span></span><br><span class="line">cv2.rectangle(img, left_top, right_bottom, <span class="number">255</span>, <span class="number">2</span>)  <span class="comment"># ç”»å‡ºçŸ©å½¢ä½ç½®</span></span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_ccoeff_matching_template.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_ccoeff_matching_template.jpg" alt=""></picture></p><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><blockquote><p>è¿™éƒ¨åˆ†å¯çœ‹å¯ä¸çœ‹ï¼Œä¸å¤ªç†è§£ä¹Ÿæ²¡å…³ç³»ï¼Œè¿˜è®°å¾—å‰é¢çš„æ–¹æ³•å—ï¼Ÿä¸æ‡‚å¾—å°±åˆ’æ‰(âœ¿â—•â€¿â—•âœ¿)</p></blockquote><p>æ¨¡æ¿åŒ¹é…çš„åŸç†å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸æ–­åœ°åœ¨åŸå›¾ä¸­ç§»åŠ¨æ¨¡æ¿å›¾åƒå»æ¯”è¾ƒï¼Œæœ‰6ç§ä¸åŒçš„æ¯”è¾ƒæ–¹æ³•ï¼Œè¯¦æƒ…å¯å‚è€ƒï¼š<a href="https://docs.opencv.org/3.3.1/df/dfb/group__imgproc__object.html#ga3a7850640f1fe1f58fe91a2d7583695d" target="_blank" rel="noopener">TemplateMatchModes</a></p><ul><li>å¹³æ–¹å·®åŒ¹é…CV_TM_SQDIFFï¼šç”¨ä¸¤è€…çš„å¹³æ–¹å·®æ¥åŒ¹é…ï¼Œæœ€å¥½çš„åŒ¹é…å€¼ä¸º0</li><li>å½’ä¸€åŒ–å¹³æ–¹å·®åŒ¹é…CV_TM_SQDIFF_NORMED</li><li>ç›¸å…³åŒ¹é…CV_TM_CCORRï¼šç”¨ä¸¤è€…çš„ä¹˜ç§¯åŒ¹é…ï¼Œæ•°å€¼è¶Šå¤§è¡¨æ˜åŒ¹é…ç¨‹åº¦è¶Šå¥½</li><li>å½’ä¸€åŒ–ç›¸å…³åŒ¹é…CV_TM_CCORR_NORMED</li><li>ç›¸å…³ç³»æ•°åŒ¹é…CV_TM_CCOEFFï¼šç”¨ä¸¤è€…çš„ç›¸å…³ç³»æ•°åŒ¹é…ï¼Œ1è¡¨ç¤ºå®Œç¾çš„åŒ¹é…ï¼Œ-1è¡¨ç¤ºæœ€å·®çš„åŒ¹é…</li><li>å½’ä¸€åŒ–ç›¸å…³ç³»æ•°åŒ¹é…CV_TM_CCOEFF_NORMED</li></ul><p>å½’ä¸€åŒ–çš„æ„æ€å°±æ˜¯å°†å€¼ç»Ÿä¸€åˆ°0~1ï¼Œè¿™äº›æ–¹æ³•çš„å¯¹æ¯”ä»£ç å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>æŸ¥çœ‹ã€‚æ¨¡æ¿åŒ¹é…ä¹Ÿæ˜¯åº”ç”¨å·ç§¯æ¥å®ç°çš„ï¼šå‡è®¾åŸå›¾å¤§å°ä¸ºWÃ—Hï¼Œæ¨¡æ¿å›¾å¤§å°ä¸ºwÃ—hï¼Œé‚£ä¹ˆç”Ÿæˆå›¾å¤§å°æ˜¯(W-w+1)Ã—(H-h+1)ï¼Œç”Ÿæˆå›¾ä¸­çš„æ¯ä¸ªåƒç´ å€¼è¡¨ç¤ºåŸå›¾ä¸æ¨¡æ¿çš„åŒ¹é…ç¨‹åº¦ã€‚</p><h3 id="åŒ¹é…å¤šä¸ªç‰©ä½“"><a href="#åŒ¹é…å¤šä¸ªç‰©ä½“" class="headerlink" title="åŒ¹é…å¤šä¸ªç‰©ä½“"></a>åŒ¹é…å¤šä¸ªç‰©ä½“</h3><p>å‰é¢æˆ‘ä»¬æ˜¯æ‰¾æœ€å¤§åŒ¹é…çš„ç‚¹ï¼Œæ‰€ä»¥åªèƒ½åŒ¹é…ä¸€æ¬¡ã€‚æˆ‘ä»¬å¯ä»¥è®¾å®šä¸€ä¸ªåŒ¹é…é˜ˆå€¼æ¥åŒ¹é…å¤šæ¬¡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.è¯»å…¥åŸå›¾å’Œæ¨¡æ¿</span></span><br><span class="line">img_rgb = cv2.imread(<span class="string">'mario.jpg'</span>)</span><br><span class="line">img_gray = cv2.cvtColor(img_rgb, cv2.COLOR_BGR2GRAY)</span><br><span class="line">template = cv2.imread(<span class="string">'mario_coin.jpg'</span>, <span class="number">0</span>)</span><br><span class="line">h, w = template.shape[:<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.æ ‡å‡†ç›¸å…³æ¨¡æ¿åŒ¹é…</span></span><br><span class="line">res = cv2.matchTemplate(img_gray, template, cv2.TM_CCOEFF_NORMED)</span><br><span class="line">threshold = <span class="number">0.8</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.è¿™è¾¹æ˜¯Python/Numpyçš„çŸ¥è¯†ï¼Œåé¢è§£é‡Š</span></span><br><span class="line">loc = np.where(res &gt;= threshold)  <span class="comment"># åŒ¹é…ç¨‹åº¦å¤§äº%80çš„åæ ‡y,x</span></span><br><span class="line"><span class="keyword">for</span> pt <span class="keyword">in</span> zip(*loc[::<span class="number">-1</span>]):  <span class="comment"># *å·è¡¨ç¤ºå¯é€‰å‚æ•°</span></span><br><span class="line">    right_bottom = (pt[<span class="number">0</span>] + w, pt[<span class="number">1</span>] + h)</span><br><span class="line">    cv2.rectangle(img_rgb, pt, right_bottom, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_template_matching_multi.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_template_matching_multi.jpg" alt=""></picture></p><p>ç¬¬3æ­¥æœ‰å‡ ä¸ªPython/Numpyçš„é‡è¦çŸ¥è¯†ï¼Œæ¥å¤§è‡´çœ‹ä¸‹ï¼š</p><ul><li><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html" target="_blank" rel="noopener">np.where()</a>åœ¨è¿™é‡Œè¿”å›resä¸­å€¼å¤§äº0.8çš„æ‰€æœ‰åæ ‡ï¼Œå¦‚ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = np.arange(<span class="number">9.</span>).reshape(<span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line">print(np.where(x &gt; <span class="number">5</span>))</span><br><span class="line"><span class="comment"># ç»“æœ(å…ˆyåæ ‡ï¼Œå†xåæ ‡)ï¼š(array([2, 2, 2]), array([0, 1, 2]))</span></span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_np_where_function.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_np_where_function.jpg" alt=""></picture></p><ul><li><a href="https://docs.python.org/3/library/functions.html#zip" target="_blank" rel="noopener">zip()</a>å‡½æ•°ï¼ŒåŠŸèƒ½å¼ºå¤§åˆ°éš¾ä»¥è§£é‡Šï¼Œä¸¾ä¸ªç®€å•ä¾‹å­å°±çŸ¥é“äº†ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">y = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">print(list(zip(x, y)))  <span class="comment"># [(1, 4), (2, 5), (3, 6)]</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å¤§å®¶å°±èƒ½ç†è§£å‰é¢ä»£ç çš„ç”¨æ³•äº†å§ï¼šå› ä¸ºlocæ˜¯å…ˆyåæ ‡å†xåæ ‡ï¼Œæ‰€ä»¥ç”¨loc[::-1]ç¿»è½¬ä¸€ä¸‹ï¼Œç„¶åå†ç”¨zipå‡½æ•°æ‹¼æ¥åœ¨ä¸€èµ·ã€‚</p><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><ol><li>ä¹‹å‰æˆ‘ä»¬æœ‰å­¦è¿‡å½¢çŠ¶åŒ¹é…ï¼Œä¸è®ºå½¢çŠ¶æ—‹è½¬/ç¼©æ”¾éƒ½å¯ä»¥åŒ¹é…åˆ°ã€‚æ€è€ƒä¸€ä¸‹ï¼Œå›¾ç‰‡æ—‹è½¬æˆ–ç¼©æ”¾çš„è¯æ¨¡æ¿åŒ¹é…è¿˜æœ‰ä½œç”¨å—ï¼Ÿ</li></ol><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li>æ¨¡æ¿åŒ¹é…ç”¨æ¥åœ¨å¤§å›¾ä¸­æ‰¾å°å›¾ã€‚</li><li><code>cv2.matchTemplate()</code>ç”¨æ¥è¿›è¡Œæ¨¡æ¿åŒ¹é…ã€‚</li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/16.%20%E6%A8%A1%E6%9D%BF%E5%8C%B9%E9%85%8D" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_template_matching/py_template_matching.html" target="_blank" rel="noopener">Template Matching</a></li><li><a href="http://www.opencv.org.cn/opencvdoc/2.3.2/html/doc/tutorials/imgproc/histograms/template_matching/template_matching.html#template-matching" target="_blank" rel="noopener">æ¨¡æ¿åŒ¹é…</a></li><li><a href="https://docs.opencv.org/3.3.1/df/dfb/group__imgproc__object.html#ga3a7850640f1fe1f58fe91a2d7583695d" target="_blank" rel="noopener">TemplateMatchModes</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ ä½¿ç”¨æ¨¡æ¿åŒ¹é…åœ¨å›¾åƒä¸­å¯»æ‰¾ç‰©ä½“ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="æ¨¡æ¿åŒ¹é…" scheme="http://www.codec.wang/tags/%E6%A8%A1%E6%9D%BF%E5%8C%B9%E9%85%8D/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹15ï¼šç›´æ–¹å›¾</title>
    <link href="http://www.codec.wang/opencv-python-histograms/"/>
    <id>http://www.codec.wang/opencv-python-histograms/</id>
    <published>2017-12-23T09:48:30.000Z</published>
    <updated>2020-04-07T04:56:40.764Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ è®¡ç®—å¹¶ç»˜åˆ¶ç›´æ–¹å›¾ï¼Œç›´æ–¹å›¾å‡è¡¡åŒ–ç­‰ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>è®¡ç®—å¹¶ç»˜åˆ¶ç›´æ–¹å›¾</li><li>ï¼ˆè‡ªé€‚åº”ï¼‰ç›´æ–¹å›¾å‡è¡¡åŒ–</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.calcHist()</code>, <code>cv2.equalizeHist()</code></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><h3 id="å•¥å«ç›´æ–¹å›¾"><a href="#å•¥å«ç›´æ–¹å›¾" class="headerlink" title="å•¥å«ç›´æ–¹å›¾"></a>å•¥å«ç›´æ–¹å›¾</h3><p>ç›´æ–¹å›¾ç®€å•æ¥è¯´å°±æ˜¯å›¾åƒä¸­æ¯ä¸ªåƒç´ å€¼çš„ä¸ªæ•°ç»Ÿè®¡ï¼Œæ¯”å¦‚è¯´ä¸€å‰¯ç°åº¦å›¾ä¸­åƒç´ å€¼ä¸º0çš„æœ‰å¤šå°‘ä¸ªï¼Œ1çš„æœ‰å¤šå°‘ä¸ªâ€¦â€¦ç›´æ–¹å›¾æ˜¯ä¸€ç§åˆ†æå›¾ç‰‡çš„æ‰‹æ®µï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_histogram.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_histogram.jpg" alt=""></picture></p><p>åœ¨è®¡ç®—ç›´æ–¹å›¾ä¹‹å‰ï¼Œæœ‰å‡ ä¸ªæœ¯è¯­å…ˆæ¥äº†è§£ä¸€ä¸‹ï¼š</p><ul><li>dimsï¼šè¦è®¡ç®—çš„é€šé“æ•°ï¼Œå¯¹äºç°åº¦å›¾dims=1ï¼Œæ™®é€šå½©è‰²å›¾dims=3</li><li>rangeï¼šè¦è®¡ç®—çš„åƒç´ å€¼èŒƒå›´ï¼Œä¸€èˆ¬ä¸º[0,256)</li><li>binsï¼šå­åŒºæ®µæ•°ç›®ï¼Œå¦‚æœæˆ‘ä»¬ç»Ÿè®¡0<del>255æ¯ä¸ªåƒç´ å€¼ï¼Œbins=256ï¼›å¦‚æœåˆ’åˆ†åŒºé—´ï¼Œæ¯”å¦‚0</del>15, 16<del>31â€¦240</del>255è¿™æ ·16ä¸ªåŒºé—´ï¼Œbins=16</li></ul><h3 id="è®¡ç®—ç›´æ–¹å›¾"><a href="#è®¡ç®—ç›´æ–¹å›¾" class="headerlink" title="è®¡ç®—ç›´æ–¹å›¾"></a>è®¡ç®—ç›´æ–¹å›¾</h3><p>OpenCVå’ŒNumpyä¸­éƒ½æä¾›äº†è®¡ç®—ç›´æ–¹å›¾çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯¹æ¯”ä¸‹å®ƒä»¬çš„æ€§èƒ½ã€‚</p><h4 id="OpenCVä¸­ç›´æ–¹å›¾è®¡ç®—"><a href="#OpenCVä¸­ç›´æ–¹å›¾è®¡ç®—" class="headerlink" title="OpenCVä¸­ç›´æ–¹å›¾è®¡ç®—"></a>OpenCVä¸­ç›´æ–¹å›¾è®¡ç®—</h4><p>ä½¿ç”¨<code>cv2.calcHist(images, channels, mask, histSize, ranges)</code>è®¡ç®—ï¼Œå…¶ä¸­ï¼š</p><ul><li>å‚æ•°1ï¼šè¦è®¡ç®—çš„åŸå›¾ï¼Œä»¥æ–¹æ‹¬å·çš„ä¼ å…¥ï¼Œå¦‚ï¼š[img]</li><li>å‚æ•°2ï¼šç±»ä¼¼å‰é¢æåˆ°çš„dimsï¼Œç°åº¦å›¾å†™[0]å°±è¡Œï¼Œå½©è‰²å›¾B/G/Råˆ†åˆ«ä¼ å…¥[0]/[1]/[2]</li><li>å‚æ•°3ï¼šè¦è®¡ç®—çš„åŒºåŸŸï¼Œè®¡ç®—æ•´å¹…å›¾çš„è¯ï¼Œå†™None</li><li>å‚æ•°4ï¼šå‰é¢æåˆ°çš„bins</li><li>å‚æ•°5ï¼šå‰é¢æåˆ°çš„range</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'hist.jpg'</span>, <span class="number">0</span>)</span><br><span class="line">hist = cv2.calcHist([img], [<span class="number">0</span>], <span class="literal">None</span>, [<span class="number">256</span>], [<span class="number">0</span>, <span class="number">256</span>])  <span class="comment"># æ€§èƒ½ï¼š0.025288 s</span></span><br></pre></td></tr></table></figure><h4 id="Numpyä¸­ç›´æ–¹å›¾è®¡ç®—"><a href="#Numpyä¸­ç›´æ–¹å›¾è®¡ç®—" class="headerlink" title="Numpyä¸­ç›´æ–¹å›¾è®¡ç®—"></a>Numpyä¸­ç›´æ–¹å›¾è®¡ç®—</h4><p>ä¹Ÿå¯ç”¨Numpyçš„å‡½æ•°è®¡ç®—ï¼Œå…¶ä¸­<a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html" target="_blank" rel="noopener">ravel()</a>å‡½æ•°å°†äºŒç»´çŸ©é˜µå±•å¹³å˜æˆä¸€ç»´æ•°ç»„ï¼Œä¹‹å‰æœ‰æåˆ°è¿‡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hist, bins = np.histogram(img.ravel(), <span class="number">256</span>, [<span class="number">0</span>, <span class="number">256</span>])  <span class="comment"># æ€§èƒ½ï¼š0.020628 s</span></span><br></pre></td></tr></table></figure><blockquote><p>ç»éªŒä¹‹è°ˆï¼šNumpyä¸­è¿˜æœ‰ä¸€ç§æ›´é«˜æ•ˆçš„æ–¹å¼ï¼šï¼ˆè¿˜è®°å¾—æ€ä¹ˆè¯„ä¼°æ€§èƒ½å—ï¼š<a href="/opencv-python-extra-code-optimization/">ç•ªå¤–ç¯‡ï¼šä»£ç æ€§èƒ½ä¼˜åŒ–</a>ï¼‰</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hist = np.bincount(img.ravel(), minlength=<span class="number">256</span>)  <span class="comment"># æ€§èƒ½ï¼š0.003163 s</span></span><br></pre></td></tr></table></figure><p>è®¡ç®—å‡ºç›´æ–¹å›¾ä¹‹åï¼Œæ€ä¹ˆæŠŠå®ƒç”»å‡ºæ¥å‘¢ï¼Ÿ</p><h3 id="ç»˜åˆ¶ç›´æ–¹å›¾"><a href="#ç»˜åˆ¶ç›´æ–¹å›¾" class="headerlink" title="ç»˜åˆ¶ç›´æ–¹å›¾"></a>ç»˜åˆ¶ç›´æ–¹å›¾</h3><p>å…¶å®Matplotlibè‡ªå¸¦äº†ä¸€ä¸ªè®¡ç®—å¹¶ç»˜åˆ¶ç›´æ–¹å›¾çš„åŠŸèƒ½ï¼Œä¸éœ€è¦ç”¨åˆ°ä¸Šé¢çš„å‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.hist(img.ravel(), <span class="number">256</span>, [<span class="number">0</span>, <span class="number">256</span>])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç”¨å‰é¢è®¡ç®—å‡ºæ¥çš„ç»“æœç»˜åˆ¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(hist)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_calc_draw_histogram.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_calc_draw_histogram.jpg" alt=""></picture></p><p>ä»ç›´æ–¹å›¾ä¸Šå¯ä»¥çœ‹åˆ°å›¾ç‰‡çš„å¤§éƒ¨åˆ†åŒºåŸŸé›†ä¸­åœ¨150åç™½çš„é™„è¿‘ï¼Œè¿™å…¶å®å¹¶ä¸æ˜¯å¾ˆå¥½çš„æ•ˆæœï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•æ”¹å–„å®ƒã€‚</p><blockquote><p>ä½¿ç”¨OpenCVçš„ç”»çº¿åŠŸèƒ½ä¹Ÿå¯ä»¥ç”»ç›´æ–¹å›¾ï¼Œä¸è¿‡å¤ªéº»çƒ¦äº†ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹ä¸‹å®˜æ–¹ç¤ºä¾‹ï¼š<a href="https://github.com/opencv/opencv/blob/master/samples/python/hist.py" target="_blank" rel="noopener">hist.py</a>ã€‚</p></blockquote><h3 id="ç›´æ–¹å›¾å‡è¡¡åŒ–"><a href="#ç›´æ–¹å›¾å‡è¡¡åŒ–" class="headerlink" title="ç›´æ–¹å›¾å‡è¡¡åŒ–"></a>ç›´æ–¹å›¾å‡è¡¡åŒ–</h3><p>ä¸€å‰¯æ•ˆæœå¥½çš„å›¾åƒé€šå¸¸åœ¨ç›´æ–¹å›¾ä¸Šçš„åˆ†å¸ƒæ¯”è¾ƒå‡åŒ€ï¼Œç›´æ–¹å›¾å‡è¡¡åŒ–å°±æ˜¯ç”¨æ¥æ”¹å–„å›¾åƒçš„å…¨å±€äº®åº¦å’Œå¯¹æ¯”åº¦ã€‚å…¶å®ä»è§‚æ„Ÿä¸Šå°±å¯ä»¥å‘ç°ï¼Œå‰é¢é‚£å¹…å›¾å¯¹æ¯”åº¦ä¸é«˜ï¼Œåç°ç™½ã€‚å¯¹å‡è¡¡åŒ–ç®—æ³•æ„Ÿå…´è¶£çš„åŒå­¦å¯å‚è€ƒï¼š<a href="https://zh.wikipedia.org/wiki/%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%9D%87%E8%A1%A1%E5%8C%96" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘ï¼šç›´æ–¹å›¾å‡è¡¡åŒ–</a></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_histogram_equalization.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_histogram_equalization.jpg" alt=""></picture></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">equ = cv2.equalizeHist(img)</span><br></pre></td></tr></table></figure><p>OpenCVä¸­ç”¨<code>cv2.equalizeHist()</code>å®ç°å‡è¡¡åŒ–ã€‚æˆ‘ä»¬æŠŠä¸¤å¼ å›¾ç‰‡å¹¶æ’æ˜¾ç¤ºï¼Œå¯¹æ¯”ä¸€ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv2.imshow(<span class="string">'equalization'</span>, np.hstack((img, equ)))  <span class="comment"># å¹¶æ’æ˜¾ç¤º</span></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_before_after_equalization.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_before_after_equalization.jpg" alt=""></picture></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_before_after_equalization_histogram.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_before_after_equalization_histogram.jpg" alt="å‡è¡¡åŒ–å‰åçš„ç›´æ–¹å›¾å¯¹æ¯”"></picture></p><p>å¯ä»¥çœ‹åˆ°å‡è¡¡åŒ–åå›¾ç‰‡çš„äº®åº¦å’Œå¯¹æ¯”åº¦æ•ˆæœæ˜æ˜¾å¥½äºåŸå›¾ã€‚</p><h3 id="è‡ªé€‚åº”å‡è¡¡åŒ–"><a href="#è‡ªé€‚åº”å‡è¡¡åŒ–" class="headerlink" title="è‡ªé€‚åº”å‡è¡¡åŒ–"></a>è‡ªé€‚åº”å‡è¡¡åŒ–</h3><p>ä¸éš¾çœ‹å‡ºæ¥ï¼Œç›´æ–¹å›¾å‡è¡¡åŒ–æ˜¯åº”ç”¨äºæ•´å¹…å›¾ç‰‡çš„ï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿçœ‹ä¸‹å›¾ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_adaptive_histogram.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_adaptive_histogram.jpg" alt=""></picture></p><p>å¾ˆæ˜æ˜¾ï¼Œå› ä¸ºå…¨å±€è°ƒæ•´äº®åº¦å’Œå¯¹æ¯”åº¦çš„åŸå› ï¼Œè„¸éƒ¨å¤ªäº®ï¼Œå¤§éƒ¨åˆ†ç»†èŠ‚éƒ½ä¸¢å¤±äº†ã€‚</p><p>è‡ªé€‚åº”å‡è¡¡åŒ–å°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸€é—®é¢˜çš„ï¼šå®ƒåœ¨æ¯ä¸€ä¸ªå°åŒºåŸŸå†…ï¼ˆé»˜è®¤8Ã—8ï¼‰è¿›è¡Œç›´æ–¹å›¾å‡è¡¡åŒ–ã€‚å½“ç„¶ï¼Œå¦‚æœæœ‰å™ªç‚¹çš„è¯ï¼Œå™ªç‚¹ä¼šè¢«æ”¾å¤§ï¼Œéœ€è¦å¯¹å°åŒºåŸŸå†…çš„å¯¹æ¯”åº¦è¿›è¡Œäº†é™åˆ¶ï¼Œæ‰€ä»¥è¿™ä¸ªç®—æ³•å…¨ç§°å«ï¼š<strong>å¯¹æ¯”åº¦å—é™çš„è‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡åŒ–</strong>CLAHE(<a href="https://en.wikipedia.org/wiki/Adaptive_histogram_equalization" target="_blank" rel="noopener">Contrast Limited Adaptive Histogram Equalization</a>)ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è‡ªé€‚åº”å‡è¡¡åŒ–ï¼Œå‚æ•°å¯é€‰</span></span><br><span class="line">clahe = cv2.createCLAHE(clipLimit=<span class="number">2.0</span>, tileGridSize=(<span class="number">8</span>, <span class="number">8</span>))</span><br><span class="line">cl1 = clahe.apply(img)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_adaptive_histogram.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_adaptive_histogram.jpg" alt=""></picture></p><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><ol><li><code>cv2.calcHist()</code>å‡½æ•°ä¸­çš„å‚æ•°3æ˜¯æŒ‡è¦è®¡ç®—çš„åŒºåŸŸ(maskï¼šç›®æ ‡åŒºåŸŸç™½è‰²ï¼Œå…¶ä½™é»‘è‰²)ï¼Œç¼–å†™ä¸€ä¸ªåªè®¡ç®—å›¾ç‰‡å·¦ä¸Šè§’200Ã—200åŒºåŸŸç›´æ–¹å›¾çš„ç¨‹åºã€‚</li></ol><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_histogram_mask.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_histogram_mask.jpg" alt=""></picture></p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li>ç›´æ–¹å›¾æ˜¯ä¸€ç§åˆ†æå›¾åƒçš„æ‰‹æ®µã€‚</li><li><code>cv2.calcHist()</code>å’Œ<code>numpy.bincount()</code>å‡å¯ç”¨æ¥è®¡ç®—ç›´æ–¹å›¾ï¼Œä½¿ç”¨Matplotlibç»˜åˆ¶ç›´æ–¹å›¾ã€‚</li><li>å‡è¡¡åŒ–ç”¨æ¥ä½¿å›¾åƒçš„ç›´æ–¹å›¾åˆ†å¸ƒæ›´åŠ å‡åŒ€ï¼Œæå‡äº®åº¦å’Œå¯¹æ¯”åº¦ã€‚</li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/15.%20%E7%9B%B4%E6%96%B9%E5%9B%BE" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_histograms/py_histogram_begins/py_histogram_begins.html#histograms-getting-started" target="_blank" rel="noopener">Histograms - 1 : Find, Plot, Analyze !!!</a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_histograms/py_histogram_equalization/py_histogram_equalization.html#histogram-equalization" target="_blank" rel="noopener">Histograms - 2: Histogram Equalization</a></li><li><a href="https://zh.wikipedia.org/wiki/%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%9D%87%E8%A1%A1%E5%8C%96" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘ï¼šç›´æ–¹å›¾å‡è¡¡åŒ–</a></li><li><a href="https://en.wikipedia.org/wiki/Adaptive_histogram_equalization" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘ï¼šè‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡åŒ–</a></li><li><a href="http://www.cambridgeincolour.com/tutorials/histograms1.htm" target="_blank" rel="noopener">Cambridge in Color website</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ è®¡ç®—å¹¶ç»˜åˆ¶ç›´æ–¹å›¾ï¼Œç›´æ–¹å›¾å‡è¡¡åŒ–ç­‰ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="ç›´æ–¹å›¾" scheme="http://www.codec.wang/tags/%E7%9B%B4%E6%96%B9%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹14ï¼šè½®å»“ç‰¹å¾</title>
    <link href="http://www.codec.wang/opencv-python-contour-features/"/>
    <id>http://www.codec.wang/opencv-python-contour-features/</id>
    <published>2017-12-20T10:46:19.000Z</published>
    <updated>2020-04-07T04:57:04.954Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ è®¡ç®—è½®å»“ç‰¹å¾ï¼Œå¦‚é¢ç§¯ã€å‘¨é•¿ã€æœ€å°å¤–æ¥çŸ©å½¢ç­‰ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>è®¡ç®—ç‰©ä½“çš„å‘¨é•¿ã€é¢ç§¯ã€è´¨å¿ƒã€æœ€å°å¤–æ¥çŸ©å½¢ç­‰</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.contourArea()</code>, <code>cv2.arcLength()</code>, <code>cv2.approxPolyDP()</code> ç­‰</li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><p>åœ¨è®¡ç®—è½®å»“ç‰¹å¾ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç”¨ä¸Šä¸€èŠ‚çš„ä»£ç æŠŠè½®å»“æ‰¾åˆ°ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_31_handwriting_sample.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_31_handwriting_sample.jpg" alt=""></picture></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'handwriting.jpg'</span>, <span class="number">0</span>)</span><br><span class="line">_, thresh = cv2.threshold(img, <span class="number">0</span>, <span class="number">255</span>, cv2.THRESH_BINARY_INV + cv2.THRESH_OTSU)</span><br><span class="line">image, contours, hierarchy = cv2.findContours(thresh, <span class="number">3</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥æ•°å­—3çš„è½®å»“ä¸ºä¾‹</span></span><br><span class="line">cnt = contours[<span class="number">0</span>]</span><br></pre></td></tr></table></figure><p>ä¸ºäº†ä¾¿äºç»˜åˆ¶ï¼Œæˆ‘ä»¬åˆ›å»ºå‡ºä¸¤å¹…å½©è‰²å›¾ï¼Œå¹¶æŠŠè½®å»“ç”»åœ¨ç¬¬ä¸€å¹…å›¾ä¸Šï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">img_color1 = cv2.cvtColor(image, cv2.COLOR_GRAY2BGR)</span><br><span class="line">img_color2 = np.copy(img_color1)</span><br><span class="line">cv2.drawContours(img_color1, [cnt], <span class="number">0</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br></pre></td></tr></table></figure><h3 id="è½®å»“é¢ç§¯"><a href="#è½®å»“é¢ç§¯" class="headerlink" title="è½®å»“é¢ç§¯"></a>è½®å»“é¢ç§¯</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">area = cv2.contourArea(cnt)  <span class="comment"># 4386.5</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„è½®å»“ç‰¹å¾è®¡ç®—çš„ç»“æœå¹¶ä¸ç­‰åŒäºåƒç´ ç‚¹çš„ä¸ªæ•°ï¼Œè€Œæ˜¯æ ¹æ®å‡ ä½•æ–¹æ³•ç®—å‡ºæ¥çš„ï¼Œæ‰€ä»¥æœ‰å°æ•°ã€‚</p><blockquote><p>å¦‚æœç»Ÿè®¡äºŒå€¼å›¾ä¸­åƒç´ ç‚¹ä¸ªæ•°ï¼Œåº”å°½é‡é¿å…å¾ªç¯ï¼Œ<strong>å¯ä»¥ä½¿ç”¨<code>cv2.countNonZero()</code></strong>ï¼Œæ›´åŠ é«˜æ•ˆã€‚</p></blockquote><h3 id="è½®å»“å‘¨é•¿"><a href="#è½®å»“å‘¨é•¿" class="headerlink" title="è½®å»“å‘¨é•¿"></a>è½®å»“å‘¨é•¿</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">perimeter = cv2.arcLength(cnt, <span class="literal">True</span>)  <span class="comment"># 585.7</span></span><br></pre></td></tr></table></figure><p>å‚æ•°2è¡¨ç¤ºè½®å»“æ˜¯å¦å°é—­ï¼Œæ˜¾ç„¶æˆ‘ä»¬çš„è½®å»“æ˜¯å°é—­çš„ï¼Œæ‰€ä»¥æ˜¯Trueã€‚</p><h3 id="å›¾åƒçŸ©"><a href="#å›¾åƒçŸ©" class="headerlink" title="å›¾åƒçŸ©"></a>å›¾åƒçŸ©</h3><p>çŸ©å¯ä»¥ç†è§£ä¸ºå›¾åƒçš„å„ç±»å‡ ä½•ç‰¹å¾ï¼Œè¯¦æƒ…è¯·å‚è€ƒï¼š[<a href="http://en.wikipedia.org/wiki/Image_moment" target="_blank" rel="noopener">Image Moments</a>]</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">M = cv2.moments(cnt)</span><br></pre></td></tr></table></figure><p>Mä¸­åŒ…å«äº†å¾ˆå¤šè½®å»“çš„ç‰¹å¾ä¿¡æ¯ï¼Œæ¯”å¦‚M[â€˜m00â€™]è¡¨ç¤ºè½®å»“é¢ç§¯ï¼Œä¸å‰é¢<code>cv2.contourArea()</code>è®¡ç®—ç»“æœæ˜¯ä¸€æ ·çš„ã€‚è´¨å¿ƒä¹Ÿå¯ä»¥ç”¨å®ƒæ¥ç®—ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cx, cy = M[<span class="string">'m10'</span>] / M[<span class="string">'m00'</span>], M[<span class="string">'m01'</span>] / M[<span class="string">'m00'</span>]  <span class="comment"># (205, 281)</span></span><br></pre></td></tr></table></figure><h3 id="å¤–æ¥çŸ©å½¢"><a href="#å¤–æ¥çŸ©å½¢" class="headerlink" title="å¤–æ¥çŸ©å½¢"></a>å¤–æ¥çŸ©å½¢</h3><p>å½¢çŠ¶çš„å¤–æ¥çŸ©å½¢æœ‰ä¸¤ç§ï¼Œå¦‚ä¸‹å›¾ï¼Œç»¿è‰²çš„å«å¤–æ¥çŸ©å½¢ï¼Œè¡¨ç¤ºä¸è€ƒè™‘æ—‹è½¬å¹¶ä¸”èƒ½åŒ…å«æ•´ä¸ªè½®å»“çš„çŸ©å½¢ã€‚è“è‰²çš„å«æœ€å°å¤–æ¥çŸ©ï¼Œè€ƒè™‘äº†æ—‹è½¬ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_min_rect_rect_bounding.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_min_rect_rect_bounding.jpg" alt=""></picture></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x, y, w, h = cv2.boundingRect(cnt)  <span class="comment"># å¤–æ¥çŸ©å½¢</span></span><br><span class="line">cv2.rectangle(img_color1, (x, y), (x + w, y + h), (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rect = cv2.minAreaRect(cnt)  <span class="comment"># æœ€å°å¤–æ¥çŸ©å½¢</span></span><br><span class="line">box = np.int0(cv2.boxPoints(rect))  <span class="comment"># çŸ©å½¢çš„å››ä¸ªè§’ç‚¹å–æ•´</span></span><br><span class="line">cv2.drawContours(img_color1, [box], <span class="number">0</span>, (<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­np.int0(x)æ˜¯æŠŠxå–æ•´çš„æ“ä½œï¼Œæ¯”å¦‚377.93å°±ä¼šå˜æˆ377ï¼Œä¹Ÿå¯ä»¥ç”¨x.astype(np.int)ã€‚</p><h3 id="æœ€å°å¤–æ¥åœ†"><a href="#æœ€å°å¤–æ¥åœ†" class="headerlink" title="æœ€å°å¤–æ¥åœ†"></a>æœ€å°å¤–æ¥åœ†</h3><p>å¤–æ¥åœ†è·Ÿå¤–æ¥çŸ©å½¢ä¸€æ ·ï¼Œæ‰¾åˆ°ä¸€ä¸ªèƒ½åŒ…å›´ç‰©ä½“çš„æœ€å°åœ†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(x, y), radius = cv2.minEnclosingCircle(cnt)</span><br><span class="line">(x, y, radius) = np.int0((x, y, radius))  <span class="comment"># åœ†å¿ƒå’ŒåŠå¾„å–æ•´</span></span><br><span class="line">cv2.circle(img_color2, (x, y), radius, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_min_enclosing_circle.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_min_enclosing_circle.jpg" alt=""></picture></p><h3 id="æ‹Ÿåˆæ¤­åœ†"><a href="#æ‹Ÿåˆæ¤­åœ†" class="headerlink" title="æ‹Ÿåˆæ¤­åœ†"></a>æ‹Ÿåˆæ¤­åœ†</h3><p>æˆ‘ä»¬å¯ä»¥ç”¨å¾—åˆ°çš„è½®å»“æ‹Ÿåˆå‡ºä¸€ä¸ªæ¤­åœ†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ellipse = cv2.fitEllipse(cnt)</span><br><span class="line">cv2.ellipse(img_color2, ellipse, (<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_fitting_ellipse.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_fitting_ellipse.jpg" alt=""></picture></p><h3 id="å½¢çŠ¶åŒ¹é…"><a href="#å½¢çŠ¶åŒ¹é…" class="headerlink" title="å½¢çŠ¶åŒ¹é…"></a>å½¢çŠ¶åŒ¹é…</h3><p><code>cv2.matchShapes()</code>å¯ä»¥æ£€æµ‹ä¸¤ä¸ªå½¢çŠ¶ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œè¿”å›<strong>å€¼è¶Šå°ï¼Œè¶Šç›¸ä¼¼</strong>ã€‚å…ˆè¯»å…¥ä¸‹é¢è¿™å¼ å›¾ç‰‡ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_match_shape_shapes.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_match_shape_shapes.jpg" alt=""></picture></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(<span class="string">'shapes.jpg'</span>, <span class="number">0</span>)</span><br><span class="line">_, thresh = cv2.threshold(img, <span class="number">0</span>, <span class="number">255</span>, cv2.THRESH_BINARY + cv2.THRESH_OTSU)</span><br><span class="line">image, contours, hierarchy = cv2.findContours(thresh, <span class="number">3</span>, <span class="number">2</span>)</span><br><span class="line">img_color = cv2.cvtColor(thresh, cv2.COLOR_GRAY2BGR)  <span class="comment"># ç”¨äºç»˜åˆ¶çš„å½©è‰²å›¾</span></span><br></pre></td></tr></table></figure><p>å›¾ä¸­æœ‰3æ¡è½®å»“ï¼Œæˆ‘ä»¬ç”¨A/B/Cè¡¨ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cnt_a, cnt_b, cnt_c = contours[<span class="number">0</span>], contours[<span class="number">1</span>], contours[<span class="number">2</span>]</span><br><span class="line">print(cv2.matchShapes(cnt_b, cnt_b, <span class="number">1</span>, <span class="number">0.0</span>))  <span class="comment"># 0.0</span></span><br><span class="line">print(cv2.matchShapes(cnt_b, cnt_c, <span class="number">1</span>, <span class="number">0.0</span>))  <span class="comment"># 2.17e-05</span></span><br><span class="line">print(cv2.matchShapes(cnt_b, cnt_a, <span class="number">1</span>, <span class="number">0.0</span>))  <span class="comment"># 0.418</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°BCç›¸ä¼¼ç¨‹åº¦æ¯”ABé«˜å¾ˆå¤šï¼Œå¹¶ä¸”å›¾å½¢çš„æ—‹è½¬æˆ–ç¼©æ”¾å¹¶æ²¡æœ‰å½±å“ã€‚å…¶ä¸­ï¼Œå‚æ•°3æ˜¯åŒ¹é…æ–¹æ³•ï¼Œè¯¦æƒ…å¯å‚è€ƒï¼š<a href="https://docs.opencv.org/4.0.0/d3/dc0/group__imgproc__shape.html#gaf2b97a230b51856d09a2d934b78c015f" target="_blank" rel="noopener">ShapeMatchModes</a>ï¼Œå‚æ•°4æ˜¯OpenCVçš„é¢„ç•™å‚æ•°ï¼Œæš‚æ—¶æ²¡æœ‰å®ç°ï¼Œå¯ä»¥ä¸ç”¨ç†ä¼šã€‚</p><p>å½¢çŠ¶åŒ¹é…æ˜¯é€šè¿‡å›¾åƒçš„HuçŸ©æ¥å®ç°çš„(<code>cv2.HuMoments()</code>)ï¼Œå¤§å®¶å¦‚æœæ„Ÿå…´è¶£ï¼Œå¯ä»¥å‚è€ƒï¼š<a href="http://en.wikipedia.org/wiki/Image_moment#Rotation_invariant_moments" target="_blank" rel="noopener">Hu-Moments</a></p><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><ol><li>å‰é¢æˆ‘ä»¬æ˜¯å¯¹å›¾ç‰‡ä¸­çš„æ•°å­—3è¿›è¡Œè½®å»“ç‰¹å¾è®¡ç®—çš„ï¼Œå¤§å®¶æ¢æˆæ•°å­—1çœ‹çœ‹ã€‚</li><li>ï¼ˆé€‰åšï¼‰ç”¨å½¢çŠ¶åŒ¹é…æ¯”è¾ƒä¸¤ä¸ªå­—æ¯æˆ–æ•°å­—ï¼ˆè¿™ç›¸å½“äºå¾ˆç®€å•çš„ä¸€ä¸ª<a href="https://baike.baidu.com/item/%E5%85%89%E5%AD%A6%E5%AD%97%E7%AC%A6%E8%AF%86%E5%88%AB/4162921?fr=aladdin&fromid=25995&fromtitle=OCR" target="_blank" rel="noopener">OCR</a>å™¢ï¼‰ã€‚</li></ol><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>å¸¸ç”¨çš„è½®å»“ç‰¹å¾ï¼š</p><ul><li><code>cv2.contourArea()</code>ç®—é¢ç§¯ï¼Œ<code>cv2.arcLength()</code>ç®—å‘¨é•¿ï¼Œ<code>cv2.boundingRect()</code>ç®—å¤–æ¥çŸ©ã€‚</li><li><code>cv2.minAreaRect()</code>ç®—æœ€å°å¤–æ¥çŸ©ï¼Œ<code>cv2.minEnclosingCircle()</code>ç®—æœ€å°å¤–æ¥åœ†ã€‚</li><li><code>cv2.matchShapes()</code>è¿›è¡Œå½¢çŠ¶åŒ¹é…ã€‚</li></ul><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/d3/dc0/group__imgproc__shape.html#ga2c759ed9f497d4a618048a2f56dc97f1" target="_blank" rel="noopener">cv2.contourArea()</a></li><li><a href="https://docs.opencv.org/4.0.0/d3/dc0/group__imgproc__shape.html#ga8d26483c636be6b35c3ec6335798a47c" target="_blank" rel="noopener">cv2.arcLength()</a></li><li><a href="https://docs.opencv.org/4.0.0/d3/dc0/group__imgproc__shape.html#ga556a180f43cab22649c23ada36a8a139" target="_blank" rel="noopener">cv2.moments()</a></li><li><a href="https://docs.opencv.org/4.0.0/d3/dc0/group__imgproc__shape.html#ga103fcbda2f540f3ef1c042d6a9b35ac7" target="_blank" rel="noopener">cv2.boundingRect()</a></li><li><a href="https://docs.opencv.org/4.0.0/d3/dc0/group__imgproc__shape.html#ga3d476a3417130ae5154aea421ca7ead9" target="_blank" rel="noopener">cv2.minAreaRect()</a></li><li><a href="https://docs.opencv.org/4.0.0/d3/dc0/group__imgproc__shape.html#ga8ce13c24081bbc7151e9326f412190f1" target="_blank" rel="noopener">cv2.minEnclosingCircle()</a></li><li><a href="https://docs.opencv.org/4.0.0/d3/dc0/group__imgproc__shape.html#gaf259efaad93098103d6c27b9e4900ffa" target="_blank" rel="noopener">cv2.fitEllipse()</a></li><li><a href="https://docs.opencv.org/4.0.0/d3/dc0/group__imgproc__shape.html#gaadc90cb16e2362c9bd6e7363e6e4c317" target="_blank" rel="noopener">cv2.matchShapes()</a></li><li><a href="https://docs.opencv.org/4.0.0/d3/dc0/group__imgproc__shape.html#gaf2b97a230b51856d09a2d934b78c015f" target="_blank" rel="noopener">cv2.ShapeMatchModes</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/14.%20%E8%BD%AE%E5%BB%93%E7%89%B9%E5%BE%81" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_contours/py_contour_features/py_contour_features.html" target="_blank" rel="noopener">Contour Features</a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_contours/py_contours_more_functions/py_contours_more_functions.html" target="_blank" rel="noopener">Contours : More Functions</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ è®¡ç®—è½®å»“ç‰¹å¾ï¼Œå¦‚é¢ç§¯ã€å‘¨é•¿ã€æœ€å°å¤–æ¥çŸ©å½¢ç­‰ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="è½®å»“" scheme="http://www.codec.wang/tags/%E8%BD%AE%E5%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡11ï¼šå‡¸åŒ…åŠæ›´å¤šè½®å»“ç‰¹å¾</title>
    <link href="http://www.codec.wang/opencv-python-extra-convex-hull/"/>
    <id>http://www.codec.wang/opencv-python-extra-convex-hull/</id>
    <published>2017-12-20T05:41:11.000Z</published>
    <updated>2020-04-07T04:52:02.253Z</updated>
    
    <content type="html"><![CDATA[<p>è®¡ç®—å‡¸åŒ…åŠæ›´å¤šè½®å»“ç‰¹å¾ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="å¤šè¾¹å½¢é€¼è¿‘"><a href="#å¤šè¾¹å½¢é€¼è¿‘" class="headerlink" title="å¤šè¾¹å½¢é€¼è¿‘"></a>å¤šè¾¹å½¢é€¼è¿‘</h2><p>å‰é¢æˆ‘ä»¬å­¦ä¹ è¿‡æœ€å°å¤–æ¥çŸ©å’Œæœ€å°å¤–æ¥åœ†ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ä¸€ä¸ªæœ€å°çš„å¤šè¾¹å½¢åŒ…å›´ç‰©ä½“å—ï¼Ÿå½“ç„¶å¯ä»¥ï¼š</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.å…ˆæ‰¾åˆ°è½®å»“</span></span><br><span class="line">img = cv2.imread(<span class="string">'unregular.jpg'</span>, <span class="number">0</span>)</span><br><span class="line">_, thresh = cv2.threshold(img, <span class="number">0</span>, <span class="number">255</span>, cv2.THRESH_BINARY + cv2.THRESH_OTSU)</span><br><span class="line">image, contours, hierarchy = cv2.findContours(thresh, <span class="number">3</span>, <span class="number">2</span>)</span><br><span class="line">cnt = contours[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.è¿›è¡Œå¤šè¾¹å½¢é€¼è¿‘ï¼Œå¾—åˆ°å¤šè¾¹å½¢çš„è§’ç‚¹</span></span><br><span class="line">approx = cv2.approxPolyDP(cnt, <span class="number">3</span>, <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.ç”»å‡ºå¤šè¾¹å½¢</span></span><br><span class="line">image = cv2.cvtColor(image, cv2.COLOR_GRAY2BGR)</span><br><span class="line">cv2.polylines(image, [approx], <span class="literal">True</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>cv2.approxPolyDP()</code>çš„å‚æ•°2(epsilon)æ˜¯ä¸€ä¸ªè·ç¦»å€¼ï¼Œè¡¨ç¤ºå¤šè¾¹å½¢çš„è½®å»“æ¥è¿‘å®é™…è½®å»“çš„ç¨‹åº¦ï¼Œå€¼è¶Šå°ï¼Œè¶Šç²¾ç¡®ï¼›å‚æ•°3è¡¨ç¤ºæ˜¯å¦é—­åˆã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_approxpoly.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_approxpoly.jpg" alt=""></picture></p><h2 id="å‡¸åŒ…"><a href="#å‡¸åŒ…" class="headerlink" title="å‡¸åŒ…"></a>å‡¸åŒ…</h2><p><a href="https://baike.baidu.com/item/%E5%87%B8%E5%8C%85/179150?fr=aladdin" target="_blank" rel="noopener">å‡¸åŒ…</a>è·Ÿå¤šè¾¹å½¢é€¼è¿‘å¾ˆåƒï¼Œåªä¸è¿‡å®ƒæ˜¯ç‰©ä½“æœ€å¤–å±‚çš„â€å‡¸â€å¤šè¾¹å½¢ï¼šé›†åˆAå†…è¿æ¥ä»»æ„ä¸¤ä¸ªç‚¹çš„ç›´çº¿éƒ½åœ¨Açš„å†…éƒ¨ï¼Œåˆ™ç§°é›†åˆAæ˜¯å‡¸å½¢çš„ã€‚å¦‚ä¸‹å›¾ï¼Œçº¢è‰²çš„éƒ¨åˆ†ä¸ºæ‰‹æŒçš„å‡¸åŒ…ï¼ŒåŒç®­å¤´éƒ¨åˆ†è¡¨ç¤ºå‡¸ç¼ºé™·(Convexity Defects)ï¼Œå‡¸ç¼ºé™·å¸¸ç”¨æ¥è¿›è¡Œæ‰‹åŠ¿è¯†åˆ«ç­‰ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_convex.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_convex.jpg" alt=""></picture></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å…ˆæ‰¾åˆ°è½®å»“</span></span><br><span class="line">img = cv2.imread(<span class="string">'convex.jpg'</span>, <span class="number">0</span>)</span><br><span class="line">_, thresh = cv2.threshold(img, <span class="number">0</span>, <span class="number">255</span>, cv2.THRESH_BINARY + cv2.THRESH_OTSU)</span><br><span class="line">image, contours, hierarchy = cv2.findContours(thresh, <span class="number">3</span>, <span class="number">2</span>)</span><br><span class="line">cnt = contours[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.å¯»æ‰¾å‡¸åŒ…ï¼Œå¾—åˆ°å‡¸åŒ…çš„è§’ç‚¹</span></span><br><span class="line">hull = cv2.convexHull(cnt)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.ç»˜åˆ¶å‡¸åŒ…</span></span><br><span class="line">image = cv2.cvtColor(image, cv2.COLOR_GRAY2BGR)</span><br><span class="line">cv2.polylines(image, [hull], <span class="literal">True</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_convex_hull.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_convex_hull.jpg" alt=""></picture></p><p>å…¶ä¸­å‡½æ•°<code>cv2.convexHull()</code>æœ‰ä¸ªå¯é€‰å‚æ•°returnPointsï¼Œé»˜è®¤æ˜¯Trueï¼Œä»£è¡¨è¿”å›è§’ç‚¹çš„x/yåæ ‡ï¼›å¦‚æœä¸ºFalseçš„è¯ï¼Œè¡¨ç¤ºè¿”å›è½®å»“ä¸­æ˜¯å‡¸åŒ…è§’ç‚¹çš„ç´¢å¼•ï¼Œæ¯”å¦‚è¯´ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(hull[<span class="number">0</span>])  <span class="comment"># [[362 184]]ï¼ˆåæ ‡ï¼‰</span></span><br><span class="line">hull2 = cv2.convexHull(cnt, returnPoints=<span class="literal">False</span>)</span><br><span class="line">print(hull2[<span class="number">0</span>])  <span class="comment"># [510]ï¼ˆcntä¸­çš„ç´¢å¼•ï¼‰</span></span><br><span class="line">print(cnt[<span class="number">510</span>])  <span class="comment"># [[362 184]]</span></span><br></pre></td></tr></table></figure><p>å½“ä½¿ç”¨<code>cv2.convexityDefects()</code>è®¡ç®—å‡¸åŒ…ç¼ºé™·æ—¶ï¼ŒreturnPointséœ€ä¸ºFalseï¼Œè¯¦æƒ…å¯å‚è€ƒï¼š<a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_contours/py_contours_more_functions/py_contours_more_functions.html#contours-more-functions" target="_blank" rel="noopener">Convexity Defects</a></p><p>å¦å¤–å¯ä»¥ç”¨ä¸‹é¢çš„è¯­å¥æ¥åˆ¤æ–­è½®å»“æ˜¯å¦æ˜¯å‡¸å½¢çš„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(cv2.isContourConvex(hull))  <span class="comment"># True</span></span><br></pre></td></tr></table></figure><h2 id="ç‚¹åˆ°è½®å»“è·ç¦»"><a href="#ç‚¹åˆ°è½®å»“è·ç¦»" class="headerlink" title="ç‚¹åˆ°è½®å»“è·ç¦»"></a>ç‚¹åˆ°è½®å»“è·ç¦»</h2><p><code>cv2.pointPolygonTest()</code>å‡½æ•°è®¡ç®—ç‚¹åˆ°è½®å»“çš„æœ€çŸ­è·ç¦»ï¼ˆä¹Ÿå°±æ˜¯å‚çº¿ï¼‰ï¼Œåˆç§°å¤šè¾¹å½¢æµ‹è¯•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dist = cv2.pointPolygonTest(cnt, (<span class="number">100</span>, <span class="number">100</span>), <span class="literal">True</span>)  <span class="comment"># -3.53</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­å‚æ•°3ä¸ºTrueæ—¶è¡¨ç¤ºè®¡ç®—è·ç¦»å€¼ï¼šç‚¹åœ¨è½®å»“å¤–é¢å€¼ä¸ºè´Ÿï¼Œç‚¹åœ¨è½®å»“ä¸Šå€¼ä¸º0ï¼Œç‚¹åœ¨è½®å»“é‡Œé¢å€¼ä¸ºæ­£ï¼›å‚æ•°3ä¸ºFalseæ—¶ï¼Œåªè¿”å›-1/0/1è¡¨ç¤ºç‚¹ç›¸å¯¹è½®å»“çš„ä½ç½®ï¼Œä¸è®¡ç®—è·ç¦»ã€‚</p><p>æ›´å¤šè½®å»“ç‰¹å¾ï¼Œå¦‚å½“é‡ç›´å¾„ã€å¹³å‡å¼ºåº¦ç­‰ï¼Œæˆ‘ç›®å‰ä¹Ÿæ²¡ç”¨åˆ°è¿‡ï¼Œä»¥åç”¨åˆ°å†å†™å§ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å‚çœ‹ï¼š<a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_contours/py_contour_properties/py_contour_properties.html" target="_blank" rel="noopener">Contour Properties</a>ã€<a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_contours/py_contours_hierarchy/py_contours_hierarchy.html" target="_blank" rel="noopener">Contours Hierarchy</a></p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/%E7%95%AA%E5%A4%96%E7%AF%8711.%20%E5%87%B8%E5%8C%85%E5%8F%8A%E6%9B%B4%E5%A4%9A%E8%BD%AE%E5%BB%93%E7%89%B9%E5%BE%81" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_contours/py_contours_more_functions/py_contours_more_functions.html#contours-more-functions" target="_blank" rel="noopener">Convexity Defects</a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_contours/py_contour_properties/py_contour_properties.html" target="_blank" rel="noopener">Contour Properties</a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_contours/py_contours_hierarchy/py_contours_hierarchy.html" target="_blank" rel="noopener">Contours Hierarchy</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è®¡ç®—å‡¸åŒ…åŠæ›´å¤šè½®å»“ç‰¹å¾ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="å‡¸åŒ…" scheme="http://www.codec.wang/tags/%E5%87%B8%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡10ï¼šè½®å»“å±‚çº§</title>
    <link href="http://www.codec.wang/opencv-python-extra-contours-hierarchy/"/>
    <id>http://www.codec.wang/opencv-python-extra-contours-hierarchy/</id>
    <published>2017-12-20T04:41:11.000Z</published>
    <updated>2020-04-07T04:52:22.603Z</updated>
    
    <content type="html"><![CDATA[<p>äº†è§£è½®å»“é—´çš„å±‚çº§å…³ç³»ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><p>å‰é¢æˆ‘ä»¬ä½¿ç”¨<code>cv2.findContours()</code>å¯»æ‰¾è½®å»“æ—¶ï¼Œå‚æ•°3è¡¨ç¤ºè½®å»“çš„å¯»æ‰¾æ–¹å¼(RetrievalModes)ï¼Œå½“æ—¶æˆ‘ä»¬ä¼ å…¥çš„æ˜¯cv2.RETR_TREEï¼Œå®ƒè¡¨ç¤ºä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå¦å¤–ï¼Œå‡½æ•°è¿”å›å€¼hierarchyæœ‰ä»€ä¹ˆç”¨é€”å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬å°±æ¥ç ”ç©¶ä¸‹è¿™ä¸¤ä¸ªé—®é¢˜ã€‚</p><hr><h2 id="ç†è§£è½®å»“å±‚çº§"><a href="#ç†è§£è½®å»“å±‚çº§" class="headerlink" title="ç†è§£è½®å»“å±‚çº§"></a>ç†è§£è½®å»“å±‚çº§</h2><p>å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå›¾åƒä¸­çš„å½¢çŠ¶ä¹‹é—´æ˜¯æœ‰å…³è”çš„ï¼Œæ¯”å¦‚è¯´ä¸‹å›¾ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_hierarchy.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_hierarchy.jpg" alt=""></picture></p><p>å›¾ä¸­æ€»å…±æœ‰8æ¡è½®å»“ï¼Œ2å’Œ2aåˆ†åˆ«è¡¨ç¤ºå¤–å±‚å’Œé‡Œå±‚çš„è½®å»“ï¼Œ3å’Œ3aä¹Ÿæ˜¯ä¸€æ ·ã€‚ä»å›¾ä¸­çœ‹å¾—å‡ºæ¥ï¼š</p><ul><li>è½®å»“0/1/2æ˜¯æœ€å¤–å±‚çš„è½®å»“ï¼Œæˆ‘ä»¬å¯ä»¥è¯´å®ƒä»¬å¤„äºåŒä¸€è½®å»“ç­‰çº§ï¼š0çº§</li><li>è½®å»“2aæ˜¯è½®å»“2çš„å­è½®å»“ï¼Œåè¿‡æ¥è¯´2æ˜¯2açš„çˆ¶è½®å»“ï¼Œè½®å»“2aç®—ä¸€ä¸ªç­‰çº§ï¼š1çº§</li><li>åŒæ ·3æ˜¯2açš„å­è½®å»“ï¼Œè½®å»“3å¤„äºä¸€ä¸ªç­‰çº§ï¼š2çº§</li><li>ç±»ä¼¼çš„ï¼Œ3aæ˜¯3çš„å­è½®å»“ï¼Œç­‰ç­‰â€¦â€¦â€¦â€¦</li></ul><p>è¿™é‡Œé¢OpenCVå…³æ³¨çš„å°±æ˜¯ä¸¤ä¸ªæ¦‚å¿µï¼šåŒä¸€è½®å»“ç­‰çº§å’Œè½®å»“é—´çš„å­å±å…³ç³»ã€‚</p><h2 id="OpenCVä¸­è½®å»“ç­‰çº§çš„è¡¨ç¤º"><a href="#OpenCVä¸­è½®å»“ç­‰çº§çš„è¡¨ç¤º" class="headerlink" title="OpenCVä¸­è½®å»“ç­‰çº§çš„è¡¨ç¤º"></a>OpenCVä¸­è½®å»“ç­‰çº§çš„è¡¨ç¤º</h2><p>å¦‚æœæˆ‘ä»¬æ‰“å°å‡º<code>cv2.findContours()</code>å‡½æ•°çš„è¿”å›å€¼hierarchyï¼Œä¼šå‘ç°å®ƒæ˜¯ä¸€ä¸ªåŒ…å«4ä¸ªå€¼çš„æ•°ç»„ï¼š<strong>[Next, Previous, First Child, Parent]</strong></p><ul><li><em>Nextï¼šä¸å½“å‰è½®å»“å¤„äºåŒä¸€å±‚çº§çš„ä¸‹ä¸€æ¡è½®å»“</em></li></ul><p>ä¸¾ä¾‹æ¥è¯´ï¼Œå‰é¢å›¾ä¸­è·Ÿ0å¤„äºåŒä¸€å±‚çº§çš„ä¸‹ä¸€æ¡è½®å»“æ˜¯1ï¼Œæ‰€ä»¥Next=1ï¼›åŒç†ï¼Œå¯¹è½®å»“1æ¥è¯´ï¼ŒNext=2ï¼›é‚£ä¹ˆå¯¹äºè½®å»“2å‘¢ï¼Ÿæ²¡æœ‰ä¸å®ƒåŒä¸€å±‚çº§çš„ä¸‹ä¸€æ¡è½®å»“äº†ï¼Œæ­¤æ—¶Next=-1ã€‚</p><ul><li><em>Previousï¼šä¸å½“å‰è½®å»“å¤„äºåŒä¸€å±‚çº§çš„ä¸Šä¸€æ¡è½®å»“</em></li></ul><p>è·Ÿå‰é¢ä¸€æ ·ï¼Œå¯¹äºè½®å»“1æ¥è¯´ï¼ŒPrevious=0ï¼›å¯¹äºè½®å»“2ï¼ŒPrevious=1ï¼›å¯¹äºè½®å»“1ï¼Œæ²¡æœ‰ä¸Šä¸€æ¡è½®å»“äº†ï¼Œæ‰€ä»¥Previous=-1ã€‚</p><ul><li><em>First Childï¼šå½“å‰è½®å»“çš„ç¬¬ä¸€æ¡å­è½®å»“</em></li></ul><p>æ¯”å¦‚å¯¹äºè½®å»“2ï¼Œç¬¬ä¸€æ¡å­è½®å»“å°±æ˜¯è½®å»“2aï¼Œæ‰€ä»¥First Child=2aï¼›å¯¹è½®å»“3aï¼ŒFirst Child=4ã€‚</p><ul><li><em>Parentï¼šå½“å‰è½®å»“çš„çˆ¶è½®å»“</em></li></ul><p>æ¯”å¦‚2açš„çˆ¶è½®å»“æ˜¯2ï¼ŒParent=2ï¼›è½®å»“2æ²¡æœ‰çˆ¶è½®å»“ï¼Œæ‰€ä»¥Parent=-1ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç éªŒè¯ä¸€ä¸‹ï¼š</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.è¯»å…¥å›¾ç‰‡</span></span><br><span class="line">img = cv2.imread(<span class="string">'hierarchy.jpg'</span>)</span><br><span class="line">img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)</span><br><span class="line">_, thresh = cv2.threshold(img_gray, <span class="number">0</span>, <span class="number">255</span>, cv2.THRESH_BINARY + cv2.THRESH_OTSU)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.å¯»æ‰¾è½®å»“</span></span><br><span class="line">image, contours, hierarchy = cv2.findContours(thresh, cv2.RETR_TREE, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.ç»˜åˆ¶è½®å»“</span></span><br><span class="line">print(len(contours),hierarchy)  <span class="comment"># 8æ¡</span></span><br><span class="line">cv2.drawContours(img, contours, <span class="number">-1</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br></pre></td></tr></table></figure><blockquote><p>ç»éªŒä¹‹è°ˆï¼šOpenCVä¸­æ‰¾åˆ°çš„è½®å»“åºå·è·Ÿå‰é¢è®²çš„ä¸åŒå™¢ï¼Œå¦‚ä¸‹å›¾ï¼š</p></blockquote><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_hierarchy_RETR_TREE.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_hierarchy_RETR_TREE.jpg" alt=""></picture></p><p>ç°åœ¨æ—¢ç„¶æˆ‘ä»¬äº†è§£äº†å±‚çº§çš„æ¦‚å¿µï¼Œé‚£ä¹ˆç±»ä¼¼cv2.RETR_TREEçš„è½®å»“å¯»æ‰¾æ–¹å¼åˆæ˜¯å•¥æ„æ€å‘¢ï¼Ÿ</p><h2 id="è½®å»“å¯»æ‰¾æ–¹å¼"><a href="#è½®å»“å¯»æ‰¾æ–¹å¼" class="headerlink" title="è½®å»“å¯»æ‰¾æ–¹å¼"></a>è½®å»“å¯»æ‰¾æ–¹å¼</h2><p>OpenCVä¸­æœ‰å››ç§è½®å»“å¯»æ‰¾æ–¹å¼<a href="https://docs.opencv.org/3.3.1/d3/dc0/group__imgproc__shape.html#ga819779b9857cc2f8601e6526a3a5bc71" target="_blank" rel="noopener">RetrievalModes</a>ï¼Œä¸‹é¢åˆ†åˆ«æ¥çœ‹ä¸‹ï¼š</p><h3 id="1-RETR-LIST"><a href="#1-RETR-LIST" class="headerlink" title="1. RETR_LIST"></a>1. RETR_LIST</h3><p>è¿™æ˜¯æœ€ç®€å•çš„ä¸€ç§å¯»æ‰¾æ–¹å¼ï¼Œå®ƒä¸å»ºç«‹è½®å»“é—´çš„å­å±å…³ç³»ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰è½®å»“éƒ½å±äºåŒä¸€å±‚çº§ã€‚è¿™æ ·ï¼Œhierarchyä¸­çš„åä¸¤ä¸ªå€¼[First Child, Parent]éƒ½ä¸º-1ã€‚æ¯”å¦‚åŒæ ·çš„å›¾ï¼Œæˆ‘ä»¬ä½¿ç”¨cv2.RETR_LISTæ¥å¯»æ‰¾è½®å»“ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">_, _, hierarchy = cv2.findContours(thresh, cv2.RETR_LIST, <span class="number">2</span>)</span><br><span class="line">print(hierarchy)</span><br><span class="line"><span class="comment"># ç»“æœå¦‚ä¸‹</span></span><br><span class="line">[[[ <span class="number">1</span> <span class="number">-1</span> <span class="number">-1</span> <span class="number">-1</span>]</span><br><span class="line">  [ <span class="number">2</span>  <span class="number">0</span> <span class="number">-1</span> <span class="number">-1</span>]</span><br><span class="line">  [ <span class="number">3</span>  <span class="number">1</span> <span class="number">-1</span> <span class="number">-1</span>]</span><br><span class="line">  [ <span class="number">4</span>  <span class="number">2</span> <span class="number">-1</span> <span class="number">-1</span>]</span><br><span class="line">  [ <span class="number">5</span>  <span class="number">3</span> <span class="number">-1</span> <span class="number">-1</span>]</span><br><span class="line">  [ <span class="number">6</span>  <span class="number">4</span> <span class="number">-1</span> <span class="number">-1</span>]</span><br><span class="line">  [ <span class="number">7</span>  <span class="number">5</span> <span class="number">-1</span> <span class="number">-1</span>]</span><br><span class="line">  [<span class="number">-1</span>  <span class="number">6</span> <span class="number">-1</span> <span class="number">-1</span>]]]</span><br></pre></td></tr></table></figure><p>å› ä¸ºæ²¡æœ‰ä»å±å…³ç³»ï¼Œæ‰€ä»¥è½®å»“0çš„ä¸‹ä¸€æ¡æ˜¯1ï¼Œ1çš„ä¸‹ä¸€æ¡æ˜¯2â€¦â€¦</p><blockquote><p>ç»éªŒä¹‹è°ˆï¼šå¦‚æœä½ ä¸éœ€è¦è½®å»“å±‚çº§ä¿¡æ¯çš„è¯ï¼Œcv2.RETR_LISTæ›´æ¨èä½¿ç”¨ï¼Œå› ä¸ºæ€§èƒ½æ›´å¥½ã€‚</p></blockquote><h3 id="2-RETR-TREE"><a href="#2-RETR-TREE" class="headerlink" title="2. RETR_TREE"></a>2. RETR_TREE</h3><p>cv2.RETR_TREEå°±æ˜¯ä¹‹å‰æˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨çš„æ–¹å¼ï¼Œå®ƒä¼šå®Œæ•´å»ºç«‹è½®å»“çš„å±‚çº§ä»å±å…³ç³»ï¼Œå‰é¢å·²ç»è¯¦ç»†è¯´æ˜è¿‡äº†ã€‚</p><h3 id="3-RETR-EXTERNAL"><a href="#3-RETR-EXTERNAL" class="headerlink" title="3. RETR_EXTERNAL"></a>3. RETR_EXTERNAL</h3><p>è¿™ç§æ–¹å¼åªå¯»æ‰¾æœ€é«˜å±‚çº§çš„è½®å»“ï¼Œä¹Ÿå°±æ˜¯å®ƒåªä¼šæ‰¾åˆ°å‰é¢æˆ‘ä»¬æ‰€è¯´çš„3æ¡0çº§è½®å»“ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">_, contours, hierarchy = cv2.findContours(thresh, cv2.RETR_EXTERNAL, <span class="number">2</span>)</span><br><span class="line">print(len(contours), hierarchy, sep=<span class="string">'\n'</span>)</span><br><span class="line"><span class="comment"># ç»“æœå¦‚ä¸‹</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">[[[ <span class="number">1</span> <span class="number">-1</span> <span class="number">-1</span> <span class="number">-1</span>]</span><br><span class="line">  [ <span class="number">2</span>  <span class="number">0</span> <span class="number">-1</span> <span class="number">-1</span>]</span><br><span class="line">  [<span class="number">-1</span>  <span class="number">1</span> <span class="number">-1</span> <span class="number">-1</span>]]]</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_hierarchy_RETR_EXTERNAL.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_hierarchy_RETR_EXTERNAL.jpg" alt=""></picture></p><h3 id="4-RETR-CCOMP"><a href="#4-RETR-CCOMP" class="headerlink" title="4. RETR_CCOMP"></a>4. RETR_CCOMP</h3><p>ç›¸æ¯”ä¹‹ä¸‹cv2.RETR_CCOMPæ¯”è¾ƒéš¾ç†è§£ï¼Œä½†å…¶å®ä¹Ÿå¾ˆç®€å•ï¼šå®ƒæŠŠæ‰€æœ‰çš„è½®å»“åªåˆ†ä¸º2ä¸ªå±‚çº§ï¼Œä¸æ˜¯å¤–å±‚çš„å°±æ˜¯é‡Œå±‚çš„ã€‚ç»“åˆä»£ç å’Œå›¾ç‰‡ï¼Œæˆ‘ä»¬æ¥ç†è§£ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">_, contours, hierarchy = cv2.findContours(thresh, cv2.RETR_CCOMP, <span class="number">2</span>)</span><br><span class="line">print(hierarchy)</span><br><span class="line"><span class="comment"># ç»“æœå¦‚ä¸‹</span></span><br><span class="line">[[[ <span class="number">1</span> <span class="number">-1</span> <span class="number">-1</span> <span class="number">-1</span>]</span><br><span class="line">  [ <span class="number">2</span>  <span class="number">0</span> <span class="number">-1</span> <span class="number">-1</span>]</span><br><span class="line">  [ <span class="number">4</span>  <span class="number">1</span>  <span class="number">3</span> <span class="number">-1</span>]</span><br><span class="line">  [<span class="number">-1</span> <span class="number">-1</span> <span class="number">-1</span>  <span class="number">2</span>]</span><br><span class="line">  [ <span class="number">6</span>  <span class="number">2</span>  <span class="number">5</span> <span class="number">-1</span>]</span><br><span class="line">  [<span class="number">-1</span> <span class="number">-1</span> <span class="number">-1</span>  <span class="number">4</span>]</span><br><span class="line">  [ <span class="number">7</span>  <span class="number">4</span> <span class="number">-1</span> <span class="number">-1</span>]</span><br><span class="line">  [<span class="number">-1</span>  <span class="number">6</span> <span class="number">-1</span> <span class="number">-1</span>]]]</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_hierarchy_RETR_CCOMP.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_hierarchy_RETR_CCOMP.jpg" alt=""></picture></p><blockquote><p>æ³¨æ„ï¼šä½¿ç”¨è¿™ä¸ªå‚æ•°æ‰¾åˆ°çš„è½®å»“åºå·ä¸ä¹‹å‰ä¸åŒã€‚</p></blockquote><p>å›¾ä¸­æ‹¬å·é‡Œé¢1ä»£è¡¨å¤–å±‚è½®å»“ï¼Œ2ä»£è¡¨é‡Œå±‚è½®å»“ã€‚æ¯”å¦‚è¯´å¯¹äºè½®å»“2ï¼ŒNextå°±æ˜¯4ï¼ŒPreviousæ˜¯1ï¼Œå®ƒæœ‰é‡Œå±‚çš„è½®å»“3ï¼Œæ‰€ä»¥First Child=3ï¼Œä½†å› ä¸ºåªæœ‰ä¸¤ä¸ªå±‚çº§ï¼Œå®ƒæœ¬èº«å°±æ˜¯å¤–å±‚è½®å»“ï¼Œæ‰€ä»¥Parent=-1ã€‚å¤§å®¶å¯ä»¥é’ˆå¯¹å…¶ä»–çš„è½®å»“è‡ªå·±éªŒè¯ä¸€ä¸‹ã€‚</p><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><ol><li>å¦‚ä¸‹å›¾ï¼Œæ‰¾åˆ°3ä¸ªåœ†ç¯çš„å†…ç¯ï¼Œç„¶åå¡«å……æˆ(180,215,215)è¿™ç§é¢œè‰²ï¼š</li></ol><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_hierarchy_fill_holes.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_hierarchy_fill_holes.jpg" alt=""></picture></p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/%E7%95%AA%E5%A4%96%E7%AF%8710.%20%E8%BD%AE%E5%BB%93%E5%B1%82%E7%BA%A7" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_contours/py_contours_hierarchy/py_contours_hierarchy.html#contours-hierarchy" target="_blank" rel="noopener">Contours Hierarchy</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;äº†è§£è½®å»“é—´çš„å±‚çº§å…³ç³»ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="è½®å»“å±‚çº§" scheme="http://www.codec.wang/tags/%E8%BD%AE%E5%BB%93%E5%B1%82%E7%BA%A7/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹13ï¼šè½®å»“</title>
    <link href="http://www.codec.wang/opencv-python-contours/"/>
    <id>http://www.codec.wang/opencv-python-contours/</id>
    <published>2017-12-20T01:44:23.000Z</published>
    <updated>2020-04-07T04:57:19.085Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ å¦‚ä½•å¯»æ‰¾å¹¶ç»˜åˆ¶è½®å»“ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>äº†è§£è½®å»“æ¦‚å¿µ</li><li>å¯»æ‰¾å¹¶ç»˜åˆ¶è½®å»“</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.findContours()</code>, <code>cv2.drawContours()</code></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><h3 id="å•¥å«è½®å»“"><a href="#å•¥å«è½®å»“" class="headerlink" title="å•¥å«è½®å»“"></a>å•¥å«è½®å»“</h3><p>è½®å»“æ˜¯ä¸€ç³»åˆ—ç›¸è¿çš„ç‚¹ç»„æˆçš„æ›²çº¿ï¼Œä»£è¡¨äº†ç‰©ä½“çš„åŸºæœ¬å¤–å½¢ã€‚</p><p>è°ˆèµ·è½®å»“ä¸å…æƒ³åˆ°è¾¹ç¼˜ï¼Œå®ƒä»¬ç¡®å®å¾ˆåƒã€‚ç®€å•çš„è¯´ï¼Œ<strong>è½®å»“æ˜¯è¿ç»­çš„ï¼Œè¾¹ç¼˜å¹¶ä¸å…¨éƒ½è¿ç»­</strong>ï¼ˆä¸‹å›¾ï¼‰ã€‚å…¶å®è¾¹ç¼˜ä¸»è¦æ˜¯ä½œä¸ºå›¾åƒçš„ç‰¹å¾ä½¿ç”¨ï¼Œæ¯”å¦‚å¯ä»¥ç”¨è¾¹ç¼˜ç‰¹å¾å¯ä»¥åŒºåˆ†è„¸å’Œæ‰‹ï¼Œè€Œè½®å»“ä¸»è¦ç”¨æ¥åˆ†æç‰©ä½“çš„å½¢æ€ï¼Œæ¯”å¦‚ç‰©ä½“çš„å‘¨é•¿å’Œé¢ç§¯ç­‰ï¼Œå¯ä»¥è¯´è¾¹ç¼˜åŒ…æ‹¬è½®å»“ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_contours.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_contours.jpg" alt="è¾¹ç¼˜å’Œè½®å»“çš„åŒºåˆ«"></picture></p><p>å¯»æ‰¾è½®å»“çš„æ“ä½œä¸€èˆ¬ç”¨äºäºŒå€¼åŒ–å›¾ï¼Œæ‰€ä»¥é€šå¸¸ä¼šä½¿ç”¨é˜ˆå€¼åˆ†å‰²æˆ–Cannyè¾¹ç¼˜æ£€æµ‹å…ˆå¾—åˆ°äºŒå€¼å›¾ã€‚</p><blockquote><p>ç»éªŒä¹‹è°ˆï¼š<strong>å¯»æ‰¾è½®å»“æ˜¯é’ˆå¯¹ç™½è‰²ç‰©ä½“çš„</strong>ï¼Œä¸€å®šè¦ä¿è¯ç‰©ä½“æ˜¯ç™½è‰²ï¼Œè€ŒèƒŒæ™¯æ˜¯é»‘è‰²ï¼Œ<strong>ä¸ç„¶å¾ˆå¤šäººåœ¨å¯»æ‰¾è½®å»“æ—¶ä¼šæ‰¾åˆ°å›¾ç‰‡æœ€å¤–é¢çš„ä¸€ä¸ªæ¡†</strong>ã€‚</p></blockquote><h3 id="å¯»æ‰¾è½®å»“"><a href="#å¯»æ‰¾è½®å»“" class="headerlink" title="å¯»æ‰¾è½®å»“"></a>å¯»æ‰¾è½®å»“</h3><p>ä½¿ç”¨<code>cv2.findContours()</code>å¯»æ‰¾è½®å»“ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'handwriting.jpg'</span>)</span><br><span class="line">img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)</span><br><span class="line">ret, thresh = cv2.threshold(img_gray, <span class="number">0</span>, <span class="number">255</span>, cv2.THRESH_BINARY_INV + cv2.THRESH_OTSU)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯»æ‰¾äºŒå€¼åŒ–å›¾ä¸­çš„è½®å»“</span></span><br><span class="line">image, contours, hierarchy = cv2.findContours(</span><br><span class="line">    thresh, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)</span><br><span class="line">print(len(contours))  <span class="comment"># ç»“æœåº”è¯¥ä¸º2</span></span><br></pre></td></tr></table></figure><ul><li>å‚æ•°2ï¼šè½®å»“çš„æŸ¥æ‰¾æ–¹å¼ï¼Œä¸€èˆ¬ä½¿ç”¨cv2.RETR_TREEï¼Œè¡¨ç¤ºæå–æ‰€æœ‰çš„è½®å»“å¹¶å»ºç«‹è½®å»“é—´çš„å±‚çº§ã€‚æ›´å¤šè¯·å‚è€ƒï¼š<a href="https://docs.opencv.org/4.0.0/d3/dc0/group__imgproc__shape.html#ga819779b9857cc2f8601e6526a3a5bc71" target="_blank" rel="noopener">RetrievalModes</a></li><li>å‚æ•°3ï¼šè½®å»“çš„è¿‘ä¼¼æ–¹æ³•ã€‚æ¯”å¦‚å¯¹äºä¸€æ¡ç›´çº¿ï¼Œæˆ‘ä»¬å¯ä»¥å­˜å‚¨è¯¥ç›´çº¿çš„æ‰€æœ‰åƒç´ ç‚¹ï¼Œä¹Ÿå¯ä»¥åªå­˜å‚¨èµ·ç‚¹å’Œç»ˆç‚¹ã€‚ä½¿ç”¨cv2.CHAIN_APPROX_SIMPLEå°±è¡¨ç¤ºç”¨å°½å¯èƒ½å°‘çš„åƒç´ ç‚¹è¡¨ç¤ºè½®å»“ã€‚æ›´å¤šè¯·å‚è€ƒï¼š<a href="https://docs.opencv.org/4.0.0/d3/dc0/group__imgproc__shape.html#ga4303f45752694956374734a03c54d5ff" target="_blank" rel="noopener">ContourApproximationModes</a></li><li>ç®€ä¾¿èµ·è§ï¼Œè¿™ä¸¤ä¸ªå‚æ•°ä¹Ÿå¯ä»¥ç›´æ¥ç”¨çœŸå€¼3å’Œ2è¡¨ç¤ºã€‚</li></ul><p>å‡½æ•°æœ‰3ä¸ªè¿”å›å€¼ï¼Œimageè¿˜æ˜¯åŸæ¥çš„äºŒå€¼åŒ–å›¾ç‰‡ï¼Œhierarchyæ˜¯è½®å»“é—´çš„å±‚çº§å…³ç³»ï¼ˆ<a href="/opencv-python-extra-contours-hierarchy/">ç•ªå¤–ç¯‡ï¼šè½®å»“å±‚çº§</a>ï¼‰ï¼Œè¿™ä¸¤ä¸ªæš‚æ—¶ä¸ç”¨ç†ä¼šã€‚æˆ‘ä»¬ä¸»è¦çœ‹contoursï¼Œå®ƒå°±æ˜¯æ‰¾åˆ°çš„è½®å»“äº†ï¼Œä»¥æ•°ç»„å½¢å¼å­˜å‚¨ï¼Œè®°å½•äº†æ¯æ¡è½®å»“çš„æ‰€æœ‰åƒç´ ç‚¹çš„åæ ‡(x,y)ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_find_contours_contours.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_find_contours_contours.jpg" alt=""></picture></p><h3 id="ç»˜åˆ¶è½®å»“"><a href="#ç»˜åˆ¶è½®å»“" class="headerlink" title="ç»˜åˆ¶è½®å»“"></a>ç»˜åˆ¶è½®å»“</h3><p>è½®å»“æ‰¾å‡ºæ¥åï¼Œä¸ºäº†æ–¹ä¾¿è§‚çœ‹ï¼Œå¯ä»¥åƒå‰é¢å›¾ä¸­é‚£æ ·ç”¨çº¢è‰²ç”»å‡ºæ¥ï¼š<code>cv2.drawContours()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.drawContours(img, contours, <span class="number">-1</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­å‚æ•°2å°±æ˜¯å¾—åˆ°çš„contoursï¼Œå‚æ•°3è¡¨ç¤ºè¦ç»˜åˆ¶å“ªä¸€æ¡è½®å»“ï¼Œ-1è¡¨ç¤ºç»˜åˆ¶æ‰€æœ‰è½®å»“ï¼Œå‚æ•°4æ˜¯é¢œè‰²ï¼ˆB/G/Ré€šé“ï¼Œæ‰€ä»¥(0,0,255)è¡¨ç¤ºçº¢è‰²ï¼‰ï¼Œå‚æ•°5æ˜¯çº¿å®½ï¼Œä¹‹å‰åœ¨ç»˜åˆ¶å›¾å½¢ä¸­ä»‹ç»è¿‡ã€‚</p><blockquote><p>ç»éªŒä¹‹è°ˆï¼šå¾ˆå¤šäººç”»å›¾æ—¶æ˜æ˜ç”¨äº†å½©è‰²ï¼Œä½†æ²¡æœ‰æ•ˆæœï¼Œè¯·æ£€æŸ¥ä½ æ˜¯åœ¨å“ªä¸ªå›¾ä¸Šç”»ï¼Œç”»åœ¨ç°åº¦å›¾å’ŒäºŒå€¼å›¾ä¸Šæ˜¾ç„¶æ˜¯æ²¡æœ‰å½©è‰²çš„(âŠ™oâŠ™)ã€‚</p></blockquote><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šé¦–å…ˆè·å¾—è¦æ“ä½œçš„è½®å»“ï¼Œå†è¿›è¡Œè½®å»“ç»˜åˆ¶åŠåˆ†æï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cnt = contours[<span class="number">1</span>]</span><br><span class="line">cv2.drawContours(img, [cnt], <span class="number">0</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br></pre></td></tr></table></figure><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li>è½®å»“ç‰¹å¾éå¸¸æœ‰ç”¨ï¼Œä½¿ç”¨<code>cv2.findContours()</code>å¯»æ‰¾è½®å»“ï¼Œ<code>cv2.drawContours()</code>ç»˜åˆ¶è½®å»“ã€‚</li></ul><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/d3/dc0/group__imgproc__shape.html#gadf1ad6a0b82947fa1fe3c3d497f260e0" target="_blank" rel="noopener">cv2.findContours()</a></li><li><a href="https://docs.opencv.org/4.0.0/d3/dc0/group__imgproc__shape.html#ga819779b9857cc2f8601e6526a3a5bc71" target="_blank" rel="noopener">cv2.RetrievalModes</a></li><li><a href="https://docs.opencv.org/4.0.0/d3/dc0/group__imgproc__shape.html#ga4303f45752694956374734a03c54d5ff" target="_blank" rel="noopener">cv2.ContourApproximationModes</a></li><li><a href="https://docs.opencv.org/4.0.0/d6/d6e/group__imgproc__draw.html#ga746c0625f1781f1ffc9056259103edbc" target="_blank" rel="noopener">cv2.drawContours()</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/13.%20%E8%BD%AE%E5%BB%93" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_contours/py_contours_begin/py_contours_begin.html" target="_blank" rel="noopener">Contours : Getting Started</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ å¦‚ä½•å¯»æ‰¾å¹¶ç»˜åˆ¶è½®å»“ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="è½®å»“" scheme="http://www.codec.wang/tags/%E8%BD%AE%E5%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹12ï¼šè…èš€ä¸è†¨èƒ€</title>
    <link href="http://www.codec.wang/opencv-python-erode-and-dilate/"/>
    <id>http://www.codec.wang/opencv-python-erode-and-dilate/</id>
    <published>2017-12-19T12:52:23.000Z</published>
    <updated>2020-04-07T04:57:33.752Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ å¸¸ç”¨å½¢æ€å­¦æ“ä½œï¼šè…èš€è†¨èƒ€ï¼Œå¼€è¿ç®—å’Œé—­è¿ç®—ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>äº†è§£å½¢æ€å­¦æ“ä½œçš„æ¦‚å¿µ</li><li>å­¦ä¹ è†¨èƒ€ã€è…èš€ã€å¼€è¿ç®—å’Œé—­è¿ç®—ç­‰å½¢æ€å­¦æ“ä½œ</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.erode()</code>, <code>cv2.dilate()</code>, <code>cv2.morphologyEx()</code></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><h3 id="å•¥å«å½¢æ€å­¦æ“ä½œ"><a href="#å•¥å«å½¢æ€å­¦æ“ä½œ" class="headerlink" title="å•¥å«å½¢æ€å­¦æ“ä½œ"></a>å•¥å«å½¢æ€å­¦æ“ä½œ</h3><p>å½¢æ€å­¦æ“ä½œå…¶å®å°±æ˜¯<strong>æ”¹å˜ç‰©ä½“çš„å½¢çŠ¶</strong>ï¼Œæ¯”å¦‚è…èš€å°±æ˜¯â€å˜ç˜¦â€ï¼Œè†¨èƒ€å°±æ˜¯â€å˜èƒ–â€ï¼Œçœ‹ä¸‹å›¾å°±æ˜ç™½äº†ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_morphological.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_morphological.jpg" alt=""></picture></p><blockquote><p>ç»éªŒä¹‹è°ˆï¼šå½¢æ€å­¦æ“ä½œä¸€èˆ¬ä½œç”¨äºäºŒå€¼åŒ–å›¾ï¼Œæ¥è¿æ¥ç›¸é‚»çš„å…ƒç´ æˆ–åˆ†ç¦»æˆç‹¬ç«‹çš„å…ƒç´ ã€‚<strong>è…èš€å’Œè†¨èƒ€æ˜¯é’ˆå¯¹å›¾ç‰‡ä¸­çš„ç™½è‰²éƒ¨åˆ†ï¼</strong></p></blockquote><h3 id="è…èš€"><a href="#è…èš€" class="headerlink" title="è…èš€"></a>è…èš€</h3><p>è…èš€çš„æ•ˆæœæ˜¯æŠŠå›¾ç‰‡â€å˜ç˜¦â€ï¼Œå…¶åŸç†æ˜¯åœ¨åŸå›¾çš„å°åŒºåŸŸå†…å–å±€éƒ¨æœ€å°å€¼ã€‚å› ä¸ºæ˜¯äºŒå€¼åŒ–å›¾ï¼Œåªæœ‰0å’Œ255ï¼Œæ‰€ä»¥å°åŒºåŸŸå†…æœ‰ä¸€ä¸ªæ˜¯0è¯¥åƒç´ ç‚¹å°±ä¸º0ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_erosion.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_erosion.jpg" alt=""></picture></p><p>è¿™æ ·åŸå›¾ä¸­è¾¹ç¼˜åœ°æ–¹å°±ä¼šå˜æˆ0ï¼Œè¾¾åˆ°äº†ç˜¦èº«ç›®çš„ï¼ˆå°èƒ–ç¦åˆ©(â—Ë‡âˆ€Ë‡â—)ï¼‰</p><p>OpenCVä¸­ç”¨<code>cv2.erode()</code>å‡½æ•°è¿›è¡Œè…èš€ï¼Œåªéœ€è¦æŒ‡å®šæ ¸çš„å¤§å°å°±è¡Œï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'j.bmp'</span>, <span class="number">0</span>)</span><br><span class="line">kernel = np.ones((<span class="number">5</span>, <span class="number">5</span>), np.uint8)</span><br><span class="line">erosion = cv2.erode(img, kernel)  <span class="comment"># è…èš€</span></span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸ªæ ¸ä¹Ÿå«ç»“æ„å…ƒç´ ï¼Œå› ä¸ºå½¢æ€å­¦æ“ä½œå…¶å®ä¹Ÿæ˜¯åº”ç”¨å·ç§¯æ¥å®ç°çš„ã€‚ç»“æ„å…ƒç´ å¯ä»¥æ˜¯çŸ©å½¢/æ¤­åœ†/åå­—å½¢ï¼Œå¯ä»¥ç”¨<code>cv2.getStructuringElement()</code>æ¥ç”Ÿæˆä¸åŒå½¢çŠ¶çš„ç»“æ„å…ƒç´ ï¼Œæ¯”å¦‚ï¼š</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (<span class="number">5</span>, <span class="number">5</span>))  <span class="comment"># çŸ©å½¢ç»“æ„</span></span><br><span class="line">kernel = cv2.getStructuringElement(cv2.MORPH_ELLIPSE, (<span class="number">5</span>, <span class="number">5</span>))  <span class="comment"># æ¤­åœ†ç»“æ„</span></span><br><span class="line">kernel = cv2.getStructuringElement(cv2.MORPH_CROSS, (<span class="number">5</span>, <span class="number">5</span>))  <span class="comment"># åå­—å½¢ç»“æ„</span></span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_morphological_struct_element.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_morphological_struct_element.jpg" alt=""></picture></p><h3 id="è†¨èƒ€"><a href="#è†¨èƒ€" class="headerlink" title="è†¨èƒ€"></a>è†¨èƒ€</h3><p>è†¨èƒ€ä¸è…èš€ç›¸åï¼Œå–çš„æ˜¯å±€éƒ¨æœ€å¤§å€¼ï¼Œæ•ˆæœæ˜¯æŠŠå›¾ç‰‡â€å˜èƒ–â€ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dilation = cv2.dilate(img, kernel)  <span class="comment"># è†¨èƒ€</span></span><br></pre></td></tr></table></figure><h3 id="å¼€-é—­è¿ç®—"><a href="#å¼€-é—­è¿ç®—" class="headerlink" title="å¼€/é—­è¿ç®—"></a>å¼€/é—­è¿ç®—</h3><p>å…ˆè…èš€åè†¨èƒ€å«å¼€è¿ç®—ï¼ˆå› ä¸ºå…ˆè…èš€ä¼šåˆ†å¼€ç‰©ä½“ï¼Œè¿™æ ·å®¹æ˜“è®°ä½ï¼‰ï¼Œå…¶ä½œç”¨æ˜¯ï¼šåˆ†ç¦»ç‰©ä½“ï¼Œæ¶ˆé™¤å°åŒºåŸŸã€‚è¿™ç±»å½¢æ€å­¦æ“ä½œç”¨<code>cv2.morphologyEx()</code>å‡½æ•°å®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (<span class="number">5</span>, <span class="number">5</span>))  <span class="comment"># å®šä¹‰ç»“æ„å…ƒç´ </span></span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'j_noise_out.bmp'</span>, <span class="number">0</span>)</span><br><span class="line">opening = cv2.morphologyEx(img, cv2.MORPH_OPEN, kernel)  <span class="comment"># å¼€è¿ç®—</span></span><br></pre></td></tr></table></figure><p>é—­è¿ç®—åˆ™ç›¸åï¼šå…ˆè†¨èƒ€åè…èš€ï¼ˆå…ˆè†¨èƒ€ä¼šä½¿ç™½è‰²çš„éƒ¨åˆ†æ‰©å¼ ï¼Œä»¥è‡³äºæ¶ˆé™¤/â€œé—­åˆâ€ç‰©ä½“é‡Œé¢çš„å°é»‘æ´ï¼Œæ‰€ä»¥å«é—­è¿ç®—ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(<span class="string">'j_noise_in.bmp'</span>, <span class="number">0</span>)</span><br><span class="line">closing = cv2.morphologyEx(img, cv2.MORPH_CLOSE, kernel)  <span class="comment"># é—­è¿ç®—</span></span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_morphological_opening_closing.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_morphological_opening_closing.jpg" alt=""></picture></p><blockquote><p>ç»éªŒä¹‹è°ˆï¼šå¾ˆå¤šäººå¯¹å¼€é—­è¿ç®—çš„ä½œç”¨ä¸æ˜¯å¾ˆæ¸…æ¥šï¼ˆå¥½å§ï¼Œå…¶å®æ˜¯æ¯”è¾ƒå®¹æ˜“æ··â—‘ï¹â—ï¼‰ï¼Œä½†çœ‹ä¸Šå›¾â†‘ï¼Œä¸ç”¨æ€•ï¼šå¦‚æœæˆ‘ä»¬çš„ç›®æ ‡ç‰©ä½“å¤–é¢æœ‰å¾ˆå¤šæ— å…³çš„å°åŒºåŸŸï¼Œå°±ç”¨å¼€è¿ç®—å»é™¤æ‰ï¼›å¦‚æœç‰©ä½“å†…éƒ¨æœ‰å¾ˆå¤šå°é»‘æ´ï¼Œå°±ç”¨é—­è¿ç®—å¡«å……æ‰ã€‚</p></blockquote><p>æ¥ä¸‹æ¥çš„3ç§å½¢æ€å­¦æ“ä½œå¹¶ä¸å¸¸ç”¨ï¼Œå¤§å®¶æœ‰å…´è¶£å¯ä»¥çœ‹çœ‹ï¼ˆå› ä¸ºè¾ƒçŸ­ï¼Œæ²¡æœ‰åšæˆç•ªå¤–ç¯‡ï¼‰ï¼š</p><h3 id="å…¶ä»–å½¢æ€å­¦æ“ä½œ"><a href="#å…¶ä»–å½¢æ€å­¦æ“ä½œ" class="headerlink" title="å…¶ä»–å½¢æ€å­¦æ“ä½œ"></a>å…¶ä»–å½¢æ€å­¦æ“ä½œ</h3><ul><li>å½¢æ€å­¦æ¢¯åº¦ï¼šè†¨èƒ€å›¾å‡å»è…èš€å›¾ï¼Œ<code>dilation - erosion</code>ï¼Œè¿™æ ·ä¼šå¾—åˆ°ç‰©ä½“çš„è½®å»“ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(<span class="string">'school.bmp'</span>, <span class="number">0</span>)</span><br><span class="line">gradient = cv2.morphologyEx(img, cv2.MORPH_GRADIENT, kernel)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_morphological_gradient.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_morphological_gradient.jpg" alt=""></picture></p><ul><li>é¡¶å¸½ï¼šåŸå›¾å‡å»å¼€è¿ç®—åçš„å›¾ï¼š<code>src - opening</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tophat = cv2.morphologyEx(img, cv2.MORPH_TOPHAT, kernel)</span><br></pre></td></tr></table></figure><ul><li>é»‘å¸½ï¼šé—­è¿ç®—åçš„å›¾å‡å»åŸå›¾ï¼š<code>closing - src</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blackhat = cv2.morphologyEx(img, cv2.MORPH_BLACKHAT, kernel)</span><br></pre></td></tr></table></figure><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li>å½¢æ€å­¦æ“ä½œå°±æ˜¯æ”¹å˜ç‰©ä½“çš„å½¢çŠ¶ï¼Œå¦‚è…èš€ä½¿ç‰©ä½“â€å˜ç˜¦â€ï¼Œè†¨èƒ€ä½¿ç‰©ä½“â€å˜èƒ–â€ã€‚</li><li>å…ˆè…èš€åè†¨èƒ€ä¼šåˆ†ç¦»ç‰©ä½“ï¼Œæ‰€ä»¥å«å¼€è¿ç®—ï¼Œå¸¸ç”¨æ¥å»é™¤å°åŒºåŸŸç‰©ä½“ã€‚</li><li>å…ˆè†¨èƒ€åè…èš€ä¼šæ¶ˆé™¤ç‰©ä½“å†…çš„å°æ´ï¼Œæ‰€ä»¥å«é—­è¿ç®—ã€‚å¼€/é—­ç†è§£äº†ä¹‹åå¾ˆå®¹æ˜“è®°å¿†å™¢(âŠ™oâŠ™)ã€‚</li></ul><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/d4/d86/group__imgproc__filter.html#gaeb1e0c1033e3f6b891a25d0511362aeb" target="_blank" rel="noopener">cv2.erode()</a></li><li><a href="https://docs.opencv.org/4.0.0/d4/d86/group__imgproc__filter.html#gac342a1bb6eabf6f55c803b09268e36dc" target="_blank" rel="noopener">cv2.getStructuringElement()</a></li><li><a href="https://docs.opencv.org/4.0.0/d4/d86/group__imgproc__filter.html#ga4ff0f3318642c4f469d0e11f242f3b6c" target="_blank" rel="noopener">cv2.dilate()</a></li><li><a href="https://docs.opencv.org/4.0.0/d4/d86/group__imgproc__filter.html#gac2db39b56866583a95a5680313c314ad" target="_blank" rel="noopener">cv2.MorphShapes</a></li><li><a href="https://docs.opencv.org/4.0.0/d4/d86/group__imgproc__filter.html#ga67493776e3ad1a3df63883829375201f" target="_blank" rel="noopener">cv2.morphologyEx()</a></li><li><a href="https://docs.opencv.org/4.0.0/d4/d86/group__imgproc__filter.html#ga7be549266bad7b2e6a04db49827f9f32" target="_blank" rel="noopener">cv2.MorphTypes</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/12.%20%E8%85%90%E8%9A%80%E4%B8%8E%E8%86%A8%E8%83%80" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://homepages.inf.ed.ac.uk/rbf/HIPR2/morops.htm" target="_blank" rel="noopener">Morphological Operations</a></li><li><a href="http://szeliski.org/Book/" target="_blank" rel="noopener">Computer Vision: Algorithms and Applications</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ å¸¸ç”¨å½¢æ€å­¦æ“ä½œï¼šè…èš€è†¨èƒ€ï¼Œå¼€è¿ç®—å’Œé—­è¿ç®—ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="è…èš€" scheme="http://www.codec.wang/tags/%E8%85%90%E8%9A%80/"/>
    
      <category term="è†¨èƒ€" scheme="http://www.codec.wang/tags/%E8%86%A8%E8%83%80/"/>
    
      <category term="å½¢æ€å­¦" scheme="http://www.codec.wang/tags/%E5%BD%A2%E6%80%81%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹11ï¼šè¾¹ç¼˜æ£€æµ‹</title>
    <link href="http://www.codec.wang/opencv-python-edge-detection/"/>
    <id>http://www.codec.wang/opencv-python-edge-detection/</id>
    <published>2017-12-18T09:11:48.000Z</published>
    <updated>2020-04-07T04:57:49.806Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ ä½¿ç”¨Cannyè·å–å›¾åƒçš„è¾¹ç¼˜ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><blockquote><p><a href="https://www.computer.org/cms/Computer.org/Transactions%20Home%20Pages/TPAMI/PDFs/top_ten_6.pdf" target="_blank" rel="noopener">Canny J . A Computational Approach To Edge Detection[J]. IEEE Transactions on Pattern Analysis and Machine Intelligence, 1986, PAMI-8(6):679-698.</a></p></blockquote><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>Cannyè¾¹ç¼˜æ£€æµ‹çš„ç®€å•æ¦‚å¿µ</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.Canny()</code></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><p>Cannyè¾¹ç¼˜æ£€æµ‹æ–¹æ³•å¸¸è¢«èª‰ä¸ºè¾¹ç¼˜æ£€æµ‹çš„æœ€ä¼˜æ–¹æ³•ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œå…ˆçœ‹ä¸ªä¾‹å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'handwriting.jpg'</span>, <span class="number">0</span>)</span><br><span class="line">edges = cv2.Canny(img, <span class="number">30</span>, <span class="number">70</span>)  <span class="comment"># cannyè¾¹ç¼˜æ£€æµ‹</span></span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">'canny'</span>, np.hstack((img, edges)))</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_canny_edge_detection.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_canny_edge_detection.jpg" alt=""></picture></p><p><code>cv2.Canny()</code>è¿›è¡Œè¾¹ç¼˜æ£€æµ‹ï¼Œå‚æ•°2ã€3è¡¨ç¤ºæœ€ä½ã€é«˜é˜ˆå€¼ï¼Œä¸‹é¢æ¥è§£é‡Šä¸‹å…·ä½“åŸç†ã€‚</p><blockquote><p>ç»éªŒä¹‹è°ˆï¼šä¹‹å‰æˆ‘ä»¬ç”¨ä½é€šæ»¤æ³¢çš„æ–¹å¼æ¨¡ç³Šäº†å›¾ç‰‡ï¼Œé‚£åè¿‡æ¥ï¼Œæƒ³å¾—åˆ°ç‰©ä½“çš„è¾¹ç¼˜ï¼Œå°±éœ€è¦ç”¨åˆ°é«˜é€šæ»¤æ³¢ã€‚æ¨èå…ˆé˜…è¯»ï¼š<a href="/opencv-python-extra-image-gradients/">ç•ªå¤–ç¯‡ï¼šå›¾åƒæ¢¯åº¦</a>ã€‚</p></blockquote><h3 id="Cannyè¾¹ç¼˜æ£€æµ‹"><a href="#Cannyè¾¹ç¼˜æ£€æµ‹" class="headerlink" title="Cannyè¾¹ç¼˜æ£€æµ‹"></a>Cannyè¾¹ç¼˜æ£€æµ‹</h3><p>Cannyè¾¹ç¼˜æå–çš„å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>1ï¼Œä½¿ç”¨5Ã—5é«˜æ–¯æ»¤æ³¢æ¶ˆé™¤å™ªå£°ï¼š</p><p>è¾¹ç¼˜æ£€æµ‹æœ¬èº«å±äºé”åŒ–æ“ä½œï¼Œå¯¹å™ªç‚¹æ¯”è¾ƒæ•æ„Ÿï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œå¹³æ»‘å¤„ç†ã€‚é«˜æ–¯æ»¤æ³¢çš„å…·ä½“å†…å®¹å‚è€ƒå‰ä¸€ç¯‡ï¼š<a href="/opencv-python-smoothing-images/">å¹³æ»‘å›¾åƒ</a><br>$$<br>K=\frac{1}{256}\left[<br> \begin{matrix}<br>   1 &amp; 4 &amp; 6 &amp; 4 &amp; 1 \newline<br>   4 &amp; 16 &amp; 24 &amp; 16 &amp; 4  \newline<br>   6 &amp; 24 &amp; 36 &amp; 24 &amp; 6  \newline<br>   4 &amp; 16 &amp; 24 &amp; 16 &amp; 4  \newline<br>   1 &amp; 4 &amp; 6 &amp; 4 &amp; 1<br>  \end{matrix}<br>  \right]<br>$$<br>2ï¼Œè®¡ç®—å›¾åƒæ¢¯åº¦çš„æ–¹å‘ï¼š</p><p>é¦–å…ˆä½¿ç”¨Sobelç®—å­è®¡ç®—ä¸¤ä¸ªæ–¹å‘ä¸Šçš„æ¢¯åº¦$ G_x $å’Œ$ G_y $ï¼Œç„¶åç®—å‡ºæ¢¯åº¦çš„æ–¹å‘ï¼š<br>$$<br>\theta=\arctan(\frac{G_y}{G_x})<br>$$<br>ä¿ç•™è¿™å››ä¸ªæ–¹å‘çš„æ¢¯åº¦ï¼š0Â°/45Â°/90Â°/135Â°ï¼Œæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿæˆ‘ä»¬æ¥ç€çœ‹ã€‚</p><p>3ï¼Œå–å±€éƒ¨æå¤§å€¼ï¼š</p><p>æ¢¯åº¦å…¶å®å·²ç»è¡¨ç¤ºäº†è½®å»“ï¼Œä½†ä¸ºäº†è¿›ä¸€æ­¥ç­›é€‰ï¼Œå¯ä»¥åœ¨ä¸Šé¢çš„å››ä¸ªè§’åº¦æ–¹å‘ä¸Šå†å–å±€éƒ¨æå¤§å€¼ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_canny_direction.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_canny_direction.jpg" alt=""></picture></p><p>æ¯”å¦‚ï¼ŒAç‚¹åœ¨45Â°æ–¹å‘ä¸Šå¤§äºB/Cç‚¹ï¼Œé‚£å°±ä¿ç•™å®ƒï¼ŒæŠŠB/Cè®¾ç½®ä¸º0ã€‚</p><p>4ï¼Œæ»åé˜ˆå€¼ï¼š</p><p>ç»è¿‡å‰é¢ä¸‰æ­¥ï¼Œå°±åªå‰©ä¸‹0å’Œå¯èƒ½çš„è¾¹ç¼˜æ¢¯åº¦å€¼äº†ï¼Œä¸ºäº†æœ€ç»ˆç¡®å®šä¸‹æ¥ï¼Œéœ€è¦è®¾å®šé«˜ä½é˜ˆå€¼ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_canny_max_min_val.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_canny_max_min_val.jpg" alt=""></picture></p><ul><li>åƒç´ ç‚¹çš„å€¼å¤§äºæœ€é«˜é˜ˆå€¼ï¼Œé‚£è‚¯å®šæ˜¯è¾¹ç¼˜ï¼ˆä¸Šå›¾Aï¼‰</li><li>åŒç†åƒç´ å€¼å°äºæœ€ä½é˜ˆå€¼ï¼Œé‚£è‚¯å®šä¸æ˜¯è¾¹ç¼˜</li><li>åƒç´ å€¼ä»‹äºä¸¤è€…ä¹‹é—´ï¼Œå¦‚æœä¸é«˜äºæœ€é«˜é˜ˆå€¼çš„ç‚¹è¿æ¥ï¼Œä¹Ÿç®—è¾¹ç¼˜ï¼Œæ‰€ä»¥ä¸Šå›¾ä¸­Cç®—ï¼ŒBä¸ç®—</li></ul><p>Cannyæ¨èçš„é«˜ä½é˜ˆå€¼æ¯”åœ¨2:1åˆ°3:1ä¹‹é—´ã€‚</p><h3 id="å…ˆé˜ˆå€¼åˆ†å‰²åæ£€æµ‹"><a href="#å…ˆé˜ˆå€¼åˆ†å‰²åæ£€æµ‹" class="headerlink" title="å…ˆé˜ˆå€¼åˆ†å‰²åæ£€æµ‹"></a>å…ˆé˜ˆå€¼åˆ†å‰²åæ£€æµ‹</h3><p>å…¶å®å¾ˆå¤šæƒ…å†µä¸‹ï¼Œé˜ˆå€¼åˆ†å‰²åå†æ£€æµ‹è¾¹ç¼˜ï¼Œæ•ˆæœä¼šæ›´å¥½ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">_, thresh = cv2.threshold(img, <span class="number">0</span>, <span class="number">255</span>, cv2.THRESH_BINARY + cv2.THRESH_OTSU)</span><br><span class="line">edges = cv2.Canny(thresh, <span class="number">30</span>, <span class="number">70</span>)</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">'canny'</span>, np.hstack((img, thresh, edges)))</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>ä»£ç ä¸­æˆ‘ç”¨äº†<a href="/opencv-python-extra-otsu-thresholding/">ç•ªå¤–ç¯‡ï¼šOtsué˜ˆå€¼æ³•</a>ä¸­çš„è‡ªåŠ¨é˜ˆå€¼åˆ†å‰²ï¼Œå¦‚æœä½ ä¸å¤ªäº†è§£ï¼Œå¤§å¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹æ³•ï¼Œä¸è¿‡å¦‚æœæ˜¯ä¸‹é¢è¿™ç§å›¾ç‰‡ï¼Œæ¨èç”¨Otsué˜ˆå€¼æ³•ã€‚å¦å¤–Pythonä¸­æŸä¸ªå€¼ä¸ç”¨çš„è¯ï¼Œå°±å†™ä¸ªä¸‹åˆ’çº¿â€™_â€™ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_canny_edge_detection_threshold.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_canny_edge_detection_threshold.jpg" alt=""></picture></p><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><ol><li>ï¼ˆé€‰åšï¼‰å¦‚æœä½ ä¸å¤ªç†è§£é«˜ä½é˜ˆå€¼çš„æ•ˆæœï¼Œåˆ›å»ºä¸¤ä¸ªæ»‘åŠ¨æ¡æ¥è°ƒèŠ‚å®ƒä»¬çš„å€¼çœ‹çœ‹ï¼š</li></ol><p><img src="http://blog.codec.wang/cv2_trackbar_maxval_minval_canny.gif" alt=""></p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li>Cannyæ˜¯ç”¨çš„æœ€å¤šçš„è¾¹ç¼˜æ£€æµ‹ç®—æ³•ï¼Œç”¨<code>cv2.Canny()</code>å®ç°ã€‚</li></ul><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/dd/d1a/group__imgproc__feature.html#ga04723e007ed888ddf11d9ba04e2232de" target="_blank" rel="noopener">cv2.Canny()</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/11.%20%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_canny/py_canny.html" target="_blank" rel="noopener">Canny Edge Detection</a></li><li><a href="http://www.opencv.org.cn/opencvdoc/2.3.2/html/doc/tutorials/imgproc/imgtrans/canny_detector/canny_detector.html" target="_blank" rel="noopener">Canny è¾¹ç¼˜æ£€æµ‹</a></li><li><a href="https://www.computer.org/cms/Computer.org/Transactions%20Home%20Pages/TPAMI/PDFs/top_ten_6.pdf" target="_blank" rel="noopener">Canny J . A Computational Approach To Edge Detection[J]. IEEE Transactions on Pattern Analysis and Machine Intelligence, 1986, PAMI-8(6):679-698.</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ ä½¿ç”¨Cannyè·å–å›¾åƒçš„è¾¹ç¼˜ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="è¾¹ç¼˜" scheme="http://www.codec.wang/tags/%E8%BE%B9%E7%BC%98/"/>
    
      <category term="Canny" scheme="http://www.codec.wang/tags/Canny/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡9ï¼šå›¾åƒæ¢¯åº¦</title>
    <link href="http://www.codec.wang/opencv-python-extra-image-gradients/"/>
    <id>http://www.codec.wang/opencv-python-extra-image-gradients/</id>
    <published>2017-12-18T02:51:43.000Z</published>
    <updated>2020-04-07T04:52:40.918Z</updated>
    
    <content type="html"><![CDATA[<p>äº†è§£å›¾åƒæ¢¯åº¦å’Œè¾¹ç¼˜æ£€æµ‹çš„ç›¸å…³æ¦‚å¿µã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><p>è¿˜è®°å¾—å‰é¢<a href="/opencv-python-smoothing-images/">å¹³æ»‘å›¾åƒ</a>ä¸­æåˆ°çš„æ»¤æ³¢ä¸æ¨¡ç³Šçš„åŒºåˆ«å—ï¼Ÿæˆ‘ä»¬è¯´ä½é€šæ»¤æ³¢å™¨æ˜¯æ¨¡ç³Šï¼Œé«˜é€šæ»¤æ³¢å™¨æ˜¯é”åŒ–ï¼Œè¿™èŠ‚æˆ‘ä»¬å°±æ¥çœ‹çœ‹é«˜é€šæ»¤æ³¢å™¨ã€‚</p><hr><h2 id="å›¾åƒæ¢¯åº¦"><a href="#å›¾åƒæ¢¯åº¦" class="headerlink" title="å›¾åƒæ¢¯åº¦"></a><a href="https://baike.baidu.com/item/å›¾åƒæ¢¯åº¦/8528837?fr=aladdin" target="_blank" rel="noopener">å›¾åƒæ¢¯åº¦</a></h2><p>å¦‚æœä½ è¿˜è®°å¾—é«˜æ•°ä¸­ç”¨ä¸€é˜¶å¯¼æ•°æ¥æ±‚æå€¼çš„è¯ï¼Œå°±å¾ˆå®¹æ˜“ç†è§£äº†ï¼šæŠŠå›¾ç‰‡æƒ³è±¡æˆè¿ç»­å‡½æ•°ï¼Œå› ä¸ºè¾¹ç¼˜éƒ¨åˆ†çš„åƒç´ å€¼æ˜¯ä¸æ—è¾¹åƒç´ æ˜æ˜¾æœ‰åŒºåˆ«çš„ï¼Œæ‰€ä»¥å¯¹å›¾ç‰‡å±€éƒ¨æ±‚æå€¼ï¼Œå°±å¯ä»¥å¾—åˆ°æ•´å¹…å›¾ç‰‡çš„è¾¹ç¼˜ä¿¡æ¯äº†ã€‚ä¸è¿‡å›¾ç‰‡æ˜¯äºŒç»´çš„ç¦»æ•£å‡½æ•°ï¼Œå¯¼æ•°å°±å˜æˆäº†å·®åˆ†ï¼Œè¿™ä¸ªå·®åˆ†å°±ç§°ä¸ºå›¾åƒçš„æ¢¯åº¦ã€‚</p><p>å½“ç„¶ï¼Œå¤§éƒ¨åˆ†äººåº”è¯¥æ˜¯æ—©å¿˜è®°é«˜æ•°äº†(ï¿£â–½ï¿£)â€ï¼Œæ‰€ä»¥çœ‹ä¸æ‡‚çš„è¯ï¼Œå°±æŠŠä¸Šé¢çš„è§£é‡Šåˆ’æ‰ï¼Œæˆ‘ä»¬é‡æ–°ä»å·ç§¯çš„è§’åº¦æ¥çœ‹çœ‹ã€‚</p><h3 id="å‚ç›´è¾¹ç¼˜æå–"><a href="#å‚ç›´è¾¹ç¼˜æå–" class="headerlink" title="å‚ç›´è¾¹ç¼˜æå–"></a>å‚ç›´è¾¹ç¼˜æå–</h3><p>æ»¤æ³¢æ˜¯åº”ç”¨å·ç§¯æ¥å®ç°çš„ï¼Œå·ç§¯çš„å…³é”®å°±æ˜¯å·ç§¯æ ¸ï¼Œæˆ‘ä»¬æ¥è€ƒå¯Ÿä¸‹é¢è¿™ä¸ªå·ç§¯æ ¸ï¼š</p><p>$$<br>k1 = \left[<br> \begin{matrix}<br>   -1 &amp; 0 &amp; 1 \newline<br>   -2 &amp; 0 &amp; 2 \newline<br>   -1 &amp; 0 &amp; 1<br>  \end{matrix}<br>  \right]<br>$$</p><p>è¿™ä¸ªæ ¸æ˜¯ç”¨æ¥æå–å›¾ç‰‡ä¸­çš„å‚ç›´è¾¹ç¼˜çš„ï¼Œæ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿçœ‹ä¸‹å›¾ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_sobel_edge_detection.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_sobel_edge_detection.jpg" alt=""></picture></p><p>å½“å‰åˆ—å·¦å³ä¸¤ä¾§çš„å…ƒç´ è¿›è¡Œå·®åˆ†ï¼Œç”±äºè¾¹ç¼˜çš„å€¼æ˜æ˜¾å°äºï¼ˆæˆ–å¤§äºï¼‰å‘¨è¾¹åƒç´ ï¼Œæ‰€ä»¥è¾¹ç¼˜çš„å·®åˆ†ç»“æœä¼šæ˜æ˜¾ä¸åŒï¼Œè¿™æ ·å°±æå–å‡ºäº†å‚ç›´è¾¹ç¼˜ã€‚åŒç†ï¼ŒæŠŠä¸Šé¢é‚£ä¸ªçŸ©é˜µè½¬ç½®ä¸€ä¸‹ï¼Œå°±æ˜¯æå–æ°´å¹³è¾¹ç¼˜ã€‚è¿™ç§å·®åˆ†æ“ä½œå°±ç§°ä¸ºå›¾åƒçš„æ¢¯åº¦è®¡ç®—ï¼š</p><p>$$<br>k2 = \left[<br> \begin{matrix}<br>   -1 &amp; -2 &amp; -1 \newline<br>   0 &amp; 0 &amp; 0 \newline<br>   1 &amp; 2 &amp; 1<br>  \end{matrix}<br>  \right]<br>$$</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_horizen_vertical_edge_detection.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_horizen_vertical_edge_detection.jpg" alt="å‚ç›´å’Œæ°´å¹³è¾¹ç¼˜æå–"></picture></p><blockquote><p>è¿˜è®°å¾—æ»¤æ³¢å‡½æ•°<code>cv2.filter2D()</code>å—ï¼Ÿï¼ˆ<a href="/opencv-python-extra-padding-and-convolution/">ç•ªå¤–ç¯‡ï¼šå·ç§¯åŸºç¡€</a>ï¼‰æˆ‘ä»¬æ¥æ‰‹åŠ¨å®ç°ä¸Šé¢çš„åŠŸèƒ½ï¼š</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(<span class="string">'sudoku.jpg'</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªå·±è¿›è¡Œå‚ç›´è¾¹ç¼˜æå–</span></span><br><span class="line">kernel = np.array([[<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">                   [<span class="number">-2</span>, <span class="number">0</span>, <span class="number">2</span>],</span><br><span class="line">                   [<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>]], dtype=np.float32)</span><br><span class="line">dst_v = cv2.filter2D(img, <span class="number">-1</span>, kernel)</span><br><span class="line"><span class="comment"># è‡ªå·±è¿›è¡Œæ°´å¹³è¾¹ç¼˜æå–</span></span><br><span class="line">dst_h = cv2.filter2D(img, <span class="number">-1</span>, kernel.T)</span><br><span class="line"><span class="comment"># æ¨ªå‘å¹¶æ’å¯¹æ¯”æ˜¾ç¤º</span></span><br><span class="line">cv2.imshow(<span class="string">'edge'</span>, np.hstack((img, dst_v, dst_h)))</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><h3 id="Sobelç®—å­"><a href="#Sobelç®—å­" class="headerlink" title="Sobelç®—å­"></a>Sobelç®—å­</h3><p>ä¸Šé¢çš„è¿™ç§å·®åˆ†æ–¹æ³•å°±å«<a href="https://baike.baidu.com/item/Sobel%E7%AE%97%E5%AD%90/11000092?fr=aladdin" target="_blank" rel="noopener">Sobelç®—å­</a>ï¼Œå®ƒå…ˆåœ¨å‚ç›´æ–¹å‘è®¡ç®—æ¢¯åº¦$ G_x=k_1Ã—src $ï¼Œå†åœ¨æ°´å¹³æ–¹å‘è®¡ç®—æ¢¯åº¦$ G_y=k_2Ã—src $ï¼Œæœ€åæ±‚å‡ºæ€»æ¢¯åº¦ï¼š\(G=\sqrt{Gx^2+Gy^2}\)</p><p>æˆ‘ä»¬å¯ä»¥æŠŠå‰é¢çš„ä»£ç ç”¨Sobelç®—å­æ›´ç®€å•åœ°å®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sobelx = cv2.Sobel(img, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">0</span>, ksize=<span class="number">3</span>)  <span class="comment"># åªè®¡ç®—xæ–¹å‘</span></span><br><span class="line">sobely = cv2.Sobel(img, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, ksize=<span class="number">3</span>)  <span class="comment"># åªè®¡ç®—yæ–¹å‘</span></span><br></pre></td></tr></table></figure><blockquote><p>ç»éªŒä¹‹è°ˆï¼šå¾ˆå¤šäººç–‘é—®ï¼ŒSobelç®—å­çš„å·ç§¯æ ¸è¿™å‡ ä¸ªå€¼æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿäº‹å®ä¸Šï¼Œå¹¶æ²¡æœ‰è§„å®šï¼Œä½ å¯ä»¥ç”¨ä½ è‡ªå·±çš„ã€‚</p></blockquote><p>æ¯”å¦‚ï¼Œæœ€åˆåªåˆ©ç”¨é¢†åŸŸé—´çš„åŸå§‹å·®å€¼æ¥æ£€æµ‹è¾¹ç¼˜çš„<a href="https://baike.baidu.com/item/Prewitt%E7%AE%97%E5%AD%90/8415245?fr=aladdin" target="_blank" rel="noopener">Prewittç®—å­</a>ï¼š</p><p>$$<br>K = \left[<br> \begin{matrix}<br>   -1 &amp; 0 &amp; 1 \newline<br>   -1 &amp; 0 &amp; 1 \newline<br>   -1 &amp; 0 &amp; 1<br>  \end{matrix}<br>  \right]<br>$$</p><p>è¿˜æœ‰æ¯”Sobelæ›´å¥½ç”¨çš„<strong>Scharrç®—å­</strong>ï¼Œå¤§å®¶å¯ä»¥äº†è§£ä¸‹ï¼š</p><p>$$<br>K = \left[<br> \begin{matrix}<br>   -3 &amp; 0 &amp; 3 \newline<br>   -10 &amp; 0 &amp; 10 \newline<br>   -3 &amp; 0 &amp; 3<br>  \end{matrix}<br>  \right]<br>$$</p><p>è¿™äº›ç®—æ³•éƒ½æ˜¯ä¸€é˜¶è¾¹ç¼˜æ£€æµ‹çš„ä»£è¡¨ï¼Œç½‘ä¸Šä¹Ÿæœ‰ç®—å­ä¹‹é—´çš„å¯¹æ¯”èµ„æ–™ï¼Œæœ‰å…´è¶£çš„å¯å‚è€ƒ<a href="#å¼•ç”¨">å¼•ç”¨</a>ã€‚</p><h3 id="Laplacianç®—å­"><a href="#Laplacianç®—å­" class="headerlink" title="Laplacianç®—å­"></a><a href="(https://baike.baidu.com/item/Laplacian%E7%AE%97%E5%AD%90">Laplacianç®—å­</a></h3><p>é«˜æ•°ä¸­ç”¨ä¸€é˜¶å¯¼æ•°æ±‚æå€¼ï¼Œåœ¨è¿™äº›æå€¼çš„åœ°æ–¹ï¼ŒäºŒé˜¶å¯¼æ•°ä¸º0ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥é€šè¿‡æ±‚äºŒé˜¶å¯¼è®¡ç®—æ¢¯åº¦ï¼š$ dst=\frac{\partial^2 f}{\partial x^2}+\frac{\partial^2 f}{\partial y^2} $</p><p>ä¸€ç»´çš„ä¸€é˜¶å’ŒäºŒé˜¶å·®åˆ†å…¬å¼åˆ†åˆ«ä¸ºï¼š<br>$$<br>\frac{\partial f}{\partial x}=f(x+1)-f(x)<br>$$</p><p>$$<br>\frac{\partial^2 f}{\partial x^2}=f(x+1)+f(x-1)-2f(x)<br>$$</p><p>æå–å‰é¢çš„ç³»æ•°ï¼Œé‚£ä¹ˆä¸€ç»´çš„Laplacianæ»¤æ³¢æ ¸æ˜¯ï¼š<br>$$<br>K=\left[<br> \begin{matrix}<br>   1 &amp; -2 &amp; 1<br>  \end{matrix}<br>  \right]<br>$$<br>è€Œå¯¹äºäºŒç»´å‡½æ•°f(x,y)ï¼Œä¸¤ä¸ªæ–¹å‘çš„äºŒé˜¶å·®åˆ†åˆ†åˆ«æ˜¯ï¼š</p><p>$$<br>\frac{\partial^2 f}{\partial x^2}=f(x+1,y)+f(x-1,y)-2f(x,y)<br>$$</p><p>$$<br>\frac{\partial^2 f}{\partial y^2}=f(x,y+1)+f(x,y-1)-2f(x,y)<br>$$</p><p>åˆåœ¨ä¸€èµ·å°±æ˜¯ï¼š</p><p>$$<br>\triangledown^2 f(x,y)=f(x+1,y)+f(x-1,y)+f(x,y+1)+f(x,y-1)-4f(x,y)<br>$$</p><p>åŒæ ·æå–å‰é¢çš„ç³»æ•°ï¼Œé‚£ä¹ˆäºŒç»´çš„Laplacianæ»¤æ³¢æ ¸å°±æ˜¯ï¼š</p><p>$$<br>K = \left[<br> \begin{matrix}<br>   0 &amp; 1 &amp; 0 \newline<br>   1 &amp; -4 &amp; 1 \newline<br>   0 &amp; 1 &amp; 0<br>  \end{matrix}<br>  \right]<br>$$</p><p>è¿™å°±æ˜¯Laplacianç®—å­çš„å›¾åƒå·ç§¯æ¨¡æ¿ï¼Œæœ‰äº›èµ„æ–™ä¸­åœ¨æ­¤åŸºç¡€ä¸Šè€ƒè™‘æ–œå¯¹è§’æƒ…å†µï¼Œå°†å·ç§¯æ ¸æ‹“å±•ä¸ºï¼š</p><p>$$<br>K = \left[<br> \begin{matrix}<br>   1 &amp; 1 &amp; 1 \newline<br>   1 &amp; -8 &amp; 1 \newline<br>   1 &amp; 1 &amp; 1<br>  \end{matrix}<br>  \right]<br>$$</p><p>OpenCVä¸­ç›´æ¥ä½¿ç”¨<code>cv2.Laplacian()</code>å‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">laplacian = cv2.Laplacian(img, <span class="number">-1</span>)  <span class="comment"># ä½¿ç”¨Laplacianç®—å­</span></span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_laplacian.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_laplacian.jpg" alt=""></picture></p><p>Laplacianç®—å­æ˜¯äºŒé˜¶è¾¹ç¼˜æ£€æµ‹çš„å…¸å‹ä»£è¡¨ï¼Œä¸€/äºŒé˜¶è¾¹ç¼˜æ£€æµ‹å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œå¤§å®¶å¯è‡ªè¡Œäº†è§£ã€‚</p><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><ol><li>ï¼ˆé€‰åšï¼‰åŒå¿—ä»¬æœ‰ç©ºè¡¥è¡¥é«˜æ•°<del>å§¿åŠ¿</del>ï¼ˆçŸ¥è¯†ï¼‰å‘—ï¼(âœ¿â—•â€¿â—•âœ¿)</li></ol><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/%E7%95%AA%E5%A4%96%E7%AF%8709.%20%E5%9B%BE%E5%83%8F%E6%A2%AF%E5%BA%A6" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_gradients/py_gradients.html" target="_blank" rel="noopener">Image Gradients</a></li><li><a href="http://www.opencv.org.cn/opencvdoc/2.3.2/html/doc/tutorials/imgproc/imgtrans/sobel_derivatives/sobel_derivatives.html#sobel-derivatives" target="_blank" rel="noopener">Sobelå¯¼æ•°</a></li><li><a href="https://zh.wikipedia.org/wiki/%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘ï¼šè¾¹ç¼˜æ£€æµ‹</a></li><li><a href="https://www.jianshu.com/p/2334bee37de5" target="_blank" rel="noopener">æ•°å­—å›¾åƒ - è¾¹ç¼˜æ£€æµ‹åŸç† - Sobel, Laplace, Cannyç®—å­</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;äº†è§£å›¾åƒæ¢¯åº¦å’Œè¾¹ç¼˜æ£€æµ‹çš„ç›¸å…³æ¦‚å¿µã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="æ¢¯åº¦" scheme="http://www.codec.wang/tags/%E6%A2%AF%E5%BA%A6/"/>
    
      <category term="Sobel" scheme="http://www.codec.wang/tags/Sobel/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹10ï¼šå¹³æ»‘å›¾åƒ</title>
    <link href="http://www.codec.wang/opencv-python-smoothing-images/"/>
    <id>http://www.codec.wang/opencv-python-smoothing-images/</id>
    <published>2017-12-15T01:44:24.000Z</published>
    <updated>2020-04-07T04:45:13.352Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ æ¨¡ç³Š/å¹³æ»‘å›¾åƒï¼Œæ¶ˆé™¤å™ªç‚¹ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>æ¨¡ç³Š/å¹³æ»‘å›¾ç‰‡æ¥æ¶ˆé™¤å›¾ç‰‡å™ªå£°</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.blur()</code>, <code>cv2.GaussianBlur()</code>, <code>cv2.medianBlur()</code>, <code>cv2.bilateralFilter()</code></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><h3 id="æ»¤æ³¢ä¸æ¨¡ç³Š"><a href="#æ»¤æ³¢ä¸æ¨¡ç³Š" class="headerlink" title="æ»¤æ³¢ä¸æ¨¡ç³Š"></a>æ»¤æ³¢ä¸æ¨¡ç³Š</h3><blockquote><p>æ¨èå¤§å®¶å…ˆé˜…è¯»ï¼š<a href="/opencv-python-extra-padding-and-convolution/">ç•ªå¤–ç¯‡ï¼šå·ç§¯åŸºç¡€(å›¾ç‰‡è¾¹æ¡†)</a>ï¼Œæœ‰åŠ©äºç†è§£å·ç§¯å’Œæ»¤æ³¢çš„æ¦‚å¿µã€‚</p></blockquote><p>å…³äºæ»¤æ³¢å’Œæ¨¡ç³Šï¼Œå¾ˆå¤šäººåˆ†ä¸æ¸…ï¼Œæˆ‘æ¥ç»™å¤§å®¶ç†ç†ï¼ˆè™½è¯´å¦‚æ­¤ï¼Œæˆ‘åé¢ä¹Ÿä¼šæ··ç€ç”¨,,Ô¾ã…‚Ô¾,,ï¼‰ï¼š</p><ul><li>å®ƒä»¬éƒ½å±äºå·ç§¯ï¼Œä¸åŒæ»¤æ³¢æ–¹æ³•ä¹‹é—´åªæ˜¯å·ç§¯æ ¸ä¸åŒï¼ˆå¯¹çº¿æ€§æ»¤æ³¢è€Œè¨€ï¼‰</li><li>ä½é€šæ»¤æ³¢å™¨æ˜¯æ¨¡ç³Šï¼Œé«˜é€šæ»¤æ³¢å™¨æ˜¯é”åŒ–</li></ul><p>ä½é€šæ»¤æ³¢å™¨å°±æ˜¯å…è®¸ä½é¢‘ä¿¡å·é€šè¿‡ï¼Œåœ¨å›¾åƒä¸­è¾¹ç¼˜å’Œå™ªç‚¹éƒ½ç›¸å½“äºé«˜é¢‘éƒ¨åˆ†ï¼Œæ‰€ä»¥ä½é€šæ»¤æ³¢å™¨ç”¨äºå»é™¤å™ªç‚¹ã€å¹³æ»‘å’Œæ¨¡ç³Šå›¾åƒã€‚é«˜é€šæ»¤æ³¢å™¨åˆ™åä¹‹ï¼Œç”¨æ¥å¢å¼ºå›¾åƒè¾¹ç¼˜ï¼Œè¿›è¡Œé”åŒ–å¤„ç†ã€‚</p><blockquote><p>å¸¸è§å™ªå£°æœ‰<a href="https://baike.baidu.com/item/%E6%A4%92%E7%9B%90%E5%99%AA%E5%A3%B0/3455958?fr=aladdin" target="_blank" rel="noopener">æ¤’ç›å™ªå£°</a>å’Œ<a href="https://baike.baidu.com/item/%E9%AB%98%E6%96%AF%E5%99%AA%E5%A3%B0" target="_blank" rel="noopener">é«˜æ–¯å™ªå£°</a>ï¼Œæ¤’ç›å™ªå£°å¯ä»¥ç†è§£ä¸ºæ–‘ç‚¹ï¼Œéšæœºå‡ºç°åœ¨å›¾åƒä¸­çš„é»‘ç‚¹æˆ–ç™½ç‚¹ï¼›é«˜æ–¯å™ªå£°å¯ä»¥ç†è§£ä¸ºæ‹æ‘„å›¾ç‰‡æ—¶ç”±äºå…‰ç…§ç­‰åŸå› é€ æˆçš„å™ªå£°ã€‚</p></blockquote><h3 id="å‡å€¼æ»¤æ³¢"><a href="#å‡å€¼æ»¤æ³¢" class="headerlink" title="å‡å€¼æ»¤æ³¢"></a>å‡å€¼æ»¤æ³¢</h3><p>å‡å€¼æ»¤æ³¢æ˜¯ä¸€ç§æœ€ç®€å•çš„æ»¤æ³¢å¤„ç†ï¼Œå®ƒå–çš„æ˜¯å·ç§¯æ ¸åŒºåŸŸå†…å…ƒç´ çš„å‡å€¼ï¼Œç”¨<code>cv2.blur()</code>å®ç°ï¼Œå¦‚3Ã—3çš„å·ç§¯æ ¸ï¼š</p><p>$$<br> kernel = \frac{1}{9}\left[<br> \begin{matrix}<br>   1 &amp; 1 &amp; 1 \newline<br>   1 &amp; 1 &amp; 1 \newline<br>   1 &amp; 1 &amp; 1<br>  \end{matrix}<br>  \right]<br>$$</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(<span class="string">'lena.jpg'</span>)</span><br><span class="line">blur = cv2.blur(img, (<span class="number">3</span>, <span class="number">3</span>))  <span class="comment"># å‡å€¼æ¨¡ç³Š</span></span><br></pre></td></tr></table></figure><blockquote><p>æ‰€æœ‰çš„æ»¤æ³¢å‡½æ•°éƒ½æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°borderTypeï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯<a href="/opencv-python-extra-padding-and-convolution/">ç•ªå¤–ç¯‡ï¼šå·ç§¯åŸºç¡€(å›¾ç‰‡è¾¹æ¡†)</a>ä¸­æ‰€è¯´çš„è¾¹æ¡†å¡«å……æ–¹å¼ã€‚</p></blockquote><h3 id="æ–¹æ¡†æ»¤æ³¢"><a href="#æ–¹æ¡†æ»¤æ³¢" class="headerlink" title="æ–¹æ¡†æ»¤æ³¢"></a>æ–¹æ¡†æ»¤æ³¢</h3><p>æ–¹æ¡†æ»¤æ³¢è·Ÿå‡å€¼æ»¤æ³¢å¾ˆåƒï¼Œå¦‚3Ã—3çš„æ»¤æ³¢æ ¸å¦‚ä¸‹ï¼š</p><p>$$<br>k = a\left[<br> \begin{matrix}<br>   1 &amp; 1 &amp; 1 \newline<br>   1 &amp; 1 &amp; 1 \newline<br>   1 &amp; 1 &amp; 1<br>  \end{matrix}<br>  \right]<br>$$</p><p>ç”¨<code>cv2.boxFilter()</code>å‡½æ•°å®ç°ï¼Œå½“å¯é€‰å‚æ•°normalizeä¸ºTrueçš„æ—¶å€™ï¼Œæ–¹æ¡†æ»¤æ³¢å°±æ˜¯å‡å€¼æ»¤æ³¢ï¼Œä¸Šå¼ä¸­çš„aå°±ç­‰äº1/9ï¼›normalizeä¸ºFalseçš„æ—¶å€™ï¼Œa=1ï¼Œç›¸å½“äºæ±‚åŒºåŸŸå†…çš„åƒç´ å’Œã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‰é¢çš„å‡å€¼æ»¤æ³¢ä¹Ÿå¯ä»¥ç”¨æ–¹æ¡†æ»¤æ³¢å®ç°ï¼šnormalize=True</span></span><br><span class="line">blur = cv2.boxFilter(img, <span class="number">-1</span>, (<span class="number">3</span>, <span class="number">3</span>), normalize=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h3 id="é«˜æ–¯æ»¤æ³¢"><a href="#é«˜æ–¯æ»¤æ³¢" class="headerlink" title="é«˜æ–¯æ»¤æ³¢"></a>é«˜æ–¯æ»¤æ³¢</h3><p>å‰é¢ä¸¤ç§æ»¤æ³¢æ–¹å¼ï¼Œå·ç§¯æ ¸å†…çš„æ¯ä¸ªå€¼éƒ½ä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯è¯´å›¾åƒåŒºåŸŸä¸­æ¯ä¸ªåƒç´ çš„æƒé‡ä¹Ÿå°±ä¸€æ ·ã€‚é«˜æ–¯æ»¤æ³¢çš„å·ç§¯æ ¸æƒé‡å¹¶ä¸ç›¸åŒï¼šä¸­é—´åƒç´ ç‚¹æƒé‡æœ€é«˜ï¼Œè¶Šè¿œç¦»ä¸­å¿ƒçš„åƒç´ æƒé‡è¶Šå°ï¼Œæ¥ï¼Œæ•°å­¦æ—¶é—´( â•¯â–¡â•° )ï¼Œè¿˜è®°å¾—æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„æ›²çº¿å—ï¼Ÿ</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_gaussian_kernel_function_theory.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_gaussian_kernel_function_theory.jpg" alt=""></picture></p><p>æ˜¾ç„¶è¿™ç§å¤„ç†å…ƒç´ é—´æƒå€¼çš„æ–¹å¼æ›´åŠ åˆç†ä¸€äº›ã€‚å›¾åƒæ˜¯2ç»´çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨<a href="https://en.wikipedia.org/wiki/Gaussian_filter" target="_blank" rel="noopener">2ç»´çš„é«˜æ–¯å‡½æ•°</a>ï¼Œæ¯”å¦‚OpenCVä¸­é»˜è®¤çš„3Ã—3çš„é«˜æ–¯å·ç§¯æ ¸ï¼ˆå…·ä½“åŸç†å’Œå·ç§¯æ ¸ç”Ÿæˆæ–¹å¼è¯·å‚è€ƒæ–‡æœ«çš„<a href="#ç•ªå¤–å°ç¯‡ï¼šé«˜æ–¯æ»¤æ³¢å·ç§¯æ ¸">ç•ªå¤–å°ç¯‡</a>ï¼‰ï¼š</p><p>$$<br>k = \left[<br> \begin{matrix}<br>   0.0625 &amp; 0.125 &amp; 0.0625 \newline<br>   0.125 &amp; 0.25 &amp; 0.125 \newline<br>   0.0625 &amp; 0.125 &amp; 0.0625<br>  \end{matrix}<br>  \right]<br>$$<br>OpenCVä¸­å¯¹åº”å‡½æ•°ä¸º<code>cv2.GaussianBlur(src,ksize,sigmaX)</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(<span class="string">'gaussian_noise.bmp'</span>)</span><br><span class="line"><span class="comment"># å‡å€¼æ»¤æ³¢vsé«˜æ–¯æ»¤æ³¢</span></span><br><span class="line">blur = cv2.blur(img, (<span class="number">5</span>, <span class="number">5</span>))  <span class="comment"># å‡å€¼æ»¤æ³¢</span></span><br><span class="line">gaussian = cv2.GaussianBlur(img, (<span class="number">5</span>, <span class="number">5</span>), <span class="number">1</span>)  <span class="comment"># é«˜æ–¯æ»¤æ³¢</span></span><br></pre></td></tr></table></figure><p>å‚æ•°3 Ïƒxå€¼è¶Šå¤§ï¼Œæ¨¡ç³Šæ•ˆæœè¶Šæ˜æ˜¾ã€‚é«˜æ–¯æ»¤æ³¢ç›¸æ¯”å‡å€¼æ»¤æ³¢æ•ˆç‡è¦æ…¢ï¼Œä½†å¯ä»¥æœ‰æ•ˆæ¶ˆé™¤é«˜æ–¯å™ªå£°ï¼Œèƒ½ä¿ç•™æ›´å¤šçš„å›¾åƒç»†èŠ‚ï¼Œæ‰€ä»¥ç»å¸¸è¢«ç§°ä¸ºæœ€æœ‰ç”¨çš„æ»¤æ³¢å™¨ã€‚å‡å€¼æ»¤æ³¢ä¸é«˜æ–¯æ»¤æ³¢çš„å¯¹æ¯”ç»“æœå¦‚ä¸‹ï¼ˆå‡å€¼æ»¤æ³¢ä¸¢å¤±çš„ç»†èŠ‚æ›´å¤šï¼‰ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_gaussian_vs_average.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_gaussian_vs_average.jpg" alt=""></picture></p><h3 id="ä¸­å€¼æ»¤æ³¢"><a href="#ä¸­å€¼æ»¤æ³¢" class="headerlink" title="ä¸­å€¼æ»¤æ³¢"></a>ä¸­å€¼æ»¤æ³¢</h3><p><a href="https://baike.baidu.com/item/%E4%B8%AD%E5%80%BC" target="_blank" rel="noopener">ä¸­å€¼</a>åˆå«ä¸­ä½æ•°ï¼Œæ˜¯æ‰€æœ‰æ•°æ’åºåå–ä¸­é—´çš„å€¼ã€‚ä¸­å€¼æ»¤æ³¢å°±æ˜¯ç”¨åŒºåŸŸå†…çš„ä¸­å€¼æ¥ä»£æ›¿æœ¬åƒç´ å€¼ï¼Œæ‰€ä»¥é‚£ç§å­¤ç«‹çš„æ–‘ç‚¹ï¼Œå¦‚0æˆ–255å¾ˆå®¹æ˜“æ¶ˆé™¤æ‰ï¼Œé€‚ç”¨äºå»é™¤æ¤’ç›å™ªå£°å’Œæ–‘ç‚¹å™ªå£°ã€‚ä¸­å€¼æ˜¯ä¸€ç§éçº¿æ€§æ“ä½œï¼Œæ•ˆç‡ç›¸æ¯”å‰é¢å‡ ç§çº¿æ€§æ»¤æ³¢è¦æ…¢ã€‚</p><p>æ¯”å¦‚ä¸‹é¢è¿™å¼ æ–‘ç‚¹å™ªå£°å›¾ï¼Œç”¨ä¸­å€¼æ»¤æ³¢æ˜¾ç„¶æ›´å¥½ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(<span class="string">'salt_noise.bmp'</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment"># å‡å€¼æ»¤æ³¢vsä¸­å€¼æ»¤æ³¢</span></span><br><span class="line">blur = cv2.blur(img, (<span class="number">5</span>, <span class="number">5</span>))  <span class="comment"># å‡å€¼æ»¤æ³¢</span></span><br><span class="line">median = cv2.medianBlur(img, <span class="number">5</span>)  <span class="comment"># ä¸­å€¼æ»¤æ³¢</span></span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_median_vs_average.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_median_vs_average.jpg" alt=""></picture></p><h3 id="åŒè¾¹æ»¤æ³¢"><a href="#åŒè¾¹æ»¤æ³¢" class="headerlink" title="åŒè¾¹æ»¤æ³¢"></a>åŒè¾¹æ»¤æ³¢</h3><p>æ¨¡ç³Šæ“ä½œåŸºæœ¬éƒ½ä¼šæŸå¤±æ‰å›¾åƒç»†èŠ‚ä¿¡æ¯ï¼Œå°¤å…¶å‰é¢ä»‹ç»çš„çº¿æ€§æ»¤æ³¢å™¨ï¼Œå›¾åƒçš„è¾¹ç¼˜ä¿¡æ¯å¾ˆéš¾ä¿ç•™ä¸‹æ¥ã€‚ç„¶è€Œï¼Œè¾¹ç¼˜ï¼ˆedgeï¼‰ä¿¡æ¯æ˜¯å›¾åƒä¸­å¾ˆé‡è¦çš„ä¸€ä¸ªç‰¹å¾ï¼Œæ‰€ä»¥è¿™æ‰æœ‰äº†<a href="https://baike.baidu.com/item/%E5%8F%8C%E8%BE%B9%E6%BB%A4%E6%B3%A2" target="_blank" rel="noopener">åŒè¾¹æ»¤æ³¢</a>ã€‚ç”¨<code>cv2.bilateralFilter()</code>å‡½æ•°å®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(<span class="string">'lena.jpg'</span>)</span><br><span class="line"><span class="comment"># åŒè¾¹æ»¤æ³¢vsé«˜æ–¯æ»¤æ³¢</span></span><br><span class="line">gau = cv2.GaussianBlur(img, (<span class="number">5</span>, <span class="number">5</span>), <span class="number">0</span>)  <span class="comment"># é«˜æ–¯æ»¤æ³¢</span></span><br><span class="line">blur = cv2.bilateralFilter(img, <span class="number">9</span>, <span class="number">75</span>, <span class="number">75</span>)  <span class="comment"># åŒè¾¹æ»¤æ³¢</span></span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_bilateral_vs_gaussian.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_bilateral_vs_gaussian.jpg" alt=""></picture></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒåŒè¾¹æ»¤æ³¢æ˜æ˜¾ä¿ç•™äº†æ›´å¤šè¾¹ç¼˜ä¿¡æ¯ã€‚</p><h2 id="ç•ªå¤–å°ç¯‡ï¼šé«˜æ–¯æ»¤æ³¢å·ç§¯æ ¸"><a href="#ç•ªå¤–å°ç¯‡ï¼šé«˜æ–¯æ»¤æ³¢å·ç§¯æ ¸" class="headerlink" title="ç•ªå¤–å°ç¯‡ï¼šé«˜æ–¯æ»¤æ³¢å·ç§¯æ ¸"></a>ç•ªå¤–å°ç¯‡ï¼šé«˜æ–¯æ»¤æ³¢å·ç§¯æ ¸</h2><p>è¦è§£é‡Šé«˜æ–¯æ»¤æ³¢å·ç§¯æ ¸æ˜¯å¦‚ä½•ç”Ÿæˆçš„ï¼Œéœ€è¦å…ˆå¤ä¹ ä¸‹æ¦‚ç‡è®ºçš„çŸ¥è¯†ï¼ˆWhatï¼Ÿï¼Ÿåˆæ˜¯æ•°å­¦( â•¯â–¡â•° )ï¼‰</p><p>ä¸€ç»´çš„é«˜æ–¯å‡½æ•°/æ­£æ€åˆ†å¸ƒ$ X\sim N(\mu, \sigma^2) $ï¼š<br>$$<br>G(x)=\frac{1}{\sqrt{2\pi}\sigma}exp(-\frac{(x-\mu)^2}{2\sigma^2})<br>$$<br>å½“$ \mu=0, \sigma^2=1 $æ—¶ï¼Œç§°ä¸ºæ ‡å‡†æ­£æ€åˆ†å¸ƒ$ X\sim N(0, 1) $ï¼š<br>$$<br>G(x)=\frac{1}{\sqrt{2\pi}}exp(-\frac{x^2}{2})<br>$$<br>äºŒç»´X/Yç›¸äº’ç‹¬ç«‹çš„é«˜æ–¯å‡½æ•°ï¼š<br>$$<br>G(x,y)=\frac{1}{2\pi\sigma_x\sigma_y}exp(-\frac{(x-\mu_x)^2+(y-\mu_y)^2}{2\sigma_x\sigma_y})=G(x)G(y)<br>$$</p><p>ç”±ä¸Šå¯çŸ¥ï¼Œ<strong>äºŒç»´é«˜æ–¯å‡½æ•°å…·æœ‰å¯åˆ†ç¦»æ€§</strong>ï¼Œæ‰€ä»¥OpenCVåˆ†ä¸¤æ­¥è®¡ç®—äºŒç»´é«˜æ–¯å·ç§¯ï¼Œå…ˆæ°´å¹³å†å‚ç›´ï¼Œæ¯ä¸ªæ–¹å‘ä¸Šéƒ½æ˜¯ä¸€ç»´çš„å·ç§¯ã€‚OpenCVä¸­è¿™ä¸ªä¸€ç»´å·ç§¯çš„è®¡ç®—å…¬å¼ç±»ä¼¼äºä¸Šé¢çš„ä¸€ç»´é«˜æ–¯å‡½æ•°ï¼š<br>$$<br>G(i)=\alpha *exp(-\frac{(i-\frac{ksize-1}{2})^2}{2\sigma^2})<br>$$<br>å…¶ä¸­i=0â€¦ksize-1ï¼ŒÎ±æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œä¹Ÿç§°ä¸ºç¼©æ”¾å› å­ï¼Œå®ƒä½¿å¾—\(\sum{G(i)}=1\)</p><p>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç”¨<a href="https://docs.opencv.org/3.3.1/d4/d86/group__imgproc__filter.html#gac05a120c1ae92a6060dd0db190a61afa" target="_blank" rel="noopener"><code>cv2.getGaussianKernel(ksize,sigma)</code></a>æ¥ç”Ÿæˆä¸€ç»´å·ç§¯æ ¸ï¼š</p><ul><li>sigma&lt;=0æ—¶ï¼Œ<code>sigma=0.3*((ksize-1)*0.5 - 1) + 0.8</code></li><li>sigma&gt;0æ—¶ï¼Œsigma=sigma</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(cv2.getGaussianKernel(<span class="number">3</span>, <span class="number">0</span>))</span><br><span class="line"><span class="comment"># ç»“æœï¼š[[0.25][0.5][0.25]]</span></span><br></pre></td></tr></table></figure><p>ç”Ÿæˆä¹‹åï¼Œå…ˆè¿›è¡Œä¸‰æ¬¡çš„æ°´å¹³å·ç§¯ï¼š<br>$$<br>IÃ—\left[<br> \begin{matrix}<br>   0.25 &amp; 0.5 &amp; 0.25 \newline<br>    0.25 &amp; 0.5 &amp; 0.25 \newline<br>   0.25 &amp; 0.5 &amp; 0.25<br>  \end{matrix}<br>  \right]<br>$$<br>ç„¶åå†è¿›è¡Œå‚ç›´çš„ä¸‰æ¬¡å·ç§¯ï¼š<br>$$<br>IÃ—\left[<br> \begin{matrix}<br>   0.25 &amp; 0.5 &amp; 0.25 \newline<br>    0.25 &amp; 0.5 &amp; 0.25 \newline<br>   0.25 &amp; 0.5 &amp; 0.25<br>  \end{matrix}<br>  \right]Ã—\left[<br> \begin{matrix}<br>   0.25 &amp; 0.25 &amp; 0.25 \newline<br>    0.5 &amp; 0.5 &amp; 0.5 \newline<br>   0.25 &amp; 0.25 &amp; 0.25<br>  \end{matrix}<br>  \right] =IÃ—\left[<br> \begin{matrix}<br>   0.0625 &amp; 0.125 &amp; 0.0625 \newline<br>   0.125 &amp; 0.25 &amp; 0.125 \newline<br>   0.0625 &amp; 0.125 &amp; 0.0625<br>  \end{matrix}<br>  \right]<br>$$<br>è¿™å°±æ˜¯OpenCVä¸­é«˜æ–¯å·ç§¯æ ¸çš„ç”Ÿæˆæ–¹å¼ã€‚å…¶å®ï¼ŒOpenCVæºç ä¸­å¯¹å°äº7Ã—7çš„æ ¸æ˜¯ç›´æ¥è®¡ç®—å¥½æ”¾åœ¨æ•°ç»„é‡Œé¢çš„ï¼Œè¿™æ ·è®¡ç®—é€Ÿåº¦ä¼šå¿«ä¸€ç‚¹ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹ä¸‹æºç ï¼š<a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/blob/master/10.%20%E5%B9%B3%E6%BB%91%E5%9B%BE%E5%83%8F/cv2_source_code_getGaussianKernel.cpp" target="_blank" rel="noopener">getGaussianKernel()</a></p><p>ä¸Šé¢çŸ©é˜µä¹Ÿå¯ä»¥å†™æˆï¼š<br>$$<br>\frac{1}{16}\left[<br> \begin{matrix}<br>   1&amp; 2 &amp; 1 \newline<br>   2 &amp; 4 &amp; 2 \newline<br>   1 &amp; 2 &amp; 1<br>  \end{matrix}<br>  \right]<br>$$</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li>åœ¨ä¸çŸ¥é“ç”¨ä»€ä¹ˆæ»¤æ³¢å™¨å¥½çš„æ—¶å€™ï¼Œä¼˜å…ˆé«˜æ–¯æ»¤æ³¢<code>cv2.GaussianBlur()</code>ï¼Œç„¶åå‡å€¼æ»¤æ³¢<code>cv2.blur()</code>ã€‚</li><li>æ–‘ç‚¹å’Œæ¤’ç›å™ªå£°ä¼˜å…ˆä½¿ç”¨ä¸­å€¼æ»¤æ³¢<code>cv2.medianBlur()</code>ã€‚</li><li>è¦å»é™¤å™ªç‚¹çš„åŒæ—¶å°½å¯èƒ½ä¿ç•™æ›´å¤šçš„è¾¹ç¼˜ä¿¡æ¯ï¼Œä½¿ç”¨åŒè¾¹æ»¤æ³¢<code>cv2.bilateralFilter()</code>ã€‚</li><li>çº¿æ€§æ»¤æ³¢æ–¹å¼ï¼šå‡å€¼æ»¤æ³¢ã€æ–¹æ¡†æ»¤æ³¢ã€é«˜æ–¯æ»¤æ³¢ï¼ˆé€Ÿåº¦ç›¸å¯¹å¿«ï¼‰ã€‚</li><li>éçº¿æ€§æ»¤æ³¢æ–¹å¼ï¼šä¸­å€¼æ»¤æ³¢ã€åŒè¾¹æ»¤æ³¢ï¼ˆé€Ÿåº¦ç›¸å¯¹æ…¢ï¼‰ã€‚</li></ul><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/d4/d86/group__imgproc__filter.html#ga8c45db9afe636703801b0b2e440fce37" target="_blank" rel="noopener">cv2.blur()</a></li><li><a href="https://docs.opencv.org/4.0.0/d4/d86/group__imgproc__filter.html#gad533230ebf2d42509547d514f7d3fbc3" target="_blank" rel="noopener">cv2.boxFilter()</a></li><li><a href="https://docs.opencv.org/4.0.0/d4/d86/group__imgproc__filter.html#gaabe8c836e97159a9193fb0b11ac52cf1" target="_blank" rel="noopener">cv2.GaussianBlur()</a></li><li><a href="https://docs.opencv.org/4.0.0/d4/d86/group__imgproc__filter.html#gac05a120c1ae92a6060dd0db190a61afa" target="_blank" rel="noopener">cv2.getGaussianKernel()</a></li><li><a href="https://docs.opencv.org/4.0.0/d4/d86/group__imgproc__filter.html#ga564869aa33e58769b4469101aac458f9" target="_blank" rel="noopener">cv2.medianBlur()</a></li><li><a href="https://docs.opencv.org/4.0.0/d4/d86/group__imgproc__filter.html#ga9d7064d478c95d60003cf839430737ed" target="_blank" rel="noopener">cv2.bilateralFilter()</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/10.%20%E5%B9%B3%E6%BB%91%E5%9B%BE%E5%83%8F" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_filtering/py_filtering.html" target="_blank" rel="noopener">Smoothing Images</a></li><li><a href="http://www.opencv.org.cn/opencvdoc/2.3.2/html/doc/tutorials/imgproc/gausian_median_blur_bilateral_filter/gausian_median_blur_bilateral_filter.html" target="_blank" rel="noopener">å›¾åƒå¹³æ»‘å¤„ç†</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ æ¨¡ç³Š/å¹³æ»‘å›¾åƒï¼Œæ¶ˆé™¤å™ªç‚¹ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="æ¨¡ç³Š" scheme="http://www.codec.wang/tags/%E6%A8%A1%E7%B3%8A/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡8ï¼šå·ç§¯åŸºç¡€(å›¾ç‰‡è¾¹æ¡†)</title>
    <link href="http://www.codec.wang/opencv-python-extra-padding-and-convolution/"/>
    <id>http://www.codec.wang/opencv-python-extra-padding-and-convolution/</id>
    <published>2017-12-14T08:27:45.000Z</published>
    <updated>2020-04-07T04:53:04.946Z</updated>
    
    <content type="html"><![CDATA[<p>äº†è§£å·ç§¯/æ»¤æ³¢çš„åŸºç¡€çŸ¥è¯†ï¼Œç»™å›¾ç‰‡æ·»åŠ è¾¹æ¡†ã€‚<a id="more"></a>å¦‚æœä½ å·²äº†è§£ç›¸å…³ç†è®ºï¼Œè¯·ç›´æ¥è·³åˆ°<a href="#æ·»åŠ è¾¹æ¡†">æ·»åŠ è¾¹æ¡†</a>éƒ¨åˆ†ã€‚</p><p>å·ç§¯çš„æ¦‚å¿µå…¶å®å¾ˆå¥½ç†è§£ï¼Œä¸‹é¢æˆ‘å°±ç»™å¤§å®¶åšä¸ªæœ€ç®€å•çš„è§£é‡Šï¼Œç»å¯¹è½»æ¾åŠ æ„‰å¿«çš„è¾£o(<em>ï¿£â–½ï¿£</em>)o</p><hr><h2 id="å·ç§¯"><a href="#å·ç§¯" class="headerlink" title="å·ç§¯"></a>å·ç§¯</h2><p>ä»€ä¹ˆæ˜¯äºŒç»´å·ç§¯å‘¢ï¼Ÿçœ‹ä¸‹é¢ä¸€å¼ å›¾å°±ä¸€ç›®äº†ç„¶ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_convolution.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_convolution.jpg" alt=""></picture></p><p>å·ç§¯å°±æ˜¯å¾ªç¯å¯¹<strong>å›¾åƒè·Ÿä¸€ä¸ªæ ¸é€ä¸ªå…ƒç´ ç›¸ä¹˜å†æ±‚å’Œå¾—åˆ°å¦å¤–ä¸€å‰¯å›¾åƒçš„æ“ä½œ</strong>ï¼Œæ¯”å¦‚ç»“æœå›¾ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ 5æ˜¯æ€ä¹ˆç®—çš„å‘¢ï¼ŸåŸå›¾ä¸­3Ã—3çš„åŒºåŸŸä¸3Ã—3çš„æ ¸é€ä¸ªå…ƒç´ ç›¸ä¹˜å†ç›¸åŠ ï¼š<br>$$<br>5=1\times1+2\times0+1\times0+0\times0+1\times0+1\times0+3\times0+0\times0+2\times2<br>$$<br>ç®—å®Œä¹‹åï¼Œæ•´ä¸ªæ¡†å†å¾€å³ç§»ä¸€æ­¥ç»§ç»­è®¡ç®—ï¼Œæ¨ªå‘è®¡ç®—å®Œåï¼Œå†å¾€ä¸‹ç§»ä¸€æ­¥ç»§ç»­è®¡ç®—â€¦â€¦ç½‘ä¸Šæœ‰ä¸€å‰¯å¾ˆç»å…¸çš„åŠ¨æ€å›¾ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç†è§£å·ç§¯ï¼š</p><p><img src="http://blog.codec.wang/cv2_understand_cnn.gif" alt=""></p><h2 id="padding"><a href="#padding" class="headerlink" title="padding"></a>padding</h2><p>ä¸éš¾å‘ç°ï¼Œå‰é¢æˆ‘ä»¬ç”¨3Ã—3çš„æ ¸å¯¹ä¸€å‰¯6Ã—6çš„å›¾åƒè¿›è¡Œå·ç§¯ï¼Œå¾—åˆ°çš„æ˜¯4Ã—4çš„å›¾ï¼Œå›¾ç‰‡ç¼©å°äº†ï¼é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥<strong>æŠŠåŸå›¾æ‰©å……ä¸€åœˆï¼Œå†å·ç§¯ï¼Œè¿™ä¸ªæ“ä½œå«å¡«å……padding</strong>ã€‚</p><blockquote><p>äº‹å®ä¸Šï¼ŒåŸå›¾ä¸ºnÃ—nï¼Œå·ç§¯æ ¸ä¸ºfÃ—fï¼Œæœ€ç»ˆç»“æœå›¾å¤§å°ä¸º(n-f+1) Ã— (n-f+1)ã€‚</p></blockquote><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_padding.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_padding.jpg" alt=""></picture></p><p>é‚£ä¹ˆæ‰©å±•çš„è¿™ä¸€å±‚åº”è¯¥å¡«å……ä»€ä¹ˆå€¼å‘¢ï¼ŸOpenCVä¸­æœ‰å¥½å‡ ç§å¡«å……æ–¹å¼ï¼Œéƒ½ä½¿ç”¨<code>cv2.copyMakeBorder()</code>å‡½æ•°å®ç°ï¼Œä¸€èµ·æ¥çœ‹çœ‹ã€‚</p><h2 id="æ·»åŠ è¾¹æ¡†"><a href="#æ·»åŠ è¾¹æ¡†" class="headerlink" title="æ·»åŠ è¾¹æ¡†"></a>æ·»åŠ è¾¹æ¡†</h2><p><code>cv2.copyMakeBorder()</code>ç”¨æ¥ç»™å›¾ç‰‡æ·»åŠ è¾¹æ¡†ï¼Œå®ƒæœ‰ä¸‹é¢å‡ ä¸ªå‚æ•°ï¼š</p><ul><li>srcï¼šè¦å¤„ç†çš„åŸå›¾</li><li>top, bottom, left, rightï¼šä¸Šä¸‹å·¦å³è¦æ‰©å±•çš„åƒç´ æ•°</li><li><strong>borderType</strong>ï¼šè¾¹æ¡†ç±»å‹ï¼Œè¿™ä¸ªå°±æ˜¯éœ€è¦å…³æ³¨çš„å¡«å……æ–¹å¼ï¼Œè¯¦æƒ…è¯·å‚è€ƒï¼š<a href="https://docs.opencv.org/3.3.1/d2/de8/group__core__array.html#ga209f2f4869e304c82d07739337eae7c5" target="_blank" rel="noopener">BorderTypes</a></li></ul><p>å…¶ä¸­é»˜è®¤æ–¹å¼å’Œå›ºå®šå€¼æ–¹å¼æœ€å¸¸ç”¨ï¼Œæˆ‘ä»¬è¯¦ç»†è¯´æ˜ä¸€ä¸‹ï¼š</p><h3 id="å›ºå®šå€¼å¡«å……"><a href="#å›ºå®šå€¼å¡«å……" class="headerlink" title="å›ºå®šå€¼å¡«å……"></a>å›ºå®šå€¼å¡«å……</h3><p>é¡¾åæ€ä¹‰ï¼Œ<code>cv2.BORDER_CONSTANT</code>è¿™ç§æ–¹å¼å°±æ˜¯è¾¹æ¡†éƒ½å¡«å……æˆä¸€ä¸ªå›ºå®šçš„å€¼ï¼Œæ¯”å¦‚ä¸‹é¢çš„ç¨‹åºéƒ½å¡«å……0ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(<span class="string">'6_by_6.bmp'</span>, <span class="number">0</span>)</span><br><span class="line">print(img)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å›ºå®šå€¼è¾¹æ¡†ï¼Œç»Ÿä¸€éƒ½å¡«å……0ä¹Ÿç§°ä¸ºzero padding</span></span><br><span class="line">cons = cv2.copyMakeBorder(img, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, cv2.BORDER_CONSTANT, value=<span class="number">0</span>)</span><br><span class="line">print(cons)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_zero_padding_output.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_zero_padding_output.jpg" alt=""></picture></p><h3 id="é»˜è®¤è¾¹æ¡†ç±»å‹"><a href="#é»˜è®¤è¾¹æ¡†ç±»å‹" class="headerlink" title="é»˜è®¤è¾¹æ¡†ç±»å‹"></a>é»˜è®¤è¾¹æ¡†ç±»å‹</h3><p>é»˜è®¤è¾¹æ¡†<code>cv2.BORDER_DEFAULT</code>å…¶å®æ˜¯å–é•œåƒå¯¹ç§°çš„åƒç´ å¡«å……ï¼Œæ¯”è¾ƒæ‹—å£ï¼Œä¸€æ­¥æ­¥è§£é‡Šï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">default = cv2.copyMakeBorder(img, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, cv2.BORDER_DEFAULT)</span><br><span class="line">print(default)</span><br></pre></td></tr></table></figure><p>é¦–å…ˆè¿›è¡Œä¸Šä¸‹å¡«å……ï¼Œå¡«å……æˆä¸åŸå›¾åƒè¾¹ç•Œå¯¹ç§°çš„å€¼ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_up_down_padding_first.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_up_down_padding_first.jpg" alt=""></picture></p><p>åŒç†å†è¿›è¡Œå·¦å³ä¸¤è¾¹çš„å¡«å……ï¼Œæœ€åæŠŠå››ä¸ªé¡¶ç‚¹è¡¥å……ä¸Šå°±å¥½äº†ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_right_left_padding_second2.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_right_left_padding_second2.jpg" alt=""></picture></p><blockquote><p>ç»éªŒä¹‹è°ˆï¼šä¸€èˆ¬æƒ…å†µä¸‹é»˜è®¤æ–¹å¼æ›´åŠ åˆç†ï¼Œå› ä¸ºè¾¹ç•Œçš„åƒç´ å€¼æ›´åŠ æ¥è¿‘ã€‚å…·ä½“åº”è§†åœºåˆè€Œå®šã€‚</p></blockquote><h2 id="OpenCVè¿›è¡Œå·ç§¯"><a href="#OpenCVè¿›è¡Œå·ç§¯" class="headerlink" title="OpenCVè¿›è¡Œå·ç§¯"></a>OpenCVè¿›è¡Œå·ç§¯</h2><p>OpenCVä¸­ç”¨<code>cv2.filter2D()</code>å®ç°å·ç§¯æ“ä½œï¼Œæ¯”å¦‚æˆ‘ä»¬çš„æ ¸æ˜¯ä¸‹é¢è¿™æ ·ï¼ˆ3Ã—3åŒºåŸŸåƒç´ çš„å’Œé™¤ä»¥10ï¼‰ï¼š</p><p>$$<br>M = \frac{1}{10}\left[<br> \begin{matrix}<br>   1 &amp; 1 &amp; 1 \newline<br>   1 &amp; 1 &amp; 1 \newline<br>   1 &amp; 1 &amp; 1<br>  \end{matrix}<br>  \right] \tag{3}<br>$$</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(<span class="string">'lena.jpg'</span>)</span><br><span class="line"><span class="comment"># å®šä¹‰å·ç§¯æ ¸</span></span><br><span class="line">kernel = np.ones((<span class="number">3</span>, <span class="number">3</span>), np.float32) / <span class="number">10</span></span><br><span class="line"><span class="comment"># å·ç§¯æ“ä½œï¼Œ-1è¡¨ç¤ºé€šé“æ•°ä¸åŸå›¾ç›¸åŒ</span></span><br><span class="line">dst = cv2.filter2D(img, <span class="number">-1</span>, kernel)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_convolution_kernel_3_3.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_convolution_kernel_3_3.jpg" alt=""></picture></p><p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ ¸å¯¹å›¾åƒè¿›è¡Œäº†æ¨¡ç³Šå¤„ç†ï¼Œè¿™æ˜¯å·ç§¯çš„ä¼—å¤šåŠŸèƒ½ä¹‹ä¸€ã€‚å½“ç„¶å·ç§¯è¿˜æœ‰å¾ˆå¤šçŸ¥è¯†æ²¡æœ‰å­¦åˆ°ï¼Œåé¢æˆ‘ä»¬å†ç»§ç»­æ·±å…¥ã€‚</p><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><ol><li>å°è¯•ç»™â€lena.jpgâ€æ·»åŠ å‡ ç§ä¸åŒçš„è¾¹æ¡†ç±»å‹ï¼Œå¯¹æ¯”ä¸‹æ•ˆæœã€‚</li></ol><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/%E7%95%AA%E5%A4%96%E7%AF%8708.%20%E5%8D%B7%E7%A7%AF%E5%9F%BA%E7%A1%80(%E5%9B%BE%E7%89%87%E8%BE%B9%E6%A1%86" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_core/py_basic_ops/py_basic_ops.html" target="_blank" rel="noopener">Basic Operations on Images</a></li><li><a href="http://blog.csdn.net/zouxy09/article/details/49080029" target="_blank" rel="noopener">å›¾åƒå·ç§¯ä¸æ»¤æ³¢çš„ä¸€äº›çŸ¥è¯†ç‚¹</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;äº†è§£å·ç§¯/æ»¤æ³¢çš„åŸºç¡€çŸ¥è¯†ï¼Œç»™å›¾ç‰‡æ·»åŠ è¾¹æ¡†ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="å·ç§¯" scheme="http://www.codec.wang/tags/%E5%8D%B7%E7%A7%AF/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹9ï¼šå›¾åƒæ··åˆ</title>
    <link href="http://www.codec.wang/opencv-python-image-blending/"/>
    <id>http://www.codec.wang/opencv-python-image-blending/</id>
    <published>2017-12-10T06:13:10.000Z</published>
    <updated>2020-04-07T04:44:48.367Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ å›¾ç‰‡é—´çš„æ•°å­¦è¿ç®—ï¼Œå›¾åƒæ··åˆã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>å›¾ç‰‡é—´çš„æ•°å­¦è¿ç®—ï¼Œå¦‚ç›¸åŠ ã€æŒ‰ä½è¿ç®—ç­‰</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.add()</code>, <code>cv2.addWeighted()</code>, <code>cv2.bitwise_and()</code></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><blockquote><p>é¦–å…ˆæ­å–œä½ å·²ç»å®Œæˆäº†å…¥é—¨ç¯‡çš„å­¦ä¹ å™¢ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ ä¸€äº›OpenCVçš„åŸºç¡€å†…å®¹ï¼ŒåŠ æ²¹(à¸‡ â€¢_â€¢)à¸‡</p></blockquote><h3 id="å›¾ç‰‡ç›¸åŠ "><a href="#å›¾ç‰‡ç›¸åŠ " class="headerlink" title="å›¾ç‰‡ç›¸åŠ "></a>å›¾ç‰‡ç›¸åŠ </h3><p>è¦å åŠ ä¸¤å¼ å›¾ç‰‡ï¼Œå¯ä»¥ç”¨<code>cv2.add()</code>å‡½æ•°ï¼Œç›¸åŠ ä¸¤å¹…å›¾ç‰‡çš„å½¢çŠ¶ï¼ˆé«˜åº¦/å®½åº¦/é€šé“æ•°ï¼‰å¿…é¡»ç›¸åŒã€‚numpyä¸­å¯ä»¥ç›´æ¥ç”¨res = img + img1ç›¸åŠ ï¼Œä½†è¿™ä¸¤è€…çš„ç»“æœå¹¶ä¸ç›¸åŒï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = np.uint8([<span class="number">250</span>])</span><br><span class="line">y = np.uint8([<span class="number">10</span>])</span><br><span class="line">print(cv2.add(x, y))  <span class="comment"># 250+10 = 260 =&gt; 255</span></span><br><span class="line">print(x + y)  <span class="comment"># 250+10 = 260 % 256 = 4</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯äºŒå€¼åŒ–å›¾ç‰‡ï¼ˆåªæœ‰0å’Œ255ä¸¤ç§å€¼ï¼‰ï¼Œä¸¤è€…ç»“æœæ˜¯ä¸€æ ·çš„ï¼ˆç”¨numpyçš„æ–¹å¼æ›´ç®€ä¾¿ä¸€äº›ï¼‰ã€‚</p><h3 id="å›¾åƒæ··åˆ"><a href="#å›¾åƒæ··åˆ" class="headerlink" title="å›¾åƒæ··åˆ"></a>å›¾åƒæ··åˆ</h3><p>å›¾åƒæ··åˆ<code>cv2.addWeighted()</code>ä¹Ÿæ˜¯ä¸€ç§å›¾ç‰‡ç›¸åŠ çš„æ“ä½œï¼Œåªä¸è¿‡ä¸¤å¹…å›¾ç‰‡çš„æƒé‡ä¸ä¸€æ ·ï¼ŒÎ³ç›¸å½“äºä¸€ä¸ªä¿®æ­£å€¼ï¼š</p><p>$$<br>dst = \alpha\times img1+\beta\times img2 + \gamma<br>$$</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">img1 = cv2.imread(<span class="string">'lena_small.jpg'</span>)</span><br><span class="line">img2 = cv2.imread(<span class="string">'opencv-logo-white.png'</span>)</span><br><span class="line">res = cv2.addWeighted(img1, <span class="number">0.6</span>, img2, <span class="number">0.4</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_image_blending_6_4.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_image_blending_6_4.jpg" alt="å›¾åƒæ··åˆ"></picture></p><blockquote><p>ç»éªŒä¹‹è°ˆï¼šÎ±å’ŒÎ²éƒ½ç­‰äº1æ—¶ï¼Œå°±ç›¸å½“äºå›¾ç‰‡ç›¸åŠ ã€‚</p></blockquote><h3 id="æŒ‰ä½æ“ä½œ"><a href="#æŒ‰ä½æ“ä½œ" class="headerlink" title="æŒ‰ä½æ“ä½œ"></a>æŒ‰ä½æ“ä½œ</h3><p>æŒ‰ä½æ“ä½œåŒ…æ‹¬æŒ‰ä½ä¸/æˆ–/é/å¼‚æˆ–æ“ä½œï¼Œæœ‰ä»€ä¹ˆç”¨é€”å‘¢ï¼Ÿæ¯”å¦‚è¯´æˆ‘ä»¬è¦å®ç°ä¸‹å›¾çš„æ•ˆæœï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_bitwise_operations_demo.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_bitwise_operations_demo.jpg" alt=""></picture></p><p>å¦‚æœå°†ä¸¤å¹…å›¾ç‰‡ç›´æ¥ç›¸åŠ ä¼šæ”¹å˜å›¾ç‰‡çš„é¢œè‰²ï¼Œå¦‚æœç”¨å›¾åƒæ··åˆï¼Œåˆ™ä¼šæ”¹å˜å›¾ç‰‡çš„é€æ˜åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨æŒ‰ä½æ“ä½œã€‚é¦–å…ˆæ¥äº†è§£ä¸€ä¸‹<a href="https://baike.baidu.com/item/%E6%8E%A9%E8%86%9C/8544392?fr=aladdin" target="_blank" rel="noopener">æ©è†œ</a>ï¼ˆmaskï¼‰çš„æ¦‚å¿µï¼šæ©è†œæ˜¯ç”¨ä¸€å‰¯äºŒå€¼åŒ–å›¾ç‰‡å¯¹å¦å¤–ä¸€å¹…å›¾ç‰‡è¿›è¡Œå±€éƒ¨çš„é®æŒ¡ï¼Œçœ‹ä¸‹å›¾å°±ä¸€ç›®äº†ç„¶äº†ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_understand_mask.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_understand_mask.jpg" alt="æ©è†œæ¦‚å¿µ"></picture></p><p>æ‰€ä»¥æˆ‘ä»¬çš„æ€è·¯å°±æ˜¯æŠŠåŸå›¾ä¸­è¦æ”¾logoçš„åŒºåŸŸæŠ å‡ºæ¥ï¼Œå†æŠŠlogoæ”¾è¿›å»å°±è¡Œäº†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">img1 = cv2.imread(<span class="string">'lena.jpg'</span>)</span><br><span class="line">img2 = cv2.imread(<span class="string">'opencv-logo-white.png'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠŠlogoæ”¾åœ¨å·¦ä¸Šè§’ï¼Œæ‰€ä»¥æˆ‘ä»¬åªå…³å¿ƒè¿™ä¸€å—åŒºåŸŸ</span></span><br><span class="line">rows, cols = img2.shape[:<span class="number">2</span>]</span><br><span class="line">roi = img1[:rows, :cols]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ©è†œ</span></span><br><span class="line">img2gray = cv2.cvtColor(img2, cv2.COLOR_BGR2GRAY)</span><br><span class="line">ret, mask = cv2.threshold(img2gray, <span class="number">10</span>, <span class="number">255</span>, cv2.THRESH_BINARY)</span><br><span class="line">mask_inv = cv2.bitwise_not(mask)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿ç•™é™¤logoå¤–çš„èƒŒæ™¯</span></span><br><span class="line">img1_bg = cv2.bitwise_and(roi, roi, mask=mask_inv)</span><br><span class="line">dst = cv2.add(img1_bg, img2)  <span class="comment"># è¿›è¡Œèåˆ</span></span><br><span class="line">img1[:rows, :cols] = dst  <span class="comment"># èåˆåæ”¾åœ¨åŸå›¾ä¸Š</span></span><br></pre></td></tr></table></figure><blockquote><p>ç»éªŒä¹‹è°ˆï¼šæ©è†œçš„æ¦‚å¿µåœ¨å›¾åƒæ··åˆ/å åŠ çš„åœºæ™¯ä¸‹ä½¿ç”¨è¾ƒå¤šï¼Œå¯ä»¥å¤šå¤šç»ƒä¹ å™¢ï¼</p></blockquote><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li><code>cv2.add()</code>ç”¨æ¥å åŠ ä¸¤å¹…å›¾ç‰‡ï¼Œ<code>cv2.addWeighted()</code>ä¹Ÿæ˜¯å åŠ ä¸¤å¹…å›¾ç‰‡ï¼Œä½†ä¸¤å¹…å›¾ç‰‡çš„æƒé‡ä¸ä¸€æ ·ã€‚</li><li><code>cv2.bitwise_and()</code>, <code>cv2.bitwise_not()</code>, <code>cv2.bitwise_or()</code>, <code>cv2.bitwise_xor()</code>åˆ†åˆ«æ‰§è¡ŒæŒ‰ä½ä¸/æˆ–/é/å¼‚æˆ–è¿ç®—ã€‚æ©è†œå°±æ˜¯ç”¨æ¥å¯¹å›¾ç‰‡è¿›è¡Œå…¨å±€æˆ–å±€éƒ¨çš„é®æŒ¡ã€‚</li></ul><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/d2/de8/group__core__array.html#ga10ac1bfb180e2cfda1701d06c24fdbd6" target="_blank" rel="noopener">cv2.add()</a></li><li><a href="https://docs.opencv.org/4.0.0/d2/de8/group__core__array.html#gafafb2513349db3bcff51f54ee5592a19" target="_blank" rel="noopener">cv2.addWeighted()</a></li><li><a href="https://docs.opencv.org/4.0.0/d2/de8/group__core__array.html#ga60b4d04b251ba5eb1392c34425497e14" target="_blank" rel="noopener">cv2.bitwise_and()</a></li><li><a href="https://docs.opencv.org/4.0.0/d2/de8/group__core__array.html#ga0002cf8b418479f4cb49a75442baee2f" target="_blank" rel="noopener">cv2.bitwise_not()</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/09.%20%E5%9B%BE%E5%83%8F%E6%B7%B7%E5%90%88" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="https://baike.baidu.com/item/%E6%8E%A9%E8%86%9C/8544392?fr=aladdin" target="_blank" rel="noopener">æ©è†œ</a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_core/py_image_arithmetics/py_image_arithmetics.html" target="_blank" rel="noopener">Arithmetic Operations on Images</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ å›¾ç‰‡é—´çš„æ•°å­¦è¿ç®—ï¼Œå›¾åƒæ··åˆã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="å›¾åƒæ··åˆ" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E6%B7%B7%E5%90%88/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡7ï¼šäº®åº¦ä¸å¯¹æ¯”åº¦</title>
    <link href="http://www.codec.wang/opencv-python-extra-contrast-brightness/"/>
    <id>http://www.codec.wang/opencv-python-extra-contrast-brightness/</id>
    <published>2017-12-10T06:05:10.000Z</published>
    <updated>2020-04-07T04:53:18.632Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ å¦‚ä½•è°ƒæ•´å›¾ç‰‡çš„äº®åº¦å’Œå¯¹æ¯”åº¦ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="äº®åº¦ä¸å¯¹æ¯”åº¦"><a href="#äº®åº¦ä¸å¯¹æ¯”åº¦" class="headerlink" title="äº®åº¦ä¸å¯¹æ¯”åº¦"></a>äº®åº¦ä¸å¯¹æ¯”åº¦</h2><p>äº®åº¦è°ƒæ•´æ˜¯å°†å›¾åƒåƒç´ çš„å¼ºåº¦æ•´ä½“å˜å¤§/å˜å°ï¼Œå¯¹æ¯”åº¦è°ƒæ•´æŒ‡çš„æ˜¯å›¾åƒæš—å¤„çš„åƒç´ å¼ºåº¦å˜ä½ï¼Œäº®å‡ºçš„å˜é«˜ï¼Œä»è€Œæ‹“å®½æŸä¸ªåŒºåŸŸå†…çš„æ˜¾ç¤ºç²¾åº¦ã€‚</p><p>OpenCVä¸­äº®åº¦å’Œå¯¹æ¯”åº¦åº”ç”¨è¿™ä¸ªå…¬å¼æ¥è®¡ç®—ï¼š$ g(x)=\alpha f(x)+\beta $ï¼Œå…¶ä¸­ï¼šÎ±(&gt;0)ã€Î²å¸¸ç§°ä¸ºå¢ç›Šä¸åç½®å€¼ï¼Œåˆ†åˆ«æ§åˆ¶å›¾ç‰‡çš„å¯¹æ¯”åº¦å’Œäº®åº¦ã€‚</p><blockquote><p>ç»éªŒä¹‹è°ˆï¼šæ­¤å¤„å¯¹Î±/Î²æ§åˆ¶å¯¹æ¯”åº¦å’Œäº®åº¦æœ‰äº‰è®®ï¼Œå…·ä½“è¯·å‚è€ƒï¼š<a href="http://blog.csdn.net/abc20002929/article/details/40474807" target="_blank" rel="noopener">OpenCVå…³äºå¯¹æ¯”åº¦å’Œäº®åº¦çš„è¯¯è§£</a>ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'lena.jpg'</span>)</span><br><span class="line"><span class="comment"># æ­¤å¤„éœ€æ³¨æ„ï¼Œè¯·å‚è€ƒåé¢çš„è§£é‡Š</span></span><br><span class="line">res = np.uint8(np.clip((<span class="number">1.5</span> * img + <span class="number">10</span>), <span class="number">0</span>, <span class="number">255</span>))</span><br><span class="line">tmp = np.hstack((img, res))  <span class="comment"># ä¸¤å¼ å›¾ç‰‡æ¨ªå‘åˆå¹¶ï¼ˆä¾¿äºå¯¹æ¯”æ˜¾ç¤ºï¼‰</span></span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">'image'</span>, tmp)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>è¿˜è®°å¾—å›¾åƒæ··åˆé‚£ä¸€èŠ‚ä¸­numpyå¯¹æ•°æ®æº¢å‡ºçš„å–æ¨¡å¤„ç†å—ï¼Ÿ<code>250+10 = 260 =&gt; 260%256=4</code>ï¼Œå®ƒå¹¶ä¸é€‚ç”¨äºæˆ‘ä»¬çš„å›¾åƒå¤„ç†ï¼Œæ‰€ä»¥ç”¨<a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.clip.html#numpy.clip" target="_blank" rel="noopener">np.clip()</a>å‡½æ•°å°†æ•°æ®é™å®šï¼š<code>a&lt;0 =&gt; a=0, a&gt;255 =&gt; a=255</code>ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_contrast_brightness.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_contrast_brightness.jpg" alt="äº®åº¦ä¸å¯¹æ¯”åº¦è°ƒæ•´"></picture></p><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><ol><li><p>åˆ›å»ºä¸¤ä¸ªæ»‘åŠ¨æ¡åˆ†åˆ«è°ƒæ•´å¯¹æ¯”åº¦å’Œäº®åº¦ï¼ˆå¯¹æ¯”åº¦èŒƒå›´ï¼š0<del>0.3ï¼Œäº®åº¦ï¼š0</del>100ï¼‰ã€‚æç¤ºï¼šå› ä¸ºæ»‘åŠ¨æ¡æ²¡æœ‰å°æ•°ï¼Œæ‰€ä»¥å¯ä»¥è®¾ç½®ä¸º0~300ï¼Œç„¶åä¹˜ä»¥0.01ã€‚</p></li><li><p>äº®åº¦/å¯¹æ¯”åº¦ç”¨C++å®ç°ä¹Ÿå¾ˆæœ‰è¶£ï¼Œæ¨èé˜…è¯»ï¼š<a href="http://blog.csdn.net/u013139259/article/details/52145377" target="_blank" rel="noopener">OpenCVæ”¹å˜å›¾åƒäº®åº¦å’Œå¯¹æ¯”åº¦ä»¥åŠä¼˜åŒ–</a>ã€‚</p></li></ol><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/%E7%95%AA%E5%A4%96%E7%AF%8707.%20%E4%BA%AE%E5%BA%A6%E4%B8%8E%E5%AF%B9%E6%AF%94%E5%BA%A6" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.clip.html#numpy.clip" target="_blank" rel="noopener">numpy.clip()</a></li><li><a href="http://blog.csdn.net/abc20002929/article/details/40474807" target="_blank" rel="noopener">OpenCVå…³äºå¯¹æ¯”åº¦å’Œäº®åº¦çš„è¯¯è§£</a></li><li><a href="http://blog.csdn.net/u013139259/article/details/52145377" target="_blank" rel="noopener">OpenCVæ”¹å˜å›¾åƒäº®åº¦å’Œå¯¹æ¯”åº¦ä»¥åŠä¼˜åŒ–</a></li><li><a href="https://docs.opencv.org/3.1.0/d3/d63/classcv_1_1Mat.html#a3f356665bb0ca452e7d7723ccac9a810" target="_blank" rel="noopener">Mat::convertTo</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ å¦‚ä½•è°ƒæ•´å›¾ç‰‡çš„äº®åº¦å’Œå¯¹æ¯”åº¦ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="äº®åº¦" scheme="http://www.codec.wang/tags/%E4%BA%AE%E5%BA%A6/"/>
    
      <category term="å¯¹æ¯”åº¦" scheme="http://www.codec.wang/tags/%E5%AF%B9%E6%AF%94%E5%BA%A6/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹æ‹“å±•æŒ‘æˆ˜ï¼šPyQtç¼–å†™GUIç•Œé¢</title>
    <link href="http://www.codec.wang/opencv-python-using-pyqt5-create-gui/"/>
    <id>http://www.codec.wang/opencv-python-using-pyqt5-create-gui/</id>
    <published>2017-12-09T09:30:34.000Z</published>
    <updated>2020-04-07T04:51:01.399Z</updated>
    
    <content type="html"><![CDATA[<p>æ‹“å±•æŒ‘æˆ˜ï¼šç¼–å†™GUIå›¾åƒå¤„ç†åº”ç”¨ç¨‹åºã€‚<a id="more"></a></p><hr><h2 id="æŒ‘æˆ˜å†…å®¹"><a href="#æŒ‘æˆ˜å†…å®¹" class="headerlink" title="æŒ‘æˆ˜å†…å®¹"></a>æŒ‘æˆ˜å†…å®¹</h2><p>å‰é¢æˆ‘ä»¬å­¦ä¹ çš„OpenCVå†…å®¹éƒ½æ˜¯è¿è¡Œåœ¨å‘½ä»¤è¡Œä¸­çš„ï¼Œæ²¡æœ‰ç•Œé¢ï¼Œæ‰€ä»¥æœ¬æ¬¡çš„æ‹“å±•æŒ‘æˆ˜å†…å®¹ä¾¿æ˜¯ï¼š</p><blockquote><p><strong>äº†è§£Pythonç¼–å†™<a href="https://baike.baidu.com/item/GUI" target="_blank" rel="noopener">GUI</a>ç•Œé¢çš„æ–¹æ³•ï¼Œä½¿ç”¨PyQt5ç¼–å†™å¦‚ä¸‹çš„å›¾åƒå¤„ç†åº”ç”¨ç¨‹åºï¼Œå®ç°æ‰“å¼€æ‘„åƒå¤´ã€æ•è·å›¾ç‰‡ã€è¯»å–æœ¬åœ°å›¾ç‰‡ã€ç°åº¦åŒ–å’ŒOtsuè‡ªåŠ¨é˜ˆå€¼åˆ†å‰²çš„åŠŸèƒ½ã€‚</strong></p></blockquote><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_pyqt_gui_sample.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_pyqt_gui_sample.jpg" alt=""></picture></p><p><strong>æŒ‘æˆ˜é¢˜ä¸ä¼šåšä¹Ÿæœ¨æœ‰å…³ç³»ï¼Œä½†è¯·åŠ¡å¿…åœ¨è‡ªè¡Œå°è¯•åï¼Œå†çœ‹ä¸‹é¢çš„è§£ç­”å™¢ï¼Œ</strong>ä¸ç„¶â€¦æˆ‘ä¹Ÿæ²¡åŠæ³•(ï¿£â–½ï¿£)â€</p><hr><h2 id="æŒ‘æˆ˜è§£ç­”"><a href="#æŒ‘æˆ˜è§£ç­”" class="headerlink" title="æŒ‘æˆ˜è§£ç­”"></a>æŒ‘æˆ˜è§£ç­”</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><blockquote><p>ç›®å‰æˆ‘ä»¬å­¦çš„å†…å®¹éƒ½æ˜¯è·‘åœ¨å‘½ä»¤è¡Œä¸­çš„ï¼Œå¹¶æ²¡æœ‰ç•Œé¢ï¼Œé‚£ä¹ˆâ€è„šæœ¬è¯­è¨€â€Pythonå¦‚ä½•æ­å»ºGUIç•Œé¢å‘¢ï¼Ÿ</p></blockquote><p>å…¶å®Pythonæ”¯æŒå¤šç§å›¾å½¢ç•Œé¢åº“ï¼Œå¦‚<a href="https://wiki.python.org/moin/TkInter" target="_blank" rel="noopener">Tk(Tkinter)</a>ã€<a href="https://www.wxpython.org/" target="_blank" rel="noopener">wxPython</a>ã€<a href="https://wiki.python.org/moin/PyQt" target="_blank" rel="noopener">PyQt</a>ç­‰ï¼Œè™½ç„¶Pythonè‡ªå¸¦Tkinterï¼Œæ— éœ€é¢å¤–å®‰è£…åŒ…ï¼Œä½†æˆ‘æ›´æ¨èä½¿ç”¨PyQtï¼Œä¸€æ˜¯å› ä¸ºå®ƒå®Œå…¨åŸºäºQtï¼Œè·¨å¹³å°ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œæœ‰åŠ©äºäº†è§£Qtçš„è¯­æ³•ï¼ŒäºŒæ˜¯Qtæä¾›äº†Designerè®¾è®¡å·¥å…·ï¼Œç•Œé¢è®¾è®¡ä¸Šå¯ä»¥æ‹–æ§ä»¶æå®šï¼Œéå¸¸æ–¹ä¾¿ï¼Œå¤§å¤§èŠ‚çœæ—¶é—´ã€‚</p><ul><li>æœ€æ–°ç‰ˆæœ¬ï¼šPyQt 5.x</li><li>å®˜ç½‘ï¼ˆå¯èƒ½éœ€è¦ç¿»å¢™ï¼‰ï¼š<a href="https://www.riverbankcomputing.com/software/pyqt/" target="_blank" rel="noopener">https://www.riverbankcomputing.com/software/pyqt/</a></li></ul><p>å¤§å®¶æ„Ÿå…´è¶£çš„è¯ï¼Œé™¤å»å®˜ç½‘ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¯å‚è€ƒçš„èµ„æºï¼š</p><ul><li><a href="https://wiki.python.org/moin/PyQt" target="_blank" rel="noopener">Python Wiki: PyQt</a></li><li><a href="https://wiki.python.org/moin/PyQt/Tutorials" target="_blank" rel="noopener">PyQt/Tutorials</a></li><li>PyQt5 tutorialï¼š<a href="http://zetcode.com/gui/pyqt5/" target="_blank" rel="noopener">è‹±æ–‡åŸç‰ˆ</a></li><li>PyQt4 tutorialï¼š<a href="http://www.qaulau.com/books/PyQt4_Tutorial/index.html" target="_blank" rel="noopener">ä¸­æ–‡ç‰ˆ</a>ã€<a href="http://zetcode.com/gui/pyqt4/" target="_blank" rel="noopener">è‹±æ–‡åŸç‰ˆ</a></li><li><a href="https://doc.qt.io/qt-5/" target="_blank" rel="noopener">Qt5 Documentation</a></li><li>ä¸­æ–‡å‚è€ƒä¹¦ï¼š<a href="https://www.amazon.cn/dp/B075VWFYFH/ref=sr_1_1?ie=UTF8&qid=1543407852&sr=8-1&keywords=PyQt5%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91%E4%B8%8E%E5%AE%9E%E6%88%98" target="_blank" rel="noopener">PyQt5å¿«é€Ÿå¼€å‘ä¸å®æˆ˜</a></li><li><a href="http://eric-ide.python-projects.org/" target="_blank" rel="noopener">åŸºäºQtçš„Python IDE Eric</a></li></ul><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pyqt5</span><br></pre></td></tr></table></figure><p>ä¸‹è½½é€Ÿåº¦æ…¢çš„è¯ï¼Œå¯ä»¥åˆ°<a href="https://pypi.org/project/PyQt5/#files" target="_blank" rel="noopener">PyPI</a>ä¸Šä¸‹è½½ç¦»çº¿ç‰ˆå®‰è£…ã€‚å¦å¤–æˆ‘æ¨èä½¿ç”¨Qt Designeræ¥è®¾è®¡ç•Œé¢ï¼Œå¦‚æœä½ è£…çš„æ˜¯Anacondaçš„è¯ï¼Œå°±å·²ç»è‡ªå¸¦äº†designer.exeï¼Œä¾‹å¦‚æˆ‘çš„æ˜¯åœ¨ï¼šD:\ProgramData\Anaconda3\Library\bin\ï¼Œå¦‚æœæ˜¯æ™®é€šçš„Pythonç¯å¢ƒï¼Œåˆ™éœ€è¦è‡ªè¡Œå®‰è£…ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pyqt5-tools</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œdesigner.exeåº”è¯¥åœ¨Pythonå®‰è£…ç›®å½•ä¸‹ï¼šxxx\Lib\site-packages\pyqt5_tools\ã€‚</p><p>å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç ç”Ÿæˆä¸€ä¸ªç®€å•çš„ç•Œé¢ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QWidget</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line"></span><br><span class="line">    window = QWidget()</span><br><span class="line">    window.setWindowTitle(<span class="string">'Hello World!'</span>)</span><br><span class="line">    window.show()</span><br><span class="line"></span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_pyqt5_hello_world_sample.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_pyqt5_hello_world_sample.jpg" alt=""></picture></p><h3 id="ç•Œé¢è®¾è®¡"><a href="#ç•Œé¢è®¾è®¡" class="headerlink" title="ç•Œé¢è®¾è®¡"></a>ç•Œé¢è®¾è®¡</h3><p>æ ¹æ®æˆ‘ä»¬çš„æŒ‘æˆ˜å†…å®¹ï¼Œè§£å†³æ€è·¯æ˜¯ä½¿ç”¨Qt Designeræ¥è®¾è®¡ç•Œé¢ï¼Œä½¿ç”¨Pythonå®Œæˆä»£ç é€»è¾‘ã€‚æ‰“å¼€designer.exeï¼Œä¼šå¼¹å‡ºåˆ›å»ºæ–°çª—ä½“çš„çª—å£ï¼Œæˆ‘ä»¬ç›´æ¥ç‚¹å‡»â€œcreateâ€ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_pyqt5_designer_main_ui.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_pyqt5_designer_main_ui.jpg" alt=""></picture></p><p>ç•Œé¢çš„å·¦ä¾§æ˜¯Qtçš„å¸¸ç”¨æ§ä»¶â€Widget Boxâ€ï¼Œå³ä¾§æœ‰ä¸€ä¸ªæ§ä»¶å±æ€§çª—å£â€Property Editorâ€ï¼Œå…¶ä½™æš‚æ—¶ç”¨ä¸åˆ°ã€‚æœ¬ä¾‹ä¸­æˆ‘ä»¬åªç”¨åˆ°äº†â€Push Buttonâ€æ§ä»¶å’Œâ€Labelâ€æ§ä»¶ï¼šæœ€ä¸Šé¢çš„ä¸‰ä¸ªLabelæ§ä»¶ç”¨äºæ˜¾ç¤ºå›¾ç‰‡ï¼Œå¯ä»¥åœ¨å±æ€§çª—å£è°ƒæ•´å®ƒçš„å¤§å°ï¼Œæˆ‘ä»¬ç»Ÿä¸€è°ƒæ•´åˆ°150Ã—150ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_pyqt5_main_ui_rough.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_pyqt5_main_ui_rough.jpg" alt=""></picture></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_pyqt5_designer_property_windows.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_pyqt5_designer_property_windows.jpg" alt=""></picture></p><p>å¦å¤–ï¼Œæ§ä»¶ä¸Šæ˜¾ç¤ºçš„æ–‡å­—â€textâ€å±æ€§å’Œæ§ä»¶çš„åå­—â€objectNameâ€å±æ€§éœ€è¦ä¿®æ”¹ï¼Œä¾¿äºæ˜¾ç¤ºå’Œä»£ç è°ƒç”¨ã€‚å¯ä»¥æŒ‰ç…§ä¸‹é¢æˆ‘æ¨èçš„å‘½åï¼š</p><table><thead><tr><th align="center">æ§ä»¶</th><th align="center">æ˜¾ç¤ºå†…å®¹text</th><th align="center">æ§ä»¶åobjectName</th></tr></thead><tbody><tr><td align="center">PushButton</td><td align="center">æ‰“å¼€æ‘„åƒå¤´</td><td align="center">btnOpenCamera</td></tr><tr><td align="center">PushButton</td><td align="center">æ•è·å›¾ç‰‡</td><td align="center">btnCapture</td></tr><tr><td align="center">PushButton</td><td align="center">æ‰“å¼€å›¾ç‰‡</td><td align="center">btnReadImage</td></tr><tr><td align="center">PushButton</td><td align="center">ç°åº¦åŒ–</td><td align="center">btnGray</td></tr><tr><td align="center">PushButton</td><td align="center">é˜ˆå€¼åˆ†å‰²(Otsu)</td><td align="center">btnThreshold</td></tr><tr><td align="center">Label</td><td align="center">æ‘„åƒå¤´</td><td align="center">labelCamera</td></tr><tr><td align="center">Label</td><td align="center">æ•è·å›¾</td><td align="center">labelCapture</td></tr><tr><td align="center">Label</td><td align="center">ç»“æœå›¾</td><td align="center">labelResult</td></tr></tbody></table><p>è¿™æ ·å¤§è‡´ç•Œé¢å°±å‡ºæ¥äº†ï¼Œå¾ˆç®€å•ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_pyqt5_main_ui_word.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_pyqt5_main_ui_word.jpg" alt=""></picture></p><h3 id="æŒ‰é’®äº‹ä»¶"><a href="#æŒ‰é’®äº‹ä»¶" class="headerlink" title="æŒ‰é’®äº‹ä»¶"></a>æŒ‰é’®äº‹ä»¶</h3><p>å¦‚æœä½ ä¹‹å‰æœ‰è¿‡ä¸€äº›GUIå¼€å‘ç»éªŒï¼Œæ¯”å¦‚MFCï¼ŒWinFormç­‰ï¼Œå°±çŸ¥é“GUIæ˜¯é€šè¿‡äº‹ä»¶é©±åŠ¨çš„ï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæ¯”å¦‚å‰é¢æˆ‘ä»¬å·²ç»è®¾è®¡å¥½äº†ç•Œé¢ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦å®ç°â€æ‰“å¼€æ‘„åƒå¤´â€åˆ°â€é˜ˆå€¼åˆ†å‰²â€è¿™5ä¸ªæŒ‰é’®çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯ç»™æ¯ä¸ªæŒ‰é’®æŒ‡å®šä¸€ä¸ªâ€å‡½æ•°â€ï¼Œé€»è¾‘ä»£ç å†™åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ã€‚è¿™ç§å‡½æ•°å°±ç§°ä¸ºäº‹ä»¶ï¼ŒQtä¸­ç§°ä¸ºæ§½è¿æ¥ã€‚</p><p>ç‚¹å‡»Designerå·¥å…·æ çš„â€Edit Signals/Slotsâ€æŒ‰é’®ï¼Œè¿›å…¥æ§½å‡½æ•°ç¼–è¾‘ç•Œé¢ï¼Œç‚¹å‡»æ—è¾¹çš„â€Edit Widgetsâ€å¯ä»¥æ¢å¤æ­£å¸¸è§†å›¾ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_pyqt5_designer_edit_singals_slots.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_pyqt5_designer_edit_singals_slots.jpg" alt=""></picture></p><p>ç„¶åç‚¹å‡»æŒ‰é’®å¹¶æ‹–åŠ¨ï¼Œå½“äº§ç”Ÿç±»ä¼¼äºç”µè·¯ä¸­çš„æ¥åœ°ç¬¦å·æ—¶é‡Šæ”¾é¼ æ ‡ï¼Œå‚çœ‹ä¸‹é¢åŠ¨å›¾ï¼š</p><p><img src="http://blog.codec.wang/cv2_pyqt5_how_to_create_slots.gif" alt=""></p><p>åœ¨å¼¹å‡ºçš„é…ç½®çª—å£ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å·¦ä¾§æ˜¯æŒ‰é’®çš„å¸¸ç”¨äº‹ä»¶ï¼Œæˆ‘ä»¬é€‰æ‹©ç‚¹å‡»äº‹ä»¶â€clicked()â€ï¼Œç„¶åæ·»åŠ ä¸€ä¸ªåä¸ºâ€btnOpenCamera_Clicked()â€çš„æ§½å‡½æ•°ï¼š</p><p><img src="http://blog.codec.wang/cv2_pyqt5_how_to_create_slots2.gif" alt=""></p><p>é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç»™äº”ä¸ªæŒ‰é’®æ·»åŠ äº”ä¸ªæ§½å‡½æ•°ï¼Œæœ€ç»ˆç»“æœå¦‚ä¸‹ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_pyqt5_main_click_event.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_pyqt5_main_click_event.jpg" alt=""></picture></p><p>åˆ°æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ç•Œé¢è®¾è®¡çš„æ‰€æœ‰å·¥ä½œï¼ŒæŒ‰ä¸‹Ctrl+Sä¿å­˜å½“å‰çª—å£ä¸º.uiæ–‡ä»¶ã€‚.uiæ–‡ä»¶å…¶å®æ˜¯æŒ‰ç…§XMLæ ¼å¼æ ‡è®°çš„å†…å®¹ï¼Œå¯ä»¥ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å°†.uiæ–‡ä»¶æ‰“å¼€çœ‹çœ‹ã€‚</p><h3 id="uiæ–‡ä»¶è½¬pyä»£ç "><a href="#uiæ–‡ä»¶è½¬pyä»£ç " class="headerlink" title="uiæ–‡ä»¶è½¬pyä»£ç "></a>uiæ–‡ä»¶è½¬pyä»£ç </h3><p>å› ä¸ºæˆ‘ä»¬æ˜¯ç”¨Designerå·¥å…·è®¾è®¡å‡ºçš„ç•Œé¢ï¼Œå¹¶ä¸æ˜¯ç”¨Pythonä»£ç æ•²å‡ºæ¥çš„ï¼Œæ‰€ä»¥è¦æƒ³çœŸæ­£è¿è¡Œï¼Œéœ€è¦ä½¿ç”¨pyuic5å°†uiæ–‡ä»¶è½¬æˆpyæ–‡ä»¶ã€‚pyuic5.exeé»˜è®¤åœ¨%\Scripts\ä¸‹ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯åœ¨ï¼šD:\ProgramData\Anaconda3\Scripts\ã€‚</p><p>æ‰“å¼€cmdå‘½ä»¤è¡Œï¼Œåˆ‡æ¢åˆ°uiæ–‡ä»¶çš„ä¿å­˜ç›®å½•ã€‚Windowsä¸‹æœ‰ä¸ªå°æŠ€å·§ï¼Œå¯ä»¥åœ¨ç›®å½•çš„åœ°å€æ è¾“å…¥cmdï¼Œä¸€æ­¥åˆ‡æ¢åˆ°å½“å‰ç›®å½•ï¼š</p><p><img src="http://blog.codec.wang/cv2_pyqt5_pyuic_quick_cmd.gif" alt=""></p><p>ç„¶åæ‰§è¡Œè¿™æ¡æŒ‡ä»¤ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyuic5 -o mainForm.py using_pyqt_create_ui.ui</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡ºç°pyuic5ä¸æ˜¯å†…éƒ¨å‘½ä»¤çš„é”™è¯¯ï¼Œè¯´æ˜pyuic5çš„è·¯å¾„æ²¡æœ‰åœ¨ç¯å¢ƒå˜é‡é‡Œï¼Œæ·»åŠ ä¸‹å°±å¥½äº†ã€‚æ‰§è¡Œæ­£å¸¸çš„è¯ï¼Œå°±ä¼šç”ŸæˆmainForm.pyæ–‡ä»¶ï¼Œé‡Œé¢åº”è¯¥åŒ…å«ä¸€ä¸ªåä¸ºâ€Ui_MainWindowâ€çš„ç±»ã€‚</p><h3 id="ç¼–å†™é€»è¾‘ä»£ç "><a href="#ç¼–å†™é€»è¾‘ä»£ç " class="headerlink" title="ç¼–å†™é€»è¾‘ä»£ç "></a>ç¼–å†™é€»è¾‘ä»£ç </h3><blockquote><p>ç»éªŒä¹‹è°ˆï¼šmainForm.pyæ–‡ä»¶æ˜¯æ ¹æ®uiæ–‡ä»¶ç”Ÿæˆçš„ï¼Œä¹Ÿå°±æ˜¯è¯´<strong>é‡æ–°ç”Ÿæˆä¼šè¦†ç›–æ‰</strong>ã€‚æ‰€ä»¥ä¸ºäº†ä½¿ç•Œé¢ä¸é€»è¾‘åˆ†ç¦»ï¼Œæˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ªé€»è¾‘æ–‡ä»¶ã€‚</p></blockquote><p>åœ¨åŒä¸€å·¥ä½œç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªâ€mainEntry.pyâ€çš„æ–‡ä»¶ï¼Œå­˜æ”¾é€»è¾‘ä»£ç ã€‚ä»£ç ä¸­çš„æ¯éƒ¨åˆ†æˆ‘éƒ½å†™å¾—æ¯”è¾ƒç‹¬ç«‹ï¼Œæ²¡æœ‰å°è£…æˆå‡½æ•°ï¼Œä¾¿äºç†è§£ã€‚ä»£ç çœ‹ä¸Šå»å¾ˆé•¿ï¼Œä½†å¾ˆç®€å•ï¼Œå¯ä»¥æ¯ä¸ªæ¨¡å—å•ç‹¬çœ‹ï¼Œæœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æˆ‘åšäº†æ³¨é‡Šï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> PyQt5 <span class="keyword">import</span> QtCore, QtGui, QtWidgets</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtGui <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QFileDialog, QMainWindow</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> mainForm <span class="keyword">import</span> Ui_MainWindow</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PyQtMainEntry</span><span class="params">(QMainWindow, Ui_MainWindow)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.setupUi(self)</span><br><span class="line"></span><br><span class="line">        self.camera = cv2.VideoCapture(<span class="number">0</span>)</span><br><span class="line">        self.is_camera_opened = <span class="literal">False</span>  <span class="comment"># æ‘„åƒå¤´æœ‰æ²¡æœ‰æ‰“å¼€æ ‡è®°</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å®šæ—¶å™¨ï¼š30msæ•è·ä¸€å¸§</span></span><br><span class="line">        self._timer = QtCore.QTimer(self)</span><br><span class="line">        self._timer.timeout.connect(self._queryFrame)</span><br><span class="line">        self._timer.setInterval(<span class="number">30</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">btnOpenCamera_Clicked</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        æ‰“å¼€å’Œå…³é—­æ‘„åƒå¤´</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        self.is_camera_opened = ~self.is_camera_opened</span><br><span class="line">        <span class="keyword">if</span> self.is_camera_opened:</span><br><span class="line">            self.btnOpenCamera.setText(<span class="string">"å…³é—­æ‘„åƒå¤´"</span>)</span><br><span class="line">            self._timer.start()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.btnOpenCamera.setText(<span class="string">"æ‰“å¼€æ‘„åƒå¤´"</span>)</span><br><span class="line">            self._timer.stop()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">btnCapture_Clicked</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        æ•è·å›¾ç‰‡</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        <span class="comment"># æ‘„åƒå¤´æœªæ‰“å¼€ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.is_camera_opened:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        self.captured = self.frame</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åé¢è¿™å‡ è¡Œä»£ç å‡ ä¹éƒ½ä¸€æ ·ï¼Œå¯ä»¥å°è¯•å°è£…æˆä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">        rows, cols, channels = self.captured.shape</span><br><span class="line">        bytesPerLine = channels * cols</span><br><span class="line">        <span class="comment"># Qtæ˜¾ç¤ºå›¾ç‰‡æ—¶ï¼Œéœ€è¦å…ˆè½¬æ¢æˆQImgageç±»å‹</span></span><br><span class="line">        QImg = QImage(self.captured.data, cols, rows, bytesPerLine, QImage.Format_RGB888)</span><br><span class="line">        self.labelCapture.setPixmap(QPixmap.fromImage(QImg).scaled(</span><br><span class="line">            self.labelCapture.size(), Qt.KeepAspectRatio, Qt.SmoothTransformation))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">btnReadImage_Clicked</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        ä»æœ¬åœ°è¯»å–å›¾ç‰‡</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        <span class="comment"># æ‰“å¼€æ–‡ä»¶é€‰å–å¯¹è¯æ¡†</span></span><br><span class="line">        filename,  _ = QFileDialog.getOpenFileName(self, <span class="string">'æ‰“å¼€å›¾ç‰‡'</span>)</span><br><span class="line">        <span class="keyword">if</span> filename:</span><br><span class="line">            self.captured = cv2.imread(str(filename))</span><br><span class="line">            <span class="comment"># OpenCVå›¾åƒä»¥BGRé€šé“å­˜å‚¨ï¼Œæ˜¾ç¤ºæ—¶éœ€è¦ä»BGRè½¬åˆ°RGB</span></span><br><span class="line">            self.captured = cv2.cvtColor(self.captured, cv2.COLOR_BGR2RGB)</span><br><span class="line"></span><br><span class="line">            rows, cols, channels = self.captured.shape</span><br><span class="line">            bytesPerLine = channels * cols</span><br><span class="line">            QImg = QImage(self.captured.data, cols, rows, bytesPerLine, QImage.Format_RGB888)</span><br><span class="line">            self.labelCapture.setPixmap(QPixmap.fromImage(QImg).scaled(</span><br><span class="line">                self.labelCapture.size(), Qt.KeepAspectRatio, Qt.SmoothTransformation))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">btnGray_Clicked</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        ç°åº¦åŒ–</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        <span class="comment"># å¦‚æœæ²¡æœ‰æ•è·å›¾ç‰‡ï¼Œåˆ™ä¸æ‰§è¡Œæ“ä½œ</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> hasattr(self, <span class="string">"captured"</span>):</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        self.cpatured = cv2.cvtColor(self.captured, cv2.COLOR_RGB2GRAY)</span><br><span class="line"></span><br><span class="line">        rows, columns = self.cpatured.shape</span><br><span class="line">        bytesPerLine = columns</span><br><span class="line">        <span class="comment"># ç°åº¦å›¾æ˜¯å•é€šé“ï¼Œæ‰€ä»¥éœ€è¦ç”¨Format_Indexed8</span></span><br><span class="line">        QImg = QImage(self.cpatured.data, columns, rows, bytesPerLine, QImage.Format_Indexed8)</span><br><span class="line">        self.labelResult.setPixmap(QPixmap.fromImage(QImg).scaled(</span><br><span class="line">            self.labelResult.size(), Qt.KeepAspectRatio, Qt.SmoothTransformation))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">btnThreshold_Clicked</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        Otsuè‡ªåŠ¨é˜ˆå€¼åˆ†å‰²</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> hasattr(self, <span class="string">"captured"</span>):</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        _, self.cpatured = cv2.threshold(</span><br><span class="line">            self.cpatured, <span class="number">0</span>, <span class="number">255</span>, cv2.THRESH_BINARY + cv2.THRESH_OTSU)</span><br><span class="line"></span><br><span class="line">        rows, columns = self.cpatured.shape</span><br><span class="line">        bytesPerLine = columns</span><br><span class="line">        <span class="comment"># é˜ˆå€¼åˆ†å‰²å›¾ä¹Ÿæ˜¯å•é€šé“ï¼Œä¹Ÿéœ€è¦ç”¨Format_Indexed8</span></span><br><span class="line">        QImg = QImage(self.cpatured.data, columns, rows, bytesPerLine, QImage.Format_Indexed8)</span><br><span class="line">        self.labelResult.setPixmap(QPixmap.fromImage(QImg).scaled(</span><br><span class="line">            self.labelResult.size(), Qt.KeepAspectRatio, Qt.SmoothTransformation))</span><br><span class="line"></span><br><span class="line"><span class="meta">    @QtCore.pyqtSlot()</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_queryFrame</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        å¾ªç¯æ•è·å›¾ç‰‡</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        ret, self.frame = self.camera.read()</span><br><span class="line"></span><br><span class="line">        img_rows, img_cols, channels = self.frame.shape</span><br><span class="line">        bytesPerLine = channels * img_cols</span><br><span class="line"></span><br><span class="line">        cv2.cvtColor(self.frame, cv2.COLOR_BGR2RGB, self.frame)</span><br><span class="line">        QImg = QImage(self.frame.data, img_cols, img_rows, bytesPerLine, QImage.Format_RGB888)</span><br><span class="line">        self.labelCamera.setPixmap(QPixmap.fromImage(QImg).scaled(</span><br><span class="line">            self.labelCamera.size(), Qt.KeepAspectRatio, Qt.SmoothTransformation))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QtWidgets.QApplication(sys.argv)</span><br><span class="line">    window = PyQtMainEntry()</span><br><span class="line">    window.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_pyqt_gui_sample2.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_pyqt_gui_sample2.jpg" alt=""></picture></p><p>æœ¬æ–‡åªæ˜¯æŠ›ç –å¼•ç‰ï¼Œä»‹ç»äº†PyQt5çš„ç®€å•ä½¿ç”¨ï¼Œæƒ³è¦æ·±å…¥å­¦ä¹ ï¼Œå¯ä»¥å‚è€ƒæœ¬æ–‡å¼€å¤´çš„å‚è€ƒèµ„æ–™å™¢(â—Ë‡âˆ€Ë‡â—)</p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/%E6%8C%91%E6%88%98%E4%BB%BB%E5%8A%A12%EF%BC%9APyQt5%E7%BC%96%E5%86%99GUI%E7%95%8C%E9%9D%A2" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ‹“å±•æŒ‘æˆ˜ï¼šç¼–å†™GUIå›¾åƒå¤„ç†åº”ç”¨ç¨‹åºã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="PyQt" scheme="http://www.codec.wang/tags/PyQt/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹æŒ‘æˆ˜ä»»åŠ¡ï¼šç”»åŠ¨æ€æ—¶é’Ÿ</title>
    <link href="http://www.codec.wang/opencv-python-clock-drawing/"/>
    <id>http://www.codec.wang/opencv-python-clock-drawing/</id>
    <published>2017-12-09T09:29:34.000Z</published>
    <updated>2020-04-07T04:51:38.853Z</updated>
    
    <content type="html"><![CDATA[<p>æŒ‘æˆ˜ä»»åŠ¡ï¼šä½¿ç”¨OpenCVç»˜åˆ¶ä¸€ä¸ªéšç³»ç»Ÿæ—¶é—´åŠ¨æ€å˜åŒ–çš„æ—¶é’Ÿã€‚<a id="more"></a></p><hr><h2 id="æŒ‘æˆ˜å†…å®¹"><a href="#æŒ‘æˆ˜å†…å®¹" class="headerlink" title="æŒ‘æˆ˜å†…å®¹"></a>æŒ‘æˆ˜å†…å®¹</h2><blockquote><p><strong>å®Œæˆå¦‚ä¸‹å›¾æ‰€å±•ç¤ºçš„åŠ¨æ€æ—¶é’Ÿï¼Œæ—¶é’Ÿéœ€éšç³»ç»Ÿæ—¶é—´å˜åŒ–ï¼Œä¸­é—´æ˜¾ç¤ºå½“å‰æ—¥æœŸã€‚</strong></p></blockquote><p><img src="http://blog.codec.wang/cv2_draw_clock_dynamic_sample.gif" alt=""></p><p>å…¶å®æœ¬æ¬¡ä»»åŠ¡æ¶‰åŠçš„OpenCVçŸ¥è¯†å¹¶ä¸å¤šï¼Œä½†æœ‰åŠ©äºæå‡å¤§å®¶çš„ç¼–ç¨‹å®è·µèƒ½åŠ›ã€‚</p><p><strong>æŒ‘æˆ˜é¢˜ä¸ä¼šåšä¹Ÿæœ¨æœ‰å…³ç³»ï¼Œä½†è¯·åŠ¡å¿…åœ¨è‡ªè¡Œå°è¯•åï¼Œå†çœ‹ä¸‹é¢çš„è§£ç­”å™¢ï¼Œ</strong>ä¸ç„¶â€¦æˆ‘ä¹Ÿæ²¡åŠæ³•(ï¿£â–½ï¿£)â€</p><hr><h2 id="æŒ‘æˆ˜è§£ç­”"><a href="#æŒ‘æˆ˜è§£ç­”" class="headerlink" title="æŒ‘æˆ˜è§£ç­”"></a>æŒ‘æˆ˜è§£ç­”</h2><h3 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h3><p>æœ¬æ¬¡æŒ‘æˆ˜ä»»åŠ¡æ—¨åœ¨æå‡å¤§å®¶çš„åŠ¨æ‰‹å®è·µèƒ½åŠ›ï¼Œè§£å†³å®é™…é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—å…ˆæœ‰ä¸ªè§£é¢˜æ€è·¯å’Œæ–¹æ¡ˆã€‚è§‚å¯Ÿä¸‹å¸¸è§çš„æ—¶é’Ÿè¡¨ç›˜ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_draw_clock_actual_clock_sample.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_draw_clock_actual_clock_sample.jpg" alt=""></picture></p><p>æ•´ä¸ªè¡¨ç›˜å…¶å®åªæœ‰3æ ¹è¡¨é’ˆåœ¨åŠ¨ï¼Œæ‰€ä»¥å¯ä»¥å…ˆç”»å‡ºé™æ€è¡¨ç›˜ï¼Œç„¶åè·å–ç³»ç»Ÿå½“å‰æ—¶é—´ï¼Œæ ¹æ®æ—¶é—´å®æ—¶åŠ¨æ€ç»˜åˆ¶3æ ¹è¡¨é’ˆå°±è§£å†³äº†ã€‚</p><h3 id="ç»˜åˆ¶è¡¨ç›˜"><a href="#ç»˜åˆ¶è¡¨ç›˜" class="headerlink" title="ç»˜åˆ¶è¡¨ç›˜"></a>ç»˜åˆ¶è¡¨ç›˜</h3><p>è¡¨ç›˜ä¸Šåªæœ‰60æ¡åˆ†/ç§’åˆ»çº¿å’Œ12æ¡å°æ—¶åˆ»çº¿ï¼Œå½“ç„¶è¿˜æœ‰è¡¨ç›˜çš„å¤–éƒ¨è½®å»“åœ†ï¼Œä¹Ÿå°±æ˜¯é‡ç‚¹åœ¨å¦‚ä½•ç”»72æ ¹çº¿ã€‚å…ˆæŠŠç®€å•çš„åœ†ç”»å‡ºæ¥ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">margin = <span class="number">5</span>  <span class="comment"># ä¸Šä¸‹å·¦å³è¾¹è·</span></span><br><span class="line">radius = <span class="number">220</span>  <span class="comment"># åœ†çš„åŠå¾„</span></span><br><span class="line">center = (center_x, center_y) = (<span class="number">225</span>, <span class="number">225</span>)  <span class="comment"># åœ†å¿ƒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. æ–°å»ºä¸€ä¸ªç”»æ¿å¹¶å¡«å……æˆç™½è‰²</span></span><br><span class="line">img = np.zeros((<span class="number">450</span>, <span class="number">450</span>, <span class="number">3</span>), np.uint8)</span><br><span class="line">img[:] = (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. ç”»å‡ºåœ†ç›˜</span></span><br><span class="line">cv2.circle(img, center, radius, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), thickness=<span class="number">5</span>)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_draw_clock_blank_circle.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_draw_clock_blank_circle.jpg" alt=""></picture></p><p>å‰é¢æˆ‘ä»¬ä½¿ç”¨OpenCVç”»ç›´çº¿çš„æ—¶å€™ï¼Œéœ€çŸ¥é“ç›´çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹åæ ‡ï¼Œé‚£ä¹ˆç”»72æ ¹çº¿å°±å˜æˆäº†è·å–72ç»„åæ ‡ã€‚</p><p>åœ¨å¹³é¢åæ ‡ç³»ä¸‹ï¼Œå·²çŸ¥åŠå¾„å’Œè§’åº¦çš„è¯ï¼ŒAç‚¹çš„åæ ‡å¯ä»¥è¡¨ç¤ºä¸ºï¼š<br>$$<br>\begin{matrix}<br>   x=r\times \cos\alpha \newline<br>   y=r\times \sin\alpha<br>\end{matrix}<br>$$<br><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_draw_clock_center_shift.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_draw_clock_center_shift.jpg" alt=""></picture></p><p>å…ˆåªè€ƒè™‘å°†åæ ‡ç³»åŸç‚¹ç§»åŠ¨åˆ°å·¦ä¸Šè§’ï¼Œè§’åº¦ä¾ç„¶æ˜¯å¹³é¢åæ ‡ç³»ä¸­çš„é€†æ—¶é’ˆè®¡ç®—ï¼Œé‚£ä¹ˆæ–°åæ ‡æ˜¯ï¼š</p><p>$$<br>\begin{matrix}<br>   x=r+r\times \cos\alpha \newline<br>   y=r+r\times \sin\alpha<br>\end{matrix}<br>$$</p><p>å¯¹äº60æ¡åˆ†/ç§’åˆ»çº¿ï¼Œåˆ»çº¿é—´çš„å¤¹è§’æ˜¯360Â°/60=6Â°ï¼Œå¯¹äºå°æ—¶åˆ»çº¿ï¼Œè§’åº¦æ˜¯360Â°/12=30Â°ï¼Œè¿™æ ·å°±å¾—åˆ°äº†72ç»„èµ·ç‚¹åæ ‡ï¼Œé‚£æ€ä¹ˆå¾—åˆ°ç»ˆç‚¹åæ ‡å‘¢ï¼Ÿå…¶å®åŒæ ·çš„åŸç†ï¼Œç”¨ä¸€ä¸ªåŒå¿ƒçš„å°åœ†æ¥è®¡ç®—å¾—åˆ°Bç‚¹ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_draw_clock_a_b_position.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_draw_clock_a_b_position.jpg" alt=""></picture></p><p>é€šè¿‡A/Bä¸¤ç‚¹å°±å¯ä»¥ç”»å‡ºç›´çº¿ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">pt1 = []</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. ç”»å‡º60æ¡ç§’å’Œåˆ†é’Ÿçš„åˆ»çº¿</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">60</span>):</span><br><span class="line">    <span class="comment"># æœ€å¤–éƒ¨åœ†ï¼Œè®¡ç®—Aç‚¹</span></span><br><span class="line">    x1 = center_x+(radius-margin)*math.cos(i*<span class="number">6</span>*np.pi/<span class="number">180.0</span>)</span><br><span class="line">    y1 = center_y+(radius-margin)*math.sin(i*<span class="number">6</span>*np.pi/<span class="number">180.0</span>)</span><br><span class="line">    pt1.append((int(x1), int(y1)))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åŒå¿ƒå°åœ†ï¼Œè®¡ç®—Bç‚¹</span></span><br><span class="line">    x2 = center_x+(radius<span class="number">-15</span>)*math.cos(i*<span class="number">6</span>*np.pi/<span class="number">180.0</span>)</span><br><span class="line">    y2 = center_y+(radius<span class="number">-15</span>)*math.sin(i*<span class="number">6</span>*np.pi/<span class="number">180.0</span>)</span><br><span class="line"></span><br><span class="line">    cv2.line(img, pt1[i], (int(x2), int(y2)), (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), thickness=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. ç”»å‡º12æ¡å°æ—¶çš„åˆ»çº¿</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">12</span>):</span><br><span class="line">    <span class="comment"># 12æ¡å°æ—¶åˆ»çº¿åº”è¯¥æ›´é•¿ä¸€ç‚¹</span></span><br><span class="line">    x = center_x+(radius<span class="number">-25</span>)*math.cos(i*<span class="number">30</span>*np.pi/<span class="number">180.0</span>)</span><br><span class="line">    y = center_y+(radius<span class="number">-25</span>)*math.sin(i*<span class="number">30</span>*np.pi/<span class="number">180.0</span>)</span><br><span class="line">    <span class="comment"># è¿™é‡Œç”¨åˆ°äº†å‰é¢çš„pt1</span></span><br><span class="line">    cv2.line(img, pt1[i*<span class="number">5</span>], (int(x), int(y)), (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), thickness=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ°è¿™é‡ŒåŸºæœ¬çš„è¡¨ç›˜å›¾å°±å·²ç»ç”»å‡ºæ¥äº†</span></span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_draw_clock_blank_clock.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_draw_clock_blank_clock.jpg" alt=""></picture></p><h3 id="è§’åº¦æ¢ç®—"><a href="#è§’åº¦æ¢ç®—" class="headerlink" title="è§’åº¦æ¢ç®—"></a>è§’åº¦æ¢ç®—</h3><p>æ¥ä¸‹æ¥ç®—æ˜¯ä¸€ä¸ªå°éš¾ç‚¹ï¼Œé¦–å…ˆ<strong>æ—¶é’Ÿçš„èµ·å§‹åæ ‡åœ¨æ­£å¸¸äºŒç»´åæ ‡ç³»çš„90Â°æ–¹å‘ï¼Œå…¶æ¬¡æ—¶é’Ÿè·Ÿå›¾åƒä¸€æ ·ï¼Œéƒ½æ˜¯é¡ºæ—¶é’ˆè®¡ç®—è§’åº¦çš„</strong>ï¼Œæ‰€ä»¥ä¸‰è€…éœ€è¦ç»Ÿä¸€ä¸‹ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_draw_clock_different_clock_contrast.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_draw_clock_different_clock_contrast.jpg" alt=""></picture></p><p>å› ä¸ºè§’åº¦æ˜¯å®Œå…¨å¯¹ç§°çš„ï¼Œé¡ºé€†æ—¶é’ˆæ²¡æœ‰å½±å“ï¼Œæ‰€ä»¥å¹³é¢åæ ‡ç³»å®Œå…¨ä¸ç”¨ç†ä¼šï¼Œæ”¾åœ¨è¿™é‡Œåªæ˜¯ä¾¿äºå¤§å®¶ç†è§£ã€‚å¯¹äºæ—¶é’Ÿåæ ‡å’Œå›¾åƒåæ ‡ï¼Œæ—¶é’Ÿ0çš„0Â°å¯¹åº”å›¾åƒçš„270Â°ï¼Œæ—¶é’Ÿ15çš„90Â°å¯¹åº”å›¾åƒçš„360Â°ï¼Œæ—¶é’Ÿ30çš„180Â°å¯¹åº”å›¾åƒçš„450Â°ï¼ˆ360Â°+90Â°ï¼‰â€¦</p><p>æ‰€ä»¥ä¸¤è€…ä¹‹é—´çš„å…³ç³»ä¾¿æ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è®¡ç®—è§’åº¦ &#x3D; æ—¶é’Ÿè§’åº¦+270Â°</span><br><span class="line">è®¡ç®—è§’åº¦ &#x3D; è®¡ç®—è§’åº¦ if è®¡ç®—è§’åº¦&lt;&#x3D;360Â° else è®¡ç®—è§’åº¦-360Â°</span><br></pre></td></tr></table></figure><h3 id="åŒæ­¥æ—¶é—´"><a href="#åŒæ­¥æ—¶é—´" class="headerlink" title="åŒæ­¥æ—¶é—´"></a>åŒæ­¥æ—¶é—´</h3><p>Pythonä¸­å¦‚ä½•è·å–å½“å‰æ—¶é—´å’Œæ·»åŠ æ—¥æœŸæ–‡å­—éƒ½æ¯”è¾ƒç®€å•ï¼Œçœ‹ä»£ç å°±è¡Œï¼Œæˆ‘å°±ä¸è§£é‡Šäº†ã€‚ä»£ç ä¸­è§’åº¦è®¡ç®—æˆ‘æ¢äº†ä¸€ç§æ–¹å¼ï¼Œå…¶å®æ˜¯ä¸€æ ·çš„ï¼Œçœ‹ä½ èƒ½ä¸èƒ½çœ‹æ‡‚(â—Ë‡âˆ€Ë‡â—)ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(<span class="number">1</span>):</span><br><span class="line">    <span class="comment"># ä¸æ–­æ‹·è´è¡¨ç›˜å›¾ï¼Œæ‰èƒ½æ›´æ–°ç»˜åˆ¶ï¼Œä¸ç„¶ä¼šé‡å åœ¨ä¸€èµ·</span></span><br><span class="line">    temp = np.copy(img)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 5. è·å–ç³»ç»Ÿæ—¶é—´ï¼Œç”»å‡ºåŠ¨æ€çš„æ—¶-åˆ†-ç§’ä¸‰æ¡åˆ»çº¿</span></span><br><span class="line">    now_time = datetime.datetime.now()</span><br><span class="line">    hour, minute, second = now_time.hour, now_time.minute, now_time.second</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç”»ç§’åˆ»çº¿</span></span><br><span class="line">    <span class="comment"># OpenCVä¸­çš„è§’åº¦æ˜¯é¡ºæ—¶é’ˆè®¡ç®—çš„ï¼Œæ‰€ä»¥éœ€è¦è½¬æ¢ä¸‹</span></span><br><span class="line">    sec_angle = second*<span class="number">6</span>+<span class="number">270</span> <span class="keyword">if</span> second &lt;= <span class="number">15</span> <span class="keyword">else</span> (second<span class="number">-15</span>)*<span class="number">6</span></span><br><span class="line">    sec_x = center_x+(radius-margin)*math.cos(sec_angle*np.pi/<span class="number">180.0</span>)</span><br><span class="line">    sec_y = center_y+(radius-margin)*math.sin(sec_angle*np.pi/<span class="number">180.0</span>)</span><br><span class="line">    cv2.line(temp, center, (int(sec_x), int(sec_y)), (<span class="number">203</span>, <span class="number">222</span>, <span class="number">166</span>), <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç”»åˆ†åˆ»çº¿</span></span><br><span class="line">    min_angle = minute*<span class="number">6</span>+<span class="number">270</span> <span class="keyword">if</span> minute &lt;= <span class="number">15</span> <span class="keyword">else</span> (minute<span class="number">-15</span>)*<span class="number">6</span></span><br><span class="line">    min_x = center_x+(radius<span class="number">-35</span>)*math.cos(min_angle*np.pi/<span class="number">180.0</span>)</span><br><span class="line">    min_y = center_y+(radius<span class="number">-35</span>)*math.sin(min_angle*np.pi/<span class="number">180.0</span>)</span><br><span class="line">    cv2.line(temp, center, (int(min_x), int(min_y)), (<span class="number">186</span>, <span class="number">199</span>, <span class="number">137</span>), <span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç”»æ—¶åˆ»çº¿</span></span><br><span class="line">    hour_angle = hour*<span class="number">30</span>+<span class="number">270</span> <span class="keyword">if</span> hour &lt;= <span class="number">3</span> <span class="keyword">else</span> (hour<span class="number">-3</span>)*<span class="number">30</span></span><br><span class="line">    hour_x = center_x+(radius<span class="number">-65</span>)*math.cos(hour_angle*np.pi/<span class="number">180.0</span>)</span><br><span class="line">    hour_y = center_y+(radius<span class="number">-65</span>)*math.sin(hour_angle*np.pi/<span class="number">180.0</span>)</span><br><span class="line">    cv2.line(temp, center, (int(hour_x), int(hour_y)), (<span class="number">169</span>, <span class="number">198</span>, <span class="number">26</span>), <span class="number">15</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 6. æ·»åŠ å½“å‰æ—¥æœŸæ–‡å­—</span></span><br><span class="line">    font = cv2.FONT_HERSHEY_SIMPLEX</span><br><span class="line">    time_str = now_time.strftime(<span class="string">"%d/%m/%Y"</span>)</span><br><span class="line">    cv2.putText(img, time_str, (<span class="number">135</span>, <span class="number">275</span>), font, <span class="number">1</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    cv2.imshow(<span class="string">'clocking'</span>, temp)</span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) == <span class="number">27</span>:  <span class="comment"># æŒ‰ä¸‹ESCé”®é€€å‡º</span></span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_draw_clock_sample.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_draw_clock_sample.jpg" alt=""></picture></p><p>æœ¬æ­¤æŒ‘æˆ˜æ—¨åœ¨é”»ç‚¼ä¸€æ­¥æ­¥è§£å†³å®é™…é—®é¢˜çš„æ€è·¯ï¼ˆè™½ç„¶æœ‰ç‚¹æ•°å­¦çŸ¥è¯†(ï¿£â–½ï¿£)â€ï¼‰ï¼Œå¤§å®¶å†æ¥å†å‰å™¢ï¼</p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/%E6%8C%91%E6%88%98%E4%BB%BB%E5%8A%A11%EF%BC%9A%E7%94%BB%E5%8A%A8%E6%80%81%E6%97%B6%E9%92%9F" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æŒ‘æˆ˜ä»»åŠ¡ï¼šä½¿ç”¨OpenCVç»˜åˆ¶ä¸€ä¸ªéšç³»ç»Ÿæ—¶é—´åŠ¨æ€å˜åŒ–çš„æ—¶é’Ÿã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="PyQt" scheme="http://www.codec.wang/tags/PyQt/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡6ï¼šé¼ æ ‡ç»˜å›¾</title>
    <link href="http://www.codec.wang/opencv-python-extra-drawing-with-mouse/"/>
    <id>http://www.codec.wang/opencv-python-extra-drawing-with-mouse/</id>
    <published>2017-12-09T09:28:34.000Z</published>
    <updated>2020-04-07T04:53:41.991Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ å¦‚ä½•ç”¨é¼ æ ‡å®æ—¶ç»˜å›¾ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>æ•è·é¼ æ ‡äº‹ä»¶</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.setMouseCallback()</code></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><h3 id="çŸ¥é“é¼ æ ‡åœ¨å“ªå„¿"><a href="#çŸ¥é“é¼ æ ‡åœ¨å“ªå„¿" class="headerlink" title="çŸ¥é“é¼ æ ‡åœ¨å“ªå„¿"></a>çŸ¥é“é¼ æ ‡åœ¨å“ªå„¿</h3><p>OpenCVä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªé¼ æ ‡çš„å›è°ƒå‡½æ•°æ¥è·å–é¼ æ ‡å½“å‰çš„ä½ç½®ã€å½“å‰çš„äº‹ä»¶å¦‚å·¦é”®æŒ‰ä¸‹/å·¦é”®é‡Šæ”¾æˆ–æ˜¯å³é”®å•å‡»ç­‰ç­‰ï¼Œç„¶åæ‰§è¡Œç›¸åº”çš„åŠŸèƒ½ã€‚</p><p>ä½¿ç”¨<code>cv2.setMouseCallback()</code>æ¥åˆ›å»ºé¼ æ ‡çš„å›è°ƒå‡½æ•°ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨å·¦é”®å•å‡»çš„æ—¶å€™ï¼Œæ‰“å°å‡ºå½“å‰é¼ æ ‡çš„ä½ç½®ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¼ æ ‡çš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mouse_event</span><span class="params">(event, x, y, flags, param)</span>:</span></span><br><span class="line">    <span class="comment"># é€šè¿‡eventåˆ¤æ–­å…·ä½“æ˜¯ä»€ä¹ˆäº‹ä»¶ï¼Œè¿™é‡Œæ˜¯å·¦é”®æŒ‰ä¸‹</span></span><br><span class="line">    <span class="keyword">if</span> event == cv2.EVENT_LBUTTONDOWN:</span><br><span class="line">        print((x, y))</span><br><span class="line"></span><br><span class="line">img = np.zeros((<span class="number">512</span>, <span class="number">512</span>, <span class="number">3</span>), np.uint8)</span><br><span class="line">cv2.namedWindow(<span class="string">'image'</span>)</span><br><span class="line"><span class="comment"># å®šä¹‰é¼ æ ‡çš„å›è°ƒå‡½æ•°</span></span><br><span class="line">cv2.setMouseCallback(<span class="string">'image'</span>, mouse_event)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">    cv2.imshow(<span class="string">'image'</span>, img)</span><br><span class="line">    <span class="comment"># æŒ‰ä¸‹ESCé”®é€€å‡º</span></span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">20</span>) == <span class="number">27</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å…ˆå®šä¹‰é¼ æ ‡çš„å›è°ƒå‡½æ•°<code>mouse_event()</code>ï¼Œç„¶ååœ¨å›è°ƒå‡½æ•°ä¸­åˆ¤æ–­æ˜¯å¦æ˜¯å·¦é”®å•å‡»äº‹ä»¶ <code>EVENT_LBUTTONDOWN</code>ï¼Œæ˜¯çš„è¯å°±æ‰“å°å‡ºåæ ‡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°æ ¼å¼æ˜¯å›ºå®šçš„ï¼Œä¸è¦éšæ„æ›´æ”¹ã€‚</p><p>é‚£é™¤äº†å·¦é”®å•å‡»ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›äº‹ä»¶å‘¢ï¼Ÿå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ‰“å°å‡ºæ¥ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–æ‰€æœ‰çš„äº‹ä»¶</span></span><br><span class="line">events = [i <span class="keyword">for</span> i <span class="keyword">in</span> dir(cv2) <span class="keyword">if</span> <span class="string">'EVENT'</span> <span class="keyword">in</span> i]</span><br><span class="line">print(events)</span><br></pre></td></tr></table></figure><h3 id="ç»¼åˆå®ä¾‹"><a href="#ç»¼åˆå®ä¾‹" class="headerlink" title="ç»¼åˆå®ä¾‹"></a>ç»¼åˆå®ä¾‹</h3><p>ç°åœ¨æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªç»¼åˆçš„ä¾‹å­ï¼Œè¿™ä¸ªå®ä¾‹ä¼šå¸®åŠ©ä½ ç†è§£å›¾åƒäº¤äº’çš„ä¸€äº›æ€æƒ³ï¼š</p><p>åœ¨å›¾åƒä¸Šç”¨é¼ æ ‡ç”»å›¾ï¼Œå¯ä»¥ç”»åœ†æˆ–çŸ©å½¢ï¼ŒæŒ‰mé”®åœ¨ä¸¤ç§æ¨¡å¼ä¸‹åˆ‡æ¢ã€‚å·¦é”®æŒ‰ä¸‹æ—¶å¼€å§‹ç”»å›¾ï¼Œç§»åŠ¨åˆ°å“ªå„¿ç”»åˆ°å“ªå„¿ï¼Œå·¦é”®é‡Šæ”¾æ—¶ç»“æŸç”»å›¾ã€‚å¬ä¸Šå»å¾ˆå¤æ‚ï¼Œæ˜¯å—ï¼Ÿä¸€æ­¥æ­¥æ¥çœ‹ï¼š</p><ul><li>ç”¨é¼ æ ‡ç”»å›¾ï¼šéœ€è¦å®šä¹‰é¼ æ ‡çš„å›è°ƒå‡½æ•°mouse_event</li><li>ç”»åœ†æˆ–çŸ©å½¢ï¼šéœ€è¦å®šä¹‰ä¸€ä¸ªç”»å›¾çš„æ¨¡å¼mode</li><li>å·¦é”®å•å‡»ã€ç§»åŠ¨ã€é‡Šæ”¾ï¼šéœ€è¦æ•è·ä¸‰ä¸ªä¸åŒçš„äº‹ä»¶</li><li>å¼€å§‹ç”»å›¾ï¼Œç»“æŸç”»å›¾ï¼šéœ€è¦å®šä¹‰ä¸€ä¸ªç”»å›¾çš„æ ‡è®°ä½drawing</li></ul><p>å¥½ï¼Œå¼€å§‹codingå§ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">drawing = <span class="literal">False</span>  <span class="comment"># æ˜¯å¦å¼€å§‹ç”»å›¾</span></span><br><span class="line">mode = <span class="literal">True</span>  <span class="comment"># Trueï¼šç”»çŸ©å½¢ï¼ŒFalseï¼šç”»åœ†</span></span><br><span class="line">start = (<span class="number">-1</span>, <span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mouse_event</span><span class="params">(event, x, y, flags, param)</span>:</span></span><br><span class="line">    <span class="keyword">global</span> start, drawing, mode</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å·¦é”®æŒ‰ä¸‹ï¼šå¼€å§‹ç”»å›¾</span></span><br><span class="line">    <span class="keyword">if</span> event == cv2.EVENT_LBUTTONDOWN:</span><br><span class="line">        drawing = <span class="literal">True</span></span><br><span class="line">        start = (x, y)</span><br><span class="line">    <span class="comment"># é¼ æ ‡ç§»åŠ¨ï¼Œç”»å›¾</span></span><br><span class="line">    <span class="keyword">elif</span> event == cv2.EVENT_MOUSEMOVE:</span><br><span class="line">        <span class="keyword">if</span> drawing:</span><br><span class="line">            <span class="keyword">if</span> mode:</span><br><span class="line">                cv2.rectangle(img, start, (x, y), (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                cv2.circle(img, (x, y), <span class="number">5</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">-1</span>)</span><br><span class="line">    <span class="comment"># å·¦é”®é‡Šæ”¾ï¼šç»“æŸç”»å›¾</span></span><br><span class="line">    <span class="keyword">elif</span> event == cv2.EVENT_LBUTTONUP:</span><br><span class="line">        drawing = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">if</span> mode:</span><br><span class="line">            cv2.rectangle(img, start, (x, y), (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            cv2.circle(img, (x, y), <span class="number">5</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">img = np.zeros((<span class="number">512</span>, <span class="number">512</span>, <span class="number">3</span>), np.uint8)</span><br><span class="line">cv2.namedWindow(<span class="string">'image'</span>)</span><br><span class="line">cv2.setMouseCallback(<span class="string">'image'</span>, mouse_event)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">    cv2.imshow(<span class="string">'image'</span>, img)</span><br><span class="line">    <span class="comment"># æŒ‰ä¸‹måˆ‡æ¢æ¨¡å¼</span></span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) == ord(<span class="string">'m'</span>):</span><br><span class="line">        mode = <span class="keyword">not</span> mode</span><br><span class="line">    <span class="keyword">elif</span> cv2.waitKey(<span class="number">1</span>) == <span class="number">27</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœåº”è¯¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_mouse_drawing_rectangle_circle.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_mouse_drawing_rectangle_circle.jpg" alt=""></picture></p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li>è¦ç”¨é¼ æ ‡ç»˜å›¾ï¼Œéœ€è¦ç”¨<code>cv2.setMouseCallback()</code>å®šä¹‰å›è°ƒå‡½æ•°ï¼Œç„¶ååœ¨å›è°ƒå‡½æ•°ä¸­æ ¹æ®ä¸åŒçš„eventäº‹ä»¶ï¼Œæ‰§è¡Œä¸åŒçš„åŠŸèƒ½ã€‚</li></ul><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>1.ï¼ˆé€‰åšï¼‰å®ç°ç”¨é¼ æ ‡ç”»çŸ©å½¢ï¼Œè·Ÿå®ä¾‹å·®ä¸å¤šï¼Œä½†åªå®æ—¶ç”»ä¸€ä¸ªï¼Œç±»ä¼¼ä¸‹é¢åŠ¨å›¾ï¼š</p><p><img src="http://blog.codec.wang/cv2_live_draw_rectangle.gif" alt="å®æ—¶ç”»ä¸€ä¸ªçŸ©å½¢"></p><p>2.ï¼ˆé€‰åšï¼‰åšä¸€ä¸ªåœ¨ç™½è‰²é¢æ¿ä¸Šç»˜å›¾çš„ç®€å•ç¨‹åºï¼Œå¯ç”¨æ»‘åŠ¨æ¡è°ƒæ•´é¢œè‰²å’Œç¬”åˆ·å¤§å°ã€‚</p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/%E7%95%AA%E5%A4%96%E7%AF%8706.%20%E9%BC%A0%E6%A0%87%E7%BB%98%E5%9B%BE" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_gui/py_mouse_handling/py_mouse_handling.html" target="_blank" rel="noopener">Mouse as a Paint-Brush</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ å¦‚ä½•ç”¨é¼ æ ‡å®æ—¶ç»˜å›¾ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="ç»˜å›¾" scheme="http://www.codec.wang/tags/%E7%BB%98%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹8ï¼šç»˜å›¾åŠŸèƒ½</title>
    <link href="http://www.codec.wang/opencv-python-drawing-function/"/>
    <id>http://www.codec.wang/opencv-python-drawing-function/</id>
    <published>2017-12-09T03:29:48.000Z</published>
    <updated>2020-04-07T04:44:26.210Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ ç”»çº¿ã€åœ†å’ŒçŸ©å½¢ç­‰å¤šç§å‡ ä½•å½¢çŠ¶ï¼Œç»™å›¾ç‰‡æ·»åŠ æ–‡å­—ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>ç»˜åˆ¶å„ç§å‡ ä½•å½¢çŠ¶ã€æ·»åŠ æ–‡å­—</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.line()</code>, <code>cv2.circle()</code>, <code>cv2.rectangle()</code>, <code>cv2.ellipse()</code>, <code>cv2.putText()</code></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><h3 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h3><p>ç»˜åˆ¶å½¢çŠ¶çš„å‡½æ•°æœ‰ä¸€äº›å…±åŒçš„å‚æ•°ï¼Œæå‰åœ¨æ­¤è¯´æ˜ä¸€ä¸‹ï¼š</p><ul><li>imgï¼šè¦ç»˜åˆ¶å½¢çŠ¶çš„å›¾ç‰‡</li><li>colorï¼šç»˜åˆ¶çš„é¢œè‰²<ul><li>å½©è‰²å›¾å°±ä¼ å…¥BGRçš„ä¸€ç»„å€¼ï¼Œå¦‚è“è‰²å°±æ˜¯(255,0,0)</li><li>ç°åº¦å›¾ï¼Œä¼ å…¥ä¸€ä¸ªç°åº¦å€¼å°±è¡Œ</li></ul></li><li>thicknessï¼šçº¿å®½ï¼Œé»˜è®¤ä¸º1ï¼›<strong>å¯¹äºçŸ©å½¢/åœ†ä¹‹ç±»çš„å°é—­å½¢çŠ¶è€Œè¨€ï¼Œä¼ å…¥-1è¡¨ç¤ºå¡«å……å½¢çŠ¶</strong></li></ul><p>éœ€è¦å¯¼å…¥çš„æ¨¡å—å’Œæ˜¾ç¤ºå›¾ç‰‡çš„é€šç”¨ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">'img'</span>, img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_drawing_functions.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_drawing_functions.jpg" alt="ç»˜åˆ¶å„ç§å‡ ä½•å½¢çŠ¶"></picture></p><p>ä¸Šå›¾å°±æ˜¯æœ¬æ•™ç¨‹ç»˜åˆ¶çš„æœ€ç»ˆæ•ˆæœï¼Œä¸‹é¢ä¸€æ­¥æ­¥æ¥çœ‹ï¼š</p><h3 id="ç”»çº¿"><a href="#ç”»çº¿" class="headerlink" title="ç”»çº¿"></a>ç”»çº¿</h3><p>ç”»ç›´çº¿åªéœ€æŒ‡å®šèµ·ç‚¹å’Œç»ˆç‚¹çš„åæ ‡å°±è¡Œï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸€å‰¯é»‘è‰²çš„å›¾ç‰‡</span></span><br><span class="line">img = np.zeros((<span class="number">512</span>, <span class="number">512</span>, <span class="number">3</span>), np.uint8)</span><br><span class="line"><span class="comment"># ç”»ä¸€æ¡çº¿å®½ä¸º5çš„è“è‰²ç›´çº¿ï¼Œå‚æ•°2ï¼šèµ·ç‚¹ï¼Œå‚æ•°3ï¼šç»ˆç‚¹</span></span><br><span class="line">cv2.line(img, (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">512</span>, <span class="number">512</span>), (<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="number">5</span>)</span><br></pre></td></tr></table></figure><blockquote><p>ç»éªŒä¹‹è°ˆï¼šæ‰€æœ‰ç»˜å›¾å‡½æ•°å‡ä¼šç›´æ¥å½±å“åŸå›¾ç‰‡ï¼Œè¿™ç‚¹è¦æ³¨æ„ã€‚</p></blockquote><h3 id="ç”»çŸ©å½¢"><a href="#ç”»çŸ©å½¢" class="headerlink" title="ç”»çŸ©å½¢"></a>ç”»çŸ©å½¢</h3><p>ç”»çŸ©å½¢éœ€è¦çŸ¥é“å·¦ä¸Šè§’å’Œå³ä¸‹è§’çš„åæ ‡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”»ä¸€ä¸ªç»¿è‰²è¾¹æ¡†çš„çŸ©å½¢ï¼Œå‚æ•°2ï¼šå·¦ä¸Šè§’åæ ‡ï¼Œå‚æ•°3ï¼šå³ä¸‹è§’åæ ‡</span></span><br><span class="line">cv2.rectangle(img, (<span class="number">384</span>, <span class="number">0</span>), (<span class="number">510</span>, <span class="number">128</span>), (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">3</span>)</span><br></pre></td></tr></table></figure><h3 id="ç”»åœ†"><a href="#ç”»åœ†" class="headerlink" title="ç”»åœ†"></a>ç”»åœ†</h3><p>ç”»åœ†éœ€è¦æŒ‡å®šåœ†å¿ƒå’ŒåŠå¾„ï¼Œæ³¨æ„ä¸‹é¢çš„ä¾‹å­ä¸­çº¿å®½=-1ä»£è¡¨å¡«å……ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”»ä¸€ä¸ªå¡«å……çº¢è‰²çš„åœ†ï¼Œå‚æ•°2ï¼šåœ†å¿ƒåæ ‡ï¼Œå‚æ•°3ï¼šåŠå¾„</span></span><br><span class="line">cv2.circle(img, (<span class="number">447</span>, <span class="number">63</span>), <span class="number">63</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">-1</span>)</span><br></pre></td></tr></table></figure><h3 id="ç”»æ¤­åœ†"><a href="#ç”»æ¤­åœ†" class="headerlink" title="ç”»æ¤­åœ†"></a>ç”»æ¤­åœ†</h3><p>ç”»æ¤­åœ†éœ€è¦çš„å‚æ•°æ¯”è¾ƒå¤šï¼Œè¯·å¯¹ç…§åé¢çš„ä»£ç ç†è§£è¿™å‡ ä¸ªå‚æ•°ï¼š</p><ul><li>å‚æ•°2ï¼šæ¤­åœ†ä¸­å¿ƒ(x,y)</li><li>å‚æ•°3ï¼šx/yè½´çš„é•¿åº¦</li><li>å‚æ•°4ï¼šangleâ€”æ¤­åœ†çš„æ—‹è½¬è§’åº¦</li><li>å‚æ•°5ï¼šstartAngleâ€”æ¤­åœ†çš„èµ·å§‹è§’åº¦</li><li>å‚æ•°6ï¼šendAngleâ€”æ¤­åœ†çš„ç»“æŸè§’åº¦</li></ul><blockquote><p>ç»éªŒä¹‹è°ˆï¼šOpenCVä¸­åŸç‚¹åœ¨å·¦ä¸Šè§’ï¼Œæ‰€ä»¥è¿™é‡Œçš„è§’åº¦æ˜¯ä»¥é¡ºæ—¶é’ˆæ–¹å‘è®¡ç®—çš„ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨å›¾ä¸­å¿ƒç”»ä¸€ä¸ªå¡«å……çš„åŠåœ†</span></span><br><span class="line">cv2.ellipse(img, (<span class="number">256</span>, <span class="number">256</span>), (<span class="number">100</span>, <span class="number">50</span>), <span class="number">0</span>, <span class="number">0</span>, <span class="number">180</span>, (<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="number">-1</span>)</span><br></pre></td></tr></table></figure><h3 id="ç”»å¤šè¾¹å½¢"><a href="#ç”»å¤šè¾¹å½¢" class="headerlink" title="ç”»å¤šè¾¹å½¢"></a>ç”»å¤šè¾¹å½¢</h3><p>ç”»å¤šè¾¹å½¢éœ€è¦æŒ‡å®šä¸€ç³»åˆ—å¤šè¾¹å½¢çš„é¡¶ç‚¹åæ ‡ï¼Œç›¸å½“äºä»ç¬¬ä¸€ä¸ªç‚¹åˆ°ç¬¬äºŒä¸ªç‚¹ç”»ç›´çº¿ï¼Œå†ä»ç¬¬äºŒä¸ªç‚¹åˆ°ç¬¬ä¸‰ä¸ªç‚¹ç”»ç›´çº¿â€¦.</p><p>OpenCVä¸­éœ€è¦å…ˆå°†å¤šè¾¹å½¢çš„é¡¶ç‚¹åæ ‡éœ€è¦å˜æˆé¡¶ç‚¹æ•°Ã—1Ã—2ç»´çš„çŸ©é˜µï¼Œå†æ¥ç»˜åˆ¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰å››ä¸ªé¡¶ç‚¹åæ ‡</span></span><br><span class="line">pts = np.array([[<span class="number">10</span>, <span class="number">5</span>],  [<span class="number">50</span>, <span class="number">10</span>], [<span class="number">70</span>, <span class="number">20</span>], [<span class="number">20</span>, <span class="number">30</span>]], np.int32)</span><br><span class="line"><span class="comment"># é¡¶ç‚¹ä¸ªæ•°ï¼š4ï¼ŒçŸ©é˜µå˜æˆ4*1*2ç»´</span></span><br><span class="line">pts = pts.reshape((<span class="number">-1</span>, <span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">cv2.polylines(img, [pts], <span class="literal">True</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">255</span>))</span><br></pre></td></tr></table></figure><p><code>cv2.polylines()</code>çš„å‚æ•°3å¦‚æœæ˜¯Falseçš„è¯ï¼Œå¤šè¾¹å½¢å°±ä¸é—­åˆã€‚</p><blockquote><p>ç»éªŒä¹‹è°ˆï¼šå¦‚æœéœ€è¦ç»˜åˆ¶å¤šæ¡ç›´çº¿ï¼Œä½¿ç”¨cv2.polylines()è¦æ¯”cv2.line()é«˜æ•ˆå¾ˆå¤šï¼Œä¾‹å¦‚ï¼š</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨cv2.polylines()ç”»å¤šæ¡ç›´çº¿</span></span><br><span class="line">line1 = np.array([[<span class="number">100</span>, <span class="number">20</span>],  [<span class="number">300</span>, <span class="number">20</span>]], np.int32).reshape((<span class="number">-1</span>, <span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">line2 = np.array([[<span class="number">100</span>, <span class="number">60</span>],  [<span class="number">300</span>, <span class="number">60</span>]], np.int32).reshape((<span class="number">-1</span>, <span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">line3 = np.array([[<span class="number">100</span>, <span class="number">100</span>],  [<span class="number">300</span>, <span class="number">100</span>]], np.int32).reshape((<span class="number">-1</span>, <span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">cv2.polylines(img, [line1, line2, line3], <span class="literal">True</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">255</span>))</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ æ–‡å­—"><a href="#æ·»åŠ æ–‡å­—" class="headerlink" title="æ·»åŠ æ–‡å­—"></a>æ·»åŠ æ–‡å­—</h3><p>ä½¿ç”¨<code>cv2.putText()</code>æ·»åŠ æ–‡å­—ï¼Œå®ƒçš„å‚æ•°ä¹Ÿæ¯”è¾ƒå¤šï¼ŒåŒæ ·è¯·å¯¹ç…§åé¢çš„ä»£ç ç†è§£è¿™å‡ ä¸ªå‚æ•°ï¼š</p><ul><li>å‚æ•°2ï¼šè¦æ·»åŠ çš„æ–‡æœ¬</li><li>å‚æ•°3ï¼šæ–‡å­—çš„èµ·å§‹åæ ‡ï¼ˆå·¦ä¸‹è§’ä¸ºèµ·ç‚¹ï¼‰</li><li>å‚æ•°4ï¼šå­—ä½“</li><li>å‚æ•°5ï¼šæ–‡å­—å¤§å°ï¼ˆç¼©æ”¾æ¯”ä¾‹ï¼‰</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ æ–‡å­—</span></span><br><span class="line">font = cv2.FONT_HERSHEY_SIMPLEX</span><br><span class="line">cv2.putText(img, <span class="string">'ex2tron'</span>, (<span class="number">10</span>, <span class="number">500</span>), font,</span><br><span class="line">            <span class="number">4</span>, (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>), <span class="number">2</span>, lineType=cv2.LINE_AA)</span><br></pre></td></tr></table></figure><p>å­—ä½“å¯å‚è€ƒï¼š<a href="https://docs.opencv.org/4.0.0/d6/d6e/group__imgproc__draw.html#ga0f9314ea6e35f99bb23f29567fc16e11" target="_blank" rel="noopener">HersheyFonts</a>ã€‚å¦å¤–ï¼Œè¿™é‡Œæœ‰ä¸ªçº¿å‹lineTypeå‚æ•°ï¼ŒLINE_AAè¡¨ç¤ºæŠ—é”¯é½¿çº¿å‹ï¼Œå…·ä½“å¯è§<a href="https://docs.opencv.org/3.3.1/d0/de1/group__core.html#gaf076ef45de481ac96e0ab3dc2c29a777" target="_blank" rel="noopener">LineTypes</a></p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li><code>cv2.line()</code>ç”»ç›´çº¿ï¼Œ<code>cv2.circle()</code>ç”»åœ†ï¼Œ<code>cv2.rectangle()</code>ç”»çŸ©å½¢ï¼Œ<code>cv2.ellipse()</code>ç”»æ¤­åœ†ï¼Œ<code>cv2.polylines()</code>ç”»å¤šè¾¹å½¢ï¼Œ<code>cv2.putText()</code>æ·»åŠ æ–‡å­—ã€‚</li><li>ç”»å¤šæ¡ç›´çº¿æ—¶ï¼Œ<code>cv2.polylines()</code>è¦æ¯”<code>cv2.line()</code>é«˜æ•ˆå¾ˆå¤šã€‚</li></ul><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><ol><li>ä½ èƒ½ç”¨å·²å­¦çš„ç»˜å›¾åŠŸèƒ½ç”»å‡ºOpenCVçš„logoå—ï¼Ÿ(æç¤ºï¼šæ¤­åœ†å’Œåœ†)</li></ol><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_draw_opencv_logo.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_draw_opencv_logo.jpg" alt="OpenCV logo"></picture></p><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/d6/d6e/group__imgproc__draw.html#ga7078a9fae8c7e7d13d24dac2520ae4a2" target="_blank" rel="noopener">cv2.line()</a></li><li><a href="https://docs.opencv.org/4.0.0/d6/d6e/group__imgproc__draw.html#gaf10604b069374903dbd0f0488cb43670" target="_blank" rel="noopener">cv2.circle()</a></li><li><a href="https://docs.opencv.org/4.0.0/d6/d6e/group__imgproc__draw.html#ga07d2f74cadcf8e305e810ce8eed13bc9" target="_blank" rel="noopener">cv2.rectangle()</a></li><li><a href="https://docs.opencv.org/4.0.0/d6/d6e/group__imgproc__draw.html#ga28b2267d35786f5f890ca167236cbc69" target="_blank" rel="noopener">cv2.ellipse()</a></li><li><a href="https://docs.opencv.org/4.0.0/d6/d6e/group__imgproc__draw.html#ga5126f47f883d730f633d74f07456c576" target="_blank" rel="noopener">cv2.putText()</a></li><li><a href="https://docs.opencv.org/4.0.0/d6/d6e/group__imgproc__draw.html#ga1ea127ffbbb7e0bfc4fd6fd2eb64263c" target="_blank" rel="noopener">cv2.polylines()</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/08.%20%E7%BB%98%E5%9B%BE%E5%8A%9F%E8%83%BD" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="https://docs.opencv.org/3.3.1/d0/de1/group__core.html#gaf076ef45de481ac96e0ab3dc2c29a777" target="_blank" rel="noopener">LineTypes</a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_gui/py_drawing_functions/py_drawing_functions.html" target="_blank" rel="noopener">Drawing Functions in OpenCV</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ ç”»çº¿ã€åœ†å’ŒçŸ©å½¢ç­‰å¤šç§å‡ ä½•å½¢çŠ¶ï¼Œç»™å›¾ç‰‡æ·»åŠ æ–‡å­—ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="ç»˜å›¾" scheme="http://www.codec.wang/tags/%E7%BB%98%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>Python-OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡5ï¼šä»¿å°„å˜æ¢ä¸é€è§†å˜æ¢</title>
    <link href="http://www.codec.wang/opencv-python-extra-warpaffine-warpperspective/"/>
    <id>http://www.codec.wang/opencv-python-extra-warpaffine-warpperspective/</id>
    <published>2017-12-08T07:36:53.000Z</published>
    <updated>2020-04-07T15:41:44.398Z</updated>
    
    <content type="html"><![CDATA[<p>å¸¸è§çš„2Då›¾åƒå˜æ¢ä»åŸç†ä¸Šè®²ä¸»è¦åŒ…æ‹¬åŸºäº2Ã—3çŸ©é˜µçš„<a href="https://baike.baidu.com/item/%E4%BB%BF%E5%B0%84%E5%8F%98%E6%8D%A2" target="_blank" rel="noopener">ä»¿å°„å˜æ¢</a>å’ŒåŸºäº3Ã—3çŸ©é˜µ<a href="https://baike.baidu.com/item/%E9%80%8F%E8%A7%86%E5%8F%98%E6%8D%A2" target="_blank" rel="noopener">é€è§†å˜æ¢</a>ã€‚<a id="more"></a></p><hr><h2 id="ä»¿å°„å˜æ¢"><a href="#ä»¿å°„å˜æ¢" class="headerlink" title="ä»¿å°„å˜æ¢"></a>ä»¿å°„å˜æ¢</h2><p>åŸºæœ¬çš„å›¾åƒå˜æ¢å°±æ˜¯äºŒç»´åæ ‡çš„å˜æ¢ï¼šä»ä¸€ç§äºŒç»´åæ ‡(x,y)åˆ°å¦ä¸€ç§äºŒç»´åæ ‡(u,v)çš„çº¿æ€§å˜æ¢ï¼š</p><p>$$<br>\begin{matrix}<br>   u=a_1x+b_1y+c_1 \newline<br>   v=a_2x+b_2y+c_2<br>  \end{matrix}<br>$$<br>å¦‚æœå†™æˆçŸ©é˜µçš„å½¢å¼ï¼Œå°±æ˜¯ï¼š<br>$$<br>\left[<br> \begin{matrix}<br>   u \newline<br>   v<br>  \end{matrix}<br>  \right]  = \left[<br> \begin{matrix}<br>   a_1 &amp; b_1  \newline<br>   a_2 &amp; b_2<br>  \end{matrix}<br>  \right] \left[<br> \begin{matrix}<br>   x \newline<br>   y<br>  \end{matrix}<br>  \right]+\left[<br> \begin{matrix}<br>   c_1 \newline<br>   c_2<br>  \end{matrix}<br>  \right]<br>$$<br>ä½œå¦‚ä¸‹å®šä¹‰ï¼š<br>$$<br>R=\left[<br> \begin{matrix}<br>   a_1 &amp; b_1  \newline<br>   a_2 &amp; b_2<br>  \end{matrix}<br>  \right], t=\left[<br> \begin{matrix}<br>   c_1 \newline<br>   c_2<br>  \end{matrix}<br>  \right],T=\left[<br> \begin{matrix}<br>   R &amp; t<br>  \end{matrix}<br>  \right]<br>$$<br>çŸ©é˜µT(2Ã—3)å°±ç§°ä¸ºä»¿å°„å˜æ¢çš„å˜æ¢çŸ©é˜µï¼ŒRä¸ºçº¿æ€§å˜æ¢çŸ©é˜µï¼Œtä¸ºå¹³ç§»çŸ©é˜µï¼Œç®€å•æ¥è¯´ï¼Œä»¿å°„å˜æ¢å°±æ˜¯çº¿æ€§å˜æ¢+å¹³ç§»ã€‚å˜æ¢åç›´çº¿ä¾ç„¶æ˜¯ç›´çº¿ï¼Œå¹³è¡Œçº¿ä¾ç„¶æ˜¯å¹³è¡Œçº¿ï¼Œç›´çº¿é—´çš„ç›¸å¯¹ä½ç½®å…³ç³»ä¸å˜ï¼Œå› æ­¤<strong>éå…±çº¿çš„ä¸‰ä¸ªå¯¹åº”ç‚¹ä¾¿å¯ç¡®å®šå”¯ä¸€çš„ä¸€ä¸ªä»¿å°„å˜æ¢</strong>ï¼Œçº¿æ€§å˜æ¢4ä¸ªè‡ªç”±åº¦+å¹³ç§»2ä¸ªè‡ªç”±åº¦â†’<strong>ä»¿å°„å˜æ¢è‡ªç”±åº¦ä¸º6</strong>ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_warp_affine_image_sample_introduction2.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_warp_affine_image_sample_introduction2.jpg" alt=""></picture></p><p>æ¥çœ‹ä¸‹OpenCVä¸­å¦‚ä½•å®ç°ä»¿å°„å˜æ¢ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'drawing.jpg'</span>)</span><br><span class="line">rows, cols = img.shape[:<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å˜æ¢å‰çš„ä¸‰ä¸ªç‚¹</span></span><br><span class="line">pts1 = np.float32([[<span class="number">50</span>, <span class="number">65</span>], [<span class="number">150</span>, <span class="number">65</span>], [<span class="number">210</span>, <span class="number">210</span>]])</span><br><span class="line"><span class="comment"># å˜æ¢åçš„ä¸‰ä¸ªç‚¹</span></span><br><span class="line">pts2 = np.float32([[<span class="number">50</span>, <span class="number">100</span>], [<span class="number">150</span>, <span class="number">65</span>], [<span class="number">100</span>, <span class="number">250</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆå˜æ¢çŸ©é˜µ</span></span><br><span class="line">M = cv2.getAffineTransform(pts1, pts2)</span><br><span class="line">dst = cv2.warpAffine(img, M, (cols, rows))</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">121</span>), plt.imshow(img), plt.title(<span class="string">'input'</span>)</span><br><span class="line">plt.subplot(<span class="number">122</span>), plt.imshow(dst), plt.title(<span class="string">'output'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>ä¸‰ä¸ªç‚¹æˆ‘å·²ç»åœ¨å›¾ä¸­æ ‡è®°äº†å‡ºæ¥ã€‚ç”¨<code>cv2.getAffineTransform()</code>ç”Ÿæˆå˜æ¢çŸ©é˜µï¼Œæ¥ä¸‹æ¥å†ç”¨<code>cv2.warpAffine()</code>å®ç°å˜æ¢ã€‚</p><blockquote><p>æ€è€ƒï¼šä¸‰ä¸ªç‚¹æˆ‘æ ‡è®°çš„æ˜¯çº¢è‰²ï¼Œä¸ºä»€ä¹ˆMatplotlibæ˜¾ç¤ºå‡ºæ¥æ˜¯ä¸‹é¢è¿™ç§é¢œè‰²ï¼Ÿï¼ˆ<a href="#ç»ƒä¹ ">ç»ƒä¹ </a>ï¼‰</p></blockquote><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_affine_transformation_drawing.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_affine_transformation_drawing.jpg" alt="ä»¿å°„å˜æ¢å‰åå¯¹æ¯”å›¾"></picture></p><p>å…¶å®å¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾å’Œç¿»è½¬ç­‰å˜æ¢å°±æ˜¯å¯¹åº”äº†ä¸åŒçš„ä»¿å°„å˜æ¢çŸ©é˜µï¼Œä¸‹é¢åˆ†åˆ«æ¥çœ‹ä¸‹ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_image_transformation_sample.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_image_transformation_sample.jpg" alt=""></picture></p><h3 id="å¹³ç§»"><a href="#å¹³ç§»" class="headerlink" title="å¹³ç§»"></a>å¹³ç§»</h3><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_warp_affine_shift_sample.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_warp_affine_shift_sample.jpg" alt=""></picture></p><p>å¹³ç§»å°±æ˜¯xå’Œyæ–¹å‘ä¸Šçš„ç›´æ¥ç§»åŠ¨ï¼Œå¯ä»¥ä¸Šä¸‹/å·¦å³ç§»åŠ¨ï¼Œè‡ªç”±åº¦ä¸º2ï¼Œå˜æ¢çŸ©é˜µå¯ä»¥è¡¨ç¤ºä¸ºï¼š<br>$$<br>\left[<br> \begin{matrix}<br>   u \newline<br>   v<br>  \end{matrix}<br>  \right]  = \left[<br> \begin{matrix}<br>   1 &amp; 0  \newline<br>   0 &amp; 1<br>  \end{matrix}<br>  \right] \left[<br> \begin{matrix}<br>   x \newline<br>   y<br>  \end{matrix}<br>  \right]+\left[<br> \begin{matrix}<br>   t_x \newline<br>   t_y<br>  \end{matrix}<br>  \right]<br>$$</p><h3 id="æ—‹è½¬"><a href="#æ—‹è½¬" class="headerlink" title="æ—‹è½¬"></a>æ—‹è½¬</h3><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_warp_affine_rotation_sample.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_warp_affine_rotation_sample.jpg" alt=""></picture></p><p>æ—‹è½¬æ˜¯åæ ‡è½´æ–¹å‘é¥¶åŸç‚¹æ—‹è½¬ä¸€å®šçš„è§’åº¦Î¸ï¼Œè‡ªç”±åº¦ä¸º1ï¼Œä¸åŒ…å«å¹³ç§»ï¼Œå¦‚é¡ºæ—¶é’ˆæ—‹è½¬å¯ä»¥è¡¨ç¤ºä¸ºï¼š<br>$$<br>\left[<br> \begin{matrix}<br>   u \newline<br>   v<br>  \end{matrix}<br>  \right]  = \left[<br> \begin{matrix}<br>   \cos \theta &amp; -\sin \theta \newline<br>   \sin \theta &amp; \cos \theta<br>  \end{matrix}<br>  \right] \left[<br> \begin{matrix}<br>   x \newline<br>   y<br>  \end{matrix}<br>  \right]+\left[<br> \begin{matrix}<br>   0 \newline<br>   0<br>  \end{matrix}<br>  \right]<br>$$</p><blockquote><p>æ€è€ƒï¼šå¦‚æœä¸æ˜¯ç»•åŸç‚¹ï¼Œè€Œæ˜¯å¯å˜ç‚¹ï¼Œè‡ªç”±åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿï¼ˆè¯·çœ‹ä¸‹æ–‡åˆšä½“å˜æ¢ï¼‰</p></blockquote><h3 id="ç¿»è½¬"><a href="#ç¿»è½¬" class="headerlink" title="ç¿»è½¬"></a>ç¿»è½¬</h3><p>ç¿»è½¬æ˜¯xæˆ–yæŸä¸ªæ–¹å‘æˆ–å…¨éƒ¨æ–¹å‘ä¸Šå–åï¼Œè‡ªç”±åº¦ä¸º2ï¼Œæ¯”å¦‚è¿™é‡Œä»¥å‚ç›´ç¿»è½¬ä¸ºä¾‹ï¼š<br>$$<br>\left[<br> \begin{matrix}<br>   u \newline<br>   v<br>  \end{matrix}<br>  \right]  = \left[<br> \begin{matrix}<br>   1 &amp; 0 \newline<br>   0 &amp; -1<br>  \end{matrix}<br>  \right] \left[<br> \begin{matrix}<br>   x \newline<br>   y<br>  \end{matrix}<br>  \right]+\left[<br> \begin{matrix}<br>   0 \newline<br>   0<br>  \end{matrix}<br>  \right]<br>$$</p><h3 id="åˆšä½“å˜æ¢"><a href="#åˆšä½“å˜æ¢" class="headerlink" title="åˆšä½“å˜æ¢"></a>åˆšä½“å˜æ¢</h3><p>æ—‹è½¬+å¹³ç§»ä¹Ÿç§°åˆšä½“å˜æ¢ï¼ˆRigid Transformï¼‰ï¼Œå°±æ˜¯è¯´å¦‚æœ<strong>å›¾åƒå˜æ¢å‰åä¸¤ç‚¹é—´çš„è·ç¦»ä»ç„¶ä¿æŒä¸å˜</strong>ï¼Œé‚£ä¹ˆè¿™ç§å˜åŒ–å°±ç§°ä¸ºåˆšä½“å˜æ¢ã€‚åˆšä½“å˜æ¢åŒ…æ‹¬äº†å¹³ç§»ã€æ—‹è½¬å’Œç¿»è½¬ï¼Œè‡ªç”±åº¦ä¸º3ã€‚å˜æ¢çŸ©é˜µå¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><p>$$<br>\left[<br> \begin{matrix}<br>   u \newline<br>   v<br>  \end{matrix}<br>  \right]  = \left[<br> \begin{matrix}<br>   \cos \theta &amp; -\sin \theta \newline<br>   \sin \theta &amp; \cos \theta<br>  \end{matrix}<br>  \right] \left[<br> \begin{matrix}<br>   x \newline<br>   y<br>  \end{matrix}<br>  \right]+\left[<br> \begin{matrix}<br>   t_x  \newline<br>   t_y<br>  \end{matrix}<br>  \right]<br>$$</p><p>ç”±äºåªæ˜¯æ—‹è½¬å’Œå¹³ç§»ï¼Œåˆšä½“å˜æ¢ä¿æŒäº†ç›´çº¿é—´çš„é•¿åº¦ä¸å˜ï¼Œæ‰€ä»¥ä¹Ÿç§°æ¬§å¼å˜æ¢ï¼ˆå˜åŒ–å‰åä¿æŒæ¬§æ°è·ç¦»ï¼‰ã€‚</p><h3 id="ç¼©æ”¾"><a href="#ç¼©æ”¾" class="headerlink" title="ç¼©æ”¾"></a>ç¼©æ”¾</h3><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_warp_affine_scale_sampel.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_warp_affine_scale_sampel.jpg" alt=""></picture></p><p>ç¼©æ”¾æ˜¯xå’Œyæ–¹å‘çš„å°ºåº¦ï¼ˆå€æ•°ï¼‰å˜æ¢ï¼Œåœ¨æœ‰äº›èµ„æ–™ä¸Šéç­‰æ¯”ä¾‹çš„ç¼©æ”¾ä¹Ÿç§°ä¸ºæ‹‰ä¼¸/æŒ¤å‹ï¼Œç­‰æ¯”ä¾‹ç¼©æ”¾è‡ªç”±åº¦ä¸º1ï¼Œéç­‰æ¯”ä¾‹ç¼©æ”¾è‡ªç”±åº¦ä¸º2ï¼ŒçŸ©é˜µå¯ä»¥è¡¨ç¤ºä¸ºï¼š<br>$$<br>\left[<br> \begin{matrix}<br>   u \newline<br>   v<br>  \end{matrix}<br>  \right]  = \left[<br> \begin{matrix}<br>   s_x &amp; 0 \newline<br>   0 &amp; s_y<br>  \end{matrix}<br>  \right] \left[<br> \begin{matrix}<br>   x \newline<br>   y<br>  \end{matrix}<br>  \right]+\left[<br> \begin{matrix}<br>   0 \newline<br>   0<br>  \end{matrix}<br>  \right]<br>$$</p><h3 id="ç›¸ä¼¼å˜æ¢"><a href="#ç›¸ä¼¼å˜æ¢" class="headerlink" title="ç›¸ä¼¼å˜æ¢"></a>ç›¸ä¼¼å˜æ¢</h3><p>ç›¸ä¼¼å˜æ¢åˆç§°ç¼©æ”¾æ—‹è½¬ï¼Œç›¸ä¼¼å˜æ¢åŒ…å«äº†æ—‹è½¬ã€ç­‰æ¯”ä¾‹ç¼©æ”¾å’Œå¹³ç§»ç­‰å˜æ¢ï¼Œè‡ªç”±åº¦ä¸º4ã€‚åœ¨OpenCVä¸­ï¼Œæ—‹è½¬å°±æ˜¯ç”¨ç›¸ä¼¼å˜æ¢å®ç°çš„ï¼š</p><p>è‹¥ç¼©æ”¾æ¯”ä¾‹ä¸ºscaleï¼Œæ—‹è½¬è§’åº¦ä¸ºÎ¸ï¼Œæ—‹è½¬ä¸­å¿ƒæ˜¯$ (center_x,center_y) $ï¼Œåˆ™ä»¿å°„å˜æ¢å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><p>$$<br>\left[<br> \begin{matrix}<br>   u \newline<br>   v<br>  \end{matrix}<br>  \right]  = \left[<br> \begin{matrix}<br>   \alpha &amp; \beta \newline<br>   -\beta &amp; \alpha<br>  \end{matrix}<br>  \right] \left[<br> \begin{matrix}<br>   x \newline<br>   y<br>  \end{matrix}<br>  \right]+\left[<br> \begin{matrix}<br>   (1-\alpha)center_x-\beta center_y \newline<br>   \beta center_x+(1-\alpha)center_y<br>  \end{matrix}<br>  \right]<br>$$<br>å…¶ä¸­ï¼Œ<br>$$<br>\alpha=scale \cdot \cos \theta,\beta=scale \cdot \sin \theta<br>$$</p><p><strong>ç›¸ä¼¼å˜æ¢ç›¸æ¯”åˆšä½“å˜æ¢åŠ äº†ç¼©æ”¾ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šä¿æŒæ¬§æ°è·ç¦»ä¸å˜ï¼Œä½†ç›´çº¿é—´çš„å¤¹è§’ä¾ç„¶ä¸å˜ã€‚</strong></p><blockquote><p>ç»éªŒä¹‹è°ˆï¼šOpenCVä¸­é»˜è®¤æŒ‰ç…§é€†æ—¶é’ˆæ—‹è½¬å™¢~</p></blockquote><p>æ€»ç»“ä¸€ä¸‹ï¼ˆ<a href="http://blog.codec.wang/cv2_transformation_matrix_dof_summary.jpg_webp" target="_blank" rel="noopener">åŸå›¾[#è®¡ç®—æœºè§†è§‰ï¼šç®—æ³•ä¸åº”ç”¨p39]</a>ï¼‰ï¼š</p><table><thead><tr><th align="center">å˜æ¢</th><th align="center">çŸ©é˜µ</th><th align="center">è‡ªç”±åº¦</th><th align="center">ä¿æŒæ€§è´¨</th></tr></thead><tbody><tr><td align="center">å¹³ç§»</td><td align="center">[I, t]ï¼ˆ2Ã—3ï¼‰</td><td align="center">2</td><td align="center">æ–¹å‘/é•¿åº¦/å¤¹è§’/å¹³è¡Œæ€§/ç›´çº¿æ€§</td></tr><tr><td align="center">åˆšä½“</td><td align="center">[R, t]ï¼ˆ2Ã—3ï¼‰</td><td align="center">3</td><td align="center">é•¿åº¦/å¤¹è§’/å¹³è¡Œæ€§/ç›´çº¿æ€§</td></tr><tr><td align="center">ç›¸ä¼¼</td><td align="center">[sR, t]ï¼ˆ2Ã—3ï¼‰</td><td align="center">4</td><td align="center">å¤¹è§’/å¹³è¡Œæ€§/ç›´çº¿æ€§</td></tr><tr><td align="center">ä»¿å°„</td><td align="center">[T]ï¼ˆ2Ã—3ï¼‰</td><td align="center">6</td><td align="center">å¹³è¡Œæ€§/ç›´çº¿æ€§</td></tr><tr><td align="center">é€è§†</td><td align="center">[T]ï¼ˆ3Ã—3ï¼‰</td><td align="center">8</td><td align="center">ç›´çº¿æ€§</td></tr></tbody></table><h2 id="é€è§†å˜æ¢"><a href="#é€è§†å˜æ¢" class="headerlink" title="é€è§†å˜æ¢"></a>é€è§†å˜æ¢</h2><p>å‰é¢ä»¿å°„å˜æ¢åä¾ç„¶æ˜¯å¹³è¡Œå››è¾¹å½¢ï¼Œå¹¶ä¸èƒ½åšåˆ°ä»»æ„çš„å˜æ¢ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_warp_perspective_image_sample4.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_warp_perspective_image_sample4.jpg" alt=""></picture></p><p><a href="https://baike.baidu.com/item/%E9%80%8F%E8%A7%86%E5%8F%98%E6%8D%A2" target="_blank" rel="noopener">é€è§†å˜æ¢</a>ï¼ˆPerspective Transformationï¼‰æ˜¯å°†äºŒç»´çš„å›¾ç‰‡æŠ•å½±åˆ°ä¸€ä¸ªä¸‰ç»´è§†å¹³é¢ä¸Šï¼Œç„¶åå†è½¬æ¢åˆ°äºŒç»´åæ ‡ä¸‹ï¼Œæ‰€ä»¥ä¹Ÿç§°ä¸ºæŠ•å½±æ˜ å°„ï¼ˆProjective Mappingï¼‰ã€‚ç®€å•æ¥è¯´å°±æ˜¯äºŒç»´â†’ä¸‰ç»´â†’äºŒç»´çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚<br>$$<br>\begin{matrix}<br>   X=a_1 x + b_1 y + c_1 \newline<br>   Y=a_2 x + b_2 y + c_2  \newline<br>   Z=a_3 x + b_3 y + c_3<br>  \end{matrix}<br>$$<br>è¿™æ¬¡æˆ‘å†™æˆé½æ¬¡çŸ©é˜µçš„å½¢å¼ï¼š<br>$$<br>\left[<br> \begin{matrix}<br>   X \newline<br>   Y \newline<br>   Z<br>  \end{matrix}<br>  \right]  = \left[<br> \begin{matrix}<br>   a_1 &amp; b_1 &amp; c_1  \newline<br>   a_2 &amp; b_2 &amp; c_2  \newline<br>   a_3 &amp; b_3 &amp; c_3<br>  \end{matrix}<br>  \right] \left[<br> \begin{matrix}<br>   x \newline<br>   y \newline<br>   1<br>  \end{matrix}<br>  \right]<br>$$<br>å…¶ä¸­ï¼Œ$ \left[<br> \begin{matrix}<br>   a_1 &amp; b_1   \newline<br>   a_2 &amp; b_2  \newline<br>  \end{matrix}<br>  \right]  $è¡¨ç¤ºçº¿æ€§å˜æ¢ï¼Œ$ \left[<br> \begin{matrix}<br>   a_3 &amp; b_3<br>  \end{matrix}<br>  \right]  $äº§ç”Ÿé€è§†å˜æ¢ï¼Œå…¶ä½™è¡¨ç¤ºå¹³ç§»å˜æ¢ï¼Œå› æ­¤ä»¿å°„å˜æ¢æ˜¯é€è§†å˜æ¢çš„å­é›†ã€‚æ¥ä¸‹æ¥å†é€šè¿‡é™¤ä»¥Zè½´è½¬æ¢æˆäºŒç»´åæ ‡ï¼š<br>$$<br>x^{â€™}=\frac{X}{Z}=\frac{a_1x+b_1y+c_1}{a_3x+b_3y+c_3 }<br>$$</p><p>$$<br>y^{â€™}=\frac{Y}{Z}=\frac{a_2x+b_2y+c_2}{a_3x+b_3y+c_3 }<br>$$</p><p>é€è§†å˜æ¢ç›¸æ¯”ä»¿å°„å˜æ¢æ›´åŠ çµæ´»ï¼Œå˜æ¢åä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å››è¾¹å½¢ï¼Œä½†ä¸ä¸€å®šæ˜¯å¹³è¡Œå››è¾¹å½¢ï¼Œæ‰€ä»¥éœ€è¦<strong>éå…±çº¿çš„å››ä¸ªç‚¹æ‰èƒ½å”¯ä¸€ç¡®å®š</strong>ï¼ŒåŸå›¾ä¸­çš„ç›´çº¿å˜æ¢åä¾ç„¶æ˜¯ç›´çº¿ã€‚å› ä¸ºå››è¾¹å½¢åŒ…æ‹¬äº†æ‰€æœ‰çš„å¹³è¡Œå››è¾¹å½¢ï¼Œæ‰€ä»¥é€è§†å˜æ¢åŒ…æ‹¬äº†æ‰€æœ‰çš„ä»¿å°„å˜æ¢ã€‚</p><p>OpenCVä¸­é¦–å…ˆæ ¹æ®å˜æ¢å‰åçš„å››ä¸ªç‚¹ç”¨<code>cv2.getPerspectiveTransform()</code>ç”Ÿæˆ3Ã—3çš„å˜æ¢çŸ©é˜µï¼Œç„¶åå†ç”¨<code>cv2.warpPerspective()</code>è¿›è¡Œé€è§†å˜æ¢ã€‚å®æˆ˜æ¼”ç»ƒä¸€ä¸‹ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_perspective_transformations_inm.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_perspective_transformations_inm.jpg" alt="çŸ«æ­£ä¸€é¸£çš„å¡ç‰‡"></picture></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(<span class="string">'card.jpg'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŸå›¾ä¸­å¡ç‰‡çš„å››ä¸ªè§’ç‚¹</span></span><br><span class="line">pts1 = np.float32([[<span class="number">148</span>, <span class="number">80</span>], [<span class="number">437</span>, <span class="number">114</span>], [<span class="number">94</span>, <span class="number">247</span>], [<span class="number">423</span>, <span class="number">288</span>]])</span><br><span class="line"><span class="comment"># å˜æ¢ååˆ†åˆ«åœ¨å·¦ä¸Šã€å³ä¸Šã€å·¦ä¸‹ã€å³ä¸‹å››ä¸ªç‚¹</span></span><br><span class="line">pts2 = np.float32([[<span class="number">0</span>, <span class="number">0</span>], [<span class="number">320</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">178</span>], [<span class="number">320</span>, <span class="number">178</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆé€è§†å˜æ¢çŸ©é˜µ</span></span><br><span class="line">M = cv2.getPerspectiveTransform(pts1, pts2)</span><br><span class="line"><span class="comment"># è¿›è¡Œé€è§†å˜æ¢ï¼Œå‚æ•°3æ˜¯ç›®æ ‡å›¾åƒå¤§å°</span></span><br><span class="line">dst = cv2.warpPerspective(img, M, (<span class="number">320</span>, <span class="number">178</span>))</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">121</span>), plt.imshow(img[:, :, ::<span class="number">-1</span>]), plt.title(<span class="string">'input'</span>)</span><br><span class="line">plt.subplot(<span class="number">122</span>), plt.imshow(dst[:, :, ::<span class="number">-1</span>]), plt.title(<span class="string">'output'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><blockquote><p>ä»£ç ä¸­æœ‰ä¸ª<code>img[:, :, ::-1]</code>è¿˜è®°å¾—å—ï¼Ÿå¿˜è®°çš„è¯ï¼Œè¯·çœ‹<a href="#ç»ƒä¹ ">ç»ƒä¹ </a>ã€‚</p></blockquote><p>å½“ç„¶ï¼Œæˆ‘ä»¬åé¢å­¦ä¹ äº†ç‰¹å¾æå–ä¹‹åï¼Œå°±å¯ä»¥è‡ªåŠ¨è¯†åˆ«è§’ç‚¹äº†ã€‚é€è§†å˜æ¢æ˜¯ä¸€é¡¹å¾ˆé…·çš„åŠŸèƒ½ã€‚æ¯”å¦‚æˆ‘ä»¬ç»å¸¸ä¼šç”¨æ‰‹æœºå»æ‹èº«ä»½è¯å’Œæ–‡ä»¶ï¼Œæ— è®ºä½ æ€ä¹ˆæ‹ï¼Œè²Œä¼¼éƒ½æ‹ä¸æ­£æˆ–è€…æœ‰è¾¹æ¡†ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡æ‰‹æœºä¸Šé¢ä¸€äº›æ‰«æç±»è½¯ä»¶ï¼Œæ¯”å¦‚â€<a href="https://baike.baidu.com/item/%E6%89%AB%E6%8F%8F%E5%85%A8%E8%83%BD%E7%8E%8B" target="_blank" rel="noopener">æ‰«æå…¨èƒ½ç‹</a>â€œï¼Œâ€<a href="https://baike.baidu.com/item/Office%20Lens" target="_blank" rel="noopener">Office Lens</a>â€œï¼Œå®ƒä»¬èƒ½å¾ˆå¥½åœ°çŸ«æ­£å›¾ç‰‡ï¼Œè¿™äº›è½¯ä»¶å°±æ˜¯åº”ç”¨é€è§†å˜æ¢å®ç°çš„ã€‚</p><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><ol><li>è¯·å¤ä¹ ï¼š<a href="/opencv-python-extra-high-quality-save-and-using-matplotlib/">æ— æŸä¿å­˜å’ŒMatplotlibä½¿ç”¨</a>ã€‚</li></ol><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/%E7%95%AA%E5%A4%96%E7%AF%8705.%20%E4%BB%BF%E5%B0%84%E5%8F%98%E6%8D%A2%E5%92%8C%E9%80%8F%E8%A7%86%E5%8F%98%E6%8D%A2%E5%8E%9F%E7%90%86" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://blog.codec.wang/Computer%20Vision%EF%BC%9AAlgorithms%20and%20Applications.pdf" target="_blank" rel="noopener">è®¡ç®—æœºè§†è§‰ï¼šç®—æ³•ä¸åº”ç”¨</a></li><li><a href="https://zh.wikipedia.org/wiki/%E4%BB%BF%E5%B0%84%E5%8F%98%E6%8D%A2" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘ï¼šä»¿å°„å˜æ¢</a></li><li><a href="https://www.zhihu.com/question/20666664" target="_blank" rel="noopener">å¦‚ä½•é€šä¿—åœ°è®²è§£ã€Œä»¿å°„å˜æ¢ã€è¿™ä¸ªæ¦‚å¿µï¼Ÿ</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¸¸è§çš„2Då›¾åƒå˜æ¢ä»åŸç†ä¸Šè®²ä¸»è¦åŒ…æ‹¬åŸºäº2Ã—3çŸ©é˜µçš„&lt;a href=&quot;https://baike.baidu.com/item/%E4%BB%BF%E5%B0%84%E5%8F%98%E6%8D%A2&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ä»¿å°„å˜æ¢&lt;/a&gt;å’ŒåŸºäº3Ã—3çŸ©é˜µ&lt;a href=&quot;https://baike.baidu.com/item/%E9%80%8F%E8%A7%86%E5%8F%98%E6%8D%A2&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;é€è§†å˜æ¢&lt;/a&gt;ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="å›¾åƒå˜æ¢" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹7ï¼šå›¾åƒå‡ ä½•å˜æ¢</title>
    <link href="http://www.codec.wang/opencv-python-image-geometric-transformation/"/>
    <id>http://www.codec.wang/opencv-python-image-geometric-transformation/</id>
    <published>2017-12-08T06:36:53.000Z</published>
    <updated>2020-04-07T04:44:08.412Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ å¦‚ä½•æ—‹è½¬ã€å¹³ç§»ã€ç¼©æ”¾å’Œç¿»è½¬å›¾ç‰‡ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>å®ç°æ—‹è½¬ã€å¹³ç§»å’Œç¼©æ”¾å›¾ç‰‡</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.resize()</code>, <code>cv2.flip()</code>, <code>cv2.warpAffine()</code></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><blockquote><p>å›¾åƒçš„å‡ ä½•å˜æ¢ä»åŸç†ä¸Šçœ‹ä¸»è¦åŒ…æ‹¬ä¸¤ç§ï¼šåŸºäº2Ã—3çŸ©é˜µçš„ä»¿å°„å˜æ¢ï¼ˆå¹³ç§»ã€ç¼©æ”¾ã€æ—‹è½¬å’Œç¿»è½¬ç­‰ï¼‰ã€åŸºäº3Ã—3çŸ©é˜µçš„é€è§†å˜æ¢ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯å‚è€ƒ<a href="/opencv-python-extra-warpaffine-warpperspective/">ç•ªå¤–ç¯‡ï¼šä»¿å°„å˜æ¢ä¸é€è§†å˜æ¢</a>ã€‚</p></blockquote><h3 id="ç¼©æ”¾å›¾ç‰‡"><a href="#ç¼©æ”¾å›¾ç‰‡" class="headerlink" title="ç¼©æ”¾å›¾ç‰‡"></a>ç¼©æ”¾å›¾ç‰‡</h3><p>ç¼©æ”¾å°±æ˜¯è°ƒæ•´å›¾ç‰‡çš„å¤§å°ï¼Œä½¿ç”¨<code>cv2.resize()</code>å‡½æ•°å®ç°ç¼©æ”¾ã€‚å¯ä»¥æŒ‰ç…§æ¯”ä¾‹ç¼©æ”¾ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§æŒ‡å®šçš„å¤§å°ç¼©æ”¾ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'drawing.jpg'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‰ç…§æŒ‡å®šçš„å®½åº¦ã€é«˜åº¦ç¼©æ”¾å›¾ç‰‡</span></span><br><span class="line">res = cv2.resize(img, (<span class="number">132</span>, <span class="number">150</span>))</span><br><span class="line"><span class="comment"># æŒ‰ç…§æ¯”ä¾‹ç¼©æ”¾ï¼Œå¦‚x,yè½´å‡æ”¾å¤§ä¸€å€</span></span><br><span class="line">res2 = cv2.resize(img, <span class="literal">None</span>, fx=<span class="number">2</span>, fy=<span class="number">2</span>, interpolation=cv2.INTER_LINEAR)</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">'shrink'</span>, res), cv2.imshow(<span class="string">'zoom'</span>, res2)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šç¼©æ”¾æ–¹æ³•<code>interpolation</code>ï¼Œæ›´ä¸“ä¸šç‚¹å«æ’å€¼æ–¹æ³•ï¼Œé»˜è®¤æ˜¯<code>INTER_LINEAR</code>ï¼Œå…¨éƒ¨å¯ä»¥å‚è€ƒï¼š<a href="https://docs.opencv.org/4.0.0/da/d54/group__imgproc__transform.html#ga5bb5a1fea74ea38e1a5445ca803ff121" target="_blank" rel="noopener">InterpolationFlags</a></p><h3 id="ç¿»è½¬å›¾ç‰‡"><a href="#ç¿»è½¬å›¾ç‰‡" class="headerlink" title="ç¿»è½¬å›¾ç‰‡"></a>ç¿»è½¬å›¾ç‰‡</h3><p>é•œåƒç¿»è½¬å›¾ç‰‡ï¼Œå¯ä»¥ç”¨<code>cv2.flip()</code>å‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst = cv2.flip(img, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œå‚æ•°2 = 0ï¼šå‚ç›´ç¿»è½¬(æ²¿xè½´)ï¼Œå‚æ•°2 &gt; 0: æ°´å¹³ç¿»è½¬(æ²¿yè½´)ï¼Œå‚æ•°2 &lt; 0: æ°´å¹³å‚ç›´ç¿»è½¬ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_flip_image_sample.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_flip_image_sample.jpg" alt=""></picture></p><h3 id="å¹³ç§»å›¾ç‰‡"><a href="#å¹³ç§»å›¾ç‰‡" class="headerlink" title="å¹³ç§»å›¾ç‰‡"></a>å¹³ç§»å›¾ç‰‡</h3><p>è¦å¹³ç§»å›¾ç‰‡ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸‹é¢è¿™æ ·ä¸€ä¸ªçŸ©é˜µï¼Œtx,tyæ˜¯å‘xå’Œyæ–¹å‘å¹³ç§»çš„è·ç¦»ï¼š</p><p>$$<br> M = \left[<br> \begin{matrix}<br>   1 &amp; 0 &amp; t_x \newline<br>   0 &amp; 1 &amp; t_y<br>  \end{matrix}<br>  \right]<br>$$</p><p>å¹³ç§»æ˜¯ç”¨ä»¿å°„å˜æ¢å‡½æ•°<code>cv2.warpAffine()</code>å®ç°çš„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¹³ç§»å›¾ç‰‡</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">rows, cols = img.shape[:<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å¹³ç§»çŸ©é˜µï¼Œéœ€è¦æ˜¯numpyçš„float32ç±»å‹</span></span><br><span class="line"><span class="comment"># xè½´å¹³ç§»100ï¼Œyè½´å¹³ç§»50</span></span><br><span class="line">M = np.float32([[<span class="number">1</span>, <span class="number">0</span>, <span class="number">100</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">50</span>]])</span><br><span class="line"><span class="comment"># ç”¨ä»¿å°„å˜æ¢å®ç°å¹³ç§»</span></span><br><span class="line">dst = cv2.warpAffine(img, M, (cols, rows))</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">'shift'</span>, dst)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_translation_100_50.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_translation_100_50.jpg" alt=""></picture></p><h3 id="æ—‹è½¬å›¾ç‰‡"><a href="#æ—‹è½¬å›¾ç‰‡" class="headerlink" title="æ—‹è½¬å›¾ç‰‡"></a>æ—‹è½¬å›¾ç‰‡</h3><p>æ—‹è½¬åŒå¹³ç§»ä¸€æ ·ï¼Œä¹Ÿæ˜¯ç”¨ä»¿å°„å˜æ¢å®ç°çš„ï¼Œå› æ­¤ä¹Ÿéœ€è¦å®šä¹‰ä¸€ä¸ªå˜æ¢çŸ©é˜µã€‚OpenCVç›´æ¥æä¾›äº† <code>cv2.getRotationMatrix2D()</code>å‡½æ•°æ¥ç”Ÿæˆè¿™ä¸ªçŸ©é˜µï¼Œè¯¥å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p><ul><li>å‚æ•°1ï¼šå›¾ç‰‡çš„æ—‹è½¬ä¸­å¿ƒ</li><li>å‚æ•°2ï¼šæ—‹è½¬è§’åº¦(æ­£ï¼šé€†æ—¶é’ˆï¼Œè´Ÿï¼šé¡ºæ—¶é’ˆ)</li><li>å‚æ•°3ï¼šç¼©æ”¾æ¯”ä¾‹ï¼Œ0.5è¡¨ç¤ºç¼©å°ä¸€åŠ</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 45Â°æ—‹è½¬å›¾ç‰‡å¹¶ç¼©å°ä¸€åŠ</span></span><br><span class="line">M = cv2.getRotationMatrix2D((cols / <span class="number">2</span>, rows / <span class="number">2</span>), <span class="number">45</span>, <span class="number">0.5</span>)</span><br><span class="line">dst = cv2.warpAffine(img, M, (cols, rows))</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">'rotation'</span>, dst)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_rotation_45_degree.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_rotation_45_degree.jpg" alt="é€†æ—¶é’ˆæ—‹è½¬45Â°å¹¶ç¼©æ”¾"></picture></p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li><code>cv2.resize()</code>ç¼©æ”¾å›¾ç‰‡ï¼Œå¯ä»¥æŒ‰æŒ‡å®šå¤§å°ç¼©æ”¾ï¼Œä¹Ÿå¯ä»¥æŒ‰æ¯”ä¾‹ç¼©æ”¾ã€‚</li><li><code>cv2.flip()</code>ç¿»è½¬å›¾ç‰‡ï¼Œå¯ä»¥æŒ‡å®šæ°´å¹³/å‚ç›´/æ°´å¹³å‚ç›´ç¿»è½¬ä¸‰ç§æ–¹å¼ã€‚</li><li>å¹³ç§»/æ—‹è½¬æ˜¯é ä»¿å°„å˜æ¢<code>cv2.warpAffine()</code>å®ç°çš„ã€‚</li></ul><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/da/d54/group__imgproc__transform.html#ga47a974309e9102f5f08231edc7e7529d" target="_blank" rel="noopener">cv2.resize()</a></li><li><a href="https://docs.opencv.org/4.0.0/d2/de8/group__core__array.html#gaca7be533e3dac7feb70fc60635adf441" target="_blank" rel="noopener">cv2.filp()</a></li><li><a href="https://docs.opencv.org/4.0.0/da/d54/group__imgproc__transform.html#ga0203d9ee5fcd28d40dbc4a1ea4451983" target="_blank" rel="noopener">cv2.warpAffine()</a></li><li><a href="https://docs.opencv.org/4.0.0/da/d54/group__imgproc__transform.html#gafbbc470ce83812914a70abfb604f4326" target="_blank" rel="noopener">cv2.getRotationMatrix2D()</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/07.%20%E5%9B%BE%E5%83%8F%E5%87%A0%E4%BD%95%E5%8F%98%E6%8D%A2" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_geometric_transformations/py_geometric_transformations.html" target="_blank" rel="noopener">Geometric Transformations of Images</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ å¦‚ä½•æ—‹è½¬ã€å¹³ç§»ã€ç¼©æ”¾å’Œç¿»è½¬å›¾ç‰‡ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="å‡ ä½•å˜æ¢" scheme="http://www.codec.wang/tags/%E5%87%A0%E4%BD%95%E5%8F%98%E6%8D%A2/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡4ï¼šOtsué˜ˆå€¼æ³•</title>
    <link href="http://www.codec.wang/opencv-python-extra-otsu-thresholding/"/>
    <id>http://www.codec.wang/opencv-python-extra-otsu-thresholding/</id>
    <published>2017-12-08T04:48:05.000Z</published>
    <updated>2020-04-07T04:54:28.424Z</updated>
    
    <content type="html"><![CDATA[<p>å¤§éƒ¨åˆ†å›¾åƒå¤„ç†ä»»åŠ¡éƒ½éœ€è¦å…ˆè¿›è¡ŒäºŒå€¼åŒ–æ“ä½œï¼Œé˜ˆå€¼çš„é€‰å–å¾ˆå…³é”®ï¼ŒOtsué˜ˆå€¼æ³•ä¼šè‡ªåŠ¨è®¡ç®—é˜ˆå€¼ã€‚<a id="more"></a></p><p><a href="https://baike.baidu.com/item/otsu/16252828" target="_blank" rel="noopener">Otsué˜ˆå€¼æ³•</a>ï¼ˆæ—¥æœ¬äººå¤§æ´¥å±•ä¹‹æå‡ºçš„ï¼Œä¹Ÿå¯ç§°å¤§æ´¥ç®—æ³•ï¼‰éå¸¸é€‚ç”¨äºåŒå³°å›¾ç‰‡ï¼Œå•¥æ„æ€å‘¢ï¼Ÿ</p><blockquote><p><a href="https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=4310076" target="_blank" rel="noopener">Otsu N. A threshold selection method from gray-level histograms[J]. IEEE transactions on systems, man, and cybernetics, 1979, 9(1): 62-66.</a></p></blockquote><hr><h2 id="ä»€ä¹ˆæ˜¯åŒå³°å›¾ç‰‡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åŒå³°å›¾ç‰‡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åŒå³°å›¾ç‰‡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åŒå³°å›¾ç‰‡ï¼Ÿ</h2><p>åŒå³°å›¾ç‰‡å°±æ˜¯æŒ‡å›¾ç‰‡çš„ç°åº¦ç›´æ–¹å›¾ä¸Šæœ‰ä¸¤ä¸ªå³°å€¼ï¼Œç›´æ–¹å›¾å°±æ˜¯æ¯ä¸ªå€¼ï¼ˆ0~255ï¼‰çš„åƒç´ ç‚¹ä¸ªæ•°ç»Ÿè®¡ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_bimodal_image_two_peaks.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_bimodal_image_two_peaks.jpg" alt=""></picture></p><p>Otsuç®—æ³•å‡è®¾è¿™å‰¯å›¾ç‰‡ç”±å‰æ™¯è‰²å’ŒèƒŒæ™¯è‰²ç»„æˆï¼Œé€šè¿‡ç»Ÿè®¡å­¦æ–¹æ³•ï¼ˆæœ€å¤§ç±»é—´æ–¹å·®ï¼‰é€‰å–ä¸€ä¸ªé˜ˆå€¼ï¼Œå°†å‰æ™¯å’ŒèƒŒæ™¯å°½å¯èƒ½åˆ†å¼€ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ä»£ç ï¼Œç„¶åè¯¦ç»†è¯´æ˜ä¸‹ç®—æ³•åŸç†ã€‚</p><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><p>ä¸‹é¢è¿™æ®µä»£ç å¯¹æ¯”äº†ä½¿ç”¨å›ºå®šé˜ˆå€¼å’ŒOtsué˜ˆå€¼åçš„ä¸åŒç»“æœï¼š</p><p>å¦å¤–ï¼Œå¯¹å«å™ªç‚¹çš„å›¾åƒï¼Œå…ˆè¿›è¡Œæ»¤æ³¢æ“ä½œæ•ˆæœä¼šæ›´å¥½ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'noisy.jpg'</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å›ºå®šé˜ˆå€¼æ³•</span></span><br><span class="line">ret1, th1 = cv2.threshold(img, <span class="number">100</span>, <span class="number">255</span>, cv2.THRESH_BINARY)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Otsué˜ˆå€¼æ³•</span></span><br><span class="line">ret2, th2 = cv2.threshold(img, <span class="number">0</span>, <span class="number">255</span>, cv2.THRESH_BINARY + cv2.THRESH_OTSU)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…ˆè¿›è¡Œé«˜æ–¯æ»¤æ³¢ï¼Œå†ä½¿ç”¨Otsué˜ˆå€¼æ³•</span></span><br><span class="line">blur = cv2.GaussianBlur(img, (<span class="number">5</span>, <span class="number">5</span>), <span class="number">0</span>)</span><br><span class="line">ret3, th3 = cv2.threshold(blur, <span class="number">0</span>, <span class="number">255</span>, cv2.THRESH_BINARY + cv2.THRESH_OTSU)</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æˆ‘ä»¬ç”¨MatplotlibæŠŠåŸå›¾ã€ç›´æ–¹å›¾å’Œé˜ˆå€¼å›¾éƒ½æ˜¾ç¤ºå‡ºæ¥ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">images = [img, <span class="number">0</span>, th1, img, <span class="number">0</span>, th2, blur, <span class="number">0</span>, th3]</span><br><span class="line">titles = [<span class="string">'Original'</span>, <span class="string">'Histogram'</span>, <span class="string">'Global(v=100)'</span>,</span><br><span class="line">          <span class="string">'Original'</span>, <span class="string">'Histogram'</span>, <span class="string">"Otsu's"</span>,</span><br><span class="line">          <span class="string">'Gaussian filtered Image'</span>, <span class="string">'Histogram'</span>, <span class="string">"Otsu's"</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">    <span class="comment"># ç»˜åˆ¶åŸå›¾</span></span><br><span class="line">    plt.subplot(<span class="number">3</span>, <span class="number">3</span>, i * <span class="number">3</span> + <span class="number">1</span>)</span><br><span class="line">    plt.imshow(images[i * <span class="number">3</span>], <span class="string">'gray'</span>)</span><br><span class="line">    plt.title(titles[i * <span class="number">3</span>], fontsize=<span class="number">8</span>)</span><br><span class="line">    plt.xticks([]), plt.yticks([])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç»˜åˆ¶ç›´æ–¹å›¾plt.histï¼Œravelå‡½æ•°å°†æ•°ç»„é™æˆä¸€ç»´</span></span><br><span class="line">    plt.subplot(<span class="number">3</span>, <span class="number">3</span>, i * <span class="number">3</span> + <span class="number">2</span>)</span><br><span class="line">    plt.hist(images[i * <span class="number">3</span>].ravel(), <span class="number">256</span>)</span><br><span class="line">    plt.title(titles[i * <span class="number">3</span> + <span class="number">1</span>], fontsize=<span class="number">8</span>)</span><br><span class="line">    plt.xticks([]), plt.yticks([])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç»˜åˆ¶é˜ˆå€¼å›¾</span></span><br><span class="line">    plt.subplot(<span class="number">3</span>, <span class="number">3</span>, i * <span class="number">3</span> + <span class="number">3</span>)</span><br><span class="line">    plt.imshow(images[i * <span class="number">3</span> + <span class="number">2</span>], <span class="string">'gray'</span>)</span><br><span class="line">    plt.title(titles[i * <span class="number">3</span> + <span class="number">2</span>], fontsize=<span class="number">8</span>)</span><br><span class="line">    plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_otsu_vs_simple_thresholding.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_otsu_vs_simple_thresholding.jpg" alt="å›ºå®šé˜ˆå€¼ vs Otsué˜ˆå€¼"></picture></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒOtsué˜ˆå€¼æ˜æ˜¾ä¼˜äºå›ºå®šé˜ˆå€¼ï¼Œçœå»äº†ä¸æ–­å°è¯•é˜ˆå€¼åˆ¤æ–­æ•ˆæœå¥½åçš„è¿‡ç¨‹ã€‚å…¶ä¸­ï¼Œç»˜åˆ¶ç›´æ–¹å›¾æ—¶ï¼Œä½¿ç”¨äº†numpyä¸­çš„<a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html" target="_blank" rel="noopener">ravel()</a>å‡½æ•°ï¼Œå®ƒä¼šå°†åŸçŸ©é˜µå‹ç¼©æˆä¸€ç»´æ•°ç»„ï¼Œä¾¿äºç”»ç›´æ–¹å›¾ã€‚</p><h2 id="Otsuç®—æ³•è¯¦è§£"><a href="#Otsuç®—æ³•è¯¦è§£" class="headerlink" title="Otsuç®—æ³•è¯¦è§£"></a>Otsuç®—æ³•è¯¦è§£</h2><p>Otsué˜ˆå€¼æ³•å°†æ•´å¹…å›¾åˆ†ä¸ºå‰æ™¯ï¼ˆç›®æ ‡ï¼‰å’ŒèƒŒæ™¯ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›ç¬¦å·è§„å®šï¼š</p><ul><li>$ T $ï¼šåˆ†å‰²é˜ˆå€¼</li><li>$ N_0 $ï¼šå‰æ™¯åƒç´ ç‚¹æ•°</li><li>$ N_1 $ï¼šèƒŒæ™¯åƒç´ ç‚¹æ•°</li><li>$ \omega_0 $ï¼šå‰æ™¯çš„åƒç´ ç‚¹æ•°å æ•´å¹…å›¾åƒçš„æ¯”ä¾‹</li><li>$ \omega_1 $ï¼šèƒŒæ™¯çš„åƒç´ ç‚¹æ•°å æ•´å¹…å›¾åƒçš„æ¯”ä¾‹</li><li>$ \mu_0 $ï¼šå‰æ™¯çš„å¹³å‡åƒç´ å€¼</li><li>$ \mu_1 $ï¼šèƒŒæ™¯çš„å¹³å‡åƒç´ å€¼</li><li>$ \mu $ï¼šæ•´å¹…å›¾çš„å¹³å‡åƒç´ å€¼</li><li>$ rows\times cols $ï¼šå›¾åƒçš„è¡Œæ•°å’Œåˆ—æ•°</li></ul><p>ç»“åˆä¸‹å›¾ä¼šæ›´å®¹æ˜“ç†è§£ä¸€äº›ï¼Œæœ‰ä¸€å‰¯å¤§å°ä¸º4Ã—4çš„å›¾ç‰‡ï¼Œå‡è®¾é˜ˆå€¼Tä¸º1ï¼Œé‚£ä¹ˆï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_otsu_theory_sample.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_otsu_theory_sample.jpg" alt=""></picture></p><p>å…¶å®å¾ˆå¥½ç†è§£ï¼Œ$ N_0+N_1 $å°±æ˜¯æ€»çš„åƒç´ ç‚¹ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯è¡Œæ•°ä¹˜åˆ—æ•°ï¼š<br>$$<br>N_0+N_1=rows\times cols<br>$$<br>$ \omega_0 $å’Œ$ \omega_1 $æ˜¯å‰/èƒŒæ™¯æ‰€å çš„æ¯”ä¾‹ï¼Œä¹Ÿå°±æ˜¯ï¼š<br>$$<br>\omega_0=\frac{N_0}{rows\times cols}<br>$$<br>$$<br>\omega_1=\frac{N_1}{rows\times cols}<br>$$<br>$$<br>\omega_0+\omega_1=1 \tag{1}<br>$$<br>æ•´å¹…å›¾çš„å¹³å‡åƒç´ å€¼å°±æ˜¯ï¼š<br>$$<br>\mu=\omega_0\times \mu_0+\omega_1\times \mu_1  \tag{2}<br>$$</p><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‰æ™¯$ \mu_0 $ä¸èƒŒæ™¯$ \mu_1 $çš„æ–¹å·®$ g $ï¼š</p><p>$$<br>g=\omega_0(\mu_0-\mu)^2+\omega_1(\mu_1-\mu)^2  \tag{3}<br>$$</p><p>å°†å‰è¿°çš„1/2/3å…¬å¼æ•´åˆåœ¨ä¸€èµ·ï¼Œä¾¿æ˜¯ï¼š</p><p>$$<br>g=\omega_0\omega_1(\mu_0-\mu_1)^2<br>$$</p><p><strong>$ g $å°±æ˜¯å‰æ™¯ä¸èƒŒæ™¯ä¸¤ç±»ä¹‹é—´çš„æ–¹å·®ï¼Œè¿™ä¸ªå€¼è¶Šå¤§ï¼Œè¯´æ˜å‰æ™¯å’ŒèƒŒæ™¯çš„å·®åˆ«ä¹Ÿå°±è¶Šå¤§ï¼Œæ•ˆæœè¶Šå¥½ã€‚Otsuç®—æ³•ä¾¿æ˜¯éå†é˜ˆå€¼Tï¼Œä½¿å¾—$ g $æœ€å¤§ï¼Œæ‰€ä»¥åˆç§°ä¸ºæœ€å¤§ç±»é—´æ–¹å·®æ³•ã€‚</strong>åŸºæœ¬ä¸ŠåŒå³°å›¾ç‰‡çš„é˜ˆå€¼Tåœ¨ä¸¤å³°ä¹‹é—´çš„è°·åº•ã€‚</p><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/d7/d1b/group__imgproc__misc.html#gaa9e58d2860d4afa658ef70a9b1115576" target="_blank" rel="noopener">cv2.ThresholdTypes</a></li><li><a href="https://docs.opencv.org/4.0.0/d4/d86/group__imgproc__filter.html#gaabe8c836e97159a9193fb0b11ac52cf1" target="_blank" rel="noopener">cv2.GaussianBlur()</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/%E7%95%AA%E5%A4%96%E7%AF%8704.%20Otsu%E9%98%88%E5%80%BC%E6%B3%95" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html" target="_blank" rel="noopener">numpy.ravel</a></li><li><a href="https://en.wikipedia.org/wiki/Otsu%27s_method" target="_blank" rel="noopener">Otsuâ€™s Method(wikipedia)</a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_thresholding/py_thresholding.html" target="_blank" rel="noopener">Image Thresholding</a></li><li><a href="https://blog.csdn.net/u011776903/article/details/73274802" target="_blank" rel="noopener">ä¸€ç»´OTSUæ³•ã€æœ€å°äº¤å‰ç†µæ³•ã€äºŒç»´OTSUæ³•åŠC++æºç </a></li><li><a href="https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=4310076" target="_blank" rel="noopener">Otsu N. A threshold selection method from gray-level histograms[J]. IEEE transactions on systems, man, and cybernetics, 1979, 9(1): 62-66.</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¤§éƒ¨åˆ†å›¾åƒå¤„ç†ä»»åŠ¡éƒ½éœ€è¦å…ˆè¿›è¡ŒäºŒå€¼åŒ–æ“ä½œï¼Œé˜ˆå€¼çš„é€‰å–å¾ˆå…³é”®ï¼ŒOtsué˜ˆå€¼æ³•ä¼šè‡ªåŠ¨è®¡ç®—é˜ˆå€¼ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="é˜ˆå€¼" scheme="http://www.codec.wang/tags/%E9%98%88%E5%80%BC/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹6ï¼šé˜ˆå€¼åˆ†å‰²</title>
    <link href="http://www.codec.wang/opencv-python-image-thresholding/"/>
    <id>http://www.codec.wang/opencv-python-image-thresholding/</id>
    <published>2017-12-07T13:14:44.000Z</published>
    <updated>2020-04-07T04:43:45.351Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ ä½¿ç”¨ä¸åŒçš„é˜ˆå€¼æ–¹æ³•â€äºŒå€¼åŒ–â€å›¾åƒã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>ä½¿ç”¨å›ºå®šé˜ˆå€¼ã€è‡ªé€‚åº”é˜ˆå€¼å’ŒOtsué˜ˆå€¼æ³•â€äºŒå€¼åŒ–â€å›¾åƒ</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.threshold()</code>, <code>cv2.adaptiveThreshold()</code></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><h3 id="å›ºå®šé˜ˆå€¼åˆ†å‰²"><a href="#å›ºå®šé˜ˆå€¼åˆ†å‰²" class="headerlink" title="å›ºå®šé˜ˆå€¼åˆ†å‰²"></a>å›ºå®šé˜ˆå€¼åˆ†å‰²</h3><p>å›ºå®šé˜ˆå€¼åˆ†å‰²å¾ˆç›´æ¥ï¼Œä¸€å¥è¯è¯´å°±æ˜¯åƒç´ ç‚¹å€¼å¤§äºé˜ˆå€¼å˜æˆä¸€ç±»å€¼ï¼Œå°äºé˜ˆå€¼å˜æˆå¦ä¸€ç±»å€¼ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_threshold_binary_demo.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_threshold_binary_demo.jpg" alt=""></picture></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åº¦å›¾è¯»å…¥</span></span><br><span class="line">img = cv2.imread(<span class="string">'gradient.jpg'</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é˜ˆå€¼åˆ†å‰²</span></span><br><span class="line">ret, th = cv2.threshold(img, <span class="number">127</span>, <span class="number">255</span>, cv2.THRESH_BINARY)</span><br><span class="line">cv2.imshow(<span class="string">'thresh'</span>, th)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><code>cv2.threshold()</code>ç”¨æ¥å®ç°é˜ˆå€¼åˆ†å‰²ï¼Œretæ˜¯return valueç¼©å†™ï¼Œä»£è¡¨å½“å‰çš„é˜ˆå€¼ï¼Œæš‚æ—¶ä¸ç”¨ç†ä¼šã€‚å‡½æ•°æœ‰4ä¸ªå‚æ•°ï¼š</p><ul><li>å‚æ•°1ï¼šè¦å¤„ç†çš„åŸå›¾ï¼Œ<strong>ä¸€èˆ¬æ˜¯ç°åº¦å›¾</strong></li><li>å‚æ•°2ï¼šè®¾å®šçš„é˜ˆå€¼</li><li>å‚æ•°3ï¼šæœ€å¤§é˜ˆå€¼ï¼Œä¸€èˆ¬ä¸º255</li><li>å‚æ•°4ï¼šé˜ˆå€¼çš„æ–¹å¼ï¼Œä¸»è¦æœ‰5ç§ï¼Œè¯¦æƒ…ï¼š<a href="https://docs.opencv.org/4.0.0/d7/d1b/group__imgproc__misc.html#gaa9e58d2860d4afa658ef70a9b1115576" target="_blank" rel="noopener">ThresholdTypes</a></li></ul><p>ä¸‹é¢ç»“åˆä»£ç ç†è§£ä¸‹è¿™5ç§é˜ˆå€¼æ–¹å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># åº”ç”¨5ç§ä¸åŒçš„é˜ˆå€¼æ–¹æ³•</span></span><br><span class="line">ret, th1 = cv2.threshold(img, <span class="number">127</span>, <span class="number">255</span>, cv2.THRESH_BINARY)</span><br><span class="line">ret, th2 = cv2.threshold(img, <span class="number">127</span>, <span class="number">255</span>, cv2.THRESH_BINARY_INV)</span><br><span class="line">ret, th3 = cv2.threshold(img, <span class="number">127</span>, <span class="number">255</span>, cv2.THRESH_TRUNC)</span><br><span class="line">ret, th4 = cv2.threshold(img, <span class="number">127</span>, <span class="number">255</span>, cv2.THRESH_TOZERO)</span><br><span class="line">ret, th5 = cv2.threshold(img, <span class="number">127</span>, <span class="number">255</span>, cv2.THRESH_TOZERO_INV)</span><br><span class="line"></span><br><span class="line">titles = [<span class="string">'Original'</span>, <span class="string">'BINARY'</span>, <span class="string">'BINARY_INV'</span>, <span class="string">'TRUNC'</span>, <span class="string">'TOZERO'</span>, <span class="string">'TOZERO_INV'</span>]</span><br><span class="line">images = [img, th1, th2, th3, th4, th5]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨Matplotlibæ˜¾ç¤º</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">6</span>):</span><br><span class="line">    plt.subplot(<span class="number">2</span>, <span class="number">3</span>, i + <span class="number">1</span>)</span><br><span class="line">    plt.imshow(images[i], <span class="string">'gray'</span>)</span><br><span class="line">    plt.title(titles[i], fontsize=<span class="number">8</span>)</span><br><span class="line">    plt.xticks([]), plt.yticks([])  <span class="comment"># éšè—åæ ‡è½´</span></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_different_threshold_demo.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_different_threshold_demo.jpg" alt="5ç§ä¸åŒçš„é˜ˆå€¼æ–¹å¼ç»“æœ"></picture></p><blockquote><p>ç»éªŒä¹‹è°ˆï¼šå¾ˆå¤šäººè¯¯ä»¥ä¸ºé˜ˆå€¼åˆ†å‰²å°±æ˜¯<a href="https://baike.baidu.com/item/%E4%BA%8C%E5%80%BC%E5%8C%96" target="_blank" rel="noopener">äºŒå€¼åŒ–</a>ã€‚ä»ä¸Šå›¾ä¸­å¯ä»¥å‘ç°ï¼Œä¸¤è€…å¹¶ä¸ç­‰åŒï¼Œé˜ˆå€¼åˆ†å‰²ç»“æœæ˜¯ä¸¤ç±»å€¼ï¼Œè€Œä¸æ˜¯ä¸¤ä¸ªå€¼ï¼Œæ‰€ä»¥æ•™ç¨‹å¼€å¤´æˆ‘æŠŠäºŒå€¼åŒ–åŠ äº†å¼•å·ã€‚</p></blockquote><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_different_thresholds_theory.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_different_thresholds_theory.jpg" alt=""></picture></p><h3 id="è‡ªé€‚åº”é˜ˆå€¼"><a href="#è‡ªé€‚åº”é˜ˆå€¼" class="headerlink" title="è‡ªé€‚åº”é˜ˆå€¼"></a>è‡ªé€‚åº”é˜ˆå€¼</h3><p>çœ‹å¾—å‡ºæ¥å›ºå®šé˜ˆå€¼æ˜¯åœ¨æ•´å¹…å›¾ç‰‡ä¸Šåº”ç”¨ä¸€ä¸ªé˜ˆå€¼è¿›è¡Œåˆ†å‰²ï¼Œ<em>å®ƒå¹¶ä¸é€‚ç”¨äºæ˜æš—åˆ†å¸ƒä¸å‡çš„å›¾ç‰‡</em>ã€‚ <code>cv2.adaptiveThreshold()</code>è‡ªé€‚åº”é˜ˆå€¼ä¼šæ¯æ¬¡å–å›¾ç‰‡çš„ä¸€å°éƒ¨åˆ†è®¡ç®—é˜ˆå€¼ï¼Œè¿™æ ·å›¾ç‰‡ä¸åŒåŒºåŸŸçš„é˜ˆå€¼å°±ä¸å°½ç›¸åŒã€‚å®ƒæœ‰5ä¸ªå‚æ•°ï¼Œå…¶å®å¾ˆå¥½ç†è§£ï¼Œå…ˆçœ‹ä¸‹æ•ˆæœï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è‡ªé€‚åº”é˜ˆå€¼å¯¹æ¯”å›ºå®šé˜ˆå€¼</span></span><br><span class="line">img = cv2.imread(<span class="string">'sudoku.jpg'</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å›ºå®šé˜ˆå€¼</span></span><br><span class="line">ret, th1 = cv2.threshold(img, <span class="number">127</span>, <span class="number">255</span>, cv2.THRESH_BINARY)</span><br><span class="line"><span class="comment"># è‡ªé€‚åº”é˜ˆå€¼</span></span><br><span class="line">th2 = cv2.adaptiveThreshold(</span><br><span class="line">    img, <span class="number">255</span>, cv2.ADAPTIVE_THRESH_MEAN_C, cv2.THRESH_BINARY, <span class="number">11</span>, <span class="number">4</span>)</span><br><span class="line">th3 = cv2.adaptiveThreshold(</span><br><span class="line">    img, <span class="number">255</span>, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, <span class="number">17</span>, <span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">titles = [<span class="string">'Original'</span>, <span class="string">'Global(v = 127)'</span>, <span class="string">'Adaptive Mean'</span>, <span class="string">'Adaptive Gaussian'</span>]</span><br><span class="line">images = [img, th1, th2, th3]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">    plt.subplot(<span class="number">2</span>, <span class="number">2</span>, i + <span class="number">1</span>), plt.imshow(images[i], <span class="string">'gray'</span>)</span><br><span class="line">    plt.title(titles[i], fontsize=<span class="number">8</span>)</span><br><span class="line">    plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_adaptive_vs_global_thresholding.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_adaptive_vs_global_thresholding.jpg" alt="è‡ªé€‚åº”é˜ˆå€¼å¯¹æ¯”å›ºå®šé˜ˆå€¼"></picture></p><ul><li>å‚æ•°1ï¼šè¦å¤„ç†çš„åŸå›¾</li><li>å‚æ•°2ï¼šæœ€å¤§é˜ˆå€¼ï¼Œä¸€èˆ¬ä¸º255</li><li>å‚æ•°3ï¼šå°åŒºåŸŸé˜ˆå€¼çš„è®¡ç®—æ–¹å¼<ul><li><code>ADAPTIVE_THRESH_MEAN_C</code>ï¼šå°åŒºåŸŸå†…å–å‡å€¼</li><li><code>ADAPTIVE_THRESH_GAUSSIAN_C</code>ï¼šå°åŒºåŸŸå†…åŠ æƒæ±‚å’Œï¼Œæƒé‡æ˜¯ä¸ªé«˜æ–¯æ ¸</li></ul></li><li>å‚æ•°4ï¼šé˜ˆå€¼æ–¹å¼ï¼ˆè·Ÿå‰é¢è®²çš„é‚£5ç§ç›¸åŒï¼‰</li><li>å‚æ•°5ï¼šå°åŒºåŸŸçš„é¢ç§¯ï¼Œå¦‚11å°±æ˜¯11*11çš„å°å—</li><li>å‚æ•°6ï¼šæœ€ç»ˆé˜ˆå€¼ç­‰äºå°åŒºåŸŸè®¡ç®—å‡ºçš„é˜ˆå€¼å†å‡å»æ­¤å€¼</li></ul><p>å¦‚æœä½ æ²¡çœ‹æ‡‚ä¸Šé¢çš„å‚æ•°ä¹Ÿä¸è¦ç´§ï¼Œæš‚æ—¶ä¼šç”¨å°±è¡Œï¼Œå½“ç„¶æˆ‘å»ºè®®ä½ è°ƒæ•´ä¸‹å‚æ•°çœ‹çœ‹ä¸åŒçš„ç»“æœã€‚</p><h3 id="Otsué˜ˆå€¼"><a href="#Otsué˜ˆå€¼" class="headerlink" title="Otsué˜ˆå€¼"></a>Otsué˜ˆå€¼</h3><p>åœ¨å‰é¢å›ºå®šé˜ˆå€¼ä¸­ï¼Œæˆ‘ä»¬æ˜¯éšä¾¿é€‰äº†ä¸€ä¸ªé˜ˆå€¼å¦‚127ï¼Œé‚£å¦‚ä½•çŸ¥é“æˆ‘ä»¬é€‰çš„è¿™ä¸ªé˜ˆå€¼æ•ˆæœå¥½ä¸å¥½å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¸æ–­å°è¯•ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•åœ¨å¾ˆå¤šæ–‡çŒ®ä¸­éƒ½è¢«ç§°ä¸ºç»éªŒé˜ˆå€¼ã€‚<a href="https://baike.baidu.com/item/otsu/16252828" target="_blank" rel="noopener">Otsué˜ˆå€¼æ³•</a>å°±æä¾›äº†ä¸€ç§è‡ªåŠ¨é«˜æ•ˆçš„äºŒå€¼åŒ–æ–¹æ³•ï¼Œä¸è¿‡æˆ‘ä»¬ç›´æ–¹å›¾è¿˜æ²¡å­¦ï¼Œè¿™é‡Œæš‚æ—¶ç•¥è¿‡ã€‚</p><p>å¥½å§ï¼Œæˆ‘çŸ¥é“æˆ‘æ¿€èµ·äº†ä½ çš„å…´è¶£ï¼Œ~ o(<em>ï¿£â–½ï¿£</em>)oï¼Œæœ‰èƒ½åŠ›çš„ç«¥é‹å¯ä»¥çœ‹ä¸‹<a href="#ç»ƒä¹ ">ç»ƒä¹ é¢˜</a>ã€‚</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li><code>cv2.threshold()</code>ç”¨æ¥è¿›è¡Œå›ºå®šé˜ˆå€¼åˆ†å‰²ã€‚å›ºå®šé˜ˆå€¼ä¸é€‚ç”¨äºå…‰çº¿ä¸å‡åŒ€çš„å›¾ç‰‡ï¼Œæ‰€ä»¥ç”¨ <code>cv2.adaptiveThreshold()</code>è¿›è¡Œè‡ªé€‚åº”é˜ˆå€¼åˆ†å‰²ã€‚</li><li>äºŒå€¼åŒ–è·Ÿé˜ˆå€¼åˆ†å‰²å¹¶ä¸ç­‰åŒã€‚é’ˆå¯¹ä¸åŒçš„å›¾ç‰‡ï¼Œå¯ä»¥é‡‡ç”¨ä¸åŒçš„é˜ˆå€¼æ–¹æ³•ã€‚</li></ul><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><ol><li>Otsué˜ˆå€¼æ˜¯ä¸€ç§é«˜æ•ˆçš„äºŒå€¼åŒ–ç®—æ³•ï¼Œè¯·é˜…è¯»<a href="/opencv-python-extra-otsu-thresholding/">ç•ªå¤–ç¯‡ï¼šOtsué˜ˆå€¼æ³•</a></li></ol><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/d7/d1b/group__imgproc__misc.html#gae8a4a146d1ca78c626a53577199e9c57" target="_blank" rel="noopener">cv2.threshold()</a></li><li><a href="https://docs.opencv.org/4.0.0/d7/d1b/group__imgproc__misc.html#ga72b913f352e4a1b1b397736707afcde3" target="_blank" rel="noopener">cv2.adaptiveThreshold()</a></li><li><a href="https://docs.opencv.org/4.0.0/d7/d1b/group__imgproc__misc.html#gaa9e58d2860d4afa658ef70a9b1115576" target="_blank" rel="noopener">cv2.ThresholdTypes()</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/06.%20%E9%98%88%E5%80%BC%E5%88%86%E5%89%B2" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_thresholding/py_thresholding.html" target="_blank" rel="noopener">Image Thresholding</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ ä½¿ç”¨ä¸åŒçš„é˜ˆå€¼æ–¹æ³•â€äºŒå€¼åŒ–â€å›¾åƒã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="é˜ˆå€¼" scheme="http://www.codec.wang/tags/%E9%98%88%E5%80%BC/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹5ï¼šé¢œè‰²ç©ºé—´è½¬æ¢</title>
    <link href="http://www.codec.wang/opencv-python-changing-colorspaces/"/>
    <id>http://www.codec.wang/opencv-python-changing-colorspaces/</id>
    <published>2017-12-07T07:21:19.000Z</published>
    <updated>2020-04-07T04:43:13.915Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ å¦‚ä½•è¿›è¡Œå›¾ç‰‡çš„é¢œè‰²ç©ºé—´è½¬æ¢ï¼Œè§†é¢‘ä¸­è¿½è¸ªç‰¹å®šé¢œè‰²çš„ç‰©ä½“ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>é¢œè‰²ç©ºé—´è½¬æ¢ï¼Œå¦‚BGRâ†”Grayï¼ŒBGRâ†”HSVç­‰</li><li>è¿½è¸ªè§†é¢‘ä¸­ç‰¹å®šé¢œè‰²çš„ç‰©ä½“</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.cvtColor()</code>, <code>cv2.inRange()</code></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><h3 id="é¢œè‰²ç©ºé—´è½¬æ¢"><a href="#é¢œè‰²ç©ºé—´è½¬æ¢" class="headerlink" title="é¢œè‰²ç©ºé—´è½¬æ¢"></a>é¢œè‰²ç©ºé—´è½¬æ¢</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'lena.jpg'</span>)</span><br><span class="line"><span class="comment"># è½¬æ¢ä¸ºç°åº¦å›¾</span></span><br><span class="line">img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">'img'</span>, img)</span><br><span class="line">cv2.imshow(<span class="string">'gray'</span>, img_gray)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><code>cv2.cvtColor()</code>ç”¨æ¥è¿›è¡Œé¢œè‰²æ¨¡å‹è½¬æ¢ï¼Œå‚æ•°1æ˜¯è¦è½¬æ¢çš„å›¾ç‰‡ï¼Œå‚æ•°2æ˜¯è½¬æ¢æ¨¡å¼ï¼Œ <code>COLOR_BGR2GRAY</code>è¡¨ç¤ºBGRâ†’Grayï¼Œå¯ç”¨ä¸‹é¢çš„ä»£ç æ˜¾ç¤ºæ‰€æœ‰çš„è½¬æ¢æ¨¡å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flags = [i <span class="keyword">for</span> i <span class="keyword">in</span> dir(cv2) <span class="keyword">if</span> i.startswith(<span class="string">'COLOR_'</span>)]</span><br><span class="line">print(flags)</span><br></pre></td></tr></table></figure><blockquote><p>ç»éªŒä¹‹è°ˆï¼šé¢œè‰²è½¬æ¢å…¶å®æ˜¯æ•°å­¦è¿ç®—ï¼Œå¦‚ç°åº¦åŒ–æœ€å¸¸ç”¨çš„æ˜¯ï¼š<code>gray=R*0.299+G*0.587+B*0.114</code>ã€‚</p></blockquote><h3 id="è§†é¢‘ä¸­ç‰¹å®šé¢œè‰²ç‰©ä½“è¿½è¸ª"><a href="#è§†é¢‘ä¸­ç‰¹å®šé¢œè‰²ç‰©ä½“è¿½è¸ª" class="headerlink" title="è§†é¢‘ä¸­ç‰¹å®šé¢œè‰²ç‰©ä½“è¿½è¸ª"></a>è§†é¢‘ä¸­ç‰¹å®šé¢œè‰²ç‰©ä½“è¿½è¸ª</h3><p><a href="https://baike.baidu.com/item/HSV/547122" target="_blank" rel="noopener">HSV</a>æ˜¯ä¸€ä¸ªå¸¸ç”¨äºé¢œè‰²è¯†åˆ«çš„æ¨¡å‹ï¼Œç›¸æ¯”BGRæ›´æ˜“åŒºåˆ†é¢œè‰²ï¼Œè½¬æ¢æ¨¡å¼ç”¨<code>COLOR_BGR2HSV</code>è¡¨ç¤ºã€‚</p><blockquote><p>ç»éªŒä¹‹è°ˆï¼šOpenCVä¸­è‰²è°ƒHèŒƒå›´ä¸º[0,179]ï¼Œé¥±å’Œåº¦Sæ˜¯[0,255]ï¼Œæ˜åº¦Væ˜¯[0,255]ã€‚è™½ç„¶Hçš„ç†è®ºæ•°å€¼æ˜¯0Â°~360Â°ï¼Œä½†8ä½å›¾åƒåƒç´ ç‚¹çš„æœ€å¤§å€¼æ˜¯255ï¼Œæ‰€ä»¥OpenCVä¸­é™¤ä»¥äº†2ï¼ŒæŸäº›è½¯ä»¶å¯èƒ½ä½¿ç”¨ä¸åŒçš„å°ºåº¦è¡¨ç¤ºï¼Œæ‰€ä»¥åŒå…¶ä»–è½¯ä»¶æ··ç”¨æ—¶ï¼Œè®°å¾—å½’ä¸€åŒ–ã€‚</p></blockquote><p>ç°åœ¨ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªä½¿ç”¨HSVæ¥åªæ˜¾ç¤ºè§†é¢‘ä¸­è“è‰²ç‰©ä½“çš„ä¾‹å­ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>æ•è·è§†é¢‘ä¸­çš„ä¸€å¸§</li><li>ä»BGRè½¬æ¢åˆ°HSV</li><li>æå–è“è‰²èŒƒå›´çš„ç‰©ä½“</li><li>åªæ˜¾ç¤ºè“è‰²ç‰©ä½“</li></ol><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_blue_object_tracking.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_blue_object_tracking.jpg" alt="è·Ÿè¸ªè§†é¢‘ä¸­çš„è“è‰²ç‰©ä½“"></picture></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">capture = cv2.VideoCapture(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è“è‰²çš„èŒƒå›´ï¼Œä¸åŒå…‰ç…§æ¡ä»¶ä¸‹ä¸ä¸€æ ·ï¼Œå¯çµæ´»è°ƒæ•´</span></span><br><span class="line">lower_blue = np.array([<span class="number">100</span>, <span class="number">110</span>, <span class="number">110</span>])</span><br><span class="line">upper_blue = np.array([<span class="number">130</span>, <span class="number">255</span>, <span class="number">255</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">    <span class="comment"># 1.æ•è·è§†é¢‘ä¸­çš„ä¸€å¸§</span></span><br><span class="line">    ret, frame = capture.read()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2.ä»BGRè½¬æ¢åˆ°HSV</span></span><br><span class="line">    hsv = cv2.cvtColor(frame, cv2.COLOR_BGR2HSV)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3.inRange()ï¼šä»‹äºlower/upperä¹‹é—´çš„ä¸ºç™½è‰²ï¼Œå…¶ä½™é»‘è‰²</span></span><br><span class="line">    mask = cv2.inRange(hsv, lower_blue, upper_blue)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 4.åªä¿ç•™åŸå›¾ä¸­çš„è“è‰²éƒ¨åˆ†</span></span><br><span class="line">    res = cv2.bitwise_and(frame, frame, mask=mask)</span><br><span class="line"></span><br><span class="line">    cv2.imshow(<span class="string">'frame'</span>, frame)</span><br><span class="line">    cv2.imshow(<span class="string">'mask'</span>, mask)</span><br><span class="line">    cv2.imshow(<span class="string">'res'</span>, res)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) == ord(<span class="string">'q'</span>):</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>bitwise_and()</code>å‡½æ•°æš‚æ—¶ä¸ç”¨ç®¡ï¼Œåé¢ä¼šè®²åˆ°ã€‚é‚£è“è‰²çš„HSVå€¼çš„ä¸Šä¸‹é™lowerå’ŒupperèŒƒå›´æ˜¯æ€ä¹ˆå¾—åˆ°çš„å‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬å…ˆæŠŠæ ‡å‡†è“è‰²çš„BGRå€¼ç”¨<code>cvtColor()</code>è½¬æ¢ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">blue = np.uint8([[[<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>]]])</span><br><span class="line">hsv_blue = cv2.cvtColor(blue, cv2.COLOR_BGR2HSV)</span><br><span class="line">print(hsv_blue)  <span class="comment"># [[[120 255 255]]]</span></span><br></pre></td></tr></table></figure><p>ç»“æœæ˜¯[120, 255, 255]ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æŠŠè“è‰²çš„èŒƒå›´è°ƒæ•´æˆäº†ä¸Šé¢ä»£ç é‚£æ ·ã€‚</p><blockquote><p>ç»éªŒä¹‹è°ˆï¼š<a href="https://baike.baidu.com/item/Lab/1514615" target="_blank" rel="noopener">Lab</a>é¢œè‰²ç©ºé—´ä¹Ÿç»å¸¸ç”¨æ¥åšé¢œè‰²è¯†åˆ«ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥äº†è§£ä¸‹ã€‚</p></blockquote><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li><code>cv2.cvtColor()</code>å‡½æ•°ç”¨æ¥è¿›è¡Œé¢œè‰²ç©ºé—´è½¬æ¢ï¼Œå¸¸ç”¨BGRâ†”Grayï¼ŒBGRâ†”HSVã€‚</li><li>HSVé¢œè‰²æ¨¡å‹å¸¸ç”¨äºé¢œè‰²è¯†åˆ«ã€‚è¦æƒ³çŸ¥é“æŸç§é¢œè‰²åœ¨HSVä¸‹çš„å€¼ï¼Œå¯ä»¥å°†å®ƒçš„BGRå€¼ç”¨<code>cvtColor()</code>è½¬æ¢å¾—åˆ°ã€‚</li></ul><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><ol><li>å°è¯•åœ¨è§†é¢‘ä¸­åŒæ—¶æå–çº¢è‰²ã€è“è‰²ã€ç»¿è‰²çš„ç‰©ä½“ã€‚ï¼ˆæ•ˆæœå¦‚ä¸‹ï¼‰</li></ol><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_exercise_tracking_three_colors.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_exercise_tracking_three_colors.jpg" alt="åŒæ—¶è¿½è¸ª3ç§é¢œè‰²"></picture></p><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/d8/d01/group__imgproc__color__conversions.html#ga397ae87e1288a81d2363b61574eb8cab" target="_blank" rel="noopener">cv2.cvtColor()</a></li><li><a href="https://docs.opencv.org/4.0.0/d2/de8/group__core__array.html#ga48af0ab51e36436c5d04340e036ce981" target="_blank" rel="noopener">cv2.inRange()</a></li><li><a href="https://docs.opencv.org/4.0.0/d2/de8/group__core__array.html#ga60b4d04b251ba5eb1392c34425497e14" target="_blank" rel="noopener">cv2.bitwise_and()</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/05.%20%E9%A2%9C%E8%89%B2%E7%A9%BA%E9%97%B4%E8%BD%AC%E6%8D%A2" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_colorspaces/py_colorspaces.html" target="_blank" rel="noopener">Changing Colorspaces</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ å¦‚ä½•è¿›è¡Œå›¾ç‰‡çš„é¢œè‰²ç©ºé—´è½¬æ¢ï¼Œè§†é¢‘ä¸­è¿½è¸ªç‰¹å®šé¢œè‰²çš„ç‰©ä½“ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="HSV" scheme="http://www.codec.wang/tags/HSV/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹4ï¼šå›¾åƒåŸºæœ¬æ“ä½œ</title>
    <link href="http://www.codec.wang/opencv-python-basic-operations/"/>
    <id>http://www.codec.wang/opencv-python-basic-operations/</id>
    <published>2017-12-07T04:13:15.000Z</published>
    <updated>2020-04-07T04:42:36.501Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ è·å–å’Œä¿®æ”¹åƒç´ ç‚¹çš„å€¼ï¼ŒROIæ„Ÿå…´è¶£åŒºåŸŸï¼Œé€šé“åˆ†ç¦»åˆå¹¶ç­‰åŸºæœ¬æ“ä½œã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>è®¿é—®å’Œä¿®æ”¹å›¾ç‰‡åƒç´ ç‚¹çš„å€¼</li><li>è·å–å›¾ç‰‡çš„å®½ã€é«˜ã€é€šé“æ•°ç­‰å±æ€§</li><li>äº†è§£æ„Ÿå…´è¶£åŒºåŸŸROI</li><li>åˆ†ç¦»å’Œåˆå¹¶å›¾åƒé€šé“</li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><h3 id="è·å–å’Œä¿®æ”¹åƒç´ ç‚¹å€¼"><a href="#è·å–å’Œä¿®æ”¹åƒç´ ç‚¹å€¼" class="headerlink" title="è·å–å’Œä¿®æ”¹åƒç´ ç‚¹å€¼"></a>è·å–å’Œä¿®æ”¹åƒç´ ç‚¹å€¼</h3><p>æˆ‘ä»¬å…ˆè¯»å…¥ä¸€å¼ å›¾ç‰‡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'lena.jpg'</span>)</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¡Œåˆ—çš„åæ ‡æ¥è·å–æŸåƒç´ ç‚¹çš„å€¼ï¼Œå¯¹äºå½©è‰²å›¾ï¼Œç»“æœæ˜¯B,G,Rä¸‰ä¸ªå€¼çš„åˆ—è¡¨ï¼Œå¯¹äºç°åº¦å›¾æˆ–å•é€šé“å›¾ï¼Œåªæœ‰ä¸€ä¸ªå€¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">px = img[<span class="number">100</span>, <span class="number">90</span>]</span><br><span class="line">print(px)  <span class="comment"># [103 98 197]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åªè·å–è“è‰²blueé€šé“çš„å€¼</span></span><br><span class="line">px_blue = img[<span class="number">100</span>, <span class="number">90</span>, <span class="number">0</span>]</span><br><span class="line">print(px_blue)  <span class="comment"># 103</span></span><br></pre></td></tr></table></figure><p>è¿˜è®°å¾—å—ï¼Ÿè¡Œå¯¹åº”yï¼Œåˆ—å¯¹åº”xï¼Œæ‰€ä»¥å…¶å®æ˜¯<code>img[y, x]</code>ï¼Œéœ€è¦æ³¨æ„å™¢(â—Ë‡âˆ€Ë‡â—)ã€‚å®¹æ˜“æ··æ·†çš„è¯ï¼Œå¯ä»¥åªè®°è¡Œå’Œåˆ—ï¼Œè¡Œåœ¨å‰ï¼Œåˆ—åœ¨åã€‚</p><p>ä¿®æ”¹åƒç´ çš„å€¼ä¹Ÿæ˜¯åŒæ ·çš„æ–¹å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">img[<span class="number">100</span>, <span class="number">90</span>] = [<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>]</span><br><span class="line">print(img[<span class="number">100</span>, <span class="number">90</span>])  <span class="comment"># [255 255 255]</span></span><br></pre></td></tr></table></figure><blockquote><p>ç»éªŒä¹‹è°ˆï¼šè¿˜æœ‰ä¸€ç§æ€§èƒ½æ›´å¥½çš„æ–¹å¼ï¼Œè·å–ï¼š<code>img.item(100,100,0)</code>ï¼Œä¿®æ”¹ï¼š<code>img.itemset((100,100,0),255)</code>ï¼Œä½†è¿™ç§æ–¹å¼åªèƒ½B,G,Ré€ä¸€è¿›è¡Œã€‚</p></blockquote><p>æ³¨æ„ï¼šè¿™æ­¥æ“ä½œåªæ˜¯å†…å­˜ä¸­çš„imgåƒç´ ç‚¹å€¼å˜äº†ï¼Œå› ä¸ºæ²¡æœ‰ä¿å­˜ï¼Œæ‰€ä»¥åŸå›¾å¹¶æ²¡æœ‰æ›´æ”¹ã€‚</p><h3 id="å›¾ç‰‡å±æ€§"><a href="#å›¾ç‰‡å±æ€§" class="headerlink" title="å›¾ç‰‡å±æ€§"></a>å›¾ç‰‡å±æ€§</h3><p><code>img.shape</code>è·å–å›¾åƒçš„å½¢çŠ¶ï¼Œå›¾ç‰‡æ˜¯å½©è‰²çš„è¯ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«<strong>è¡Œæ•°ï¼ˆé«˜åº¦ï¼‰ã€åˆ—æ•°ï¼ˆå®½åº¦ï¼‰å’Œé€šé“æ•°</strong>çš„å…ƒç»„ï¼Œç°åº¦å›¾åªè¿”å›è¡Œæ•°å’Œåˆ—æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(img.shape)  <span class="comment"># (263, 247, 3)</span></span><br><span class="line"><span class="comment"># å½¢çŠ¶ä¸­åŒ…æ‹¬è¡Œæ•°ã€åˆ—æ•°å’Œé€šé“æ•°</span></span><br><span class="line">height, width, channels = img.shape</span><br><span class="line"><span class="comment"># imgæ˜¯ç°åº¦å›¾çš„è¯ï¼šheight, width = img.shape</span></span><br></pre></td></tr></table></figure><p><code>img.dtype</code>è·å–å›¾åƒæ•°æ®ç±»å‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(img.dtype)  <span class="comment"># uint8</span></span><br></pre></td></tr></table></figure><blockquote><p>ç»éªŒä¹‹è°ˆï¼šå¤šæ•°é”™è¯¯æ˜¯å› ä¸ºæ•°æ®ç±»å‹ä¸å¯¹å¯¼è‡´çš„ï¼Œæ‰€ä»¥å¥å£®çš„ä»£ç åº”è¯¥å¯¹è¿™ä¸ªå±æ€§åŠ ä»¥åˆ¤æ–­ã€‚</p></blockquote><p><code>img.size</code>è·å–å›¾åƒæ€»åƒç´ æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(img.size)  <span class="comment"># 263*247*3=194883</span></span><br></pre></td></tr></table></figure><h3 id="ROI"><a href="#ROI" class="headerlink" title="ROI"></a>ROI</h3><p><a href="https://baike.baidu.com/item/ROI/1125333#viewPageContent" target="_blank" rel="noopener">ROI</a>ï¼šRegion of Interestï¼Œæ„Ÿå…´è¶£åŒºåŸŸã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæ¯”å¦‚æˆ‘ä»¬è¦æ£€æµ‹çœ¼ç›ï¼Œå› ä¸ºçœ¼ç›è‚¯å®šåœ¨è„¸ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬æ„Ÿå…´è¶£çš„åªæœ‰è„¸è¿™éƒ¨åˆ†ï¼Œå…¶ä»–éƒ½ä¸careï¼Œæ‰€ä»¥å¯ä»¥å•ç‹¬æŠŠè„¸æˆªå–å‡ºæ¥ï¼Œè¿™æ ·å°±å¯ä»¥å¤§å¤§èŠ‚çœè®¡ç®—é‡ï¼Œæé«˜è¿è¡Œé€Ÿåº¦ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_lena_face_roi_crop.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_lena_face_roi_crop.jpg" alt="åªå…³å¿ƒè„¸( â•¯â–¡â•° )"></picture></p><p>æˆªå–ROIéå¸¸ç®€å•ï¼ŒæŒ‡å®šå›¾ç‰‡çš„èŒƒå›´å³å¯ï¼ˆåé¢æˆ‘ä»¬å­¦äº†ç‰¹å¾åï¼Œå°±å¯ä»¥è‡ªåŠ¨æˆªå–è¾£ï¼Œ(à¸‡ â€¢_â€¢)à¸‡ï¼‰ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æˆªå–è„¸éƒ¨ROI</span></span><br><span class="line">face = img[<span class="number">100</span>:<span class="number">200</span>, <span class="number">115</span>:<span class="number">188</span>]</span><br><span class="line">cv2.imshow(<span class="string">'face'</span>, face)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><h3 id="é€šé“åˆ†å‰²ä¸åˆå¹¶"><a href="#é€šé“åˆ†å‰²ä¸åˆå¹¶" class="headerlink" title="é€šé“åˆ†å‰²ä¸åˆå¹¶"></a>é€šé“åˆ†å‰²ä¸åˆå¹¶</h3><p>å½©è‰²å›¾çš„BGRä¸‰ä¸ªé€šé“æ˜¯å¯ä»¥åˆ†å¼€å•ç‹¬è®¿é—®çš„ï¼Œä¹Ÿå¯ä»¥å°†å•ç‹¬çš„ä¸‰ä¸ªé€šé“åˆå¹¶æˆä¸€å‰¯å›¾åƒã€‚åˆ†åˆ«ä½¿ç”¨<code>cv2.split()</code>å’Œ<code>cv2.merge()</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b, g, r = cv2.split(img)</span><br><span class="line">img = cv2.merge((b, g, r))</span><br></pre></td></tr></table></figure><p><code>split()</code>å‡½æ•°æ¯”è¾ƒè€—æ—¶ï¼Œ<strong>æ›´é«˜æ•ˆçš„æ–¹å¼æ˜¯ç”¨numpyä¸­çš„ç´¢å¼•</strong>ï¼Œå¦‚æå–Bé€šé“ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">b = img[:, :, <span class="number">0</span>]</span><br><span class="line">cv2.imshow(<span class="string">'blue'</span>, b)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li><code>img[y,x]</code>è·å–/è®¾ç½®åƒç´ ç‚¹å€¼ï¼Œ<code>img.shape</code>ï¼šå›¾ç‰‡çš„å½¢çŠ¶ï¼ˆè¡Œæ•°ã€åˆ—æ•°ã€é€šé“æ•°ï¼‰,<code>img.dtype</code>ï¼šå›¾åƒçš„æ•°æ®ç±»å‹ã€‚</li><li><code>img[y1:y2,x1:x2]</code>è¿›è¡ŒROIæˆªå–ï¼Œ<code>cv2.split()/cv2.merge()</code>é€šé“åˆ†å‰²/åˆå¹¶ã€‚æ›´æ¨èçš„è·å–å•é€šé“æ–¹å¼ï¼š<code>b = img[:, :, 0]</code>ã€‚</li></ul><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><ol><li>æ‰“å¼€lena.jpgï¼Œå°†å¸½å­éƒ¨åˆ†ï¼ˆé«˜ï¼š25<del>120ï¼Œå®½ï¼š50</del>220ï¼‰çš„çº¢è‰²é€šé“æˆªå–å‡ºæ¥å¹¶æ˜¾ç¤ºã€‚</li></ol><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/d2/de8/group__core__array.html#ga0547c7fed86152d7e9d0096029c8518a" target="_blank" rel="noopener">cv2.split()</a></li><li><a href="https://docs.opencv.org/4.0.0/d2/de8/group__core__array.html#ga7d7b4d6c6ee504b30a20b1680029c7b4" target="_blank" rel="noopener">cv2.merge()</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/04.%20%E5%9B%BE%E5%83%8F%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_core/py_basic_ops/py_basic_ops.html#basic-ops" target="_blank" rel="noopener">Basic Operations on Images</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ è·å–å’Œä¿®æ”¹åƒç´ ç‚¹çš„å€¼ï¼ŒROIæ„Ÿå…´è¶£åŒºåŸŸï¼Œé€šé“åˆ†ç¦»åˆå¹¶ç­‰åŸºæœ¬æ“ä½œã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="ROI" scheme="http://www.codec.wang/tags/ROI/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡3ï¼šæ»‘åŠ¨æ¡</title>
    <link href="http://www.codec.wang/opencv-python-extra-trackbar/"/>
    <id>http://www.codec.wang/opencv-python-extra-trackbar/</id>
    <published>2017-12-06T14:23:11.000Z</published>
    <updated>2020-04-07T04:54:38.499Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ ä½¿ç”¨æ»‘åŠ¨æ¡åŠ¨æ€è°ƒæ•´å‚æ•°ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="æ»‘åŠ¨æ¡çš„ä½¿ç”¨"><a href="#æ»‘åŠ¨æ¡çš„ä½¿ç”¨" class="headerlink" title="æ»‘åŠ¨æ¡çš„ä½¿ç”¨"></a>æ»‘åŠ¨æ¡çš„ä½¿ç”¨</h2><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ»‘åŠ¨æ¡ï¼Œå¦‚<code>cv2.createTrackbar(&#39;R&#39;,&#39;image&#39;,0,255,call_back)</code>ï¼Œå…¶ä¸­</p><ul><li>å‚æ•°1ï¼šæ»‘åŠ¨æ¡çš„åç§°</li><li>å‚æ•°2ï¼šæ‰€åœ¨çª—å£çš„åç§°</li><li>å‚æ•°3ï¼šå½“å‰çš„å€¼</li><li>å‚æ•°4ï¼šæœ€å¤§å€¼</li><li>å‚æ•°5ï¼šå›è°ƒå‡½æ•°åç§°ï¼Œå›è°ƒå‡½æ•°é»˜è®¤æœ‰ä¸€ä¸ªè¡¨ç¤ºå½“å‰å€¼çš„å‚æ•°</li></ul><p>åˆ›å»ºå¥½ä¹‹åï¼Œå¯ä»¥åœ¨å›è°ƒå‡½æ•°ä¸­è·å–æ»‘åŠ¨æ¡çš„å€¼ï¼Œä¹Ÿå¯ä»¥ç”¨ï¼š<code>cv2.getTrackbarPos()</code>å¾—åˆ°ï¼Œå…¶ä¸­ï¼Œå‚æ•°1æ˜¯æ»‘åŠ¨æ¡çš„åç§°ï¼Œå‚æ•°2æ˜¯çª—å£çš„åç§°ã€‚</p><h2 id="RGBè°ƒè‰²æ¿"><a href="#RGBè°ƒè‰²æ¿" class="headerlink" title="RGBè°ƒè‰²æ¿"></a>RGBè°ƒè‰²æ¿</h2><p>ä¸‹é¢æˆ‘ä»¬å®ç°ä¸€ä¸ªRGBçš„è°ƒè‰²æ¿ï¼Œç†è§£ä¸‹æ»‘åŠ¨æ¡çš„ç”¨æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># å›è°ƒå‡½æ•°ï¼Œxè¡¨ç¤ºæ»‘å—çš„ä½ç½®ï¼Œæœ¬ä¾‹æš‚ä¸ä½¿ç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nothing</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">img = np.zeros((<span class="number">300</span>, <span class="number">512</span>, <span class="number">3</span>), np.uint8)</span><br><span class="line">cv2.namedWindow(<span class="string">'image'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºRGBä¸‰ä¸ªæ»‘åŠ¨æ¡</span></span><br><span class="line">cv2.createTrackbar(<span class="string">'R'</span>, <span class="string">'image'</span>, <span class="number">0</span>, <span class="number">255</span>, nothing)</span><br><span class="line">cv2.createTrackbar(<span class="string">'G'</span>, <span class="string">'image'</span>, <span class="number">0</span>, <span class="number">255</span>, nothing)</span><br><span class="line">cv2.createTrackbar(<span class="string">'B'</span>, <span class="string">'image'</span>, <span class="number">0</span>, <span class="number">255</span>, nothing)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">    cv2.imshow(<span class="string">'image'</span>, img)</span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) == <span class="number">27</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–æ»‘å—çš„å€¼</span></span><br><span class="line">    r = cv2.getTrackbarPos(<span class="string">'R'</span>, <span class="string">'image'</span>)</span><br><span class="line">    g = cv2.getTrackbarPos(<span class="string">'G'</span>, <span class="string">'image'</span>)</span><br><span class="line">    b = cv2.getTrackbarPos(<span class="string">'B'</span>, <span class="string">'image'</span>)</span><br><span class="line">    <span class="comment"># è®¾å®šimgçš„é¢œè‰²</span></span><br><span class="line">    img[:] = [b, g, r]</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_track_bar_rgb.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_track_bar_rgb.jpg" alt=""></picture></p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li><code>cv2.createTrackbar()</code>ç”¨æ¥åˆ›å»ºæ»‘åŠ¨æ¡ï¼Œå¯ä»¥åœ¨å›è°ƒå‡½æ•°ä¸­æˆ–ä½¿ç”¨<code>cv2.getTrackbarPos()</code>å¾—åˆ°æ»‘å—çš„ä½ç½®</li></ul><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/d7/dfc/group__highgui.html#gaf78d2155d30b728fc413803745b67a9b" target="_blank" rel="noopener">cv2.createTrackbar()</a></li><li><a href="https://docs.opencv.org/4.0.0/d7/dfc/group__highgui.html#ga122632e9e91b9ec06943472c55d9cda8" target="_blank" rel="noopener">cv2.getTrackbarPos()</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/%E7%95%AA%E5%A4%96%E7%AF%8703.%20%E6%BB%91%E5%8A%A8%E6%9D%A1" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_gui/py_trackbar/py_trackbar.html" target="_blank" rel="noopener">Trackbar as the Color Palette</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ ä½¿ç”¨æ»‘åŠ¨æ¡åŠ¨æ€è°ƒæ•´å‚æ•°ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="æ»‘åŠ¨æ¡" scheme="http://www.codec.wang/tags/%E6%BB%91%E5%8A%A8%E6%9D%A1/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹3ï¼šæ‰“å¼€æ‘„åƒå¤´</title>
    <link href="http://www.codec.wang/opencv-python-open-camera/"/>
    <id>http://www.codec.wang/opencv-python-open-camera/</id>
    <published>2017-12-06T08:38:02.000Z</published>
    <updated>2019-05-02T15:09:34.866Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ æ‰“å¼€æ‘„åƒå¤´æ•è·ç…§ç‰‡ã€æ’­æ”¾æœ¬åœ°è§†é¢‘ã€å½•åˆ¶è§†é¢‘ç­‰ã€‚<a id="more"></a>å›¾ç‰‡/è§†é¢‘ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>æ‰“å¼€æ‘„åƒå¤´å¹¶æ•è·ç…§ç‰‡</li><li>æ’­æ”¾æœ¬åœ°è§†é¢‘ï¼Œå½•åˆ¶è§†é¢‘</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.VideoCapture()</code>, <code>cv2.VideoWriter()</code></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><h3 id="æ‰“å¼€æ‘„åƒå¤´"><a href="#æ‰“å¼€æ‘„åƒå¤´" class="headerlink" title="æ‰“å¼€æ‘„åƒå¤´"></a>æ‰“å¼€æ‘„åƒå¤´</h3><p>è¦ä½¿ç”¨æ‘„åƒå¤´ï¼Œéœ€è¦ä½¿ç”¨<code>cv2.VideoCapture(0)</code>åˆ›å»ºVideoCaptureå¯¹è±¡ï¼Œå‚æ•°0æŒ‡çš„æ˜¯æ‘„åƒå¤´çš„ç¼–å·ï¼Œå¦‚æœä½ ç”µè„‘ä¸Šæœ‰ä¸¤ä¸ªæ‘„åƒå¤´çš„è¯ï¼Œè®¿é—®ç¬¬2ä¸ªæ‘„åƒå¤´å°±å¯ä»¥ä¼ å…¥1ï¼Œä¾æ­¤ç±»æ¨ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰“å¼€æ‘„åƒå¤´å¹¶ç°åº¦åŒ–æ˜¾ç¤º</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">capture = cv2.VideoCapture(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">    <span class="comment"># è·å–ä¸€å¸§</span></span><br><span class="line">    ret, frame = capture.read()</span><br><span class="line">    <span class="comment"># å°†è¿™å¸§è½¬æ¢ä¸ºç°åº¦å›¾</span></span><br><span class="line">    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line">    cv2.imshow(<span class="string">'frame'</span>, gray)</span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) == ord(<span class="string">'q'</span>):</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><p><code>capture.read()</code>å‡½æ•°è¿”å›çš„ç¬¬1ä¸ªå‚æ•°ret(return valueç¼©å†™)æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰è¿™ä¸€å¸§æ˜¯å¦è·å–æ­£ç¡®ã€‚<code>cv2.cvtColor()</code>ç”¨æ¥è½¬æ¢é¢œè‰²ï¼Œè¿™é‡Œå°†å½©è‰²å›¾è½¬æˆç°åº¦å›¾ã€‚</p><p>å¦å¤–ï¼Œé€šè¿‡<code>cap.get(propId)</code>å¯ä»¥è·å–æ‘„åƒå¤´çš„ä¸€äº›å±æ€§ï¼Œæ¯”å¦‚æ•è·çš„åˆ†è¾¨ç‡ï¼Œäº®åº¦å’Œå¯¹æ¯”åº¦ç­‰ã€‚propIdæ˜¯ä»0~18çš„æ•°å­—ï¼Œä»£è¡¨ä¸åŒçš„å±æ€§ï¼Œå®Œæ•´çš„å±æ€§åˆ—è¡¨å¯ä»¥å‚è€ƒï¼š<a href="https://docs.opencv.org/4.0.0/d4/d15/group__videoio__flags__base.html#gaeb8dd9c89c10a5c63c139bf7c4f5704d" target="_blank" rel="noopener">VideoCaptureProperties</a>ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨<code>cap.set(propId,value)</code>æ¥ä¿®æ”¹å±æ€§å€¼ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬åœ¨whileä¹‹å‰æ·»åŠ ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–æ•è·çš„åˆ†è¾¨ç‡</span></span><br><span class="line"><span class="comment"># propIdå¯ä»¥ç›´æ¥å†™æ•°å­—ï¼Œä¹Ÿå¯ä»¥ç”¨OpenCVçš„ç¬¦å·è¡¨ç¤º</span></span><br><span class="line">width, height = capture.get(<span class="number">3</span>), capture.get(<span class="number">4</span>)</span><br><span class="line">print(width, height)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥åŸåˆ†è¾¨ç‡çš„ä¸€å€æ¥æ•è·</span></span><br><span class="line">capture.set(cv2.CAP_PROP_FRAME_WIDTH, width * <span class="number">2</span>)</span><br><span class="line">capture.set(cv2.CAP_PROP_FRAME_HEIGHT, height * <span class="number">2</span>)</span><br></pre></td></tr></table></figure><blockquote><p>ç»éªŒä¹‹è°ˆï¼šæŸäº›æ‘„åƒå¤´è®¾å®šåˆ†è¾¨ç‡ç­‰å‚æ•°æ—¶ä¼šæ— æ•ˆï¼Œå› ä¸ºå®ƒæœ‰å›ºå®šçš„åˆ†è¾¨ç‡å¤§å°æ”¯æŒï¼Œä¸€èˆ¬å¯åœ¨æ‘„åƒå¤´çš„èµ„æ–™é¡µä¸­æ‰¾åˆ°ã€‚</p></blockquote><h3 id="æ’­æ”¾æœ¬åœ°è§†é¢‘"><a href="#æ’­æ”¾æœ¬åœ°è§†é¢‘" class="headerlink" title="æ’­æ”¾æœ¬åœ°è§†é¢‘"></a>æ’­æ”¾æœ¬åœ°è§†é¢‘</h3><p>è·Ÿæ‰“å¼€æ‘„åƒå¤´ä¸€æ ·ï¼Œå¦‚æœæŠŠæ‘„åƒå¤´çš„ç¼–å·æ¢æˆè§†é¢‘çš„è·¯å¾„å°±å¯ä»¥æ’­æ”¾æœ¬åœ°è§†é¢‘äº†ã€‚å›æƒ³ä¸€ä¸‹<code>cv2.waitKey()</code>ï¼Œå®ƒçš„å‚æ•°è¡¨ç¤ºæš‚åœæ—¶é—´ï¼Œæ‰€ä»¥è¿™ä¸ªå€¼è¶Šå¤§ï¼Œè§†é¢‘æ’­æ”¾é€Ÿåº¦è¶Šæ…¢ï¼Œåä¹‹ï¼Œæ’­æ”¾é€Ÿåº¦è¶Šå¿«ï¼Œé€šå¸¸è®¾ç½®ä¸º25æˆ–30ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ’­æ”¾æœ¬åœ°è§†é¢‘</span></span><br><span class="line">capture = cv2.VideoCapture(<span class="string">'demo_video.mp4'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(capture.isOpened()):</span><br><span class="line">    ret, frame = capture.read()</span><br><span class="line">    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line">    cv2.imshow(<span class="string">'frame'</span>, gray)</span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">30</span>) == ord(<span class="string">'q'</span>):</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><h3 id="å½•åˆ¶è§†é¢‘"><a href="#å½•åˆ¶è§†é¢‘" class="headerlink" title="å½•åˆ¶è§†é¢‘"></a>å½•åˆ¶è§†é¢‘</h3><p>ä¹‹å‰æˆ‘ä»¬ä¿å­˜å›¾ç‰‡ç”¨çš„æ˜¯<code>cv2.imwrite()</code>ï¼Œè¦ä¿å­˜è§†é¢‘ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª<code>VideoWriter</code>çš„å¯¹è±¡ï¼Œéœ€è¦ç»™å®ƒä¼ å…¥å››ä¸ªå‚æ•°ï¼š</p><ul><li>è¾“å‡ºçš„æ–‡ä»¶åï¼Œå¦‚â€™output.aviâ€™</li><li>ç¼–ç æ–¹å¼<a href="https://baike.baidu.com/item/fourcc/6168470?fr=aladdin" target="_blank" rel="noopener">FourCC</a>ç </li><li>å¸§ç‡<a href="https://baike.baidu.com/item/FPS/3227416" target="_blank" rel="noopener">FPS</a></li><li>è¦ä¿å­˜çš„åˆ†è¾¨ç‡å¤§å°</li></ul><p>FourCCæ˜¯ç”¨æ¥æŒ‡å®šè§†é¢‘ç¼–ç æ–¹å¼çš„å››å­—èŠ‚ç ï¼Œæ‰€æœ‰çš„ç¼–ç å¯å‚è€ƒ<a href="http://www.fourcc.org/codecs.php" target="_blank" rel="noopener">Video Codecs</a>ã€‚å¦‚MJPGç¼–ç å¯ä»¥è¿™æ ·å†™ï¼š <code>cv2.VideoWriter_fourcc(*&#39;MJPG&#39;)</code>æˆ–<code>cv2.VideoWriter_fourcc(&#39;M&#39;,&#39;J&#39;,&#39;P&#39;,&#39;G&#39;)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">capture = cv2.VideoCapture(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ç¼–ç æ–¹å¼å¹¶åˆ›å»ºVideoWriterå¯¹è±¡</span></span><br><span class="line">fourcc = cv2.VideoWriter_fourcc(*<span class="string">'MJPG'</span>)</span><br><span class="line">outfile = cv2.VideoWriter(<span class="string">'output.avi'</span>, fourcc, <span class="number">25.</span>, (<span class="number">640</span>, <span class="number">480</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(capture.isOpened()):</span><br><span class="line">    ret, frame = capture.read()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ret:</span><br><span class="line">        outfile.write(frame)  <span class="comment"># å†™å…¥æ–‡ä»¶</span></span><br><span class="line">        cv2.imshow(<span class="string">'frame'</span>, frame)</span><br><span class="line">        <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) == ord(<span class="string">'q'</span>):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li>ä½¿ç”¨<code>cv2.VideoCapture()</code>åˆ›å»ºè§†é¢‘å¯¹è±¡ï¼Œç„¶ååœ¨å¾ªç¯ä¸­ä¸€å¸§å¸§æ˜¾ç¤ºå›¾åƒã€‚å‚æ•°ä¼ å…¥æ•°å­—æ—¶ï¼Œä»£è¡¨æ‰“å¼€æ‘„åƒå¤´ï¼Œä¼ å…¥æœ¬åœ°è§†é¢‘è·¯å¾„æ—¶ï¼Œè¡¨ç¤ºæ’­æ”¾æœ¬åœ°è§†é¢‘ã€‚</li><li><code>cap.get(propId)</code>è·å–è§†é¢‘å±æ€§ï¼Œ<code>cap.set(propId,value)</code>è®¾ç½®è§†é¢‘å±æ€§ã€‚</li><li><code>cv2.VideoWriter()</code>åˆ›å»ºè§†é¢‘å†™å…¥å¯¹è±¡ï¼Œç”¨æ¥å½•åˆ¶/ä¿å­˜è§†é¢‘ã€‚</li></ul><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><ol><li>è¯·å…ˆé˜…è¯»<a href="/opencv-python-extra-trackbar/">ç•ªå¤–ç¯‡ï¼šæ»‘åŠ¨æ¡</a>ï¼Œç„¶åå®ç°ä¸€ä¸ªå¯ä»¥æ‹–åŠ¨æ»‘å—æ’­æ”¾è§†é¢‘çš„åŠŸèƒ½ã€‚ï¼ˆæç¤ºï¼šéœ€è¦ç”¨åˆ° <code>cv2.CAP_PROP_FRAME_COUNT</code>å’Œ<code>cv2.CAP_PROP_POS_FRAMES</code>ä¸¤ä¸ªå±æ€§ï¼‰ã€‚</li></ol><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/d8/dfe/classcv_1_1VideoCapture.html" target="_blank" rel="noopener">VideoCapture Object</a></li><li><a href="https://docs.opencv.org/4.0.0/dd/d9e/classcv_1_1VideoWriter.html" target="_blank" rel="noopener">VideoWriter Object</a></li><li><a href="https://docs.opencv.org/4.0.0/d8/d01/group__imgproc__color__conversions.html#ga397ae87e1288a81d2363b61574eb8cab" target="_blank" rel="noopener">cv2.cvtColor()</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/03.%20%E6%89%93%E5%BC%80%E6%91%84%E5%83%8F%E5%A4%B4" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://www.fourcc.org/codecs.php" target="_blank" rel="noopener">Video Codecs by FOURCC</a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_gui/py_video_display/py_video_display.html" target="_blank" rel="noopener">Getting Started with Videos</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ æ‰“å¼€æ‘„åƒå¤´æ•è·ç…§ç‰‡ã€æ’­æ”¾æœ¬åœ°è§†é¢‘ã€å½•åˆ¶è§†é¢‘ç­‰ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡2ï¼šæ— æŸä¿å­˜å’ŒMatplotlibä½¿ç”¨</title>
    <link href="http://www.codec.wang/opencv-python-extra-high-quality-save-and-using-matplotlib/"/>
    <id>http://www.codec.wang/opencv-python-extra-high-quality-save-and-using-matplotlib/</id>
    <published>2017-12-06T07:55:15.000Z</published>
    <updated>2020-04-07T04:55:18.324Z</updated>
    
    <content type="html"><![CDATA[<p>äº†è§£å¸¸ç”¨å›¾ç‰‡æ ¼å¼å’ŒOpenCVé«˜è´¨é‡ä¿å­˜å›¾ç‰‡çš„æ–¹å¼ï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨Matplotlibæ˜¾ç¤ºOpenCVå›¾åƒã€‚<a id="more"></a></p><hr><h2 id="æ— æŸä¿å­˜"><a href="#æ— æŸä¿å­˜" class="headerlink" title="æ— æŸä¿å­˜"></a>æ— æŸä¿å­˜</h2><p>äº‹å®ä¸Šï¼Œæˆ‘ä»¬æ—¥å¸¸çœ‹åˆ°çš„å¤§éƒ¨åˆ†å›¾ç‰‡éƒ½æ˜¯å‹ç¼©è¿‡çš„ï¼Œé‚£ä¹ˆéƒ½æœ‰å“ªäº›å¸¸è§çš„å›¾ç‰‡æ ¼å¼å‘¢ï¼Ÿ</p><h3 id="å¸¸ç”¨å›¾ç‰‡æ ¼å¼"><a href="#å¸¸ç”¨å›¾ç‰‡æ ¼å¼" class="headerlink" title="å¸¸ç”¨å›¾ç‰‡æ ¼å¼"></a>å¸¸ç”¨å›¾ç‰‡æ ¼å¼</h3><ul><li><p><a href="https://baike.baidu.com/item/BMP/35116" target="_blank" rel="noopener">bmp</a></p><ul><li>å…¨ç§°ï¼šBitmap</li><li><strong>ä¸å‹ç¼©</strong></li></ul></li><li><p><a href="https://baike.baidu.com/item/JPEG" target="_blank" rel="noopener">jpg</a></p><ul><li>å…¨ç§°ï¼šJoint Photographic Experts Group</li><li><strong>æœ‰æŸå‹ç¼©æ–¹å¼</strong></li></ul></li><li><p><a href="https://baike.baidu.com/item/PNG" target="_blank" rel="noopener">png</a></p><ul><li>å…¨ç§°ï¼šPortable Network Graphics</li><li><strong>æ— æŸå‹ç¼©æ–¹å¼</strong></li></ul></li></ul><p>ç®€å•æ¥è¯´ï¼ŒåŒä¸€ä¸ªæ–‡ä»¶ä¿å­˜æˆä¸åŒçš„æ ¼å¼åï¼Œæ–‡ä»¶å¤§å°ä¸Šbmpè‚¯å®šæ˜¯æœ€å¤§çš„ï¼Œè€Œpngå’Œjpgï¼Œä¸åŒçš„å‹ç¼©æ¯”ç»“æœä¼šæœ‰æ‰€ä¸åŒã€‚å¯ä»¥ç”¨ç”»å›¾å·¥å…·æ–°å»ºä¸€å‰¯100Ã—100çš„å›¾åƒï¼Œåˆ†åˆ«ä¿å­˜æˆè¿™ä¸‰ç§æ ¼å¼æ¥éªŒè¯ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_high_save_mspaint_format.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_high_save_mspaint_format.jpg" alt=""></picture></p><h3 id="é«˜è´¨é‡ä¿å­˜"><a href="#é«˜è´¨é‡ä¿å­˜" class="headerlink" title="é«˜è´¨é‡ä¿å­˜"></a>é«˜è´¨é‡ä¿å­˜</h3><p>ç”¨cv2.imwrite()ä¿å­˜å›¾ç‰‡æ—¶ï¼Œå¯ä»¥ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆè¯·å‚è€ƒ<a href="#æ¥å£æ–‡æ¡£">æ¥å£æ–‡æ¡£</a>ï¼‰ï¼Œç”¨äºæ§åˆ¶ä¿å­˜è´¨é‡ï¼š</p><ul><li><code>cv2.IMWRITE_JPEG_QUALITY</code>ï¼šjpgè´¨é‡æ§åˆ¶ï¼Œå–å€¼0~100ï¼Œå€¼è¶Šå¤§ï¼Œè´¨é‡è¶Šå¥½ï¼Œé»˜è®¤ä¸º95</li><li><code>cv2.IMWRITE_PNG_COMPRESSION</code>ï¼špngè´¨é‡æ§åˆ¶ï¼Œå–å€¼0~9ï¼Œå€¼è¶Šå¤§ï¼Œå‹ç¼©æ¯”è¶Šé«˜ï¼Œé»˜è®¤ä¸º1</li></ul><p>è¿˜æœ‰è¯¸å¦‚<code>CV_IMWRITE_WEBP_QUALITY</code>çš„å‚é‡ï¼Œä¸å¸¸ç”¨ï¼Œè¯·å‚è€ƒï¼š<a href="https://docs.opencv.org/4.0.0/d4/da8/group__imgcodecs.html#ga292d81be8d76901bff7988d18d2b42ac" target="_blank" rel="noopener">ImwriteFlags</a>ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼ŒåŸå›¾lena.jpgçš„åˆ†è¾¨ç‡æ˜¯350Ã—350ï¼Œå¤§å°49.7KBã€‚æˆ‘ä»¬æŠŠå®ƒè½¬æˆä¸åŒæ ¼å¼çœ‹ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">new_img = cv2.imread(<span class="string">'lena.jpg'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># bmp</span></span><br><span class="line">cv2.imwrite(<span class="string">'img_bmp.bmp'</span>,new_img) <span class="comment"># æ–‡ä»¶å¤§å°ï¼š359KB</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># jpg é»˜è®¤95%è´¨é‡</span></span><br><span class="line">cv2.imwrite(<span class="string">'img_jpg95.jpg'</span>,new_img) <span class="comment"># æ–‡ä»¶å¤§å°ï¼š52.3KB</span></span><br><span class="line"><span class="comment"># jpg 20%è´¨é‡</span></span><br><span class="line">cv2.imwrite(<span class="string">'img_jpg20.jpg'</span>,new_img,[int(cv2.IMWRITE_JPEG_QUALITY),<span class="number">20</span>]) <span class="comment"># æ–‡ä»¶å¤§å°ï¼š8.01KB</span></span><br><span class="line"><span class="comment"># jpg 100%è´¨é‡</span></span><br><span class="line">cv2.imwrite(<span class="string">'img_jpg100.jpg'</span>,new_img,[int(cv2.IMWRITE_JPEG_QUALITY),<span class="number">100</span>]) <span class="comment"># æ–‡ä»¶å¤§å°ï¼š82.5KB</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># png é»˜è®¤1å‹ç¼©æ¯”</span></span><br><span class="line">cv2.imwrite(<span class="string">'img_png1.png'</span>,new_img) <span class="comment"># æ–‡ä»¶å¤§å°ï¼š240KB</span></span><br><span class="line"><span class="comment"># png 9å‹ç¼©æ¯”</span></span><br><span class="line">cv2.imwrite(<span class="string">'img_png9.png'</span>,new_img,[int(cv2.IMWRITE_PNG_COMPRESSION),<span class="number">9</span>]) <span class="comment"># æ–‡ä»¶å¤§å°ï¼š207KB</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼š</p><ul><li>bmpæ–‡ä»¶æ˜¯æœ€å¤§çš„ï¼Œæ²¡æœ‰ä»»ä½•å‹ç¼©ï¼ˆ1ä¸ªåƒç´ ç‚¹1byteï¼Œ3é€šé“çš„å½©è‰²å›¾æ€»å¤§å°ï¼š350Ã—350Ã—3/1024 â‰ˆ 359 KBï¼‰</li><li>jpg/pngæœ¬èº«å°±æœ‰å‹ç¼©çš„ï¼Œæ‰€ä»¥å°±ç®—æ˜¯100%çš„è´¨é‡ä¿å­˜ï¼Œä½“ç§¯ä¹Ÿæ¯”bmpå°å¾ˆå¤š</li><li>jpgçš„å®¹é‡ä¼˜åŠ¿å¾ˆæ˜æ˜¾ï¼Œè¿™ä¹Ÿæ˜¯å®ƒä¸ºä»€ä¹ˆå¦‚æ­¤æµè¡Œçš„åŸå› </li></ul><blockquote><p>æ€è€ƒï¼šä¸ºä»€ä¹ˆåŸå›¾49.7KBï¼Œä¿å­˜æˆbmpæˆ–å…¶ä»–æ ¼å¼åè€Œå¤§äº†å‘¢ï¼Ÿ</p></blockquote><p>è¿™æ˜¯ä¸ªå¾ˆæœ‰è¶£çš„é—®é¢˜ï¼Œå¾ˆå¤šç«¥é‹éƒ½é—®è¿‡æˆ‘ã€‚è¿™é‡Œéœ€è¦æ˜ç¡®çš„æ˜¯ä¿å­˜æ–°æ ¼å¼æ—¶ï¼Œ<strong>å®¹é‡å¤§å°è·ŸåŸå›¾çš„å®¹é‡æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œè€Œæ˜¯å–å†³äºåŸå›¾çš„åˆ†è¾¨ç‡å¤§å°å’ŒåŸå›¾æœ¬èº«çš„å†…å®¹ï¼ˆå‹ç¼©æ–¹å¼ï¼‰</strong>ï¼Œæ‰€ä»¥lena.jpgä¿å­˜æˆä¸å‹ç¼©çš„bmpæ ¼å¼æ—¶ï¼Œå®¹é‡å¤§å°å°±æ˜¯å›ºå®šçš„350Ã—350Ã—3/1024 â‰ˆ 359 KBï¼›å¦å¤–ï¼Œå®¹é‡å˜å¤§ä¸ä»£è¡¨ç”»è´¨æå‡å™¢ï¼Œä¸ç„¶å°±é€†å¤©äº†<del>~</del></p><h2 id="Matplotlib"><a href="#Matplotlib" class="headerlink" title="Matplotlib"></a>Matplotlib</h2><p>Matplotlibæ˜¯Pythonçš„ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„ç»˜å›¾åº“ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å»<a href="www.matplotlib.org/">å®˜ç½‘</a>å­¦ä¹ æ›´å¤šå†…å®¹ã€‚</p><h3 id="æ˜¾ç¤ºç°åº¦å›¾"><a href="#æ˜¾ç¤ºç°åº¦å›¾" class="headerlink" title="æ˜¾ç¤ºç°åº¦å›¾"></a>æ˜¾ç¤ºç°åº¦å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'lena.jpg'</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åº¦å›¾æ˜¾ç¤ºï¼Œcmap(color map)è®¾ç½®ä¸ºgray</span></span><br><span class="line">plt.imshow(img, cmap=<span class="string">'gray'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_matplotlib_show_gray_image.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_matplotlib_show_gray_image.jpg" alt=""></picture></p><h3 id="æ˜¾ç¤ºå½©è‰²å›¾"><a href="#æ˜¾ç¤ºå½©è‰²å›¾" class="headerlink" title="æ˜¾ç¤ºå½©è‰²å›¾"></a>æ˜¾ç¤ºå½©è‰²å›¾</h3><p><strong>OpenCVä¸­çš„å›¾åƒæ˜¯ä»¥BGRçš„é€šé“é¡ºåºå­˜å‚¨çš„</strong>ï¼Œä½†Matplotlibæ˜¯ä»¥RGBæ¨¡å¼æ˜¾ç¤ºçš„ï¼Œæ‰€ä»¥ç›´æ¥åœ¨Matplotlibä¸­æ˜¾ç¤ºOpenCVå›¾åƒä¼šå‡ºç°é—®é¢˜ï¼Œå› æ­¤éœ€è¦è½¬æ¢ä¸€ä¸‹:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'lena.jpg'</span>)</span><br><span class="line">img2 = img[:, :, ::<span class="number">-1</span>]</span><br><span class="line"><span class="comment"># æˆ–ä½¿ç”¨</span></span><br><span class="line"><span class="comment"># img2 = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºä¸æ­£ç¡®çš„å›¾</span></span><br><span class="line">plt.subplot(<span class="number">121</span>),plt.imshow(img) </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæ­£ç¡®çš„å›¾</span></span><br><span class="line">plt.subplot(<span class="number">122</span>)</span><br><span class="line">plt.xticks([]), plt.yticks([]) <span class="comment"># éšè—xå’Œyè½´</span></span><br><span class="line">plt.imshow(img2)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><blockquote><p><code>img[:,:,0]</code>è¡¨ç¤ºå›¾ç‰‡çš„è“è‰²é€šé“ï¼Œ<code>img[:,:,::-1]</code>å°±è¡¨ç¤ºBGRç¿»è½¬ï¼Œå˜æˆRGBï¼Œè¯´æ˜ä¸€ä¸‹ï¼š</p></blockquote><p>ç†Ÿæ‚‰Pythonçš„ç«¥é‹åº”è¯¥çŸ¥é“ï¼Œå¯¹ä¸€ä¸ªå­—ç¬¦ä¸²sç¿»è½¬å¯ä»¥è¿™æ ·å†™ï¼š<code>s[::-1]</code>ï¼Œâ€™abcâ€™å˜æˆâ€™cbaâ€™ï¼Œ-1è¡¨ç¤ºé€†åºã€‚å›¾ç‰‡æ˜¯äºŒç»´çš„ï¼Œæ‰€ä»¥å®Œæ•´åœ°å¤åˆ¶ä¸€å‰¯å›¾åƒå°±æ˜¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img2 = img[:,:] <span class="comment"># å†™å…¨å°±æ˜¯ï¼šimg2 = img[0:height,0:width]</span></span><br></pre></td></tr></table></figure><p>è€Œå›¾ç‰‡æ˜¯æœ‰ä¸‰ä¸ªé€šé“ï¼Œç›¸å½“äºä¸€ä¸ªé•¿åº¦ä¸º3çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥é€šé“ç¿»è½¬ä¸å›¾ç‰‡å¤åˆ¶ç»„åˆèµ·æ¥ä¾¿æ˜¯<code>img[:,:,::-1]</code>ã€‚</p><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_matplotlib_show_color_image.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_matplotlib_show_color_image.jpg" alt=""></picture></p><h3 id="åŠ è½½å’Œä¿å­˜å›¾ç‰‡"><a href="#åŠ è½½å’Œä¿å­˜å›¾ç‰‡" class="headerlink" title="åŠ è½½å’Œä¿å­˜å›¾ç‰‡"></a>åŠ è½½å’Œä¿å­˜å›¾ç‰‡</h3><p>ä¸ä½¿ç”¨OpenCVï¼ŒMatplotlibä¹Ÿå¯ä»¥åŠ è½½å’Œä¿å­˜å›¾ç‰‡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.image <span class="keyword">as</span> pli</span><br><span class="line"></span><br><span class="line">img = pli.imread(<span class="string">'lena.jpg'</span>)</span><br><span class="line">plt.imshow(img)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜å›¾ç‰‡ï¼Œéœ€æ”¾åœ¨show()å‡½æ•°ä¹‹å‰</span></span><br><span class="line">plt.savefig(<span class="string">'lena2.jpg'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/d4/da8/group__imgcodecs.html#gabbc7ef1aa2edfaa87772f1202d67e0ce" target="_blank" rel="noopener">cv2.imwrite()</a></li><li><a href="https://docs.opencv.org/4.0.0/d4/da8/group__imgcodecs.html#ga292d81be8d76901bff7988d18d2b42ac" target="_blank" rel="noopener">ImwriteFlags</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/%E7%95%AA%E5%A4%96%E7%AF%8702.%20%E6%97%A0%E6%8D%9F%E4%BF%9D%E5%AD%98%E5%92%8CMatplotlib%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="https://segmentfault.com/a/1190000013589397" target="_blank" rel="noopener">èŠä¸€èŠå‡ ç§å¸¸ç”¨webå›¾ç‰‡æ ¼å¼</a></li><li><a href="www.matplotlib.org/">Matplotlibå®˜ç½‘</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;äº†è§£å¸¸ç”¨å›¾ç‰‡æ ¼å¼å’ŒOpenCVé«˜è´¨é‡ä¿å­˜å›¾ç‰‡çš„æ–¹å¼ï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨Matplotlibæ˜¾ç¤ºOpenCVå›¾åƒã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="Matplotlib" scheme="http://www.codec.wang/tags/Matplotlib/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹2ï¼šåŸºæœ¬å…ƒç´ -å›¾ç‰‡</title>
    <link href="http://www.codec.wang/opencv-python-basic-element-image/"/>
    <id>http://www.codec.wang/opencv-python-basic-element-image/</id>
    <published>2017-12-06T07:52:06.000Z</published>
    <updated>2020-04-07T04:41:46.757Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ å¦‚ä½•åŠ è½½å›¾ç‰‡ï¼Œæ˜¾ç¤ºå¹¶ä¿å­˜å›¾ç‰‡ã€‚<a id="more"></a>å›¾ç‰‡ç­‰å¯åˆ°<a href="#å¼•ç”¨">æºç å¤„</a>ä¸‹è½½ã€‚</p><hr><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul><li>åŠ è½½å›¾ç‰‡ï¼Œæ˜¾ç¤ºå›¾ç‰‡ï¼Œä¿å­˜å›¾ç‰‡</li><li>OpenCVå‡½æ•°ï¼š<code>cv2.imread()</code>, <code>cv2.imshow()</code>, <code>cv2.imwrite()</code></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><p>å¤§éƒ¨åˆ†äººå¯èƒ½éƒ½çŸ¥é“ç”µè„‘ä¸Šçš„å½©è‰²å›¾æ˜¯ä»¥RGB(çº¢-ç»¿-è“ï¼ŒRed-Green-Blue)é¢œè‰²æ¨¡å¼æ˜¾ç¤ºçš„ï¼Œä½†OpenCVä¸­å½©è‰²å›¾æ˜¯ä»¥B-G-Ré€šé“é¡ºåºå­˜å‚¨çš„ï¼Œç°åº¦å›¾åªæœ‰ä¸€ä¸ªé€šé“ã€‚</p><p>å›¾åƒåæ ‡çš„èµ·å§‹ç‚¹æ˜¯åœ¨å·¦ä¸Šè§’ï¼Œæ‰€ä»¥è¡Œå¯¹åº”çš„æ˜¯yï¼Œåˆ—å¯¹åº”çš„æ˜¯xï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_image_coordinate_channels.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_image_coordinate_channels.jpg" alt=""></picture></p><h3 id="åŠ è½½å›¾ç‰‡"><a href="#åŠ è½½å›¾ç‰‡" class="headerlink" title="åŠ è½½å›¾ç‰‡"></a>åŠ è½½å›¾ç‰‡</h3><p>ä½¿ç”¨<code>cv2.imread()</code>æ¥è¯»å…¥ä¸€å¼ å›¾ç‰‡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½ç°åº¦å›¾</span></span><br><span class="line">img = cv2.imread(<span class="string">'lena.jpg'</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><ul><li><p>å‚æ•°1ï¼šå›¾ç‰‡çš„æ–‡ä»¶å</p><ul><li>å¦‚æœå›¾ç‰‡æ”¾åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ï¼Œç›´æ¥å†™æ–‡ä»¶åå°±è¡Œäº†ï¼Œå¦‚â€™lena.jpgâ€™</li><li>å¦åˆ™éœ€è¦ç»™å‡ºç»å¯¹è·¯å¾„ï¼Œå¦‚â€™D:\OpenCVSamples\lena.jpgâ€™</li></ul></li><li><p>å‚æ•°2ï¼šè¯»å…¥æ–¹å¼ï¼Œçœç•¥å³é‡‡ç”¨é»˜è®¤å€¼</p><ul><li><code>cv2.IMREAD_COLOR</code>ï¼šå½©è‰²å›¾ï¼Œé»˜è®¤å€¼(1)</li><li><code>cv2.IMREAD_GRAYSCALE</code>ï¼šç°åº¦å›¾(0)</li><li><code>cv2.IMREAD_UNCHANGED</code>ï¼šåŒ…å«é€æ˜é€šé“çš„å½©è‰²å›¾(-1)</li></ul></li></ul><blockquote><p>ç»éªŒä¹‹è°ˆï¼šè·¯å¾„ä¸­ä¸èƒ½æœ‰ä¸­æ–‡å™¢ï¼Œå¹¶ä¸”æ²¡æœ‰åŠ è½½æˆåŠŸçš„è¯æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œ<code>print(img)</code>çš„ç»“æœä¸ºNoneï¼Œåé¢å¤„ç†æ‰ä¼šæŠ¥é”™ï¼Œç®—æ˜¯ä¸ªå°å‘ã€‚</p></blockquote><h3 id="æ˜¾ç¤ºå›¾ç‰‡"><a href="#æ˜¾ç¤ºå›¾ç‰‡" class="headerlink" title="æ˜¾ç¤ºå›¾ç‰‡"></a>æ˜¾ç¤ºå›¾ç‰‡</h3><p>ä½¿ç”¨<code>cv2.imshow()</code>æ˜¾ç¤ºå›¾ç‰‡ï¼Œçª—å£ä¼šè‡ªé€‚åº”å›¾ç‰‡çš„å¤§å°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv2.imshow(<span class="string">'lena'</span>, img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>å‚æ•°1æ˜¯çª—å£çš„åå­—ï¼Œå‚æ•°2æ˜¯è¦æ˜¾ç¤ºçš„å›¾ç‰‡ã€‚ä¸åŒçª—å£ä¹‹é—´ç”¨çª—å£ååŒºåˆ†ï¼Œæ‰€ä»¥çª—å£åç›¸åŒå°±è¡¨ç¤ºæ˜¯åŒä¸€ä¸ªçª—å£ï¼Œæ˜¾ç¤ºç»“æœå¦‚ä¸‹ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_show_lena_gray.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_show_lena_gray.jpg" alt=""></picture></p><p><code>cv2.waitKey()</code>æ˜¯è®©ç¨‹åºæš‚åœçš„æ„æ€ï¼Œå‚æ•°æ˜¯ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’msï¼‰ã€‚æ—¶é—´ä¸€åˆ°ï¼Œä¼šç»§ç»­æ‰§è¡Œæ¥ä¸‹æ¥çš„ç¨‹åºï¼Œä¼ å…¥0çš„è¯è¡¨ç¤ºä¸€ç›´ç­‰å¾…ã€‚ç­‰å¾…æœŸé—´ä¹Ÿå¯ä»¥è·å–ç”¨æˆ·çš„æŒ‰é”®è¾“å…¥ï¼š<code>k = cv2.waitKey(0)</code>ï¼ˆ<a href="#ç»ƒä¹ ">ç»ƒä¹ 1</a>ï¼‰ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å…ˆç”¨<code>cv2.namedWindow()</code>åˆ›å»ºä¸€ä¸ªçª—å£ï¼Œä¹‹åå†æ˜¾ç¤ºå›¾ç‰‡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆå®šä¹‰çª—å£ï¼Œåæ˜¾ç¤ºå›¾ç‰‡</span></span><br><span class="line">cv2.namedWindow(<span class="string">'lena2'</span>, cv2.WINDOW_NORMAL)</span><br><span class="line">cv2.imshow(<span class="string">'lena2'</span>, img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>å‚æ•°1ä¾æ—§æ˜¯çª—å£çš„åå­—ï¼Œå‚æ•°2é»˜è®¤æ˜¯<code>cv2.WINDOW_AUTOSIZE</code>ï¼Œè¡¨ç¤ºçª—å£å¤§å°è‡ªé€‚åº”å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸º<code>cv2.WINDOW_NORMAL</code>ï¼Œè¡¨ç¤ºçª—å£å¤§å°å¯è°ƒæ•´ã€‚å›¾ç‰‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘ç”¨åè€…ã€‚</p><h3 id="ä¿å­˜å›¾ç‰‡"><a href="#ä¿å­˜å›¾ç‰‡" class="headerlink" title="ä¿å­˜å›¾ç‰‡"></a>ä¿å­˜å›¾ç‰‡</h3><p>ä½¿ç”¨<code>cv2.imwrite()</code>ä¿å­˜å›¾ç‰‡ï¼Œå‚æ•°1æ˜¯åŒ…å«åç¼€åçš„æ–‡ä»¶åï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.imwrite(<span class="string">'lena_gray.jpg'</span>, img)</span><br></pre></td></tr></table></figure><p>Niceï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•å‘ï¼Œå†æ¥å†å‰å™¢(â—â€™â—¡â€™â—)</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li><code>cv2.imread()</code>è¯»å…¥å›¾ç‰‡ã€<code>cv2.imshow()</code>æ˜¾ç¤ºå›¾ç‰‡ã€<code>cv2.imwrite()</code>ä¿å­˜å›¾ç‰‡ã€‚</li></ul><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><ol><li><p>æ‰“å¼€lena.jpgå¹¶æ˜¾ç¤ºï¼Œå¦‚æœæŒ‰ä¸‹â€™sâ€™ï¼Œå°±ä¿å­˜å›¾ç‰‡ä¸ºâ€™lena_save.bmpâ€™ï¼Œå¦åˆ™å°±ç»“æŸç¨‹åºã€‚</p></li><li><p>Matplotlibæ˜¯Pythonä¸­å¸¸ç”¨çš„ä¸€ä¸ªç»˜å›¾åº“ï¼Œè¯·å­¦ä¹ <a href="/opencv-python-extra-high-quality-save-and-using-matplotlib/">ç•ªå¤–ç¯‡ï¼šæ— æŸä¿å­˜å’ŒMatplotlibä½¿ç”¨</a>ã€‚</p></li></ol><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/d3/d63/classcv_1_1Mat.html" target="_blank" rel="noopener">Mat Object</a></li><li><a href="https://docs.opencv.org/4.0.0/d4/da8/group__imgcodecs.html#ga288b8b3da0892bd651fce07b3bbd3a56" target="_blank" rel="noopener">cv2.imread()</a></li><li><a href="https://docs.opencv.org/4.0.0/d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563" target="_blank" rel="noopener">cv2.imshow()</a></li><li><a href="https://docs.opencv.org/4.0.0/d4/da8/group__imgcodecs.html#gabbc7ef1aa2edfaa87772f1202d67e0ce" target="_blank" rel="noopener">cv2.imwrite()</a></li><li><a href="https://docs.opencv.org/4.0.0/d7/dfc/group__highgui.html#ga5afdf8410934fd099df85c75b2e0888b" target="_blank" rel="noopener">cv.namedWindow()</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/02.%20%E5%9F%BA%E6%9C%AC%E5%85%83%E7%B4%A0-%E5%9B%BE%E7%89%87" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_gui/py_image_display/py_image_display.html" target="_blank" rel="noopener">Getting Started with Images</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ å¦‚ä½•åŠ è½½å›¾ç‰‡ï¼Œæ˜¾ç¤ºå¹¶ä¿å­˜å›¾ç‰‡ã€‚
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡1ï¼šä»£ç æ€§èƒ½ä¼˜åŒ–</title>
    <link href="http://www.codec.wang/opencv-python-extra-code-optimization/"/>
    <id>http://www.codec.wang/opencv-python-extra-code-optimization/</id>
    <published>2017-12-06T07:51:52.000Z</published>
    <updated>2019-05-11T11:42:29.351Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ å¦‚ä½•è¯„ä¼°å’Œä¼˜åŒ–ä»£ç æ€§èƒ½ã€‚ï¼ˆæœ¬èŠ‚è¿˜æ²¡æ›´æ–°å®Œâ€¦â€¦â€¦â€¦ï¼‰<a id="more"></a></p><p>å®Œæˆä¸€é¡¹ä»»åŠ¡å¾ˆé‡è¦ï¼Œé«˜æ•ˆåœ°å®Œæˆæ›´é‡è¦ã€‚å›¾åƒå¤„ç†æ˜¯å¯¹çŸ©é˜µçš„æ“ä½œï¼Œæ•°æ®é‡å·¨å¤§ã€‚å¦‚æœä»£ç å†™çš„ä¸å¥½ï¼Œæ€§èƒ½å·®è·å°†å¾ˆå¤§ï¼Œæ‰€ä»¥è¿™èŠ‚æˆ‘ä»¬æ¥äº†è§£ä¸‹å¦‚ä½•è¯„ä¼°å’Œæå‡ä»£ç æ€§èƒ½ã€‚</p><h2 id="è¯„ä¼°ä»£ç è¿è¡Œæ—¶é—´"><a href="#è¯„ä¼°ä»£ç è¿è¡Œæ—¶é—´" class="headerlink" title="è¯„ä¼°ä»£ç è¿è¡Œæ—¶é—´"></a>è¯„ä¼°ä»£ç è¿è¡Œæ—¶é—´</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">start = cv2.getTickCount()</span><br><span class="line"><span class="comment"># è¿™é‡Œå†™æµ‹è¯•ä»£ç ...</span></span><br><span class="line">end = cv2.getTickCount()</span><br><span class="line">print((end - start) / cv2.getTickFrequency())</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å°±æ˜¯ç”¨æ¥æµ‹é‡ç¨‹åºè¿è¡Œæ—¶é—´çš„ï¼ˆå•ä½ï¼šsï¼‰ï¼Œå…¶ä¸­<code>cv2.getTickCount()</code>å‡½æ•°å¾—åˆ°ç”µè„‘å¯åŠ¨ä»¥æ¥çš„æ—¶é’Ÿå‘¨æœŸæ•°ï¼Œ<code>cv2.getTickFrequency()</code>è¿”å›ä½ ç”µè„‘çš„ä¸»é¢‘ï¼Œå‰åç›¸å‡å†é™¤ä»¥ä¸»é¢‘å°±æ˜¯ä½ ä»£ç çš„è¿è¡Œæ—¶é—´ï¼ˆè¿™æ ·è§£é‡Šå¹¶ä¸å®Œå…¨å‡†ç¡®ï¼Œä½†èƒ½ç†è§£å°±è¡Œï¼‰ã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥ç”¨Pythonä¸­çš„timeæ¨¡å—è®¡æ—¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">start = time.clock()</span><br><span class="line"><span class="comment"># è¿™é‡Œå†™æµ‹è¯•ä»£ç ...</span></span><br><span class="line">end = time.clock()</span><br><span class="line">print(end - start)</span><br></pre></td></tr></table></figure><blockquote><p>ç»éªŒä¹‹è°ˆï¼šå¦‚æœä½ ä½¿ç”¨çš„æ˜¯<a href="https://baike.baidu.com/item/ipython" target="_blank" rel="noopener">IPython</a>æˆ–<a href="https://baike.baidu.com/item/Jupyter" target="_blank" rel="noopener">Jupyter Notebook</a>å¼€å‘ç¯å¢ƒï¼Œæ€§èƒ½åˆ†æå°†ä¼šéå¸¸æ–¹ä¾¿ï¼Œè¯¦æƒ…è¯·å‚è€ƒï¼š<a href="http://pynash.org/2013/03/06/timing-and-profiling/" target="_blank" rel="noopener">Timing and Profiling in IPython</a></p></blockquote><h2 id="ä¼˜åŒ–åŸåˆ™"><a href="#ä¼˜åŒ–åŸåˆ™" class="headerlink" title="ä¼˜åŒ–åŸåˆ™"></a>ä¼˜åŒ–åŸåˆ™</h2><ul><li>æ•°æ®å…ƒç´ å°‘æ—¶ç”¨Pythonè¯­æ³•ï¼Œæ•°æ®å…ƒç´ å¤šæ—¶ç”¨Numpyï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">10</span></span><br><span class="line">z = np.uint8([<span class="number">10</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°è¯•æ¯”è¾ƒä¸‹é¢ä¸‰å¥è¯å„è‡ªçš„è¿è¡Œæ—¶é—´</span></span><br><span class="line">y = x * x * x   <span class="comment"># (1.6410249677846285e-06)</span></span><br><span class="line">y = x**<span class="number">3</span>        <span class="comment"># (2.461537451676943e-06)</span></span><br><span class="line">y = z * z * z   <span class="comment"># æœ€æ…¢ (3.1179474387907945e-05)</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥Numpyçš„è¿è¡Œé€Ÿåº¦å¹¶ä¸ä¸€å®šæ¯”Pythonæœ¬èº«è¯­æ³•å¿«ï¼Œå…ƒç´ æ•°é‡è¾ƒå°‘æ—¶ï¼Œè¯·ç”¨Pythonæœ¬èº«æ ¼å¼ã€‚</p><ul><li>å°½é‡é¿å…ä½¿ç”¨å¾ªç¯ï¼Œå°¤å…¶åµŒå¥—å¾ªç¯ï¼Œå› ä¸ºæå…¶æ…¢ï¼ï¼ï¼</li><li>ä¼˜å…ˆä½¿ç”¨OpenCV/Numpyä¸­å°è£…å¥½çš„å‡½æ•°</li><li>å°½é‡å°†æ•°æ®å‘é‡åŒ–ï¼Œå˜æˆNumpyçš„æ•°æ®æ ¼å¼</li><li>å°½é‡é¿å…æ•°ç»„çš„å¤åˆ¶æ“ä½œ</li></ul><h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><ul><li><a href="https://docs.opencv.org/4.0.0/db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487" target="_blank" rel="noopener">cv2.getTickCount()</a></li><li><a href="https://docs.opencv.org/4.0.0/db/de0/group__core__utils.html#ga705441a9ef01f47acdc55d87fbe5090c" target="_blank" rel="noopener">cv2.getTickFrequency()</a></li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/%E7%95%AA%E5%A4%96%E7%AF%8701.%20%E4%BB%A3%E7%A0%81%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li><li><a href="https://wiki.python.org/moin/PythonSpeed/PerformanceTips" target="_blank" rel="noopener">Python Optimization Techniques</a></li><li><a href="http://pynash.org/2013/03/06/timing-and-profiling/" target="_blank" rel="noopener">Timing and Profiling in IPython</a></li><li><a href="http://www.scipy-lectures.org/advanced/advanced_numpy/index.html#advanced-numpy" target="_blank" rel="noopener">Advanced Numpy</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ å¦‚ä½•è¯„ä¼°å’Œä¼˜åŒ–ä»£ç æ€§èƒ½ã€‚ï¼ˆæœ¬èŠ‚è¿˜æ²¡æ›´æ–°å®Œâ€¦â€¦â€¦â€¦ï¼‰
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Python+OpenCVæ•™ç¨‹1ï¼šç®€ä»‹ä¸å®‰è£…</title>
    <link href="http://www.codec.wang/opencv-python-introduction-and-installation/"/>
    <id>http://www.codec.wang/opencv-python-introduction-and-installation/</id>
    <published>2017-12-06T07:50:59.000Z</published>
    <updated>2020-04-07T04:41:05.345Z</updated>
    
    <content type="html"><![CDATA[<p>ç›¸ä¿¡å¤§éƒ¨åˆ†äººçŸ¥é“çš„OpenCVéƒ½æ˜¯ç”¨C++æ¥å¼€å‘çš„ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘æ¨èä½¿ç”¨Pythonå‘¢ï¼Ÿ<a id="more"></a></p><blockquote><p>æœ¬æ•™ç¨‹ç¿»è¯‘è‡ª<a href="http://opencv-python-tutroals.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener">OpenCVå®˜æ–¹è‹±æ–‡æ•™ç¨‹</a>ï¼Œæˆ‘æŒ‰ç…§ä½¿ç”¨åº¦å’Œéš¾æ˜“åº¦ç¿»è¯‘ï¼Œé‡æ–°ç¼–å†™äº†å¤§é‡åŸåˆ›å†…å®¹ï¼Œå°†ä¸å¸¸ç”¨å’Œè¾ƒéš¾çš„éƒ¨åˆ†å†™æˆç•ªå¤–ç¯‡ï¼Œæµ…æ˜¾æ˜“æ‡‚ï¼Œå¾ˆeasyçš„è¾£ã€‚æ¯èŠ‚çš„æºç ã€å›¾ç‰‡å’Œç»ƒä¹ é¢˜ç­”æ¡ˆå‡å¯åœ¨<a href="#å¼•ç”¨">å¼•ç”¨</a>å¤„æ‰¾åˆ°å™¢(âŠ™oâŠ™)</p></blockquote><hr><h2 id="Pythonç…§æ ·å¿«ï¼"><a href="#Pythonç…§æ ·å¿«ï¼" class="headerlink" title="Pythonç…§æ ·å¿«ï¼"></a>Pythonç…§æ ·å¿«ï¼</h2><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œè™½ç„¶Pythonè¯­æ³•ç®€æ´ï¼Œç¼–å†™é«˜æ•ˆï¼Œä½†ç›¸æ¯”C/C++è¿è¡Œæ…¢å¾ˆå¤šã€‚ç„¶è€ŒPythonè¿˜æœ‰ä¸ªé‡è¦çš„ç‰¹æ€§ï¼šå®ƒæ˜¯ä¸€é—¨èƒ¶æ°´è¯­è¨€ï¼Pythonå¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰©å±•C/C++ã€‚<strong>OpenCV-Python</strong>å°±æ˜¯ç”¨PythonåŒ…è£…äº†C++çš„å®ç°ï¼ŒèƒŒåå®é™…å°±æ˜¯C++çš„ä»£ç åœ¨è·‘ï¼Œæ‰€ä»¥ä»£ç çš„è¿è¡Œé€Ÿåº¦è·ŸåŸç”ŸC/C++é€Ÿåº¦ä¸€æ ·å¿«ã€‚</p><p>æˆ‘ä¸¾ä¸¤ä¸ªç®€å•çš„ä¾‹å­å°±ä¸€ç›®äº†ç„¶äº†ï¼šä¸€ä¸ªæ˜¯è¯»å…¥å›¾ç‰‡ï¼Œå¦ä¸€ä¸ªæ˜¯è°ƒæ•´å›¾ç‰‡çš„å¯¹æ¯”åº¦å’Œäº®åº¦ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_python_vs_cplus_speed.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_python_vs_cplus_speed.jpg" alt=""></picture></p><p><strong>å¯ä»¥çœ‹åˆ°æŸäº›æƒ…å†µä¸‹Pythonçš„è¿è¡Œé€Ÿåº¦ç”šè‡³å¥½äºC++ï¼Œä»£ç è¡Œæ•°ä¹Ÿç›´æ¥å°‘ä¸€åŠå¤šï¼</strong>å¦å¤–ï¼Œå›¾åƒæ˜¯çŸ©é˜µæ•°æ®ï¼ŒOpenCV-PythonåŸç”Ÿæ”¯æŒ<a href="https://baike.baidu.com/item/numpy" target="_blank" rel="noopener">Numpy</a>ï¼Œç›¸å½“äºPythonä¸­çš„Matlabï¼Œä¸ºçŸ©é˜µè¿ç®—ã€ç§‘å­¦è®¡ç®—æä¾›äº†æå¤§çš„ä¾¿åˆ©æ€§ã€‚</p><h2 id="äººå·¥æ™ºèƒ½æµªæ½®"><a href="#äººå·¥æ™ºèƒ½æµªæ½®" class="headerlink" title="äººå·¥æ™ºèƒ½æµªæ½®"></a>äººå·¥æ™ºèƒ½æµªæ½®</h2><p>è¿‘äº›å¹´ï¼Œäººå·¥æ™ºèƒ½ç›¸å…³æŠ€æœ¯çš„å¿«é€Ÿå‘å±•å¤§å®¶æœ‰ç›®å…±ç¹ï¼Œä¸å¿…å¤šè¯´ã€‚åœ¨ç¼–ç¨‹è¯­è¨€æ–¹é¢ï¼Œæ›´å¤šäººå¸Œæœ›çš„æ˜¯å…·å¤‡é«˜æ•ˆå¼€å‘æ•ˆç‡ã€è·¨å¹³å°ã€é«˜åº¦æ‰©å±•æ€§çš„è¯­è¨€ï¼Œå°¤å…¶æ˜¯ä¸€äº›AIå·¨å¤´ä¼˜å…ˆæ¨å‡ºæ”¯æŒPythonè¯­è¨€çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œå¦‚Facebookçš„<a href="https://pytorch.org/" target="_blank" rel="noopener">PyTorch</a>ã€Googleçš„<a href="https://tensorflow.google.cn/" target="_blank" rel="noopener">Tensorflow</a>ç­‰ï¼Œå¯ä»¥è¯´Pythonæ˜¯åå‰¯å…¶å®çš„â€œç½‘çº¢è¯­è¨€â€äº†ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_ai_ml_dl2.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_ai_ml_dl2.jpg" alt=""></picture></p><p>ä»<a href="https://www.tiobe.com/tiobe-index/" target="_blank" rel="noopener">TIOBEç¼–ç¨‹è¯­è¨€æ’è¡Œæ¦œ</a>ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼ŒPythonå‘å±•è¿…çŒ›ï¼Œå·²ç»é€¼è¿‘C++çš„ä»½é¢ã€‚è¿™ä¸ªæ’è¡Œæ¦œæ¯æœˆæ›´æ–°ï¼Œæˆ‘å°±ä¸æˆªå›¾äº†ï¼Œç¼–å†™æ—¶TOP5ï¼šJava/C/C++/Python/C#ã€‚</p><h2 id="äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Python"><a href="#äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Python" class="headerlink" title="äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Python"></a>äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Python</h2><ul><li>å¦‚æœä½ æç§‘ç ”ç”¨ï¼Œæœæ–­æ”¾å¼ƒC++ï¼ˆMatlabï¼Ÿå‡ºé—¨å·¦æ‹ï¼‰</li><li>å¦‚æœä½ æ˜¯å¿«é€ŸåŸå‹å¼€å‘ï¼ŒéªŒè¯æ–¹æ¡ˆï¼Œæœæ–­æ”¾å¼ƒC++</li><li>å¦‚æœä½ æ‡’çš„é…ç½®OpenCVç¯å¢ƒï¼Œæœæ–­æ”¾å¼ƒC++</li><li>å¦‚æœä½ çš„ç¨‹åºæ˜¯åœ¨æ”¯æŒPythonçš„è¾ƒé«˜ç¡¬ä»¶ç¯å¢ƒä¸‹è¿è¡Œï¼Œæœæ–­æ”¾å¼ƒC++</li><li>å¦‚æœä½ æ‹…å¿ƒPythonå†™ä¸äº†ç•Œé¢ï¼Œé‚£æ˜¯ä½ çš„é—®é¢˜o_o â€¦.</li><li>é™¤éä½ çš„ç¨‹åºæ˜¯MFCæˆ–å·²ç»ç”¨C++ç¼–å†™å…¶ä»–æ¨¡å—æˆ–æ˜¯åµŒå…¥å¼è®¾å¤‡ï¼Œé‚£å°±ç”¨C++å§</li></ul><p><strong>â€œäººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Pythonï¼ï¼ï¼â€</strong></p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><blockquote><p>æœ¬æ•™ç¨‹ç¼–å†™æ—¶ä½¿ç”¨çš„è½¯ä»¶ç‰ˆæœ¬æ˜¯ï¼šOpenCV 3.xï¼ŒPython 3.xã€‚</p></blockquote><p>è¦å®‰è£…OpenCVï¼Œåªéœ€cmdä¸‹çš„ä¸€æ¡æŒ‡ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install opencv-python</span><br></pre></td></tr></table></figure><p>pipæ˜¯Pythonçš„åŒ…ç®¡ç†å™¨ï¼Œå¦‚æœä½ è¿˜æ²¡å®‰è£…Pythonï¼Œå¼ºçƒˆæ¨èå®‰è£…<a href="https://www.anaconda.com/download/" target="_blank" rel="noopener">Anaconda</a>ï¼Œå®ƒåŒ…å«äº†å¤§é‡çš„ç§‘å­¦è®¡ç®—åŒ…ï¼Œä¸ç”¨åæœŸä¸€ä¸ªä¸ªå®‰è£…ã€‚å³ä½¿ä½ å·²ç»è£…äº†Pythonä¹Ÿæ²¡æœ‰å½±å“ï¼ŒAnacondaç›¸å½“äºè™šæ‹Ÿç¯å¢ƒï¼Œäº’ä¸å¹²æ‰°ã€‚</p><h3 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h3><p>è¿›å…¥Anaconda<a href="https://www.anaconda.com/download/" target="_blank" rel="noopener">å®˜ç½‘</a>ï¼Œä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„å®‰è£…æ–‡ä»¶ï¼Œé€Ÿåº¦æ¯”è¾ƒæ…¢çš„è¯ï¼Œå¯ä»¥å»<a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/" target="_blank" rel="noopener">æ¸…åå¼€æºé•œåƒç«™</a>ã€‚</p><ul><li><p>Windowsç‰ˆä¸‹è½½çš„æ˜¯exeæ–‡ä»¶ï¼ŒåŒå‡»å¯ä»¥ç›´æ¥å®‰è£…ï¼Œå®‰è£…æ—¶è®°å¾—å‹¾é€‰ <code>Add Anaconda to my PATH environment variable</code>ï¼Œæ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚</p></li><li><p>Linuxç‰ˆä¸‹è½½çš„æ˜¯shæ–‡ä»¶ï¼Œä¸‹è½½å®Œæˆåï¼Œç»ˆç«¯åˆ‡æ¢åˆ°ä¸‹è½½ç›®å½•ï¼Œæ‰§è¡Œ<code>bash Anaconda3-xx.sh</code>ï¼ŒLinuxç‰ˆä¹Ÿä¼šæç¤ºæ·»åŠ ç¯å¢ƒå˜é‡ï¼Œè®°å¾—è¾“yeså°±è¡Œã€‚</p></li></ul><h3 id="å®‰è£…æµ‹è¯•"><a href="#å®‰è£…æµ‹è¯•" class="headerlink" title="å®‰è£…æµ‹è¯•"></a>å®‰è£…æµ‹è¯•</h3><p>Pythonå®‰è£…å¥½ä¹‹åï¼Œå¯ä»¥åœ¨cmdä¸­è¾“å…¥<code>python --version</code>æ¥æŸ¥çœ‹Pythonçš„ç‰ˆæœ¬ä¿¡æ¯ã€‚å¯¹äºOpenCVï¼Œæ‰“å¼€Pythonçš„å¼€å‘ç¯å¢ƒï¼Œè¾“å…¥<code>import cv2</code>ï¼Œè¿è¡Œæ²¡æœ‰æŠ¥é”™è¯´æ˜ä¸€åˆ‡æ­£å¸¸ã€‚è¦æŸ¥çœ‹OpenCVçš„ç‰ˆæœ¬ï¼Œå¯ä»¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(cv2.__version__)  <span class="comment"># '3.4.1'</span></span><br></pre></td></tr></table></figure><blockquote><p>Pythonå¼€å‘ç¯å¢ƒæˆ‘ç”¨çš„æ˜¯<a href="http://code.visualstudio.com/" target="_blank" rel="noopener">Visual Studio Code</a>ï¼Œä¹Ÿå¯ä»¥ç”¨<a href="http://www.jetbrains.com/pycharm/" target="_blank" rel="noopener">PyCharm</a>/<a href="https://atom.io/" target="_blank" rel="noopener">Atom</a>/Jupyter Notebook(Anacondaè‡ªå¸¦)ï¼Œæˆ–è€…ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œæ•²ï¼Œè‡ªå·±ä¹ æƒ¯å°±è¡Œã€‚</p></blockquote><h3 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h3><ol><li>pipè¯†åˆ«ä¸äº†ï¼šç¯å¢ƒå˜é‡ä¸­æ²¡æœ‰pipçš„ç›®å½•ï¼Œæ‰¾åˆ°pipç›®å½•ï¼Œæ·»åŠ åˆ°ç”¨æˆ·ï¼ˆæˆ–ç³»ç»Ÿï¼‰å˜é‡çš„pathä¸­ã€‚</li><li>ä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ï¼šå¯<a href="https://pypi.org/search/?q=opencv-python" target="_blank" rel="noopener">åˆ°æ­¤å¤„</a>ä¸‹è½½ç¦»çº¿ç‰ˆã€‚ä¸‹è½½å®Œæˆåï¼Œcmdåˆ‡æ¢åˆ°ä¸‹è½½ç›®å½•ï¼Œè¾“å…¥ <code>pip install æ–‡ä»¶å</code>å®‰è£…ã€‚</li></ol><h2 id="å­¦ä¹ è½¯ä»¶"><a href="#å­¦ä¹ è½¯ä»¶" class="headerlink" title="å­¦ä¹ è½¯ä»¶"></a>å­¦ä¹ è½¯ä»¶</h2><p>ä¸ºäº†ä¾¿äºå­¦ä¹ OpenCVï¼Œæˆ‘å†™äº†ä¸€ä¸ªæ•™å­¦æ¬¾è½¯ä»¶<a href="https://github.com/ex2tron/LearnOpenCVEdu" target="_blank" rel="noopener">LearnOpenCVEdu</a>ï¼Œç›®å‰åªå¼€å‘äº†ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œæœ‰å…´è¶£çš„ç«¥é‹å¯ä»¥æ”¯æŒä¸€ä¸‹å™¢ğŸ˜Š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cv2_learn_opencv_edu_soft_screenshot.jpg_webp"><img class="image" src="http://blog.codec.wang/cv2_learn_opencv_edu_soft_screenshot.jpg" alt="å¤§å®¶éšæ‰‹ç‚¹ä¸ªStarå§(â—Ë‡âˆ€Ë‡â—)"></picture></p><blockquote><p>ç»éªŒä¹‹è°ˆï¼šè™½ç„¶ä»ä¸€å¼€å§‹æˆ‘å°±æ¨èå¤§å®¶ä½¿ç”¨OpenCV-Pythonè¿›è¡Œå›¾åƒå¤„ç†ï¼Œä½†<em>æƒ³è¦æ·±å…¥ç†è§£OpenCV</em>ï¼ŒC++è¿˜æ˜¯å¿…é¡»çš„ï¼Œå°¤å…¶æ˜¯<strong>OpenCVæºç </strong>ï¼</p></blockquote><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://github.com/ex2tron/OpenCV-Python-Tutorial/tree/master/01.%20%E7%AE%80%E4%BB%8B%E4%B8%8E%E5%AE%89%E8%A3%85" target="_blank" rel="noopener">æœ¬èŠ‚æºç </a></li></ul><h3 id="ç½‘ç»œèµ„æ–™"><a href="#ç½‘ç»œèµ„æ–™" class="headerlink" title="ç½‘ç»œèµ„æ–™"></a>ç½‘ç»œèµ„æ–™</h3><ul><li><a href="https://docs.opencv.org/" target="_blank" rel="noopener"><strong>OpenCV Docså®˜æ–¹æ–‡æ¡£</strong></a></li><li><a href="https://github.com/opencv/opencv" target="_blank" rel="noopener">OpenCV å®˜æ–¹Github</a></li><li><a href="http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_tutorials.html" target="_blank" rel="noopener">å®˜æ–¹è‹±æ–‡æ•™ç¨‹ï¼šOpenCV-Python Tutorials</a></li><li><a href="http://www.learnopencv.com" target="_blank" rel="noopener">LearnOpenCV</a>ã€<a href="https://github.com/spmallick/learnopencv" target="_blank" rel="noopener">LearnOpenCV Github</a></li><li><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html" target="_blank" rel="noopener">Numpy Quickstart Tutorial</a></li><li><a href="http://www.opencv.org.cn/opencvdoc/2.3.2/html/doc/tutorials/tutorials.html" target="_blank" rel="noopener">OpenCV ä¸­æ–‡æ•™ç¨‹</a></li></ul><h3 id="ä¹¦ç±"><a href="#ä¹¦ç±" class="headerlink" title="ä¹¦ç±"></a>ä¹¦ç±</h3><ul><li><a href="http://programmingcomputervision.com/" target="_blank" rel="noopener">Programming Computer Vision with Python</a>ã€<a href="https://www.amazon.cn/dp/B00L3Y3NEM/ref=sr_1_1?ie=UTF8&qid=1543929834&sr=8-1&keywords=Python+%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89" target="_blank" rel="noopener">ä¸­æ–‡ä¹¦</a></li><li><a href="https://www.pyimagesearch.com/practical-python-opencv/" target="_blank" rel="noopener">https://www.pyimagesearch.com/practical-python-opencv/</a></li></ul><h3 id="åæ ¡è§†è§‰ç ”ç©¶æ‰€-è¯¾ç¨‹"><a href="#åæ ¡è§†è§‰ç ”ç©¶æ‰€-è¯¾ç¨‹" class="headerlink" title="åæ ¡è§†è§‰ç ”ç©¶æ‰€/è¯¾ç¨‹"></a>åæ ¡è§†è§‰ç ”ç©¶æ‰€/è¯¾ç¨‹</h3><ul><li><a href="http://graphics.cs.cmu.edu/" target="_blank" rel="noopener">å¡å†…åŸºæ¢…éš†å¤§å­¦</a></li><li><a href="https://www.cs.toronto.edu/~guerzhoy/320/" target="_blank" rel="noopener">å¤šä¼¦å¤šå¤§å­¦</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç›¸ä¿¡å¤§éƒ¨åˆ†äººçŸ¥é“çš„OpenCVéƒ½æ˜¯ç”¨C++æ¥å¼€å‘çš„ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘æ¨èä½¿ç”¨Pythonå‘¢ï¼Ÿ
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Brand7 2.0æ›´å&quot;å“ç‰Œæ¼†&quot;æ­£å¼ä¸Šæ¶å’¯ï¼</title>
    <link href="http://www.codec.wang/brand7-2-release/"/>
    <id>http://www.codec.wang/brand7-2-release/</id>
    <published>2017-11-26T11:04:32.000Z</published>
    <updated>2020-04-07T04:38:41.178Z</updated>
    
    <content type="html"><![CDATA[<p>éš”äº†ä¸€å¹´æ›´æ–°ï¼Œè‰¯å¿ƒéƒ½æœ‰ç‚¹ç—›äº†( â•¯â–¡â•° )<a id="more"></a></p><blockquote><p><em>ç¤ºå¨çš„äººåšçš„ä¸å¯¹çš„è¯ï¼Œå¼•èµ·ç¤ºå¨çš„äººå‘¢ï¼Ÿ</em>  â€”â€”<a href="https://movie.douban.com/subject/21937445/" target="_blank" rel="noopener">ã€Šè¾©æŠ¤äººã€‹</a></p></blockquote><p>å½“åˆBrand7å†™å®Œçš„æ—¶å€™ï¼Œä¸€ç›´æƒ³å†™ä¸€ä¸ªå…³äºç”µå½±çš„APPï¼Œç”šè‡³åšå‡ºäº†é›å½¢ï¼šMovieBackdropsï¼Œå¯æƒœï¼Œæ—¶é—´ä¸å¤šï¼Œäº‹æƒ…å´å¾ˆå¤šã€‚å‰æ®µæ—¶é—´é—­å…³ï¼Œæ‘¸ç€è‡ªå·±çš„è‰¯å¿ƒï¼Œç»ˆäºæŠŠBrand7æ›´æ–°äº†ä¸€æŠŠï¼Œæ¥çœ‹çœ‹æ›´æ–°å†…å®¹å§ï¼š</p><p><strong><a href="https://www.microsoft.com/store/productId/9NBLGGH546QC" target="_blank" rel="noopener">å“ç‰Œæ¼†</a>ï¼ˆBrand7ï¼‰æ˜¯ä¸€æ¬¾Win10 UWPçŒœå“ç‰Œçš„å°æ¸¸æˆï¼Œé‡Œé¢æ¶µç›–äº†æ±½è½¦ã€å¨±ä¹ã€æ—¶å°šã€ç”Ÿæ´»ã€é¤é¥®ã€ç§‘æŠ€ã€æ—…æ¸¸ä¸ƒä¸ªç±»åˆ«çš„550ä¸ªå“ç‰Œã€‚Ver2.0.1æ›´æ–°æ—¥å¿—å¦‚ä¸‹ï¼š</strong></p><ol><li><p>æ›´åâ€œå“ç‰Œæ¼†â€</p></li><li><p>å…¨æ–°Logo</p></li><li><p>å…¨æ–°å¯åŠ¨ç•Œé¢</p></li><li><p>æ–°å¢50ä¸ªå“ç‰Œï¼Œç°å…±550ä¸ªå“ç‰Œ</p></li><li><p>å…¨é¢ä¸­æ–‡ç‰ˆï¼ˆè‹±æ–‡è¢«å¾ˆå¤šäººåæ§½çœ‹ä¸æ‡‚( â•¯â–¡â•° )ï¼‰</p></li><li><p>ç•Œé¢UIè°ƒæ•´</p></li></ol><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/brand7_v2_comparation.jpg_webp"><img class="image" src="http://blog.codec.wang/brand7_v2_comparation.jpg" alt="æ–°æ—§ç‰ˆå¯¹æ¯”ï¼šä¸­æ–‡ç‰ˆ"></picture></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/brand7_v2_ui.jpg_webp"><img class="image" src="http://blog.codec.wang/brand7_v2_ui.jpg" alt="å®Œæˆç•Œé¢"></picture></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/brand7_v2_startui.jpg_webp"><img class="image" src="http://blog.codec.wang/brand7_v2_startui.jpg" alt="æ–°çš„å¯åŠ¨ç•Œé¢"></picture></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/brand7_v2_share.jpg_webp"><img class="image" src="http://blog.codec.wang/brand7_v2_share.jpg" alt="åˆ†äº«ç•Œé¢"></picture></p><p>å¯ä»¥åœ¨Win10åº”ç”¨å•†åº—ä¸­æœç´¢â€œå“ç‰Œæ¼†â€è¿›è¡Œä¸‹è½½ï¼Œæˆ–<a href="https://www.microsoft.com/store/productId/9NBLGGH546QC" target="_blank" rel="noopener">ç‚¹å‡»æ­¤å¤„</a>ã€‚</p><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;éš”äº†ä¸€å¹´æ›´æ–°ï¼Œè‰¯å¿ƒéƒ½æœ‰ç‚¹ç—›äº†( â•¯â–¡â•° )
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="Brand7" scheme="http://www.codec.wang/tags/Brand7/"/>
    
      <category term="å“ç‰Œæ¼†" scheme="http://www.codec.wang/tags/%E5%93%81%E7%89%8C%E6%BC%86/"/>
    
  </entry>
  
  <entry>
    <title>ã€è§†è§‰ä¸å›¾åƒã€‘OpenCVç¯‡ï¼šPython+OpenCVå®ç”¨æ•™ç¨‹</title>
    <link href="http://www.codec.wang/opencv-python/"/>
    <id>http://www.codec.wang/opencv-python/</id>
    <published>2017-10-10T14:22:13.000Z</published>
    <updated>2020-04-07T03:57:57.581Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½• "></a>ç›®å½• <a id="more"></a></h3><h4 id="å…¥é—¨ç¯‡"><a href="#å…¥é—¨ç¯‡" class="headerlink" title="å…¥é—¨ç¯‡"></a>å…¥é—¨ç¯‡</h4><ol><li><a href="/opencv-python-introduction-and-installation/">ç®€ä»‹ä¸å®‰è£…</a>ï¼ˆäº†è§£å®‰è£…OpenCV-Pythonï¼‰ | <a href="/opencv-python-extra-code-optimization/">ç•ªå¤–ç¯‡1ï¼šä»£ç æ€§èƒ½ä¼˜åŒ–</a></li><li><a href="/opencv-python-basic-element-image/">åŸºæœ¬å…ƒç´ -å›¾ç‰‡</a>ï¼ˆå›¾ç‰‡è½½å…¥/æ˜¾ç¤º/ä¿å­˜ï¼‰ | <a href="/opencv-python-extra-high-quality-save-and-using-matplotlib/">ç•ªå¤–ç¯‡2ï¼šæ— æŸä¿å­˜å’ŒMatplotlibä½¿ç”¨</a></li><li><a href="/opencv-python-open-camera/">æ‰“å¼€æ‘„åƒå¤´</a>ï¼ˆæ‰“å¼€æ‘„åƒå¤´æ•è·å›¾ç‰‡/æ’­æ”¾ä¿å­˜è§†é¢‘ï¼‰ | <a href="/opencv-python-extra-trackbar/">ç•ªå¤–ç¯‡3ï¼šæ»‘åŠ¨æ¡</a></li><li><a href="/opencv-python-basic-operations/">å›¾åƒåŸºæœ¬æ“ä½œ</a>ï¼ˆè®¿é—®åƒç´ ç‚¹/ROI/é€šé“åˆ†ç¦»åˆå¹¶/å›¾ç‰‡å±æ€§ï¼‰</li><li><a href="/opencv-python-changing-colorspaces/">é¢œè‰²ç©ºé—´è½¬æ¢</a>ï¼ˆé¢œè‰²ç©ºé—´è½¬æ¢/è¿½è¸ªç‰¹å®šé¢œè‰²ç‰©ä½“ï¼‰</li><li><a href="/opencv-python-image-thresholding/">é˜ˆå€¼åˆ†å‰²</a>ï¼ˆé˜ˆå€¼åˆ†å‰²/äºŒå€¼åŒ–ï¼‰ | <a href="/opencv-python-extra-otsu-thresholding/">ç•ªå¤–ç¯‡4ï¼šOtsué˜ˆå€¼æ³•</a></li><li><a href="/opencv-python-image-geometric-transformation/">å›¾åƒå‡ ä½•å˜æ¢</a>ï¼ˆæ—‹è½¬/å¹³ç§»/ç¼©æ”¾/ç¿»è½¬ï¼‰ | <a href="/opencv-python-extra-warpaffine-warpperspective/">ç•ªå¤–ç¯‡5ï¼šä»¿å°„å˜æ¢ä¸é€è§†å˜æ¢</a></li><li><a href="/opencv-python-drawing-function/">ç»˜å›¾åŠŸèƒ½</a>ï¼ˆç”»çº¿/ç”»åœ†/ç”»çŸ©å½¢/æ·»åŠ æ–‡å­—ï¼‰ | <a href="/opencv-python-extra-drawing-with-mouse/">ç•ªå¤–ç¯‡6ï¼šé¼ æ ‡ç»˜å›¾</a></li></ol><p><a href="/opencv-python-clock-drawing/"><strong>æŒ‘æˆ˜ä»»åŠ¡ï¼šç”»åŠ¨æ€æ—¶é’Ÿ</strong></a> | <a href="/opencv-python-using-pyqt5-create-gui/"><strong>æ‹“å±•æŒ‘æˆ˜ï¼šPyQt5ç¼–å†™GUIç•Œé¢</strong></a></p><h4 id="åŸºç¡€ç¯‡"><a href="#åŸºç¡€ç¯‡" class="headerlink" title="åŸºç¡€ç¯‡"></a>åŸºç¡€ç¯‡</h4><ol><li><a href="/opencv-python-image-blending/">å›¾åƒæ··åˆ</a>ï¼ˆç®—æ•°è¿ç®—/æ··åˆ/æŒ‰ä½è¿ç®—ï¼‰ | <a href="/opencv-python-extra-contrast-brightness/">ç•ªå¤–ç¯‡7ï¼šäº®åº¦ä¸å¯¹æ¯”åº¦</a></li><li><a href="/opencv-python-smoothing-images/">å¹³æ»‘å›¾åƒ</a>ï¼ˆå·ç§¯/æ»¤æ³¢/æ¨¡ç³Š/é™å™ªï¼‰ | <a href="/opencv-python-extra-padding-and-convolution/">ç•ªå¤–ç¯‡8ï¼šå·ç§¯åŸºç¡€(å›¾ç‰‡è¾¹æ¡†)</a></li><li><a href="/opencv-python-edge-detection/">è¾¹ç¼˜æ£€æµ‹</a>ï¼ˆCanny/Sobelï¼‰ | <a href="/opencv-python-extra-image-gradients/">ç•ªå¤–ç¯‡9ï¼šå›¾åƒæ¢¯åº¦</a></li><li><a href="/opencv-python-erode-and-dilate/">è…èš€ä¸è†¨èƒ€</a>ï¼ˆå½¢æ€å­¦æ“ä½œ/è…èš€/è†¨èƒ€/å¼€è¿ç®—/é—­è¿ç®—ï¼‰</li><li><a href="/opencv-python-contours/">è½®å»“</a> ï¼ˆå¯»æ‰¾/ç»˜åˆ¶è½®å»“ï¼‰  | <a href="/opencv-python-extra-contours-hierarchy/">ç•ªå¤–ç¯‡10ï¼šè½®å»“å±‚çº§</a></li><li><a href="/opencv-python-contour-features/">è½®å»“ç‰¹å¾</a> ï¼ˆé¢ç§¯/å‘¨é•¿/æœ€å°å¤–æ¥çŸ©(åœ†)/å½¢çŠ¶åŒ¹é…ï¼‰ | <a href="/opencv-python-extra-convex-hull/">ç•ªå¤–ç¯‡11ï¼šå‡¸åŒ…åŠæ›´å¤šè½®å»“ç‰¹å¾</a></li><li><a href="/opencv-python-histograms/">ç›´æ–¹å›¾</a>ï¼ˆè®¡ç®—ç»˜åˆ¶ç›´æ–¹å›¾/å‡è¡¡åŒ–ï¼‰</li><li><a href="/opencv-python-template-matching/">æ¨¡æ¿åŒ¹é…</a>ï¼ˆå¤§å›¾ä¸­æ‰¾å°å›¾ï¼‰</li><li><a href="/opencv-python-hough-transform/"> éœå¤«å˜æ¢</a>ï¼ˆæå–ç›´çº¿/åœ†ï¼‰</li></ol><p><a href="/opencv-python-lane-road-detection/"><strong>æŒ‘æˆ˜ä»»åŠ¡ï¼šè½¦é“æ£€æµ‹</strong></a> </p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ç›®å½•&quot;&gt;&lt;a href=&quot;#ç›®å½•&quot; class=&quot;headerlink&quot; title=&quot;ç›®å½• &quot;&gt;&lt;/a&gt;ç›®å½•
    
    </summary>
    
    
      <category term="æœºå™¨è§†è§‰" scheme="http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"/>
    
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Python" scheme="http://www.codec.wang/tags/Python/"/>
    
      <category term="å›¾åƒå¤„ç†" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>ã€åˆ©å™¨ã€‘GitKrakenï¼šé…·ç‚«çš„Git GUIå®¢æˆ·ç«¯</title>
    <link href="http://www.codec.wang/tools-gitkraken/"/>
    <id>http://www.codec.wang/tools-gitkraken/</id>
    <published>2017-10-05T09:33:20.000Z</published>
    <updated>2020-04-07T03:50:49.653Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸å–œæ¬¢æ•²å‘½ä»¤ï¼Ÿé‚£ä¹ˆè¿™æ¬¾é…·ç‚«çš„Gitå®¢æˆ·ç«¯è®©ä½ é€¼æ ¼æ»¡æ»¡ï¼<a id="more"></a></p><blockquote><p><em>çœŸæ­£çš„å¿˜è®°æ˜¯ä¸éœ€è¦åŠªåŠ›çš„ã€‚</em>â€”â€”<a href="https://movie.douban.com/subject/5045678/" target="_blank" rel="noopener">ã€Šå¤§é±¼æµ·æ£ ã€‹</a></p></blockquote><hr><p>åºŸè¯ä¸€æ®µå…ˆï¼šä»¥å‰ä¸Šç­çš„æ—¶å€™ï¼Œå…¬å¸é‡Œç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿç”¨çš„æ˜¯perforceï¼Œä½ åº”è¯¥ã€å¯èƒ½æ²¡å¬è¿‡( â•¯â–¡â•° )ã€‚æ€»ä¹‹ï¼Œå°±æ˜¯é›†ä¸­å¼ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿï¼Œç›¸æ¯”äºgitçš„åˆ†å¸ƒå¼æœ‰å¾ˆå¤šç¼ºé™·ï¼Œå…·ä½“å¯ä»¥çœ‹â€œ<a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001374027586935cf69c53637d8458c9aec27dd546a6cd6000" target="_blank" rel="noopener">é›†ä¸­å¼vsåˆ†å¸ƒå¼</a>â€ã€‚ä½†ä½œä¸ºä¸€æ¬¾å•†ä¸šè½¯ä»¶ï¼Œperforceæä¾›çš„ä¼˜ç§€å®¢æˆ·ç«¯ä½“éªŒè¿˜æ˜¯ç›¸å½“ä¸é”™çš„ã€‚ä½¿ç”¨gitåï¼Œä¸€ç›´éƒ½æ˜¯æ•²å‘½ä»¤çš„ï¼Œä¸€æ˜¯å› ä¸ºä¹ æƒ¯ï¼Œæ¯•ç«Ÿç ä»£ç é€¼æ ¼é«˜å˜›ï¼ŒäºŒæ˜¯å› ä¸ºgitçš„GUIå®¢æˆ·ç«¯è¦ä¸å¾ˆä¸‘ï¼Œè¦ä¸åŠŸèƒ½æ‰æ€¥ï¼Œæ€»ä¹‹ä¸æƒ³ç”¨ã€‚ä¹‹åï¼Œä½“éªŒäº†è¿™ä¸ªè½¯ä»¶ï¼ŒåˆåŒç±»ä¼¼çš„<a href="http://www.sourcetreeapp.com/" target="_blank" rel="noopener">SourceTree</a>å¯¹æ¯”äº†ä¸‹ï¼Œæ— å¥ˆï¼Œæˆ‘ï¼Œè¿˜æ˜¯å–œæ¬¢é¢œå€¼é«˜çš„~ o(<em>ï¿£â–½ï¿£</em>)oå¦å¤–ï¼Œä»¥å‰å¤–æ•™è€å¸ˆæé—®è¯´ã€ŠåŠ å‹’æ¯”æµ·ç›—2ã€‹ä¸­çš„é‚£ä¸ªæ€ªç‰©å«å•¥ï¼Œé˜…ç‰‡æ— æ•°çš„æˆ‘ï¼Œé‚£å¤©ç«Ÿç„¶æ²¡å›ç­”ä¸Šï¼Œè£…é€¼å¤±è´¥ï¼Œæ‰€ä»¥å¯¹è¿™åªâ€œæŒªå¨æµ·æ€ªkrakenâ€å½±å“ç‰¹åˆ«æ·±åˆ»ã€‚å¥½äº†ï¼Œå¼€å§‹æ­£é¢˜å§~</p><ul><li>å®˜ç½‘/ä¸‹è½½ï¼š<a href="https://www.gitkraken.com/" target="_blank" rel="noopener">GitKraken</a></li></ul><p>GitKrakenå¯¹Windows/Linux/Macä¸‰å¤§ä¸»æµå¹³å°éƒ½æ”¯æŒï¼Œå…¶æ–¹ä¾¿ä¹‹å¤„åœ¨äºï¼Œå®ƒä¸éœ€è¦å®‰è£…é…ç½®ï¼ŒåŒå‡»æ‰“å¼€å°±å¯ä»¥äº†ã€‚æ‰“å¼€ä¹‹åï¼Œå¯ä»¥é€‰æ‹©ç”¨Githubè´¦å·ç™»é™†ï¼Œéœ€è¦Githubæˆæƒï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/gitkraken_sign_in_with_github.png_webp"><img class="image" src="http://blog.codec.wang/gitkraken_sign_in_with_github.png" alt="ä½¿ç”¨Githubæˆæƒç™»å½•"></picture></p><h2 id="æ‰“å¼€-å…‹éš†-åˆå§‹åŒ–"><a href="#æ‰“å¼€-å…‹éš†-åˆå§‹åŒ–" class="headerlink" title="æ‰“å¼€/å…‹éš†/åˆå§‹åŒ–"></a>æ‰“å¼€/å…‹éš†/åˆå§‹åŒ–</h2><p>GitKrankenæ”¯æŒæ‰“å¼€æœ¬åœ°ä»“åº“ï¼Œä»æŒ‡å®šçš„URLæˆ–Githubã€Gitlabã€Bitbucketç­‰ä¸Šé¢ç›´æ¥å…‹éš†ã€‚å‰é¢æˆ‘ä»¬å·²ç»ç”¨Githubç›´æ¥ç™»é™†äº†ï¼Œæ‰€ä»¥ï¼Œä»Githubå…‹éš†æ—¶ï¼Œä¼šç›´æ¥åˆ—å‡ºä½ å½“å‰çš„æ‰€æœ‰ä»“åº“é¡¹ç›®ï¼Œéå¸¸æ–¹ä¾¿ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è¿æ¥åˆ°Gitlab/Bitbucketå¹³å°ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/gitkraken_clone_from_github.png_webp"><img class="image" src="http://blog.codec.wang/gitkraken_clone_from_github.png" alt=""></picture></p><p>åˆå§‹åŒ–/æ–°å»ºé¡¹ç›®ä¹Ÿéå¸¸æ–¹ä¾¿ï¼Œåœ¨Inité€‰é¡¹ä¸­ï¼Œå¯ä»¥é€‰æ‹©åˆå§‹åŒ–ä¸€ä¸ªæœ¬åœ°ä»“åº“æˆ–ç±»ä¼¼Githubä¹‹ç±»çš„è¿œç¨‹ä»“åº“ã€‚GitKrakenåˆå§‹åŒ–æ—¶è¿˜æä¾›äº†.gitignoreçš„æ–‡ä»¶çš„ç›¸å…³æ¨¡æ¿ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/gitkraken_init_github_repo.png_webp"><img class="image" src="http://blog.codec.wang/gitkraken_init_github_repo.png" alt=""></picture></p><h2 id="ç•Œé¢-åŠŸèƒ½"><a href="#ç•Œé¢-åŠŸèƒ½" class="headerlink" title="ç•Œé¢/åŠŸèƒ½"></a>ç•Œé¢/åŠŸèƒ½</h2><p>æ‰“å¼€ä¸€ä¸ªä»“åº“åï¼Œä¸»ç•Œé¢å¦‚ä¸‹å›¾ï¼Œé…·ç‚«ç®€æ´ï¼Œé¡¶éƒ¨æä¾›äº†å¸¸ç”¨çš„GitåŠŸèƒ½ï¼Œå°±ä¸ç»†è¯´äº†ã€‚æˆ‘ä¸»è¦æåŠä¸€ä¸‹ï¼Œå¦‚ä½•è¿›è¡Œç‰ˆæœ¬å·®åˆ†ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/gitkraken_main_ui.png_webp"><img class="image" src="http://blog.codec.wang/gitkraken_main_ui.png" alt=""></picture></p><p>åœ¨æäº¤æ—¥å¿—çš„ä¸»ç•Œé¢ï¼Œå¦‚æœè¦æ¯”è¾ƒä»»æ„ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å·®åˆ†ï¼ŒæŒ‰ä½Ctrlé”®ï¼Œé€‰æ‹©è¦æ¯”è¾ƒçš„ç‰ˆæœ¬ï¼Œå³è¾¹ä¼šè‡ªåŠ¨åˆ—å‡ºä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´æ‰€ä¿®æ”¹çš„æ–‡ä»¶ï¼Œç‚¹å‡»æ–‡ä»¶å°±å¯ä»¥çœ‹åˆ°diffäº†ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/gitkraken_view_commits_diff.png_webp"><img class="image" src="http://blog.codec.wang/gitkraken_view_commits_diff.png" alt=""></picture></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/gitkraken_view_file_diff.png_webp"><img class="image" src="http://blog.codec.wang/gitkraken_view_file_diff.png" alt=""></picture></p><p>å½“ç„¶ï¼Œæœ€æ–°ç‰ˆæœ¬ï¼ˆæœ¬æ–‡ä½¿ç”¨çš„æ˜¯3.1ç‰ˆæœ¬ï¼‰çš„GitKrakenæä¾›äº†Mergeå’ŒDiffå·¥å…·çš„è‡ªå®šä¹‰ï¼ˆFile-Preferences-Generalä¸­è®¾ç½®ï¼‰ï¼Œæ¯”å¦‚è¯´æˆ‘æœ€å¸¸ç”¨çš„Mergeå·¥å…·æ˜¯WinMergeï¼Œå°±å¯ä»¥åœ¨è¿™é‡Œé…ç½®ã€‚</p><p>æŠ›ç –å¼•ç‰ï¼Œå¤§è‡´ä»‹ç»äº†ä¸€ä¸‹ï¼Œå…¶å®ç†Ÿæ‚‰Gitçš„è¯ï¼Œè¿™ä¸ªå·¥å…·ä½¿ç”¨èµ·æ¥è¿˜æ˜¯è›®ç®€å•çš„~ o(<em>ï¿£â–½ï¿£</em>)o</p><p><em>2019å¹´3æœˆ19æ—¥æ›´æ–°ï¼šæœ€è¿‘æˆ‘ä¸€ç›´ç”¨VSCodeï¼Œé›†æˆçš„gitåŠŸèƒ½å†åŠ ä¸Šgitlensè¿™æ¬¾æ’ä»¶ï¼Œä½“éªŒä¹Ÿå¾ˆæ£’ã€‚</em></p><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸å–œæ¬¢æ•²å‘½ä»¤ï¼Ÿé‚£ä¹ˆè¿™æ¬¾é…·ç‚«çš„Gitå®¢æˆ·ç«¯è®©ä½ é€¼æ ¼æ»¡æ»¡ï¼
    
    </summary>
    
    
      <category term="åˆ©å™¨ç¯‡" scheme="http://www.codec.wang/categories/%E5%88%A9%E5%99%A8%E7%AF%87/"/>
    
    
      <category term="Git" scheme="http://www.codec.wang/tags/Git/"/>
    
      <category term="GitKraken" scheme="http://www.codec.wang/tags/GitKraken/"/>
    
  </entry>
  
  <entry>
    <title>ã€åˆ©å™¨ã€‘ä¸ƒç‰›äº‘ï¼šæ¯æœˆå…è´¹10Gçš„å›¾åºŠ</title>
    <link href="http://www.codec.wang/tools-qiniuyun/"/>
    <id>http://www.codec.wang/tools-qiniuyun/</id>
    <published>2017-09-18T11:55:38.000Z</published>
    <updated>2020-04-07T03:49:03.065Z</updated>
    
    <content type="html"><![CDATA[<p>éšç€è¶Šæ¥è¶Šå¤šçš„äººå¼€å§‹ä½¿ç”¨Markdownå†™è‡ªå·±çš„ç‹¬ç«‹åšå®¢ï¼Œä¸€ä¸ªå¥½ç”¨ç¨³å®šçš„å›¾åºŠæ˜¯å¿…ä¸å¯å°‘çš„äº†ã€‚<a id="more"></a></p><hr><h2 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h2><p>åœ¨<a href="https://www.qiniu.com/" target="_blank" rel="noopener">ä¸ƒç‰›äº‘</a>ä¹‹å‰ï¼Œæˆ‘ä½¿ç”¨è¿‡å›½å¤–çš„<a href="https://www.getcloudapp.com/" target="_blank" rel="noopener">Cloud App</a>å’Œ<a href="https://www.aliyun.com/product/oss?utm_content=se_877546" target="_blank" rel="noopener">é˜¿é‡Œäº‘çš„OSSå¯¹è±¡å­˜å‚¨</a>ã€‚</p><ol><li><p>é¦–å…ˆï¼Œå›½å¤–çš„ä¸œè¥¿åœ¨å›½å†…ç¨³å®šæ€§å’Œé€Ÿåº¦éƒ½æ˜¯ç›¸å¯¹è¾ƒå·®çš„ï¼Œæˆ‘è¯•ç€åœ¨é˜¿é‡Œäº‘å’ŒCloud Appä¸Šä¸Šä¼ åŒä¸€å¼ å›¾ç‰‡å¹¶ç”Ÿæˆå¤–é“¾ï¼ŒCloud Appè¦æ¯”é˜¿é‡Œçš„åŠ è½½é€Ÿåº¦å»¶è¿Ÿ1-2sï¼Œé˜¿é‡ŒåŸºæœ¬ç§’å¼€ã€‚</p></li><li><p>é˜¿é‡Œçš„OSSå¯¹è±¡å­˜å‚¨è™½ç„¶å¾ˆç¨³å®šï¼Œä½†æ˜¯å¹¶ä¸æä¾›å…è´¹çš„ç©ºé—´ã€‚ç›¸å¯¹æ¥è¯´ï¼Œä¸ƒç‰›äº‘æä¾›çš„æ¯æœˆ10Gå…è´¹æµé‡ï¼Œå¯¹äºåšå®¢æ¥è¯´ï¼Œç»°ç»°æœ‰ä½™äº†ã€‚</p></li><li><p>å¦å¤–ï¼Œä¸ƒç‰›äº‘æä¾›äº†è¯¸å¤šçš„å›¾ç‰‡å¤„ç†æ¥å£ï¼Œå¦‚æ°´å°ã€æ ¼å¼è½¬æ¢ã€ç¼©æ”¾ç­‰ï¼Œå¾ˆå®ç”¨ï¼Œå¾ˆå¼ºå¤§ã€‚</p></li></ol><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>æ³¨å†Œå¹¶ç™»é™†<a href="https://www.qiniu.com/" target="_blank" rel="noopener">ä¸ƒç‰›äº‘</a>ï¼Œåœ¨ä¸ƒç‰›äº‘çš„äº§å“åˆ—è¡¨ä¸­ï¼Œæ·»åŠ ä¸€ä¸ª<code>å¯¹è±¡å­˜å‚¨</code>ï¼Œå¦‚è¿™é‡Œå–åä¸º<code>picblog</code>ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/create_new_bucket.png_webp"><img class="image" src="http://blog.codec.wang/create_new_bucket.png" alt="åˆ›å»ºæ–°çš„å­˜å‚¨ç©ºé—´"></picture></p><p>åˆ›å»ºå¥½ä¹‹åï¼Œä¸ƒç‰›äº‘ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæµ‹è¯•åŸŸåï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/test_domain_name.png_webp"><img class="image" src="http://blog.codec.wang/test_domain_name.png" alt="æµ‹è¯•åŸŸå"></picture></p><p>è¿™ä¸ªåŸŸåå°±æ˜¯ä½ æ–‡ä»¶çš„å‰ç¼€äº†ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬ç‚¹å‡»â€å†…å®¹ç®¡ç†â€ï¼Œç‚¹å‡»â€ä¸Šä¼ æ–‡ä»¶â€ï¼Œé€‰æ‹©ä¸€å¹…å›¾ç‰‡ä¸Šä¼ ã€‚ä¸Šä¼ å®Œæˆåï¼Œå¤åˆ¶è¯¥æ–‡ä»¶çš„å¤–é“¾åœ°å€ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/copy_file_link.png_webp"><img class="image" src="http://blog.codec.wang/copy_file_link.png" alt="æ‹·è´å¤–é“¾åœ°å€"></picture></p><p>è¿™ä¸ªåœ°å€å°±æ˜¯ä½ çš„å¤–é“¾åœ°å€è¾£ï¼Œä½ å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è®¿é—®ï¼Œæ¯”å¦‚ï¼š<a href="http://blog.codec.wang/mycli_demo.gif_webp" target="_blank" rel="noopener">mysql_demo</a></p><h2 id="ç»‘å®šåŸŸå"><a href="#ç»‘å®šåŸŸå" class="headerlink" title="ç»‘å®šåŸŸå"></a>ç»‘å®šåŸŸå</h2><h3 id="æ·»åŠ äºŒçº§åŸŸå"><a href="#æ·»åŠ äºŒçº§åŸŸå" class="headerlink" title="æ·»åŠ äºŒçº§åŸŸå"></a>æ·»åŠ äºŒçº§åŸŸå</h3><p>ä¸ƒç‰›äº‘é»˜è®¤çš„æµ‹è¯•åŸŸåæœ‰æ—¶é—´é™åˆ¶ï¼Œè²Œä¼¼ä¸€ä¸ªæœˆå°±è¿‡æœŸä¸èƒ½ç”¨äº†ã€‚æ‰€ä»¥ï¼Œä½ å¦‚æœå·²ç»è´­ä¹°äº†åŸŸåçš„è¯ï¼Œå¯ä»¥åœ¨è¿™é‡Œç»‘å®šè‡ªå·±çš„äºŒçº§åŸŸåï¼Œè¿™æ ·æ—¢å¥½è®°åˆæ–¹ä¾¿ç®¡ç†ã€‚</p><p>æ¯”å¦‚ï¼Œè¿™é‡Œæˆ‘å·²ç»åœ¨ä¸‡ç½‘ä¸Šè´­ä¹°äº†<code>ex2tron.xin</code>çš„åŸŸåï¼Œè¿™é‡Œæˆ‘æ¼”ç¤ºå¦‚ä½•å°†ä¸ƒç‰›äº‘çš„å­˜å‚¨ç©ºé—´ç»‘å®š<code>pic.ex2tron.xin</code>è¿™ä¸ªåŸŸåã€‚</p><p>åœ¨ä¸ƒç‰›äº‘çš„å­˜å‚¨ç©ºé—´é¡µé¢ï¼Œç‚¹å‡»â€ç»‘å®šåŸŸåâ€ï¼Œåªéœ€è¦åœ¨åŠ é€ŸåŸŸåå¤„å¡«å†™è¦ç»‘å®šçš„åŸŸåï¼Œå…¶ä»–é¡¹ä¿æŒé»˜è®¤å³å¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åŠ é€ŸåŸŸåï¼š pic.ex2tron.xin</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/bucket_binding_domain_name.png_webp"><img class="image" src="http://blog.codec.wang/bucket_binding_domain_name.png" alt="è‡ªå®šä¹‰åŸŸå"></picture></p><p>åˆ›å»ºåï¼Œç³»ç»Ÿä¼šé…ç½®ä¸€æ®µæ—¶é—´ï¼Œç­‰å¾…å¤„ç†å®Œæˆï¼Œä¼šæ˜¾ç¤ºä¸€ä¸ªè¯¸å¦‚<code>xxx.qiniudns.com</code>çš„CNAMEè®°å½•å€¼ï¼Œè®°ä¸‹æ­¤å€¼ï¼Œåé¢è¦ç”¨åˆ°ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cname_for_binding.png_webp"><img class="image" src="http://blog.codec.wang/cname_for_binding.png" alt=""></picture></p><h3 id="æ·»åŠ åŸŸåè§£æ"><a href="#æ·»åŠ åŸŸåè§£æ" class="headerlink" title="æ·»åŠ åŸŸåè§£æ"></a>æ·»åŠ åŸŸåè§£æ</h3><p>æ‰“å¼€ä¸‡ç½‘çš„åŸŸåæ§åˆ¶å°ï¼Œæ·»åŠ ä¸€æ¡CNAMEçš„è§£æï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è®°å½•ç±»å‹ï¼šCNAME</span><br><span class="line">ä¸»æœºè®°å½•ï¼špic</span><br><span class="line">è®°å½•å€¼ï¼šxxx.qiniudns.com</span><br><span class="line"># å…¶ä»–é€‰å‹ä¿æŒé»˜è®¤</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/add_dns_for_qiniu.png_webp"><img class="image" src="http://blog.codec.wang/add_dns_for_qiniu.png" alt="æ·»åŠ åŸŸåè§£æ"></picture></p><p>è¿™æ ·ï¼Œä½ ä¸Šä¼ çš„å›¾ç‰‡å¤–é“¾å°±æ˜¯ï¼š<code>http://pic.ex2tron.xin/filename.png</code>ä¹‹ç±»çš„äº†ã€‚</p><h2 id="æ·»åŠ å›¾ç‰‡æ ·å¼"><a href="#æ·»åŠ å›¾ç‰‡æ ·å¼" class="headerlink" title="æ·»åŠ å›¾ç‰‡æ ·å¼"></a>æ·»åŠ å›¾ç‰‡æ ·å¼</h2><p>åˆ©ç”¨ä¸ƒç‰›äº‘åšå›¾åºŠçš„å¦å¤–ä¸€ä¸ªå¼ºå¤§ä¹‹å¤„åœ¨äºä¸°å¯Œçš„å›¾ç‰‡æ ·å¼ã€‚ç‚¹å‡»â€å›¾ç‰‡æ ·å¼â€-â€œæ–°å»ºå›¾ç‰‡æ ·å¼â€ï¼Œä¸ƒç‰›äº‘æä¾›äº†å¦‚ä¸‹å¾ˆå¤šç§åœºæ™¯ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/api_for_image_process.png_webp"><img class="image" src="http://blog.codec.wang/api_for_image_process.png" alt="æ·»åŠ å›¾ç‰‡æ ·å¼"></picture></p><p>æ¯”å¦‚ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©â€æŒ‡å®šå®½é«˜ï¼Œå¼ºè¡Œç¼©æ”¾+æ‰“å›¾ç‰‡æ°´å°â€ï¼Œç„¶åæ·»åŠ ä¸€ä¸ªæ–‡å­—æ°´å°ï¼Œå¯ä»¥è°ƒæ•´æ–‡å­—çš„å­—ä½“æ ·å¼ï¼Œä½ç½®ç­‰ç­‰ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/add_water_mark_api.png_webp"><img class="image" src="http://blog.codec.wang/add_water_mark_api.png" alt="æ°´å°åŠŸèƒ½"></picture></p><p>è°ƒæ•´å¥½ä¹‹åï¼Œä¸ºæ ·å¼å–ä¸ªåç§°ï¼Œå¦‚<code>webpic</code>ï¼Œè¿™æ ·ï¼Œåªè¦åœ¨åŸæ¥å¤–é“¾çš„åé¢æ·»åŠ <code>-webpic</code>å°±å¯ä»¥äº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;pic.ex2tron.xin&#x2F;filename.png-webpic</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>-</code>è¿™ä¸ªè¿æ¥ç¬¦å¯ä»¥é€šè¿‡å­˜å‚¨ç©ºé—´æ§åˆ¶é¢æ¿çš„â€æ ·å¼åˆ†éš”ç¬¦è®¾ç½®â€ä¸­è¿›è¡Œä¿®æ”¹ã€‚</p><h2 id="å›¾åºŠå·¥å…·"><a href="#å›¾åºŠå·¥å…·" class="headerlink" title="å›¾åºŠå·¥å…·"></a>å›¾åºŠå·¥å…·</h2><p>å¯¹äºä¸ƒç‰›äº‘ï¼Œæ¯å¼ å›¾ç‰‡éƒ½åœ¨ç½‘é¡µç«¯ä¸Šä¼ è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œæ‰€ä»¥ç”¨ä¸€äº›å›¾åºŠå®¢æˆ·ç«¯å·¥å…·ä¼šæ›´åŠ å¿«é€Ÿã€‚</p><p>è¿™é‡Œæ¨èä¸¤æ¬¾å·¥å…·ï¼š</p><p><a href="http://mpic.lzhaofu.cn/" target="_blank" rel="noopener">MPic</a>å›¾åºŠç¥å™¨ã€‚æ‰“å¼€è½¯ä»¶åï¼Œè®¾ç½®å¥½è‡ªå·±çš„AKå’ŒSKï¼ˆå¯åœ¨ä¸ƒç‰›äº‘çš„ä¸ªäººä¸­å¿ƒ-å¯†é’¥ç®¡ç†ä¸­çœ‹åˆ°ï¼‰ã€‚MPicæ”¯æŒæ–‡ä»¶æ‹–æ‹½ä¸Šä¼ ï¼Œç‚¹å‡»å¤åˆ¶å°±å¯ä»¥å¤åˆ¶å¤–é“¾ï¼Œéå¸¸æ–¹ä¾¿ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/mpic_qiniu.png_webp"><img class="image" src="http://blog.codec.wang/mpic_qiniu.png" alt="ç¬¬ä¸‰æ–¹ä¸ƒç‰›äº‘å·¥å…·"></picture></p><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;éšç€è¶Šæ¥è¶Šå¤šçš„äººå¼€å§‹ä½¿ç”¨Markdownå†™è‡ªå·±çš„ç‹¬ç«‹åšå®¢ï¼Œä¸€ä¸ªå¥½ç”¨ç¨³å®šçš„å›¾åºŠæ˜¯å¿…ä¸å¯å°‘çš„äº†ã€‚
    
    </summary>
    
    
      <category term="åˆ©å™¨ç¯‡" scheme="http://www.codec.wang/categories/%E5%88%A9%E5%99%A8%E7%AF%87/"/>
    
    
      <category term="ä¸ƒç‰›" scheme="http://www.codec.wang/tags/%E4%B8%83%E7%89%9B/"/>
    
      <category term="å›¾åºŠ" scheme="http://www.codec.wang/tags/%E5%9B%BE%E5%BA%8A/"/>
    
  </entry>
  
  <entry>
    <title>Hexoè½»æ¾æ­åšå®¢(4)ï¼šè‡ªæœ‰æœåŠ¡å™¨éƒ¨ç½²</title>
    <link href="http://www.codec.wang/hexo-blog-with-github-pages-4/"/>
    <id>http://www.codec.wang/hexo-blog-with-github-pages-4/</id>
    <published>2017-09-13T14:11:12.000Z</published>
    <updated>2020-04-17T11:03:47.314Z</updated>
    
    <content type="html"><![CDATA[<p>å°†åšå®¢æ”¾åœ¨Githubä¸Šæœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œæ¯”å¦‚å…è´¹ã€æ˜“ç®¡ç†ã€å…è´¹<code>xxx.github.io</code>çš„åŸŸåç­‰ï¼Œä½†è®¿é—®é€Ÿåº¦å˜›ï¼Œå°±å¾ˆä¸€èˆ¬äº†ã€‚å¯¹äºå–œæ¬¢æŠ˜è…¾çš„ç«¥é‹ï¼Œå¦‚æœæœ‰ä¸€å°è‡ªå·±çš„æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥æŠŠåšå®¢éƒ¨ç½²åœ¨äº‘ä¸Šã€‚<a id="more"></a></p><hr><p>ä¹‹å‰æˆ‘ä»¬è´­ä¹°äº†ç‹¬ç«‹åŸŸå<code>www.ex2tron.top</code>ï¼Œå¹¶å°†åŸŸåè§£æåˆ°äº†Githubã€‚ç°åœ¨æˆ‘ä»¬è¦æŠŠåšå®¢æ”¾åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œå¹¶ä¸”å°†åŸŸåè§£æåˆ°è¿™å°æœåŠ¡å™¨ï¼Œå¥½ï¼Œå¼€å¹²ï¼</p><blockquote><p>è¯´æ˜ï¼šä»¥é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸ºä¾‹ï¼Œä¹‹å‰æˆ‘å·²ç»ä½¿ç”¨apacheéƒ¨ç½²äº†ä¸€ä¸ªwebåº”ç”¨ï¼Œæ‰€ä»¥æˆ‘åé¢ä¼šè®²åˆ°apacheå¦‚ä½•é…ç½®å¤šä¸ªåŸŸåã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨nginxï¼Œéƒ¨ç½²æµç¨‹éƒ½ç±»ä¼¼ã€‚</p></blockquote><h2 id="æœåŠ¡å™¨ç¯å¢ƒé…ç½®"><a href="#æœåŠ¡å™¨ç¯å¢ƒé…ç½®" class="headerlink" title="æœåŠ¡å™¨ç¯å¢ƒé…ç½®"></a>æœåŠ¡å™¨ç¯å¢ƒé…ç½®</h2><p>ç”¨<code>ssh user@ip</code>è¿æ¥åˆ°æœåŠ¡å™¨åï¼Œå…ˆæ›´æ–°ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt upgrade</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹gitæœ‰æ²¡æœ‰å®‰è£…ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --version # æ²¡å®‰è£…çš„è¯ï¼šsudo apt install git</span><br></pre></td></tr></table></figure><p>ä¸å»ºè®®ä½¿ç”¨rootè´¦å·ï¼Œæ‰€ä»¥è¿™é‡Œæ·»åŠ ä¸€ä¸ªåä¸ºgitçš„æ–°ç”¨æˆ·ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adduser git</span><br><span class="line">adduser git sudo # æ·»åŠ åˆ°sudoä¸­</span><br></pre></td></tr></table></figure><p>åˆ‡æ¢åˆ°gitç”¨æˆ·ï¼Œå¹¶æ–°å»ºç”¨æˆ·ç›®å½•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su git # åˆ‡æ¢gitç”¨æˆ·</span><br><span class="line">cd</span><br><span class="line">mkdir .ssh &amp;&amp; cd .ssh</span><br></pre></td></tr></table></figure><p>ç„¶åå°†æœ¬åœ°PCä¸Šsshçš„<code>id_rsa.pub</code>æ–‡ä»¶å†…å®¹å¤åˆ¶åˆ°è¯¥ç›®å½•çš„<code>authorized_keys</code>æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨vimç¼–è¾‘ï¼Œä¹Ÿå¯ä»¥åœ¨æœ¬æœºPCä¸Šä½¿ç”¨scpå‘½ä»¤ï¼ˆæ–°ç‰ˆWindows10éƒ½å·²ç»è‡ªå¸¦sshå’Œscpç­‰å·¥å…·ï¼Œå¯å‚è€ƒï¼š<a href="/how-to-use-ssh-on-windows10/">å¦‚ä½•ä½¿ç”¨Windows 10çš„OpenSSH Clientå’ŒServer</a>ï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp .ssh/id_rsa.pub user@ip:/home/git/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™å¯ä»¥é€€å‡ºsshè¿æ¥ï¼Œå¹¶ä½¿ç”¨gitç”¨æˆ·ç›´æ¥ç™»å½•äº†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh git@ip</span><br></pre></td></tr></table></figure><h2 id="Gitè¿œç¨‹ä»“åº“åŠåŒæ­¥"><a href="#Gitè¿œç¨‹ä»“åº“åŠåŒæ­¥" class="headerlink" title="Gitè¿œç¨‹ä»“åº“åŠåŒæ­¥"></a>Gitè¿œç¨‹ä»“åº“åŠåŒæ­¥</h2><blockquote><p>æ­¤å¤„å¯å‚è€ƒæˆ‘ä¹‹å‰çš„Blogï¼š<a href="/set-up-your-own-git-server/">æ­å»ºè‡ªå·±çš„Github/GitæœåŠ¡å™¨</a></p></blockquote><p>è·ŸGitHubä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦å»ºä¸€ä¸ªåšå®¢çš„è¿œç¨‹ä»“åº“ã€‚åœ¨gitç”¨æˆ·çš„ä¸»ç›®å½•ä¸‹åˆ›å»ºä»“åº“ç›®å½•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/git/hexoblog.git</span><br><span class="line">sudo chown -R git:git hexoblog.git # ä¸ä¿®æ”¹æƒé™çš„è¯ï¼Œæ— æ³•æ¨é€</span><br><span class="line">cd /home/git/hexoblog.git</span><br><span class="line">git init --bare # åˆå§‹åŒ–ä»“åº“</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥éœ€è¦ä¿®æ”¹æœ¬åœ°Hexoçš„é…ç½®æ–‡ä»¶<code>_config.yml</code>ã€‚é¦–å…ˆå°†<code>url</code>æ”¹æˆä½ çš„æœåŠ¡å™¨å…¬ç½‘ipæˆ–åŸŸåï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url: http:&#x2F;&#x2F;www.ex2tron.top&#x2F;</span><br></pre></td></tr></table></figure><p>å…¶æ¬¡åœ¨<code>deploy</code>é¡¹è¿™é‡Œï¼Œå¦‚æœä½ å°†åšå®¢æ¨é€åˆ°å¤šä¸ªå¹³å°çš„è¯ï¼Œç›´æ¥æ–°å¢ä¸€æ¡å°±è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">- type: git</span><br><span class="line">  repo: git@47.101.xxx.xxx:&#x2F;home&#x2F;git&#x2F;hexoblog.git</span><br></pre></td></tr></table></figure><p>ç°åœ¨å¯ä»¥è¿è¡Œ<code>hexo g -d</code>æ­£å¸¸pushäº†ã€‚</p><p>å¦‚æœ<code>hexo d</code>æ¨é€çš„æ—¶å€™å‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">remote: fatal: Unable to create temporary file &#39;&#x2F;home&#x2F;git&#x2F;hexoblog.git&#x2F;.&#x2F;objects&#x2F;pack&#x2F;tmp_pack_XXXXXX&#39;: Permission denied</span><br><span class="line">fatal: sha1 file &#39;&lt;stdout&gt;&#39; write error: Broken pipe</span><br></pre></td></tr></table></figure><p>è¯´æ˜æ˜¯gitæƒé™çš„åŸå› ï¼Œä½ æœ‰å¯èƒ½å°‘æ‰§è¡Œäº†è¿™å¥è¯å™¢ï¼š<code>sudo chown -R git:git hexoblog.git</code></p><h2 id="apache2é…ç½®"><a href="#apache2é…ç½®" class="headerlink" title="apache2é…ç½®"></a>apache2é…ç½®</h2><p>é¦–å…ˆè‡ªç„¶æ˜¯å®‰è£…apache2å’¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install apache2</span><br></pre></td></tr></table></figure><p>åœ¨<code>/var/www/</code>ä¸‹é¢åˆ›å»ºç½‘ç«™çš„æ ¹ç›®å½•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /var/www/html/hexoblog</span><br></pre></td></tr></table></figure><p>æ­£å¸¸æ¥è¯´ï¼Œè¿™æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡ä½¿ç”¨apacheé…ç½®ï¼Œåé¢ä¼šè®²åˆ°æˆ‘çš„æƒ…å†µã€‚ç¼–è¾‘apache2çš„é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/apache2/sites-available/000-default.conf</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°<code>DocumentRoot</code>é¡¹ï¼Œå¹¶åšå¦‚ä¸‹æ›´æ”¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DocumentRoot /var/www/html/hexoblog</span><br></pre></td></tr></table></figure><p>æœ€åé‡å¯apacheç”Ÿæ•ˆï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service apache2 restart</span><br></pre></td></tr></table></figure><p>å‰é¢æåˆ°è¿‡ï¼Œæˆ‘å·²ç»åœ¨apache2é…ç½®è¿‡ä¸€ä¸ªwebåº”ç”¨å’ŒåŸŸåäº†ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥åœ¨confæ–‡ä»¶ä¸­æ–°å¢ä¸€é¡¹é…ç½®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># ä¹‹å‰çš„ï¼š</span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">......</span><br><span class="line">&lt;&#x2F;VirtualHost&gt;</span><br><span class="line"># æ–°å¢çš„ï¼š</span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">        ServerName www.ex2tron.top</span><br><span class="line">        ServerAlias www.ex2tron.top</span><br><span class="line">        DocumentRoot &#x2F;var&#x2F;www&#x2F;html&#x2F;hexoblog&#x2F;</span><br><span class="line">        &lt;Directory &quot;&#x2F;var&#x2F;www&#x2F;html&#x2F;hexoblog&#x2F;&quot;&gt;</span><br><span class="line">                Order deny,allow</span><br><span class="line">                Allow from all</span><br><span class="line">        &lt;&#x2F;Directory&gt;</span><br><span class="line">&lt;&#x2F;VirtualHost&gt;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºGité’©å­"><a href="#åˆ›å»ºGité’©å­" class="headerlink" title="åˆ›å»ºGité’©å­"></a>åˆ›å»ºGité’©å­</h2><p>ç°åœ¨è¿œç¨‹ä»“åº“åˆ›å»ºå¥½äº†ï¼Œä½†æ˜¯éœ€è¦å°†Hexoçš„é™æ€HTMLæ–‡ä»¶ä¼ é€åˆ°<code>/var/www/html/hexoblog</code>ä¸‹é¢æ‰è¡Œã€‚åˆ‡æ¢åˆ°è¿œç¨‹ä»“åº“hexoblog.gitç›®å½•ä¸‹é¢ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /home/git/hexoblog.git/hooks/</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå¹¶ç¼–è¾‘ä¸€ä¸ªæ–°çš„é’©å­æ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo touch post-receive</span><br><span class="line">sudo vim post-receive</span><br></pre></td></tr></table></figure><p>åœ¨å…¶ä¸­åŠ å…¥ä¸¤è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">git --work-tree=/var/www/html/hexoblog --git-dir=/home/git/hexoblog.git checkout -f</span><br></pre></td></tr></table></figure><p>èµ‹äºˆå¯æ‰§è¡Œæƒé™ç»™æ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod +x post-receive</span><br></pre></td></tr></table></figure><p>æœ€åä¸€å®šè¦ç¡®ä¿gitç”¨æˆ·æœ‰æƒé™æ“ä½œåšå®¢ç›®å½•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown git:git -R /var/www/html</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæ¯æ¬¡<code>hexo d</code>çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨åŒæ­¥æ–‡ä»¶åˆ°<code>/var/www/html/hexoblog/</code>åšå®¢ç›®å½•ä¸‹ã€‚æ­¤æ—¶ï¼Œè®¿é—®<code>www.ex2tron.top</code>ä¾¿å¯ä»¥æµè§ˆä½ çš„åšå®¢è¾£ï¼Œå½“ç„¶åˆ«å¿˜äº†å°†ä½ çš„åŸŸåè§£æåˆ°æœåŠ¡å™¨IPå™¢ï¼Œawesomeï¼</p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="/hexo-blog-with-github-pages-3/">Hexo+Github Pagesè½»æ¾æ­åšå®¢(3)ï¼šç»‘å®šç‹¬ç«‹åŸŸå</a></li><li><a href="https://www.cnblogs.com/scarecrowlxb/p/6218678.html" target="_blank" rel="noopener">apacheè§£æå¤šä¸ªåŸŸå</a></li></ul><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å°†åšå®¢æ”¾åœ¨Githubä¸Šæœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œæ¯”å¦‚å…è´¹ã€æ˜“ç®¡ç†ã€å…è´¹&lt;code&gt;xxx.github.io&lt;/code&gt;çš„åŸŸåç­‰ï¼Œä½†è®¿é—®é€Ÿåº¦å˜›ï¼Œå°±å¾ˆä¸€èˆ¬äº†ã€‚å¯¹äºå–œæ¬¢æŠ˜è…¾çš„ç«¥é‹ï¼Œå¦‚æœæœ‰ä¸€å°è‡ªå·±çš„æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥æŠŠåšå®¢éƒ¨ç½²åœ¨äº‘ä¸Šã€‚
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="Hexo" scheme="http://www.codec.wang/tags/Hexo/"/>
    
      <category term="Github" scheme="http://www.codec.wang/tags/Github/"/>
    
      <category term="é˜¿é‡Œäº‘" scheme="http://www.codec.wang/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"/>
    
  </entry>
  
  <entry>
    <title>Hexoè½»æ¾æ­åšå®¢(3)ï¼šç»‘å®šç‹¬ç«‹åŸŸå</title>
    <link href="http://www.codec.wang/hexo-blog-with-github-pages-3/"/>
    <id>http://www.codec.wang/hexo-blog-with-github-pages-3/</id>
    <published>2017-09-13T13:25:24.000Z</published>
    <updated>2020-04-17T11:03:34.117Z</updated>
    
    <content type="html"><![CDATA[<p>å«Œ<code>username.github.io</code>ä¸å¤Ÿé«˜å¤§ä¸Šï¼Ÿï¼Ÿé‚£å°±æ¥ä¸ªé«˜å¤§ä¸Šçš„ç‹¬ç«‹åŸŸåå§ã€‚<a id="more"></a></p><h2 id="è´­ä¹°åŸŸå"><a href="#è´­ä¹°åŸŸå" class="headerlink" title="è´­ä¹°åŸŸå"></a>è´­ä¹°åŸŸå</h2><p>åŸŸåå¯ä»¥å»å¾ˆå¤šåœ°æ–¹è´­ä¹°ï¼Œé.com/.cnçš„åŸŸåä¹Ÿæ¯”è¾ƒä¾¿å®œï¼Œæˆ‘è¿™é‡Œä»¥ä¸‡ç½‘ä¸ºä¾‹ï¼Œæ‰“å¼€<a href="https://wanwang.aliyun.com/" target="_blank" rel="noopener">ä¸‡ç½‘</a>ä¸»é¡µï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/hexo_wanwang_home_page.jpg_webp"><img class="image" src="http://blog.codec.wang/hexo_wanwang_home_page.jpg" alt=""></picture></p><p>æŸ¥æ‰¾ä½ æƒ³è´­ä¹°çš„åŸŸåï¼Œæ¯”å¦‚æˆ‘è´­ä¹°``ex2tron.top`è¿™ä¸ªåŸŸåã€‚.topåŸŸåçš„ä»·æ ¼è¿˜æ˜¯å¾ˆä¾¿å®œçš„ï¼Œåˆ’ç®—ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/hexo_wanwang_top_domain_price.png_webp"><img class="image" src="http://blog.codec.wang/hexo_wanwang_top_domain_price.png" alt=""></picture></p><p>è´­ä¹°éœ€è¦ç™»é™†é˜¿é‡Œäº‘çš„è´¦å·ã€‚è´­ä¹°æˆåŠŸåï¼ŒæŒ‰ç…§æç¤ºè¿›è¡Œå®åè®¤è¯å’Œæ‹ç…§å¤‡æ¡ˆï¼Œè®¤è¯è¿‡ç¨‹éœ€è¦å‡ å¤©ã€‚</p><h2 id="åŸŸåè§£æ"><a href="#åŸŸåè§£æ" class="headerlink" title="åŸŸåè§£æ"></a>åŸŸåè§£æ</h2><p>åŸŸåè®¤è¯å®Œæˆåï¼Œç™»é™†<a href="https://www.aliyun.com/" target="_blank" rel="noopener">é˜¿é‡Œäº‘æ§åˆ¶å°</a>ï¼Œåœ¨å·¦ä¾§å¯¼èˆªæ æ‰¾åˆ°â€åŸŸåä¸ç½‘ç«™ï¼ˆä¸‡ç½‘ï¼‰â€â€”â€”â€œäº‘è§£æDNSâ€ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/hexo_dns_domain_aliyun_navigation.jpg_webp"><img class="image" src="http://blog.codec.wang/hexo_dns_domain_aliyun_navigation.jpg" alt=""></picture></p><p>é€‰æ‹©ä½ çš„åŸŸåï¼Œç‚¹å‡»â€è§£æè®¾ç½®â€ï¼Œæˆ‘ä»¬æ·»åŠ ä¸‰æ¡è§£æï¼š</p><ul><li>è®°å½•ç±»å‹ï¼šCNAMEï¼Œä¸»æœºè®°å½•ï¼šwwwï¼Œè·¯çº¿ï¼šé»˜è®¤ï¼Œè®°å½•å€¼ï¼š<code>username.github.io</code></li><li>è®°å½•ç±»å‹ï¼šAï¼Œä¸»æœºè®°å½•ï¼š@ï¼Œè·¯çº¿ï¼šé»˜è®¤ï¼Œè®°å½•å€¼ï¼š<code>192.30.252.153</code></li><li>è®°å½•ç±»å‹ï¼šAï¼Œä¸»æœºè®°å½•ï¼š@ï¼Œè·¯çº¿ï¼šé»˜è®¤ï¼Œè®°å½•å€¼ï¼š<code>192.30.252.154</code></li></ul><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/hexo_add_new_dns_for_new_domain.jpg_webp"><img class="image" src="http://blog.codec.wang/hexo_add_new_dns_for_new_domain.jpg" alt=""></picture></p><p>ï¼ˆå›¾ä¸Šæ–‡å­—å°çš„è¯ï¼Œå¯ä»¥ç‚¹å‡»æŸ¥çœ‹å¤§å›¾ï¼‰</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/hexo_github_dns_domain_settings.jpg_webp"><img class="image" src="http://blog.codec.wang/hexo_github_dns_domain_settings.jpg" alt=""></picture></p><h2 id="ç»‘å®šåŸŸå"><a href="#ç»‘å®šåŸŸå" class="headerlink" title="ç»‘å®šåŸŸå"></a>ç»‘å®šåŸŸå</h2><p>è®¾ç½®å®Œæˆåï¼Œåœ¨æœ¬åœ°çš„hexoåšå®¢çš„sourceç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªåä¸ºCNAMEçš„æ–‡ä»¶ï¼ˆæ²¡æœ‰ä»»ä½•åç¼€ï¼‰ï¼Œç¼–è¾‘æ–‡ä»¶å†…å®¹ä¸ºä½ çš„åŸŸåï¼Œå¦‚<code>ex2tron.top</code>ã€‚è¿™é‡Œå¦‚æœåœ¨åŸŸåä¸ŠåŠ <code>www</code>çš„è¯ï¼Œè®¿é—®æ—¶ä¼šè·³è½¬åˆ°<code>www.ex2tron.top</code>ï¼Œä¸ºäº†ç®€æ´èµ·è§ï¼Œæˆ‘è¿™é‡Œå°±ä¸åŠ äº†ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/hexo_source_directory_cname_file.jpg_webp"><img class="image" src="http://blog.codec.wang/hexo_source_directory_cname_file.jpg" alt=""></picture></p><p>é…ç½®å®Œæˆåï¼Œé‡æ–°å‘å¸ƒåšå®¢å°±å¯ä»¥ç”¨ç‹¬ç«‹åŸŸå<a href="http://ex2tron.top" target="_blank" rel="noopener">ex2tron.top</a>æ¥è®¿é—®åšå®¢è¾£( â€¢Ì€ Ï‰ â€¢Ì )âœ§ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g -d</span><br></pre></td></tr></table></figure><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://blog.csdn.net/linshuhe1/article/details/73013730" target="_blank" rel="noopener">Hexoä¸ªäººå…è´¹åšå®¢(äº”) ä½¿ç”¨è‡ªå·±çš„åŸŸå</a></li></ul><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å«Œ&lt;code&gt;username.github.io&lt;/code&gt;ä¸å¤Ÿé«˜å¤§ä¸Šï¼Ÿï¼Ÿé‚£å°±æ¥ä¸ªé«˜å¤§ä¸Šçš„ç‹¬ç«‹åŸŸåå§ã€‚
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="Hexo" scheme="http://www.codec.wang/tags/Hexo/"/>
    
      <category term="Github" scheme="http://www.codec.wang/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>Hexoè½»æ¾æ­åšå®¢(2)ï¼šåœ¨Githubä¸Šéƒ¨ç½²</title>
    <link href="http://www.codec.wang/hexo-blog-with-github-pages-2/"/>
    <id>http://www.codec.wang/hexo-blog-with-github-pages-2/</id>
    <published>2017-09-13T12:15:47.000Z</published>
    <updated>2020-04-17T11:03:58.102Z</updated>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨å…è´¹çš„Github PagesæœåŠ¡æˆ–è€…éƒ¨ç½²åœ¨è‡ªå·±æœåŠ¡å™¨ä¸Šï¼Œåˆ«äººå°±å¯ä»¥è®¿é—®ä½ çš„åšå®¢å•¦ï¼<a id="more"></a></p><hr><h2 id="å…³è”Github"><a href="#å…³è”Github" class="headerlink" title="å…³è”Github"></a>å…³è”Github</h2><p>é¦–å…ˆç™»é™†<a href="https://github.com/" target="_blank" rel="noopener">Github</a>ï¼Œæ²¡æœ‰è´¦å·çš„è¯ï¼Œå…ˆæ³¨å†Œä¸€ä¸ªã€‚æ–°å»ºä¸€ä¸ªåä¸º<code>username.github.io</code>çš„ä»“åº“ï¼Œ<strong>usernameå¿…é¡»ä¸ä½ çš„è´¦æˆ·åç›¸åŒ</strong>ï¼Œæ¯”å¦‚æˆ‘çš„å°±æ˜¯<code>ex2tron.github.io</code>ï¼Œè¿™å°±æ˜¯ä½ åšå®¢çš„åŸŸååœ°å€äº†ï¼ˆç»‘å®šç‹¬ç«‹åŸŸåä¹‹åå†è¯´ï¼‰ã€‚<strong>æ–°å»ºæ—¶æ³¨æ„å‹¾é€‰â€<em>Initialize this repository with a README</em>â€œ</strong>ï¼Œå› ä¸ºè¿™ä¸ªä»“åº“å¿…é¡»ä¸èƒ½ä¸ºç©ºã€‚</p><blockquote><p>å¦‚æœä½ æ˜¯gitæ–°ç”¨æˆ·çš„è¯ï¼Œæ¨èçœ‹ï¼š<a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001374385852170d9c7adf13c30429b9660d0eb689dd43a000" target="_blank" rel="noopener">å»–é›ªå³°çš„Gitæ•™ç¨‹-è¿œç¨‹ä»“åº“</a></p></blockquote><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/create_github_pages_repository.png_webp"><img class="image" src="http://blog.codec.wang/create_github_pages_repository.png" alt="æ–°å»ºGithub Pagesä»“åº“"></picture></p><p>æ¥ä¸‹æ¥æ‰“å¼€åšå®¢ç›®å½•ä¸‹çš„_config.ymlé…ç½®æ–‡ä»¶ï¼Œå®šä½åˆ°æœ€åçš„deployé€‰é¡¹ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">git@github.com:ex2tron/ex2tron.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„å†’å·åé¢æœ‰ä¸ªç©ºæ ¼</strong>ï¼Œä¸ç„¶ä¼šå‡ºé”™æ»´<del>~</del>é…ç½®å¥½ä¹‹åï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥éƒ¨ç½²åˆ°Githubä¸Šäº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ hexo g</span><br><span class="line">$ hexo d</span><br></pre></td></tr></table></figure><p>è¿™æ ·é€šè¿‡Githubæä¾›çš„åŸŸååœ°å€ï¼ˆå¦‚æˆ‘çš„ï¼š<a href="https://ex2tron.github.io" target="_blank" rel="noopener">https://ex2tron.github.io</a>ï¼‰å°±å¯ä»¥è®¿é—®ä½ çš„åšå®¢äº†ï¼Œç®€å•å¿«é€Ÿé«˜æ•ˆï¼</p><h2 id="å‘å¸ƒæ–°åšå®¢"><a href="#å‘å¸ƒæ–°åšå®¢" class="headerlink" title="å‘å¸ƒæ–°åšå®¢"></a>å‘å¸ƒæ–°åšå®¢</h2><p>åšå®¢æ­å»ºèµ·æ¥ä¹‹åï¼Œå°±å¯ä»¥ç”¨Markdownå†™åšå®¢è¾£ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œåˆ›å»ºæ–°åšå®¢ï¼ˆå¦‚åä¸ºï¼šæˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">'æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢'</span></span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤ä¼šåœ¨åšå®¢ç›®å½•<code>\source\_posts\</code>ä¸‹ç”Ÿæˆâ€œæˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢.mdâ€æ–‡ä»¶ï¼Œè¿™å°±æ˜¯ä½ çš„åšå®¢æºæ–‡ä»¶å•¦ï¼Œæ–‡ä»¶å¼€å¤´å¦‚ä¸‹ï¼Œè®°å¾—å†’å·åé¢æœ‰ç©ºæ ¼å™¢ï¼Œä¸ç„¶ä¼šå‡ºé”™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢</span><br><span class="line">date: 2017-09-13 20:15:47</span><br><span class="line">tags: #æ–‡ç« æ ‡ç­¾ï¼Œæ ¼å¼ï¼š[1,2,3]</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>ä¸ç†Ÿæ‚‰Markdownè¯­æ³•çš„å¯ä»¥çœ‹ï¼š<a href="http://www.appinn.com/markdown/" target="_blank" rel="noopener">Markdown è¯­æ³•è¯´æ˜</a>ã€‚å†™å®Œä¹‹åä¾ç„¶ä½¿ç”¨ä¹‹å‰çš„ä¸‰æ¡å‘½ä»¤å‘å¸ƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ hexo g</span><br><span class="line">$ hexo d</span><br></pre></td></tr></table></figure><p>åé¢ä¸¤æ¡æŒ‡ä»¤ä¹Ÿå¯ä»¥ç®€åŒ–ä¸ºä¸€æ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g -d</span><br></pre></td></tr></table></figure><h2 id="å¸¸å‡ºç°çš„é—®é¢˜"><a href="#å¸¸å‡ºç°çš„é—®é¢˜" class="headerlink" title="å¸¸å‡ºç°çš„é—®é¢˜"></a>å¸¸å‡ºç°çš„é—®é¢˜</h2><ol><li><p>åœ¨hexo dè¿›è¡Œéƒ¨ç½²æ—¶ï¼Œå¦‚æœå‡ºç°<code>ERROR Deployer not found: git</code>çš„é—®é¢˜ï¼Œå¯ä»¥å…ˆç”¨ä¸‹é¢çš„å‘½ä»¤ä¿®å¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœä½ æ²¡é…ç½®è¿‡sshå¯¼è‡´éƒ¨ç½²å¤±è´¥ï¼ˆå¯ä»¥é€šè¿‡<code>ssh -T username@example.com</code>æ¥æµ‹è¯•sshæœ‰æ— é…ç½®æˆåŠŸï¼‰ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="http://www.cnblogs.com/xsilence/p/6001938.html" target="_blank" rel="noopener">é’ˆå¯¹githubæƒé™å¯¼è‡´hexoéƒ¨ç½²å¤±è´¥çš„è§£å†³æ–¹æ¡ˆ</a></p></li></ol><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä½¿ç”¨å…è´¹çš„Github PagesæœåŠ¡æˆ–è€…éƒ¨ç½²åœ¨è‡ªå·±æœåŠ¡å™¨ä¸Šï¼Œåˆ«äººå°±å¯ä»¥è®¿é—®ä½ çš„åšå®¢å•¦ï¼
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="Hexo" scheme="http://www.codec.wang/tags/Hexo/"/>
    
      <category term="Github" scheme="http://www.codec.wang/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>Hexoè½»æ¾æ­åšå®¢(1)ï¼šå®‰è£…Hexo</title>
    <link href="http://www.codec.wang/hexo-blog-with-github-pages-1/"/>
    <id>http://www.codec.wang/hexo-blog-with-github-pages-1/</id>
    <published>2017-09-13T08:07:06.000Z</published>
    <updated>2020-04-17T11:04:09.675Z</updated>
    
    <content type="html"><![CDATA[<p>æƒ³ç”¨Github Pagesè½»æ¾æ­å»ºè‡ªå·±çš„åšå®¢ï¼Œç”¨Hexoï¼Œ10åˆ†é’Ÿï¼<a id="more"></a></p><blockquote><p>åºŸè¯åŒºåŸŸï¼šæˆ‘åœ¨æ¥è§¦Hexoï¼ˆå¯ä»¥è¯»ä½œHack Soï¼‰ä¹‹å‰ï¼Œç»å¯¹æ²¡å°‘å°è¯•å»ºç«‹ä¸€ä¸ªå®Œå…¨è‡ªç”±ã€è‡ªå·±è¯´äº†ç®—çš„ç‹¬ç«‹åšå®¢ï¼šWordPresså®šä½é‡é‡çº§ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œç”Ÿæˆçš„æ˜¯åŠ¨æ€ç½‘ç«™ï¼Œä¾èµ–æ•°æ®åº“â€¦â€¦å¤ªç¹çäº†ï¼Œæ”¾å¼ƒ<del>è€ŒJekyllå’ŒHexoéƒ½æ˜¯é™æ€å»ºç«™å·¥å…·ï¼Œä½†Jekyllçš„ä¾èµ–é¡¹ä¹Ÿå¾ˆå¤šï¼Œä¹Ÿä¸ç®€çº¦ï¼Œä¸æƒ³ç”¨</del>æœ€åæ‰æ˜¯åæ°”ç›¸å¯¹ä¸é«˜çš„Hexoï¼Œç›¸ä¿¡æˆ‘ï¼Œç†Ÿç»ƒçš„æƒ…å†µä¸‹ï¼Œ10åˆ†é’Ÿå°±å¯ä»¥æ­å‡ºæ¥ã€‚</p></blockquote><hr><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>æ˜¯ä¸€ä¸ªå…è´¹çš„é™æ€Blogç”Ÿæˆå·¥å…·ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æŠŠä½ å†™çš„Markdownåšå®¢æ–‡ä»¶ç”Ÿæˆé™æ€ç½‘é¡µï¼ŒæŠŠè¿™ä¸ªç½‘é¡µæ”¾åœ¨Githubæˆ–è€…ä½ è‡ªå·±çš„æœåŠ¡å™¨ä¸Šå°±å¯ä»¥å¿«é€Ÿè®¿é—®äº†ã€‚è½¯ä»¶ç•Œï¼Œä»æ¥ä¸ç¼ºè‡ªåŠ¨åŒ–å·¥å…·(à¸‡ â€¢_â€¢)à¸‡</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>å®˜ç½‘æ–‡æ¡£ï¼š<a href="https://hexo.io/docs/" target="_blank" rel="noopener">Hexo Docs</a></p><p>Hexoå®‰è£…å‰ï¼Œä½ çš„ç”µè„‘ä¸Šéœ€è¦å…ˆæœ‰ä¸‹é¢è¿™ä¸¤ä¸ªä¸œè¥¿ï¼š</p><ul><li><a href="https://nodejs.org/" target="_blank" rel="noopener">Node.js</a></li><li><a href="https://git-scm.com/" target="_blank" rel="noopener">Git</a></li></ul><p>å¦‚æœå·²ç»å®‰è£…äº†çš„è¯ï¼Œå‘½ä»¤è¡Œä¸‹ä¸€å¥è¯å°±å¥½å•¦ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure><h2 id="åˆå§‹åŒ–åšå®¢ç›®å½•"><a href="#åˆå§‹åŒ–åšå®¢ç›®å½•" class="headerlink" title="åˆå§‹åŒ–åšå®¢ç›®å½•"></a>åˆå§‹åŒ–åšå®¢ç›®å½•</h2><p>åœ¨ä½ çš„æœ¬åœ°æ–°å»ºä¸€ä¸ªå­˜æ”¾åšå®¢çš„ç›®å½•ï¼Œæ¯”å¦‚â€<em>D:\MyHexoBlog</em>â€œï¼Œç„¶ååœ¨è¿™ä¸ªç›®å½•å³é”®ï¼Œé€‰æ‹©â€<em>Git Bash Here</em>â€œï¼Œè¾“å…¥ä¸‹é¢ä¸¤æ¡å‘½ä»¤è¿›è¡Œåˆå§‹åŒ–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–å®Œæˆä¹‹åï¼Œä½ çš„ç›®å½•ç»“æ„åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ _config.yml</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ scaffolds</span><br><span class="line">â”œâ”€â”€ source</span><br><span class="line">|   â”œâ”€â”€ _drafts</span><br><span class="line">|   â””â”€â”€ _posts</span><br><span class="line">â””â”€â”€ themes</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰å‡ºé”™çš„è¯ï¼Œç»§ç»­æ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤å¯åŠ¨æœåŠ¡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g </span><br><span class="line">$ hexo s</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ä¹‹åï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š<a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a>ï¼Œæ˜¯ä¸æ˜¯çœ‹åˆ°äº†æ¼‚äº®çš„Hexoåšå®¢é¡µé¢äº†ã€‚ä¸è¿‡ç›®å‰è¿™ä¸ªåšå®¢è¿˜æ˜¯è¿è¡Œåœ¨ä½ æœ¬æœºä¸Šçš„ï¼Œä¸‹ç¯‡æˆ‘ä»¬çœ‹ä¸€ä¸‹æ€ä¹ˆæ ·è®©åˆ«äººä¹Ÿèƒ½è®¿é—®è¿™ä¸ªåšå®¢ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/default_hexo_theme.png_webp"><img class="image" src="http://blog.codec.wang/default_hexo_theme.png" alt="default_hexo_index"></picture></p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://hexo.io/docs/" target="_blank" rel="noopener">Hexo Docs</a></li><li><a href="http://blog.csdn.net/cl534854121/article/details/76121066" target="_blank" rel="noopener">Hexo+Githubæ­å»ºä¸ªäººåšå®¢(ä¸€)â€”â€”å¼€å§‹æ­å»º</a></li></ul><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æƒ³ç”¨Github Pagesè½»æ¾æ­å»ºè‡ªå·±çš„åšå®¢ï¼Œç”¨Hexoï¼Œ10åˆ†é’Ÿï¼
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="Hexo" scheme="http://www.codec.wang/tags/Hexo/"/>
    
      <category term="Github" scheme="http://www.codec.wang/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>ã€åˆ©å™¨ã€‘ç”¨VS Codeå†™Markdown</title>
    <link href="http://www.codec.wang/tools-markdown-in-vscode/"/>
    <id>http://www.codec.wang/tools-markdown-in-vscode/</id>
    <published>2017-09-11T07:11:22.000Z</published>
    <updated>2020-04-07T03:49:58.806Z</updated>
    
    <content type="html"><![CDATA[<p>Markdownä»¥å…¶ç®€æ´ã€ä¼˜é›…æ•´é½çš„é£æ ¼ï¼Œæˆä¸ºç›®å‰éå¸¸æµè¡Œçš„åšå®¢æ–‡ä»¶æ ¼å¼ã€‚ç”šè‡³æœ‰äººè¯´ï¼šæ¯ä¸ªäººéƒ½åº”è¯¥ç”¨Markdownå†™åšå®¢<a id="more"></a>ã€‚å…³äºMarkdownç›¸è¾ƒå¯Œæ–‡æœ¬çš„ä¼˜åŠ¿ï¼Œæˆ‘å°±ä¸ç»†è¯´äº†ã€‚</p><hr><h2 id="Markdownç¼–è¾‘å™¨"><a href="#Markdownç¼–è¾‘å™¨" class="headerlink" title="Markdownç¼–è¾‘å™¨"></a>Markdownç¼–è¾‘å™¨</h2><p>æ”¯æŒMarkdownçš„å·¥å…·æœ‰å¾ˆå¤šï¼Œå¤§å®¶å¯ä»¥å‚è€ƒç½‘ä¸Šï¼Œå¦‚è¿™ç¯‡æ–‡ç« ï¼š<a href="https://sspai.com/post/32483" target="_blank" rel="noopener">ç å­—å¿…å¤‡ï¼š18 æ¬¾ä¼˜ç§€çš„ Markdown å†™ä½œå·¥å…· | 2015 å¹´åº¦ç›˜ç‚¹</a>ã€‚å°±æˆ‘è‡ªå·±ç›®å‰åœ¨Windowsä¸Šä½¿ç”¨çš„è€Œè¨€æœ‰ï¼š<a href="http://www.jianshu.com/" target="_blank" rel="noopener">ç®€ä¹¦</a>ã€<a href="http://note.youdao.com/" target="_blank" rel="noopener">æœ‰é“äº‘ç¬”è®°</a>ã€<a href="https://www.typora.io/#windows" target="_blank" rel="noopener">Typora</a>ã€<a href="https://code.visualstudio.com" target="_blank" rel="noopener">VSCode</a></p><p>ç®€ä¹¦æœ¬èº«å°±æ˜¯ä¸€ä¸ªåšå®¢å¹³å°ï¼Œæœ‰é“äº‘ç¬”è®°æ˜¯ç±»ä¼¼OneNoteå’Œå°è±¡ç¬”è¿¹çš„åº”ç”¨ã€‚å¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨è¿™ä¸¤ä¸ªå¹³å°çš„è¯ï¼Œå°±ä¸ç”¨å¤šè¯´äº†ã€‚ä½†å¦‚æœåªæ˜¯æƒ³ç”¨ä¸€ä¸ªå•çº¯çš„Markdownç¼–è¾‘å™¨çš„è¯ï¼Œæ¨èæè‡´ç®€æ´çš„Typoraã€‚è™½è¯´ç•Œé¢ç®€æ´ï¼Œä½†åŠŸèƒ½å¼ºå¤§ï¼Œä¸ä»…å†…ç½®äº†å¸¸è§çš„ä¸€äº›Markdownæ ·å¼ï¼Œè¿˜æ”¯æŒPDF/HTMLç­‰å¤šç§æ ¼å¼å¯¼å‡ºï¼Œæˆ‘å¸¸ç”¨çš„å°±æ˜¯Typoraï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/markdown_in_typora.png_webp"><img class="image" src="http://blog.codec.wang/markdown_in_typora.png" alt=""></picture></p><p>ä½ æ˜¯ä¸€æšæ–‡é’çš„è¯ï¼Œåƒä¸‡ä¸è¦é”™è¿‡è¿™æ¬¾ç¼–è¾‘å™¨ã€‚ä¸è¿‡ï¼Œå¯¹äºç¨‹åºçŒ¿æ¥è¯´ï¼ŒVSCodeæ‰æ˜¾å¾—æ›´æœ‰å‘³é“ã€‚</p><h2 id="ç”¨VSCodeå†™Markdown"><a href="#ç”¨VSCodeå†™Markdown" class="headerlink" title="ç”¨VSCodeå†™Markdown"></a>ç”¨VSCodeå†™Markdown</h2><p>VSCodeæ˜¯ç›®å‰å¾ˆç«çš„ä¸€æ¬¾ç¼–è¾‘å™¨ï¼Œå°±ä¸è¿‡å¤šä»‹ç»äº†ã€‚ç°åœ¨ç‰ˆæœ¬çš„VSCodeé»˜è®¤å·²ç»æ”¯æŒMarkdowné¢„è§ˆï¼Œæ— éœ€ä¸‹è½½æ’ä»¶ã€‚ç”¨VSCodeæ‰“å¼€mdæ–‡ä»¶æˆ–å°†å½“å‰æ–‡ä»¶æ›´æ”¹ä¸ºMarkdownæ ¼å¼å°±å¯ä»¥å¼€å§‹ä¹¦å†™äº†ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/markdown_in_vscode.png_webp"><img class="image" src="http://blog.codec.wang/markdown_in_vscode.png" alt=""></picture></p><p>VSCodeæ”¯æŒä¸¤ç§é¢„è§ˆæ–¹å¼ï¼š</p><ul><li>æŒ‰ä¸‹<code>Ctrl+K V</code>ï¼Œåƒä¸Šå›¾ä¸€æ ·å·¦å³åŒæ­¥å®æ—¶é¢„è§ˆ</li><li>æŒ‰ä¸‹<code>Ctrl+Shift+V</code>ï¼Œåªé¢„è§ˆæœ€ç»ˆæ¸²æŸ“ç»“æœ</li></ul><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/editor_preview_Synchronization.gif_webp"><img class="image" src="http://blog.codec.wang/editor_preview_Synchronization.gif" alt=""></picture></p><p>å¦‚ä¸Šå›¾ï¼Œç¼–å†™å’Œé¢„è§ˆç•Œé¢æ˜¯å®æ—¶åŒæ­¥çš„ï¼Œä¸éœ€è¦çš„è¯ï¼Œå¯ä»¥æŒ‰ä¸‹<code>Ctrl+,</code>ç»„åˆé”®ï¼Œæ·»åŠ å¦‚ä¸‹ä¸¤æ¡è®¾ç½®ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">"markdown.preview.scrollEditorWithPreview": false,</span><br><span class="line">"markdown.preview.scrollPreviewWithEditorSelection": false</span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œç›®å‰VSCodeé¢„è§ˆæ ·å¼ä¸­ï¼Œä¸­æ–‡çš„æ˜¾ç¤ºå¾ˆåˆ«æ‰­ã€‚æ‰€ä»¥å¯ä»¥ä¸‹è½½ç¬¬ä¸‰æ–¹çš„CSSæ ·å¼ï¼Œè¿™é‡Œæ¨è<a href="https://github.com/ex2tron/BlogCode/blob/master/markdown-github.css" target="_blank" rel="noopener">Githubé£æ ¼çš„CSS</a></p><p>ä¸‹è½½å®Œæˆåï¼Œé…ç½®CSSæ–‡ä»¶çš„è®¾ç½®å¦‚ä¸‹å³å¯ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"markdown.styles": [</span><br><span class="line">    <span class="string">"file:///D:/markdown-github.css"</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼ŒVSCodeä¸­æœ‰å¾ˆå¤šMarkdownç›¸å…³çš„æ’ä»¶ï¼Œå¦‚<code>Markdown All in One</code>å’Œ<code>Markdown Theme Kit</code>ç­‰ï¼Œå¤§å®¶å¯ä»¥ä¸‹è½½ä¸‹æ¥å°è¯•ä¸€ä¸‹å“ˆï¼</p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><p><a href="https://code.visualstudio.com/docs/languages/markdown" target="_blank" rel="noopener">Markdown editing with Visual Studio Code</a></p><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Markdownä»¥å…¶ç®€æ´ã€ä¼˜é›…æ•´é½çš„é£æ ¼ï¼Œæˆä¸ºç›®å‰éå¸¸æµè¡Œçš„åšå®¢æ–‡ä»¶æ ¼å¼ã€‚ç”šè‡³æœ‰äººè¯´ï¼šæ¯ä¸ªäººéƒ½åº”è¯¥ç”¨Markdownå†™åšå®¢
    
    </summary>
    
    
      <category term="åˆ©å™¨ç¯‡" scheme="http://www.codec.wang/categories/%E5%88%A9%E5%99%A8%E7%AF%87/"/>
    
    
      <category term="Markdown" scheme="http://www.codec.wang/tags/Markdown/"/>
    
      <category term="VSCode" scheme="http://www.codec.wang/tags/VSCode/"/>
    
  </entry>
  
  <entry>
    <title>ã€åˆ©å™¨ã€‘MyCLIï¼šè‡ªåŠ¨è¡¥å…¨å’Œè¯­æ³•é«˜äº®çš„MySQLå‘½ä»¤è¡Œå·¥å…·</title>
    <link href="http://www.codec.wang/tools-mycli/"/>
    <id>http://www.codec.wang/tools-mycli/</id>
    <published>2017-09-11T06:32:14.000Z</published>
    <updated>2020-04-07T03:51:13.241Z</updated>
    
    <content type="html"><![CDATA[<p>mycliæ˜¯MySQLå‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒå…³é”®å­—è¯­æ³•é«˜äº®å’Œè‡ªåŠ¨è¡¥å…¨ï¼Œçœ‹ä¸Šé¢çš„åŠ¨å›¾ä½ å°±çŸ¥é“äº†ã€‚<a id="more"></a></p><hr><p>mycliä¸ä»…èƒ½åœ¨å‘½ä»¤è¡Œä¸­æç¤ºMySQLçš„å…³é”®å­—ï¼Œæ›´ç‰›æ°çš„æ˜¯æ•°æ®åº“åã€è¡¨åã€å­—æ®µåéƒ½å¯ä»¥æç¤ºï¼Œéå¸¸æ–¹ä¾¿ã€‚å¦‚æœä½ ç»å¸¸åœ¨å‘½ä»¤è¡Œé‡Œç MySQLå‘½ä»¤ï¼Œç›¸ä¿¡è¿™æ¬¾å·¥å…·ä¸€å®šä¼šè®©ä½ æ»¡æ„ã€‚</p><ul><li>å®˜ç½‘ï¼š<a href="http://www.mycli.net/" target="_blank" rel="noopener">MyCLI</a></li></ul><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>å…¶å®mycliæ˜¯ä¸€ä¸ªPythonçš„åŒ…ï¼Œæ‰€ä»¥ä½ å·²ç»å®‰è£…äº†Python(pip)çš„è¯ï¼Œç”¨ä¸‹é¢ä¸€æ¡æŒ‡ä»¤å°±å¥½äº†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install mycli</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡ºç°é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒ<a href="http://www.mycli.net/" target="_blank" rel="noopener">å®˜ç½‘</a>ï¼Œæœ‰è¯¦ç»†çš„è¯´æ˜ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/install_mycli.png_webp"><img class="image" src="http://blog.codec.wang/install_mycli.png" alt=""></picture></p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>å®‰è£…å¥½ä¹‹åï¼Œåœ¨å‘½ä»¤è¡Œä¸‹ï¼Œå°†ä»¥å¾€ç™»é™†MySQLç”¨çš„mysqlæ¢æˆmycliï¼Œä¸ç”¨åŠ <code>-p</code>é€‰é¡¹å°±å¯ä»¥äº†ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/login_with_mycli.png_webp"><img class="image" src="http://blog.codec.wang/login_with_mycli.png" alt=""></picture></p><p>å¥½äº†ï¼Œå¤§å®¶è§‰å¾—å¥½ç”¨çš„è¯ï¼Œæ¬¢è¿æ‰©æ•£å™¢ï¼</p><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;mycliæ˜¯MySQLå‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒå…³é”®å­—è¯­æ³•é«˜äº®å’Œè‡ªåŠ¨è¡¥å…¨ï¼Œçœ‹ä¸Šé¢çš„åŠ¨å›¾ä½ å°±çŸ¥é“äº†ã€‚
    
    </summary>
    
    
      <category term="åˆ©å™¨ç¯‡" scheme="http://www.codec.wang/categories/%E5%88%A9%E5%99%A8%E7%AF%87/"/>
    
    
      <category term="MyCLI" scheme="http://www.codec.wang/tags/MyCLI/"/>
    
      <category term="MySQL" scheme="http://www.codec.wang/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>ã€MySQLã€‘ä¸»ä»æœåŠ¡å™¨åŒæ­¥</title>
    <link href="http://www.codec.wang/mysql-master-slave/"/>
    <id>http://www.codec.wang/mysql-master-slave/</id>
    <published>2017-07-29T08:20:15.000Z</published>
    <updated>2020-05-14T07:58:03.307Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨è¿›å…¥æ­£é¢˜ä¹‹å‰ï¼Œå…ˆæ¥çœ‹ä¸‹ç†è®ºçŸ¥è¯†ï¼š<a id="more"></a></p><p>å¤šå°æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œæ˜¯æ„å»ºå¤§å‹åº”ç”¨ç¨‹åºçš„åŸºç¡€ã€‚è¿™æ ·åšæœ‰ç€å¾ˆå¤šä¼˜åŠ¿ï¼Œæ¯”å¦‚ï¼š</p><ul><li>åœ¨ä»æœåŠ¡å™¨ä¸Šè¿›è¡Œæ•°æ®å¤‡ä»½ï¼Œç¡®ä¿æ•°æ®å®‰å…¨ï¼›</li><li>ä¸»æœåŠ¡å™¨å‡ºç°é—®é¢˜æ—¶ï¼Œåˆ‡æ¢åˆ°ä»æœåŠ¡å™¨ï¼›</li><li>åœ¨ä»æœåŠ¡å™¨ä¸Šæ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼Œé™ä½ä¸»æœåŠ¡å™¨çš„å‹åŠ›ç­‰ç­‰ã€‚</li></ul><h2 id="ä¸»ä»åŒæ­¥ç®€è¦åŸç†"><a href="#ä¸»ä»åŒæ­¥ç®€è¦åŸç†" class="headerlink" title="ä¸»ä»åŒæ­¥ç®€è¦åŸç†"></a>ä¸»ä»åŒæ­¥ç®€è¦åŸç†</h2><p>MySQLä¸»ä»åŒæ­¥æ˜¯é€šè¿‡äºŒè¿›åˆ¶æ—¥å¿—æ¥å®ç°çš„ã€‚å…·ä½“æ¥è¯´ï¼Œä¸»æœºä¼šå°†æ•°æ®æ›´æ”¹æ“ä½œéƒ½è®°å½•åœ¨äºŒè¿›åˆ¶æ—¥å¿—ä¸­ ã€‚ç„¶åï¼Œä»æœº ä¼šæ¯éš”ä¸€å®šæ—¶é—´æ£€æµ‹è¿™ä¸ªä¸»æœºäºŒè¿›åˆ¶æ–‡ä»¶çš„å˜åŒ–ï¼Œå¦‚æœ‰æ›´æ–°ï¼Œä»æœºå°±ä¼šæ›´æ–°æ—¥å¿—ä¸­æœ€æ–°çš„ä¸€æ¡ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/understand-mysql-master-slave.jpg_webp"><img class="image" src="http://blog.codec.wang/understand-mysql-master-slave.jpg" alt=""></picture></p><h2 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h2><p>æˆ‘ä¸¤å°ç”µè„‘çš„ç³»ç»Ÿé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸»æœº/masterï¼š</span></span><br><span class="line">Windows 10/WAMP 3.0.6/MySQL 5.7.14/IPï¼š192.168.1.102</span><br><span class="line"><span class="comment"># ä»æœº/slaveï¼š</span></span><br><span class="line">Ubuntu 16.04/LAMP/MySQL 5.7.19/IPï¼š192.168.1.112</span><br></pre></td></tr></table></figure><p>ä¸»ä»æœºçš„MySQLç‰ˆæœ¬å’Œç³»ç»Ÿæ—¶é—´è¦å°½é‡ä¿æŒä¸€è‡´ï¼Œä¸ä¸€è‡´çš„è¯ï¼Œä¸»æœºç‰ˆæœ¬è¦ä½äºä»æœºç‰ˆæœ¬ã€‚</p><h3 id="ä¸»æœºé…ç½®"><a href="#ä¸»æœºé…ç½®" class="headerlink" title="ä¸»æœºé…ç½®"></a>ä¸»æœºé…ç½®</h3><p>åˆ›å»ºä¸€ä¸ªåŒæ­¥è´¦å·ï¼Œå¹¶èµ‹äºˆ<code>replication slave</code>çš„æƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grant replication slave on *.* to <span class="string">'rep_slave'</span>@<span class="string">'192.168.1.%'</span> identified by <span class="string">'repslavepwd'</span>;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>æ›´æ”¹ä¸»æœº<code>my.ini</code>é…ç½®æ–‡ä»¶ï¼š</p><p>å› ä¸ºæˆ‘çš„ä¸»æœºæ˜¯Windowsç³»ç»Ÿ+WAMPç¯å¢ƒï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹<code>my.ini</code>é…ç½®æ–‡ä»¶ï¼Œæˆ‘çš„è·¯å¾„æ˜¯ï¼š<code>D:\wamp64\bin\mysql\mysql5.7.14\my.ini</code>ã€‚æ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°<code>[mysqld]</code>é…ç½®èŠ‚ç‚¹ï¼Œæ·»åŠ å¦‚ä¸‹ä¸¤é¡¹é…ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">; æ•°æ®åº“å”¯ä¸€IDï¼Œä¸»ä»æœºä¸èƒ½é‡å¤</span><br><span class="line">server-id = 1</span><br><span class="line">; æŒ‡å®šäºŒè¿›åˆ¶æ—¥å¿—å­˜æ”¾è·¯å¾„ï¼Œåªæœ‰æ–‡ä»¶åçš„è¯ï¼Œé»˜è®¤å­˜æ”¾åœ¨mysqlçš„dataç›®å½•ä¸‹</span><br><span class="line"><span class="built_in">log</span>-bin = mysql-bin</span><br></pre></td></tr></table></figure><p>é™¤å»ä¸Šé¢ä¸¤å¿…å¤‡é¡¹ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ‹“å±•å¯é€‰é…ç½®ï¼Œå¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">; ä»¥ä¸‹ä¸ºå¯é€‰é…ç½®é¡¹</span><br><span class="line">; éœ€è¦åŒæ­¥çš„æ•°æ®åº“åï¼Œå¦‚æœæœ‰å¤šä¸ªï¼ŒæŒ‰æ­¤æ ¼å¼å¤šå†™å‡ è¡Œå³å¯ï¼Œä¸æŒ‡å®šçš„è¯ï¼Œé»˜è®¤å…¨éƒ¨åŒæ­¥</span><br><span class="line">; binlog-do-db = database</span><br><span class="line">; ä¸éœ€è¦å¤‡ä»½çš„æ•°æ®åº“å</span><br><span class="line">; binlog-ignore-db = database</span><br></pre></td></tr></table></figure><p>é‡å¯MySQLæœåŠ¡ï¼š</p><p>å¯¹äºWAMPï¼Œå¯ä»¥åœ¨å³ä¸‹è§’å·¦é”®å•å‡»ï¼Œé€‰æ‹©MySQLé‡å¯ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/mysql-master-slave-lamp-restart.jpg_webp"><img class="image" src="http://blog.codec.wang/mysql-master-slave-lamp-restart.jpg" alt=""></picture></p><p>ä¹Ÿå¯ä»¥ç”¨å‘½ä»¤è¡Œé‡å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; net stop wampmysqld64</span><br><span class="line">&gt; net start wampmysqld64</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ä¸»æœºçŠ¶æ€ï¼š</p><p>å¾—åˆ°log-binæ—¥å¿—çš„æ–‡ä»¶åå’Œåç§»é‡ï¼Œè¿™ä¸¤ä¸ªå€¼åœ¨åé¢ä»æœºé…ç½®ä¸­ä¼šç”¨åˆ°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; show master status;</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/mysql-ms-show-master-status.jpg_webp"><img class="image" src="http://blog.codec.wang/mysql-ms-show-master-status.jpg" alt=""></picture></p><h3 id="ä»æœºé…ç½®"><a href="#ä»æœºé…ç½®" class="headerlink" title="ä»æœºé…ç½®"></a>ä»æœºé…ç½®</h3><p>ä¿®æ”¹<code>my.cnf</code>é…ç½®æ–‡ä»¶ã€‚æˆ‘çš„ä»æœºæ˜¯Ubuntuç³»ç»Ÿ+LAMPç¯å¢ƒï¼Œé»˜è®¤çš„å®Œæ•´é…ç½®æ–‡ä»¶æ˜¯: <code>/etc/mysql/mysql.conf.d/mysqld.cnf</code>ï¼Œå¹¶ä¸”æ˜¯åªè¯»æ–‡ä»¶ï¼Œæ‰€ä»¥å¯ä»¥å°†è¿™ä¸ªæ–‡ä»¶æ‹·è´ä¸€ä»½ï¼Œç„¶åä¿®æ”¹æ­¤æ–‡ä»¶ã€‚åŒæ ·æ‰¾åˆ°<code>[mysqld]</code>é…ç½®èŠ‚ç‚¹ï¼Œæ·»åŠ <code>server-id</code>çš„é…ç½®é¡¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"><span class="comment"># æ•°æ®åº“å”¯ä¸€IDï¼Œä¸»ä»æœºä¸èƒ½é‡å¤</span></span><br><span class="line">server-id = 2</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå°†æ­¤æ–‡ä»¶æ‹·è´åˆ°<code>/etc/mysql</code>ä¸‹ï¼Œå¹¶å‘½åä¸º<code>my.cnf</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo cp /home/ex2tron/Desktop/mysqld.cnf /etc/mysql/my.cnf</span><br></pre></td></tr></table></figure><p>é‡å¯mysqlæœåŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo service mysql restart</span><br></pre></td></tr></table></figure><p>é…ç½®åŒæ­¥ä¿¡æ¯ï¼š</p><p>è¿™é‡Œéœ€è¦ä¸»æœºçš„ç›¸å…³ä¿¡æ¯ï¼Œç”¨æˆ·åå’Œå¯†ç å°±æ˜¯ä¹‹å‰ä¸»æœºä¸Šæˆæƒçš„é‚£ä¸ªç”¨æˆ·åå¯†ç ï¼Œlog_fileå’Œlog_posæ˜¯ä¹‹å‰çš„æ—¥å¿—åå’Œåç§»é‡ã€‚è®°å¾—é…ç½®ä¹‹å‰å…ˆstop slaveï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; stop slave;</span><br><span class="line">&gt; change master to master_host = <span class="string">'192.168.1.102'</span>,</span><br><span class="line">master_user = <span class="string">'rep_slave'</span>,</span><br><span class="line">master_password = <span class="string">'repslavepwd'</span>,</span><br><span class="line">master_log_file = <span class="string">'mysql-bin.000002'</span>,</span><br><span class="line">master_log_pos = 3046;</span><br><span class="line">&gt; start slave;</span><br></pre></td></tr></table></figure><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/mysql-ms-config-slave.png_webp"><img class="image" src="http://blog.codec.wang/mysql-ms-config-slave.png" alt=""></picture></p><p>æ˜¾ç¤ºä»æœºçŠ¶æ€ï¼š</p><p>ä¸Šè¿°é…ç½®å®Œæˆåï¼Œè¾“å…¥<code>show slave status\Gï¼›</code>ï¼Œå¦‚æœå‡ºç°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Slave_IO_Running: Yes</span><br><span class="line">Slave_SQL_Running: Yes</span><br></pre></td></tr></table></figure><p>åˆ™è¯´æ˜ä¸€åˆ‡æ­£å¸¸ï¼Œé…ç½®å®Œæˆã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/mysql-ms-show-slave-status.png_webp"><img class="image" src="http://blog.codec.wang/mysql-ms-show-slave-status.png" alt=""></picture></p><p>ä½†å¦‚æœå‡ºç°ç±»ä¼¼ä¸‹å›¾è¿™ç§æƒ…å†µï¼Œåˆ™è¯´æ˜å­˜åœ¨é—®é¢˜ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/mysql-ms-slave-connecting.png_webp"><img class="image" src="http://blog.codec.wang/mysql-ms-slave-connecting.png" alt=""></picture></p><p>è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦ä¸€æ­¥æ­¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ£€æŸ¥ï¼š</p><ol><li>é˜²ç«å¢™æ˜¯å¦å¼€æ”¾3306ç«¯å£ï¼Ÿ</li><li>é…ç½®æ—¶å¯†ç æ˜¯å¦æ­£ç¡®ï¼Ÿ</li><li>é…ç½®æ—¶åç§»é‡log_posæ˜¯å¦æ­£ç¡®ï¼Ÿ</li><li>ç½‘ç»œæ˜¯å¦å¯ä»¥pingé€šï¼Ÿ</li></ol><p>ä¸€èˆ¬éƒ½ä¼šåœ¨è¿™é‡Œå‡ºç°é—®é¢˜ï¼Œæˆ‘æ˜¯å› ä¸ºé˜²ç«å¢™çš„åŸå› ã€‚æŒ‰ç…§è¿™å‡ æ¡æ£€æŸ¥ä¸‹æ¥ï¼Œåº”è¯¥éƒ½èƒ½è§£å†³ã€‚</p><p>é…ç½®æ²¡é—®é¢˜çš„è¯ï¼Œå¯ä»¥åœ¨ä¸»æœºä¸Šè¾“å…¥<code>show processlist\G;</code>æ¥æŸ¥çœ‹ä¸»ä»æœºè¿æ¥ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/mysql-ms-show-processlist.jpg_webp"><img class="image" src="http://blog.codec.wang/mysql-ms-show-processlist.jpg" alt=""></picture></p><h3 id="åŒæ­¥æµ‹è¯•"><a href="#åŒæ­¥æµ‹è¯•" class="headerlink" title="åŒæ­¥æµ‹è¯•"></a>åŒæ­¥æµ‹è¯•</h3><ol><li>åœ¨ä¸»æœºä¸Šé€šè¿‡<code>create database testsync;</code>åˆ›å»ºä¸€ä¸ªæ•°æ®åº“</li><li>ä»æœºä¸Š<code>show databases;</code>æŸ¥çœ‹ï¼Œå¦‚æœå‡ºç°<code>testsync</code>åˆ™æµ‹è¯•é€šè¿‡ï¼š</li></ol><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/mysql-ms-slave-connected.png_webp"><img class="image" src="http://blog.codec.wang/mysql-ms-slave-connected.png" alt=""></picture></p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li>æºç ï¼š<a href="https://github.com/ex2tron/BlogCode/blob/master/mysql_master_slave_sync.sh" target="_blank" rel="noopener">mysql_master_slave_sync.sh</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨è¿›å…¥æ­£é¢˜ä¹‹å‰ï¼Œå…ˆæ¥çœ‹ä¸‹ç†è®ºçŸ¥è¯†ï¼š
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="MySQL" scheme="http://www.codec.wang/tags/MySQL/"/>
    
      <category term="æ•°æ®åº“" scheme="http://www.codec.wang/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>Qt+OpenCVç¯å¢ƒæ­å»º</title>
    <link href="http://www.codec.wang/qt-opencv-installation-guide/"/>
    <id>http://www.codec.wang/qt-opencv-installation-guide/</id>
    <published>2017-07-27T00:17:00.000Z</published>
    <updated>2020-04-07T04:47:01.817Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Windowsä¸‹çš„é…ç½®"><a href="#Windowsä¸‹çš„é…ç½®" class="headerlink" title="Windowsä¸‹çš„é…ç½®"></a>Windowsä¸‹çš„é…ç½®</h2><blockquote><p><em>å¿µå¿µä¸å¿˜ï¼Œå¿…æœ‰å›å“ã€‚</em>â€”â€”<a href="https://movie.douban.com/subject/3821067/" target="_blank" rel="noopener">ã€Šä¸€ä»£å®—å¸ˆã€‹</a></p></blockquote><p>æˆ‘ç”µè„‘ä¸Šå®‰è£…çš„Qtç‰ˆæœ¬ä¿¡æ¯ï¼šQt 5.8/Qt Creator 4.2.1/MinGW 5.3.0<a id="more"></a></p><p><a href="http://download.qt.io/archive/qt/" target="_blank" rel="noopener">Qtå®˜æ–¹ä¸‹è½½</a> </p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/qt_opencv_environment_demo1.jpg_webp"><img class="image" src="http://blog.codec.wang/qt_opencv_environment_demo1.jpg" alt=""></picture></p><p>é¦–å…ˆç”¨CMakeç¼–è¯‘OpenCV3.2ï¼Œå‚è€ƒï¼š<a href="/cmake-make-opencv/">CMakeç¼–è¯‘OpenCV3.2ï¼ˆQtå¹³å°ï¼‰</a>ã€‚é’ˆå¯¹Qt5.8+OpenCV3.2æˆ‘å·²ç»ç¼–è¯‘å¥½äº†ï¼Œå¯ä»¥ç›´æ¥<a href="https://pan.baidu.com/s/1miaCDL2" target="_blank" rel="noopener">ä¸‹è½½</a>ã€‚</p><p>ç¼–è¯‘å¥½ä¹‹åï¼ŒæŠŠä¸‹é¢ä¸‰ä¸ªæ–‡ä»¶å¤¹æå–å‡ºæ¥æ”¾åœ¨ä¸€ä¸ªæ–°ç›®å½•ä¸‹ï¼Œæ¯”å¦‚ï¼š<code>D:\QtOpenCV</code></p><ol><li>OpenCVå®‰è£…ç›®å½•ä¸‹çš„build\includeæ–‡ä»¶å¤¹</li><li>CMakeç”Ÿæˆåçš„libæ–‡ä»¶å¤¹</li><li>CMakeç”Ÿæˆåçš„binæ–‡ä»¶å¤¹</li></ol><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/qt_opencv_environment_demo2.jpg_webp"><img class="image" src="http://blog.codec.wang/qt_opencv_environment_demo2.jpg" alt=""></picture></p><p>æ”¾å¥½ä¹‹åï¼Œå°†ä¸Šå›¾<strong>binçš„è·¯å¾„ï¼ˆ<code>D:\QtOpenCV\bin</code>ï¼‰æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡</strong>ï¼Œæ­¤æ—¶æœ€å¥½é‡å¯èµ„æºç®¡ç†å™¨æˆ–æ³¨é”€ä¸€ä¸‹ï¼Œä»¥ä½¿å¾—ç¯å¢ƒå˜é‡æ›´æ”¹ç”Ÿæ•ˆã€‚</p><p>ç„¶åæ‰“å¼€Qtçš„proæ–‡ä»¶ï¼Œåœ¨<code>SOURCES</code>å‰é¢æ·»åŠ å¦‚ä¸‹çš„OpenCVçš„ä¾èµ–é¡¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># INCLUDEPATH å¤´æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">INCLUDEPATH +=  D:\QtOpenCV\include\opencv\</span><br><span class="line">                D:\QtOpenCV\include\opencv2\</span><br><span class="line">                D:\QtOpenCV\include</span><br><span class="line"><span class="comment"># LIBS åº“æ–‡ä»¶ï¼Œ-LæŒ‡å®šåº“è·¯å¾„ -llibæŒ‡å®šç¨‹åºç”¨åˆ°çš„libåº“</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨ä¸‹é¢æ–¹æ³•åŒ…å«æ‰€æœ‰åº“</span></span><br><span class="line"><span class="comment"># LIBS += -L D:\QtOpenCV\lib\libopencv_*.a</span></span><br><span class="line"><span class="comment"># æˆ–ä½¿ç”¨ä¸‹é¢æ–¹æ³•åªåŒ…å«è¦ä½¿ç”¨çš„åº“</span></span><br><span class="line">LIBS += -L D:\QtOpenCV\lib\</span><br><span class="line">        -llibopencv_highgui320.dll.a\</span><br><span class="line">-llibopencv_imgproc320.dll.a</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±é…ç½®å®Œæˆå•¦ï¼Œè¿™é‡Œæœ‰ä¸€äº›OpenCVçš„ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹ï¼š<a href="https://github.com/ex2tron/BlogCode/tree/master/OpenCV-C++-Sample" target="_blank" rel="noopener">C++ OpenCVç¤ºä¾‹</a></p><h2 id="Ubuntuä¸‹çš„é…ç½®"><a href="#Ubuntuä¸‹çš„é…ç½®" class="headerlink" title="Ubuntuä¸‹çš„é…ç½®"></a>Ubuntuä¸‹çš„é…ç½®</h2><p>Ubuntuä¸‹å¦‚æœä¸ç”¨CMakeè‡ªè¡Œå®‰è£…çš„è¯ï¼Œå°±ç®€å•å¤šäº†ï¼Œåœ¨ç»ˆç«¯é‡Œé¢è¾“å…¥ä¸‹é¢å‡ æ¡æŒ‡ä»¤å°±æå®šäº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…Qt5</span></span><br><span class="line">sudo apt-get install cmake qt5-default qtcreator</span><br><span class="line"><span class="comment"># å®‰è£…opencv</span></span><br><span class="line">sudo apt-get install libopencv-dev</span><br><span class="line">sudo apt-get install libcv-dev</span><br></pre></td></tr></table></figure><p>åŒæ ·ï¼Œåœ¨Qtçš„proæ–‡ä»¶ä¸­æ·»åŠ OpenCVçš„ä¾èµ–é¡¹å°±å¯ä»¥è°ƒç”¨äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">INCLUDEPATH += /usr/include\</span><br><span class="line">/usr/include/opencv\</span><br><span class="line">/usr/include/opencv2</span><br><span class="line">LIBS  += -L/usr/lib\</span><br><span class="line">-llibopencv_highgui\</span><br><span class="line">-llibopencv_core\</span><br><span class="line">-llibopencv_imgproc\</span><br><span class="line">-llibopencv_calib3d</span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>LIBS</code>åƒä¸Šé¢è¿™æ ·åŠ ä¸è¿›å»çš„è¯ï¼Œå¯ä»¥ä¸€ä¸ªä¸€ä¸ªåŠ ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LIBS  += -L/usr/lib/libopencv_highgui.so</span><br><span class="line">LIBS  += -L/usr/lib/libopencv_core.so</span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œä¸åŒç‰ˆæœ¬å’Œä¸åŒå¹³å°åº“çš„ä½ç½®å¯èƒ½ä¸åŒï¼Œæ¯”å¦‚æ ‘è“æ´¾ä¸‹ï¼Œåº“æ–‡ä»¶å¯èƒ½åœ¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LIBS  += -L/usr/lib/arm-linux-gnueabihf\</span><br></pre></td></tr></table></figure><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Windowsä¸‹çš„é…ç½®&quot;&gt;&lt;a href=&quot;#Windowsä¸‹çš„é…ç½®&quot; class=&quot;headerlink&quot; title=&quot;Windowsä¸‹çš„é…ç½®&quot;&gt;&lt;/a&gt;Windowsä¸‹çš„é…ç½®&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;å¿µå¿µä¸å¿˜ï¼Œå¿…æœ‰å›å“ã€‚&lt;/em&gt;â€”â€”&lt;a href=&quot;https://movie.douban.com/subject/3821067/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ã€Šä¸€ä»£å®—å¸ˆã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘ç”µè„‘ä¸Šå®‰è£…çš„Qtç‰ˆæœ¬ä¿¡æ¯ï¼šQt 5.8/Qt Creator 4.2.1/MinGW 5.3.0
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="CMake" scheme="http://www.codec.wang/tags/CMake/"/>
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Qt" scheme="http://www.codec.wang/tags/Qt/"/>
    
  </entry>
  
  <entry>
    <title>CMakeç¼–è¯‘OpenCV3.2ï¼ˆQtå¹³å°ï¼‰</title>
    <link href="http://www.codec.wang/cmake-make-opencv/"/>
    <id>http://www.codec.wang/cmake-make-opencv/</id>
    <published>2017-07-26T14:25:29.000Z</published>
    <updated>2020-04-07T04:39:01.936Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘ï¼Œéœ€è¦åœ¨Windowsä¸‹æ­å»ºä¸€ä¸ªQtå’ŒOpenCVçš„ç¯å¢ƒï¼Œå¯æƒœå®˜æ–¹OpenCV3.2çš„buildé‡Œé¢å¹¶ä¸æ˜¯é’ˆå¯¹Qtå¹³å°çš„ã€‚æ‰€ä»¥ï¼Œéœ€è¦ç”¨CMakeç¼–è¯‘OpenCVçš„æºç ã€‚<a id="more"></a></p><hr><ul><li><a href="https://cmake.org/download/" target="_blank" rel="noopener">CMake V3.9.0</a></li><li><a href="http://opencv.org/releases.html" target="_blank" rel="noopener">OpenCV V3.2.0</a></li><li><a href="http://download.qt.io/archive/qt/" target="_blank" rel="noopener">Qt V5.8.0</a></li></ul><blockquote><p><em>æ‰€æœ‰çš„å¤§äººéƒ½æ›¾ç»æ˜¯å°å­©ï¼Œè™½ç„¶åªæœ‰å°‘æ•°çš„äººè®°å¾—ã€‚</em></br></p><p><em>All grown-ups were once childrenâ€¦ but only few of them remember it.</em>ã€Š<a href="https://movie.douban.com/subject/20645098/" target="_blank" rel="noopener">å°ç‹å­</a>ã€‹</p></blockquote><h2 id="ç¼–è¯‘æ­¥éª¤"><a href="#ç¼–è¯‘æ­¥éª¤" class="headerlink" title="ç¼–è¯‘æ­¥éª¤"></a>ç¼–è¯‘æ­¥éª¤</h2><p>å®‰è£…å®ŒCMakeåï¼Œæ‰“å¼€cmake-guiï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cmake_opencv_qt_demo1.jpg_webp"><img class="image" src="http://blog.codec.wang/cmake_opencv_qt_demo1.jpg" alt=""></picture></p><ol><li>é€‰æ‹©OpenCV3.2æºç æ‰€åœ¨ä½ç½®ï¼Œæˆ‘çš„æ˜¯åœ¨ï¼š<code>D:\ProgramFiles\OpenCV3\sources</code></li><li>é€‰æ‹©ç¼–è¯‘ç”Ÿæˆçš„ç›®å½•</li><li>æœ€åç‚¹å‡»â€Configureâ€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</li></ol><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cmake_opencv_qt_demo2.jpg_webp"><img class="image" src="http://blog.codec.wang/cmake_opencv_qt_demo2.jpg" alt=""></picture></p><p>é€‰æ‹©â€œMinGW Makefilesâ€å¹¶å‹¾é€‰â€œSpecify native compilersâ€ï¼Œç‚¹å‡»â€œNextâ€ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cmake_opencv_qt_demo3.jpg_webp"><img class="image" src="http://blog.codec.wang/cmake_opencv_qt_demo3.jpg" alt=""></picture></p><p>è¿™é‡Œåˆ†åˆ«é€‰æ‹©Qtå®‰è£…ç›®å½•ä¸‹gccå’Œg++çš„è·¯å¾„ï¼Œç‚¹å‡»â€œFinishâ€ï¼Œç­‰å¾…é…ç½®å®Œæˆã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cmake_opencv_qt_demo4.jpg_webp"><img class="image" src="http://blog.codec.wang/cmake_opencv_qt_demo4.jpg" alt=""></picture></p><p>é…ç½®å®Œæˆåï¼Œå‹¾é€‰â€œWITH_OPENGLâ€å’Œâ€œWITH_QTâ€ï¼Œç‚¹å‡»â€œGenerateâ€å°±å¯ä»¥äº†ã€‚å¦‚æœå‘ç”Ÿé”™è¯¯ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cmake_opencv_qt_demo5.jpg_webp"><img class="image" src="http://blog.codec.wang/cmake_opencv_qt_demo5.jpg" alt=""></picture></p><p><strong>å°†Qtçš„ç›¸å…³è·¯å¾„é…ç½®å¦‚ä¸‹ï¼š</strong></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cmake_opencv_qt_demo6.jpg_webp"><img class="image" src="http://blog.codec.wang/cmake_opencv_qt_demo6.jpg" alt=""></picture></p><p><strong>å…ˆç‚¹å‡»â€œConfigureâ€ï¼Œå†æ¬¡ç‚¹å‡»â€œGenerateâ€å°±å¯ä»¥ç”Ÿæˆäº†ã€‚</strong>ç„¶ååœ¨cmdä¸‹åˆ‡æ¢åˆ°ç”Ÿæˆçš„ç›®å½•ï¼Œæˆ‘çš„æ˜¯<code>D:\OpenCVBuild</code>ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š<code>mingw32-make</code>å¼€å§‹ç¼–è¯‘ï¼ˆ25åˆ†é’Ÿå·¦å³ï¼‰ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cmake_opencv_qt_demo7.jpg_webp"><img class="image" src="http://blog.codec.wang/cmake_opencv_qt_demo7.jpg" alt=""></picture></p><p>ç¼–è¯‘å¥½ä¹‹åï¼Œå†æ‰§è¡Œ<code>mingw32-make install</code>å°±å®Œæˆäº†ã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cmake_opencv_qt_demo8.jpg_webp"><img class="image" src="http://blog.codec.wang/cmake_opencv_qt_demo8.jpg" alt=""></picture></p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cmake_opencv_qt_demo9.jpg_webp"><img class="image" src="http://blog.codec.wang/cmake_opencv_qt_demo9.jpg" alt=""></picture></p><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘ï¼Œéœ€è¦åœ¨Windowsä¸‹æ­å»ºä¸€ä¸ªQtå’ŒOpenCVçš„ç¯å¢ƒï¼Œå¯æƒœå®˜æ–¹OpenCV3.2çš„buildé‡Œé¢å¹¶ä¸æ˜¯é’ˆå¯¹Qtå¹³å°çš„ã€‚æ‰€ä»¥ï¼Œéœ€è¦ç”¨CMakeç¼–è¯‘OpenCVçš„æºç ã€‚
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="CMake" scheme="http://www.codec.wang/tags/CMake/"/>
    
      <category term="OpenCV" scheme="http://www.codec.wang/tags/OpenCV/"/>
    
      <category term="Qt" scheme="http://www.codec.wang/tags/Qt/"/>
    
  </entry>
  
  <entry>
    <title>ã€äº‘æœåŠ¡ã€‘æ­å»ºè‡ªå·±çš„Github/GitæœåŠ¡å™¨</title>
    <link href="http://www.codec.wang/set-up-your-own-git-server/"/>
    <id>http://www.codec.wang/set-up-your-own-git-server/</id>
    <published>2017-06-04T11:38:56.000Z</published>
    <updated>2020-04-07T03:53:46.869Z</updated>
    
    <content type="html"><![CDATA[<p>Githubæ˜¯ç›®å‰æœ€æµè¡Œçš„æ‰˜ç®¡å¼€æºä»£ç çš„è¿œç¨‹ä»“åº“ï¼Œä½†å¦‚æœæƒ³è¦åˆ›å»ºç§æœ‰ä»“åº“ï¼Œä¸å…¬å¼€ä»£ç çš„è¯ï¼ŒGithubæ˜¯æ”¶è´¹çš„ã€‚<a id="more"></a>ä½†åƒæˆ‘ä»¬è¿™ç§ç©·è‹¦çš„å­©å­ï¼Œåªèƒ½é€‰æ‹©è‡ªå·±æ­ä¸€ä¸ªGitæœåŠ¡å™¨å’¯ã€‚</p><p><strong>2019-1-8æ›´æ–°ï¼šå¾®è½¯æ”¶è´­Githubåï¼Œç§æœ‰ä»£ç åº“ä»æ­¤å…è´¹ï¼ï¼å–œå¤§æ™®å¥”å•Šï¼</strong></p><hr><p>æˆ‘ä»¬éœ€è¦ä¸€å°Linuxç”µè„‘ï¼Œå¯ä»¥å½“ä½œå±€åŸŸç½‘å†…çš„Githubã€‚å½“ç„¶å¦‚æœä½ æœ‰é˜¿é‡Œäº‘ä¹‹ç±»çš„æœåŠ¡å™¨çš„è¯å°±æ›´å¥½äº†ï¼Œæœ‰ç½‘çš„åœ°æ–¹å°±å¯ä»¥push/pullä»£ç ï¼Œæˆ‘è¿™é‡Œä»¥è‡ªå·±çš„æœ¬åœ°Ubuntuç”µè„‘ä¸ºä¾‹ï¼š</p><h2 id="å®‰è£…Git"><a href="#å®‰è£…Git" class="headerlink" title="å®‰è£…Git"></a>å®‰è£…Git</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure><p>ä¸€å¥è¯ï¼Œæ²¡å•¥å¥½è¯´çš„(+_+)</p><h2 id="æ–°å»ºgitç”¨æˆ·å¹¶é…ç½®"><a href="#æ–°å»ºgitç”¨æˆ·å¹¶é…ç½®" class="headerlink" title="æ–°å»ºgitç”¨æˆ·å¹¶é…ç½®"></a>æ–°å»ºgitç”¨æˆ·å¹¶é…ç½®</h2><p>åˆ›å»ºç”¨äºè¿è¡ŒGitæœåŠ¡çš„ç”¨æˆ·<code>git</code>ï¼Œæ–°å»ºè´¦å·æ—¶ï¼Œä¼šæç¤ºä½ è¾“å…¥è¯¥ç”¨æˆ·çš„å¯†ç ï¼Œå…¶ä»–ä¿æŒé»˜è®¤å³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo adduser git</span><br></pre></td></tr></table></figure><p><code>adduser</code>æŒ‡ä»¤ä¼šåœ¨/homeç›®å½•ä¸‹ç”Ÿæˆä»¥gitåå‘½åçš„æ–‡ä»¶å¤¹ï¼Œä»£è¡¨gitç”¨æˆ·ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /home</span><br></pre></td></tr></table></figure><p>åœ¨gitç”¨æˆ·ç›®å½•ä¸‹æ–°å»º<code>.ssh</code>æ–‡ä»¶å¤¹å’Œ<code>authorized_keys</code>æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/git/.ssh</span><br><span class="line">touch /home/git/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><p>ç†Ÿæ‚‰sshçš„åŒå­¦åº”è¯¥çŸ¥é“<code>authorized_keys</code>æ–‡ä»¶ç”¨äºæ”¶é›†æ‰€æœ‰éœ€è¦ç™»å½•åˆ°æ­¤GitæœåŠ¡å™¨çš„å®¢æˆ·ç«¯å…¬é’¥ï¼Œä¸€è¡Œä¸€ä¸ªã€‚å¦‚æœä½ å·²ç»ç”Ÿæˆè¿‡sshå¯†é’¥çš„è¯ï¼ŒWindowsç³»ç»Ÿä¼šåœ¨<code>C:\Users\ç”¨æˆ·å\.ssh\</code>ï¼ŒLinuxç³»ç»Ÿä¸€èˆ¬åœ¨<code>/home/user/.ssh/</code>ä¸‹ï¼Œæ²¡æœ‰ç”Ÿæˆçš„è¯ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„æŒ‡ä»¤ç”Ÿæˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><p>å°†<code>id_rsa.pub</code>ä¸­çš„å†…å®¹æ‹·è´åˆ°æœåŠ¡å™¨çš„authorized_keysæ–‡ä»¶ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"pub_key_content"</span> &gt;&gt; /home/git/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><h2 id="æ–°å»ºä»“åº“"><a href="#æ–°å»ºä»“åº“" class="headerlink" title="æ–°å»ºä»“åº“"></a>æ–°å»ºä»“åº“</h2><p>ç°åœ¨å…¶å®å°±è·ŸGithubä¸€æ ·çš„æµç¨‹äº†ï¼Œé¦–å…ˆåœ¨å»ºç«‹ä¸€ä¸ªæ–°ä»“åº“ï¼Œæ¯”å¦‚åœ¨<code>/home/git/repos</code>ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/git/repos</span><br><span class="line"><span class="built_in">cd</span> /home/git/repos/</span><br><span class="line">sudo git init --bare sample.git</span><br></pre></td></tr></table></figure><p>ç„¶åå°†<code>sample.git</code>ä»“åº“çš„ç”¨æˆ·å’Œç»„éƒ½æ”¹æˆ<code>git</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R git:git sample.git</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å»ºå¥½äº†è¿œç¨‹ä»“åº“ï¼Œæ¥ä¸‹æ¥ä½ å¯ä»¥å°†å·²æœ‰çš„æœ¬åœ°ä»“åº“å…³è”æˆ–è€…å…‹éš†åˆ°æœ¬åœ°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@server_ip:/home/git/repos/sample.git</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@server_ip:/home/git/repos/sample.git</span><br></pre></td></tr></table></figure><h2 id="è¿˜æœ‰ç‚¹å°é—®é¢˜"><a href="#è¿˜æœ‰ç‚¹å°é—®é¢˜" class="headerlink" title="è¿˜æœ‰ç‚¹å°é—®é¢˜~"></a>è¿˜æœ‰ç‚¹å°é—®é¢˜<del>~</del></h2><p>å‰é¢æ–°å»ºç”¨æˆ·çš„æ­¥éª¤å®Œæˆåï¼Œ<code>git</code>ç”¨æˆ·æ˜¯å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ç™»é™†æœåŠ¡å™¨çš„ï¼Œå› æ­¤éœ€è¦ç¦æ­¢<code>git</code>ç”¨æˆ·ç™»é™†shellï¼Œç¼–è¾‘<code>/etc/passwd</code>æ–‡ä»¶ï¼Œæ‰¾åˆ°gitçš„ä¸€è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git:x:1001:1001:,,,:/home/git:/bin/bash</span><br></pre></td></tr></table></figure><p>å°†å¯åŠ¨ç¯å¢ƒæ”¹ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell</span><br></pre></td></tr></table></figure><p><code>git-shell</code>æ˜¯ä¸€ä¸ªæ¯æ¬¡ä¸€ç™»å½•å°±é€€å‡ºçš„ç¨‹åºï¼Œè¿™æ ·é…ç½®ä¹‹åï¼Œ<code>git</code>ç”¨æˆ·å¯ä»¥ä½¿ç”¨sshç®¡ç†ä»“åº“ï¼Œä½†æ— æ³•ç™»é™†shellã€‚</p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/00137583770360579bc4b458f044ce7afed3df579123eca000" target="_blank" rel="noopener">å»–é›ªå³°Gitæ•™ç¨‹</a></li></ul><blockquote><p><em>ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!</em></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Githubæ˜¯ç›®å‰æœ€æµè¡Œçš„æ‰˜ç®¡å¼€æºä»£ç çš„è¿œç¨‹ä»“åº“ï¼Œä½†å¦‚æœæƒ³è¦åˆ›å»ºç§æœ‰ä»“åº“ï¼Œä¸å…¬å¼€ä»£ç çš„è¯ï¼ŒGithubæ˜¯æ”¶è´¹çš„ã€‚
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="Build" scheme="http://www.codec.wang/tags/Build/"/>
    
      <category term="Github" scheme="http://www.codec.wang/tags/Github/"/>
    
      <category term="Git Sever" scheme="http://www.codec.wang/tags/Git-Sever/"/>
    
  </entry>
  
  <entry>
    <title>ç¼–ç¨‹å‘½åæ³•</title>
    <link href="http://www.codec.wang/naming-convention/"/>
    <id>http://www.codec.wang/naming-convention/</id>
    <published>2015-03-31T08:20:15.000Z</published>
    <updated>2020-05-14T08:18:22.882Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬éƒ½çŸ¥é“ç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œéœ€è¦éµå®ˆä¸€å®šçš„ç¼–ç¨‹è§„èŒƒã€‚å¯¹äºå˜é‡çš„å‘½åè§„èŒƒï¼Œæœ‰äº›æ˜¯ç¼–ç¨‹è¯­è¨€æœ¬èº«çš„è§„åˆ™ï¼Œå¦‚C#ä¸­å˜é‡åä¸­ä¸èƒ½åŒ…å«ç©ºæ ¼ã€å°æ•°ç‚¹ç­‰ç­‰ï¼›æœ‰äº›åˆ™æ˜¯å¼€å‘äººå‘˜æˆ–ä¼ä¸šçš„ç¼–ç¨‹é£æ ¼æˆ–åˆ¶çº¦ã€‚<a id="more"></a></p><p>ç›®å‰å½¢æˆçš„æœ€ä¸ºå¸¸ç”¨çš„å˜é‡å‘½åè§„çº¦ä¸»è¦æœ‰ä¸‰ç§ï¼š</p><ul><li>é©¼å³°å¼å¤§å°å†™/å°é©¼å³°å‘½åæ³•: Lower Camel Case</li><li>Pascalå‘½åæ³•/å¤§é©¼å³°å‘½åæ³•: Pascal Case /Upper Camel Case</li><li>åŒˆç‰™åˆ©å‘½åæ³•: Hungarian</li></ul><h2 id="é©¼å³°å‘½åæ³•-Camel-Case"><a href="#é©¼å³°å‘½åæ³•-Camel-Case" class="headerlink" title="é©¼å³°å‘½åæ³•(Camel Case)"></a>é©¼å³°å‘½åæ³•(Camel Case)</h2><p>é©¼å³°å¼å¤§å°å†™æ¥è‡ªPerlè¯­è¨€ã€‚<strong>ç»„æˆå˜é‡åçš„ç¬¬ä¸€ä¸ªå•è¯ä»¥å°å†™å­—æ¯å¼€å¤´ï¼Œå…¶ä½™å•è¯éƒ½ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œå•è¯ä¹‹é—´ä¸ä»¥ç©ºæ ¼åˆ†éš”æˆ–è¿æ¥å·ï¼ˆ-ï¼‰ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰è¿æ¥ã€‚</strong>å¦‚: </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gender</span><br><span class="line">myName</span><br><span class="line">studentInfoNumber</span><br></pre></td></tr></table></figure><p>å› ä¸ºè¿™äº›é«˜ä½èµ·ä¼çš„å­—ç¬¦å¾ˆåƒéª†é©¼çš„ä¾§å½±ï¼Œæ‰€ä»¥ç§°ä¸ºå°é©¼å³°å‘½åæ³•ã€‚</p><p>ä»¥å‰çš„å‘½åè§„çº¦å¸¸ä½¿ç”¨ä¸‹åˆ’çº¿ä½œä¸ºå˜é‡åä¸­å„ä¸ªå•è¯ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚å¦‚<code>input_student_name()</code>ã€<code>employee_counter</code>ã€‚è¿™ç§å½¢å¼ç›®å‰åœ¨åµŒå…¥å¼/Unixç­‰Cç¼–ç¨‹ç¯å¢ƒä¸‹ï¼Œè¿˜è¾ƒä¸ºæ™®éã€‚ä½†ç°åœ¨å·²ç»æ·˜æ±°ã€‚</p><h2 id="Pascalå‘½åæ³•-Pascal-Case"><a href="#Pascalå‘½åæ³•-Pascal-Case" class="headerlink" title="Pascalå‘½åæ³•(Pascal Case)"></a>Pascalå‘½åæ³•(Pascal Case)</h2><p>åˆç§°å¤§é©¼å³°å¼å‘½åæ³•ï¼Œæºè‡ªäºPascalè¯­è¨€çš„å‘½åæƒ¯ä¾‹ã€‚<strong>ä¸é©¼å³°å‘½åæ³•ç±»ä¼¼ï¼Œåªä¸è¿‡ç»„æˆå˜é‡åçš„æ‰€æœ‰å•è¯é¦–å­—æ¯éƒ½å¤§å†™ã€‚</strong>å¦‚: </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Gender</span><br><span class="line">MyName</span><br><span class="line">StudentInfoNumber</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¼€å‘äººå‘˜å¯ä»¥å¾ˆæ˜ç¡®çš„çœ‹å‡ºå˜é‡çš„å­—æ¯ç»„åˆã€‚</p><h2 id="åŒˆç‰™åˆ©å‘½åæ³•-Hungarian"><a href="#åŒˆç‰™åˆ©å‘½åæ³•-Hungarian" class="headerlink" title="åŒˆç‰™åˆ©å‘½åæ³•(Hungarian)"></a>åŒˆç‰™åˆ©å‘½åæ³•(Hungarian)</h2><p>è¿™ç§æ–¹æ³•è¦æ±‚åœ¨æ¯ä¸ªå˜é‡åçš„å‰é¢åŠ ä¸Šè¡¨ç¤ºå˜é‡æ•°æ®ç±»å‹æˆ–ç”¨é€”çš„å°å†™å­—æ¯ã€‚</p><p>å½“ç„¶ï¼Œè¿™ç§æ–¹æ³•åœ¨OOPé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­åŸºæœ¬ä¸è¢«é‡‡ç”¨ï¼Œå› ä¸ºç±»ä¼¼<code>C#/Java</code>ä¸­æœ‰ä¸Šç™¾ç§ç±»å‹ï¼Œå¾ˆå®¹æ˜“æ··æ·†ã€‚ä½†å¯ä»¥äº†è§£ä¸€ä¸‹ï¼Œå®ƒåŒ…æ‹¬ç³»ç»ŸåŒˆç‰™åˆ©å‘½åæ³•å’ŒåŒˆç‰™åˆ©åº”ç”¨å‘½åæ³•ï¼š</p><ul><li>ç³»ç»ŸåŒˆç‰™åˆ©å‘½åæ³•ä¸­ï¼Œå‰ç¼€å­—æ¯è¯´æ˜å˜é‡çš„æ•°æ®ç±»å‹ã€‚å¦‚<code>iGender</code>ã€<code>strMyName</code>ï¼Œiä»£è¡¨intå‹ï¼Œsträ»£è¡¨stringå‹ã€‚</li><li>åŒˆç‰™åˆ©åº”ç”¨å‘½åæ³•ä¸­ï¼Œå‰ç¼€è¯´æ˜å˜é‡ç”¨é€”ã€‚å¦‚<code>pCircleSize</code>ï¼Œpä»£è¡¨æŒ‡é’ˆã€‚</li></ul><h2 id="C-æ¨èå‘½åæ³•"><a href="#C-æ¨èå‘½åæ³•" class="headerlink" title="C#æ¨èå‘½åæ³•"></a>C#æ¨èå‘½åæ³•</h2><ul><li>ç±»åã€ç±»çš„å±æ€§å’Œæ–¹æ³•é‡‡ç”¨Pascalå‘½åæ³•</li><li>å˜é‡ã€å¯¹è±¡é‡‡ç”¨é©¼å³°å‘½åæ³•</li></ul><p>ä»…ä¸ºä¸ªäººæ€»ç»“ï¼Œå¦‚æœ‰é—®é¢˜å»ºè®®ï¼Œè¯·åé¦ˆä¸æˆ‘ï¼Œè°¢è°¢ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘ä»¬éƒ½çŸ¥é“ç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œéœ€è¦éµå®ˆä¸€å®šçš„ç¼–ç¨‹è§„èŒƒã€‚å¯¹äºå˜é‡çš„å‘½åè§„èŒƒï¼Œæœ‰äº›æ˜¯ç¼–ç¨‹è¯­è¨€æœ¬èº«çš„è§„åˆ™ï¼Œå¦‚C#ä¸­å˜é‡åä¸­ä¸èƒ½åŒ…å«ç©ºæ ¼ã€å°æ•°ç‚¹ç­‰ç­‰ï¼›æœ‰äº›åˆ™æ˜¯å¼€å‘äººå‘˜æˆ–ä¼ä¸šçš„ç¼–ç¨‹é£æ ¼æˆ–åˆ¶çº¦ã€‚
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="å‘½å" scheme="http://www.codec.wang/tags/%E5%91%BD%E5%90%8D/"/>
    
  </entry>
  
  <entry>
    <title>CRä¸LF(æ“ä½œç³»ç»Ÿâ€œä¸‹ä¸€è¡Œâ€çš„ä¸åŒ)</title>
    <link href="http://www.codec.wang/cr-lf/"/>
    <id>http://www.codec.wang/cr-lf/</id>
    <published>2014-10-23T15:31:24.000Z</published>
    <updated>2020-05-14T09:32:13.464Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æœ€åˆçš„ç”µæŠ¥é€šè®¯æ—¶ä»£ï¼Œæ–‡æœ¬æ¯è¯»å–åˆ°ä¸€è¡Œçš„æœ«å°¾ï¼Œä¾¿éœ€è¦è·³è½¬è‡³ä¸‹ä¸€è¡Œï¼ˆæ¢è¡Œï¼‰ï¼Œå¹¶å›åˆ°å¼€å¤´ï¼ˆå›è½¦ï¼‰ä¸¤ä¸ªåŠ¨ä½œã€‚<a id="more"></a>å› æ­¤ASCIIå­—ç¬¦ä¸­ä¾¿æœ‰äº†<code>LFï¼šLine Feed(0x0A)</code>ï¼Œ<code>CRï¼šCarriage Return(0x0D)</code>ã€‚</p><p>å½“ç„¶ï¼Œå¹¶ä¸éœ€è¦ä¸¤ä¸ªå­—ç¬¦æ¥è¡¨ç¤ºä¸‹ä¸€è¡Œã€‚å› æ­¤åœ¨è®¾è®¡æ“ä½œç³»ç»ŸOSæ—¶å°±äº§ç”Ÿäº†åˆ†æ­§ã€‚ä¸ºèŠ‚çœèµ„æºï¼Œæœ‰çš„è®¾è®¡è€…é€‰æ‹©ç”¨ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºã€‚å› ä¸ºè¿™ä¸ªé€‰æ‹©çš„ä¸åŒï¼Œå¯¼è‡´äº†ä¸åŒOSçš„ä¸‹ä¸€è¡Œè¡¨ç¤ºç¬¦çš„ä¸åŒã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cr-lf-os-logo.jpg_webp"><img class="image" src="http://blog.codec.wang/cr-lf-os-logo.jpg" alt=""></picture></p><p>å¦‚ä¸‹å›¾ï¼Œå‚è€ƒ<a href="https://en.wikipedia.org/wiki/Newline#Representations" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘</a>ï¼ŒMac OS 2001å¹´ä¹‹å‰é‡‡ç”¨çš„æ˜¯CRï¼Œä¹‹åç”¨çš„æ˜¯LFï¼ŒUnix/Linuxé‡‡ç”¨LFï¼Œè€ŒWindowsé‡‡ç”¨çš„æ˜¯CRLFã€‚</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cr-lf-wikipedia.png_webp"><img class="image" src="http://blog.codec.wang/cr-lf-wikipedia.png" alt=""></picture></p><h2 id="CR-Carriage-Return"><a href="#CR-Carriage-Return" class="headerlink" title="CR: Carriage Return"></a>CR: Carriage Return</h2><p>åœ¨ASCIIç ä¸­ä»£è¡¨å›è½¦ï¼Œç¬¦å·ï¼š\rï¼ˆreturnï¼‰ï¼Œåå…­è¿›åˆ¶ç ï¼š0x0Dï¼ˆåè¿›åˆ¶ç 13ï¼ŒäºŒè¿›åˆ¶ç 0000 1101ï¼‰ã€‚ä¸€ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸‹ä¸€è¡Œã€‚</p><h2 id="LF-Line-Feed"><a href="#LF-Line-Feed" class="headerlink" title="LF: Line Feed"></a>LF: Line Feed</h2><p>åœ¨ASCIIç ä¸­ä»£è¡¨æ¢è¡Œç¬¦ï¼Œç¬¦å·ï¼š\nï¼ˆnewlineï¼‰ï¼Œåå…­è¿›åˆ¶ç ï¼š0x0Aï¼ˆåè¿›åˆ¶ç 10ï¼ŒäºŒè¿›åˆ¶ç 0000 1010ï¼‰ã€‚ä¸€ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸‹ä¸€è¡Œã€‚</p><h2 id="CRLF"><a href="#CRLF" class="headerlink" title="CRLF"></a>CRLF</h2><p>Windowså’ŒDosç³»ç»Ÿé‡‡ç”¨å›è½¦+æ¢è¡Œä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸‹ä¸€è¡Œã€‚</p><h2 id="äº’ç›¸è½¬æ¢"><a href="#äº’ç›¸è½¬æ¢" class="headerlink" title="äº’ç›¸è½¬æ¢"></a>äº’ç›¸è½¬æ¢</h2><p>é‚£åœ¨ç¨‹åºç¼–å†™ä¸­ï¼Œæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿé€šå¸¸åœ¨ç¼–å†™è·¨å¹³å°çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œä¸€ä¸ªå¹³å°ä½¿ç”¨å¦å¤–ä¸€ä¸ªå¹³å°çš„æ–‡æœ¬æ–‡ä»¶ï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜ã€‚ä¸€äº›æ–‡æœ¬/ä»£ç ç¼–è¾‘å™¨ä¼šè‡ªå¸¦è½¬æ¢æ“ä½œï¼Œä¾‹å¦‚ä¼˜ç§€çš„è·¨å¹³å°ç¼–è¾‘å™¨Notepad++ï¼Œå¯ä»¥é€šè¿‡èœå•æ â€œè§†å›¾â€-&gt;â€œæ˜¾ç¤ºè¡Œå°¾ç¬¦â€æ¥æŸ¥çœ‹ä¸€è¡Œæœ«å°¾çš„å­—ç¬¦ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cr-lf-notepad%2B%2B-1.png_webp"><img class="image" src="http://blog.codec.wang/cr-lf-notepad%2B%2B-1.png" alt=""></picture></p><p>æ‰“å¼€åç»“æœå¦‚ä¸‹ï¼Œå› ä¸ºæ˜¯åœ¨Windowså¹³å°ä¸‹ï¼Œæ‰€ä»¥è¡Œæœ«æ˜¯CRLFï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cr-lf-notepad%2B%2B-2.png_webp"><img class="image" src="http://blog.codec.wang/cr-lf-notepad%2B%2B-2.png" alt=""></picture></p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡â€œç¼–è¾‘â€-&gt;â€œæ¡£æ¡ˆæ ¼å¼è½¬æ¢â€æ¥è¿›è¡Œä¸‰ç§å¹³å°çš„æ¢è¡Œç¬¦æ ¼å¼åˆ‡æ¢ï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cr-lf-notepad%2B%2B-3.png_webp"><img class="image" src="http://blog.codec.wang/cr-lf-notepad%2B%2B-3.png" alt=""></picture></p><p>ä¾‹å¦‚è½¬æ¢ä¸ºUNIXæ ¼å¼åï¼Œè¡Œæœ«å°¾æ˜¾ç¤ºä¸ºLFï¼š</p><p><picture class="picture"><source type="image/webp" srcset="http://blog.codec.wang/cr-lf-notepad%2B%2B-4.png_webp"><img class="image" src="http://blog.codec.wang/cr-lf-notepad%2B%2B-4.png" alt=""></picture></p><p>Linuxç³»ç»Ÿä¹Ÿæœ‰è‡ªå·±çš„è½¬æ¢å‘½ä»¤ï¼Œæœ‰å…´è¶£è€…å¯ä»¥è‡ªè¡ŒæŸ¥é˜…èµ„æ–™ã€‚</p><p>ä»…ä¸ºä¸ªäººæ€»ç»“ï¼Œå¦‚æœ‰é—®é¢˜å»ºè®®ï¼Œè¯·åé¦ˆä¸æˆ‘ï¼Œè°¢è°¢ï¼</p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><ul><li><a href="https://en.wikipedia.org/wiki/Newline" target="_blank" rel="noopener">wikipedia newline</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%9B%9E%E8%BB%8A%E9%8D%B5" target="_blank" rel="noopener">wikipedia cr</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨æœ€åˆçš„ç”µæŠ¥é€šè®¯æ—¶ä»£ï¼Œæ–‡æœ¬æ¯è¯»å–åˆ°ä¸€è¡Œçš„æœ«å°¾ï¼Œä¾¿éœ€è¦è·³è½¬è‡³ä¸‹ä¸€è¡Œï¼ˆæ¢è¡Œï¼‰ï¼Œå¹¶å›åˆ°å¼€å¤´ï¼ˆå›è½¦ï¼‰ä¸¤ä¸ªåŠ¨ä½œã€‚
    
    </summary>
    
    
      <category term="Buildç¯‡" scheme="http://www.codec.wang/categories/Build%E7%AF%87/"/>
    
    
      <category term="æ¢è¡Œç¬¦;å›è½¦;æ¢è¡Œ" scheme="http://www.codec.wang/tags/%E6%8D%A2%E8%A1%8C%E7%AC%A6-%E5%9B%9E%E8%BD%A6-%E6%8D%A2%E8%A1%8C/"/>
    
  </entry>
  
</feed>
