{"meta":{"title":"Codec42","subtitle":"ä¿æŒå¯¹æŠ€æœ¯çš„çƒ­çˆ±ï¼Excelsior!","description":"ä¿æŒå¯¹æŠ€æœ¯çš„çƒ­çˆ±ï¼","author":"å°å¼ºæœ¬å¼º","url":"http://www.codec.wang"},"pages":[{"title":"categories","date":"2017-12-20T07:06:09.000Z","updated":"2017-12-20T08:17:21.571Z","comments":true,"path":"categories/index.html","permalink":"http://www.codec.wang/categories/index.html","excerpt":"","text":""},{"title":"About","date":"2017-12-20T07:06:25.000Z","updated":"2020-05-18T07:47:28.738Z","comments":true,"path":"about/index.html","permalink":"http://www.codec.wang/about/index.html","excerpt":"","text":"æˆ‘Github ä¿æŒå¯¹æŠ€æœ¯çš„çƒ­çˆ±ï½ å·¥ç§‘ç”·ä¸€æšï¼Œä½†ä¹Ÿéå¸¸å–œæ¬¢è‰ºæœ¯ï¼Œä¸å†²çª å¾ˆçƒ¦æ²¡æœ‰æ„ä¹‰çš„äº‹å’ŒåºŸè¯BBï¼Œç›´æ¥â€œå¹²â€ï¼ï¼ï¼ èŒä¸š ä¸»ä¸šï¼š@è…¾è®¯ã€ç¨‹åºçŒ¿ï¼ˆJSå…¨æ ˆã€å›¾åƒå¤„ç†ï¼‰ å‰¯ä¸šï¼šå•¥éƒ½å–œæ¬¢ï¼ˆç”µå½±ã€æ‘„å½±ã€è®¾è®¡ã€éª‘è¡Œã€ç¾½æ¯›çƒã€ä¹’ä¹“ã€é¸¡è¡€â€¦â€¦ï¼‰"},{"title":"tags","date":"2017-12-20T07:06:09.000Z","updated":"2017-12-20T08:17:40.499Z","comments":true,"path":"tags/index.html","permalink":"http://www.codec.wang/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"ã€MightPyã€‘Googleå‡ºå“çš„CLIå‘½ä»¤è¡Œç•Œé¢ç”Ÿæˆåº“Fireä½“éªŒ","slug":"ã€MightPyã€‘Googleå‡ºå“çš„å‘½ä»¤è¡Œç•Œé¢ç”Ÿæˆå·¥å…·Fireä½“éªŒ","date":"2020-05-21T02:23:28.000Z","updated":"2020-05-21T03:18:30.716Z","comments":true,"path":"mighty-py-google-python-fire/","link":"","permalink":"http://www.codec.wang/mighty-py-google-python-fire/","excerpt":"æ—©ä¸Šåˆšåˆ°å…¬å¸ï¼Œçœ‹åˆ°å…¬ä¼—å·æ¨é€çš„ä¸€ä¸ªGoogleå‡ºå“çš„CLI(Command-Line Interface)ç”Ÿæˆå·¥å…·ï¼Œéå¸¸ç®€æ´ä¼˜é›…ã€‚æ„Ÿè§‰è›®æœ‰è¶£ï¼Œå°±å¯¹ç€å®˜æ–¹æ–‡æ¡£ç®€å•ä½“éªŒäº†ä¸€æŠŠã€‚","text":"æ—©ä¸Šåˆšåˆ°å…¬å¸ï¼Œçœ‹åˆ°å…¬ä¼—å·æ¨é€çš„ä¸€ä¸ªGoogleå‡ºå“çš„CLI(Command-Line Interface)ç”Ÿæˆå·¥å…·ï¼Œéå¸¸ç®€æ´ä¼˜é›…ã€‚æ„Ÿè§‰è›®æœ‰è¶£ï¼Œå°±å¯¹ç€å®˜æ–¹æ–‡æ¡£ç®€å•ä½“éªŒäº†ä¸€æŠŠã€‚ https://github.com/google/python-fire å®‰è£…1pip3 install fire åŸºæœ¬ä½¿ç”¨å¤§å®¶å›æƒ³ä¸‹ï¼Œæˆ‘ä»¬ä¹‹å‰æ˜¯å¦‚ä½•ç»™Pythonä»£ç æ·»åŠ CLIäº¤äº’çš„ï¼Ÿæˆ‘ä¹‹å‰ä¹Ÿå†™è¿‡ä¸€ç¯‡ã€MightPyã€‘å¤„ç†å‘½ä»¤è¡Œå‚æ•°å’Œé€‰é¡¹çš„å‡ ç§æ–¹å¼ï¼Œè™½ç„¶ä¹Ÿä¸éš¾ï¼Œä½†æ˜¯éº»çƒ¦å‘€ğŸ™ƒã€‚è€Œfireåªè¦ä¸€å¥è¯å°±å¯ä»¥ç»™å·²æœ‰é¡¹ç›®æ·»åŠ CLIã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®˜æ–¹çš„ç¤ºä¾‹ï¼Œ 1234567import firedef hello(name=\"World\"): return \"Hello %s!\" % nameif __name__ == '__main__': fire.Fire(hello) å¼•å…¥fireåº“åï¼Œåªè¦å‘å°„(è¿™åå­—?â€¦)ä½ æƒ³è¦äº¤äº’çš„ä»£ç å—å°±OKå•¦ï¼Œfireä¼šè‡ªåŠ¨ç”Ÿæˆå‚æ•°å’Œå¸®åŠ©æ–‡æ¡£: 123python app.py # Hello World!python app.py --name=Wang # Hello Wang!python app.py --help CLIçš„å¥½å¤„ä¸å¿…å¤šè¯´ï¼Œå®ƒè®©å¼€å‘è°ƒè¯•ã€æ¨¡å—é—´çš„é›†æˆç­‰æ›´åŠ ç®€å•é«˜æ•ˆã€‚è€Œfireè¿›ä¸€æ­¥åŠ é€Ÿäº†è¿™ä¸ªæµç¨‹ã€‚ å„ç±»å‹ä½¿ç”¨OKï¼Œå‰é¢çš„ä¾‹å­fireæ˜¯ä½œç”¨åœ¨å‡½æ•°ä¸Šï¼Œé™¤äº†å‡½æ•°ï¼Œfireè¿˜æ”¯æŒç±»ã€åˆ—è¡¨ã€å­—å…¸ç­‰ã€‚ä¸€ä¸ªä¸ªçœ‹ä¸‹ï¼š åˆ—è¡¨æˆ–å…ƒç»„1fire.Fire([1, 2, 3]) è¿™æ ·CLIä¸­å°±å¯ä»¥é€šè¿‡ç´¢å¼•æ¥è®¿é—®åˆ—è¡¨ç»“æœï¼Œå¦‚ï¼š 12python app.py # 1 2 3python app.py 2 # 3 æŸ¥çœ‹å¸®åŠ©python app.py -hï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ’åºsort/æ’å…¥insertç­‰å‘½ä»¤ï¼Œå¦‚ 1python app.py pop 2 # 3 å­—å…¸1fire.Fire(&#123;'name': 'wang', 'age': 18&#125;) CLIä¸­å¯é€šè¿‡é”®å¾—åˆ°ç›¸åº”çš„å€¼ï¼Œå¦‚ï¼š 12python app.py # name: wang age: 18python app.py name # wang å‡½æ•°1234def sub(n1, n2): return n1 - n2fire.Fire(sub) å‡½æ•°çš„è¯ï¼ŒCLIä¸­å¯ä»¥é€šè¿‡ä½ç½®å‚æ•°(positional arguments)ç›´æ¥è°ƒç”¨ï¼š 1python app.py 20 5 # 15 ä¹Ÿå¯ä»¥é€šè¿‡å‘½åå‚æ•°(amed arguments)è°ƒç”¨ï¼š 1python app.py --n1=20 --n2=5 # 15 ç±»12345678class Student(object): def __init__(self, name): self.name = name def welcome(self): return 'Hello %s' % self.namefire.Fire(Student) ç±»çš„è¯å‚æ•°æ˜¯inité‡Œé¢çš„å‚æ•°","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å‘½ä»¤è¡Œå‚æ•°","slug":"å‘½ä»¤è¡Œå‚æ•°","permalink":"http://www.codec.wang/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0/"},{"name":"Google","slug":"Google","permalink":"http://www.codec.wang/tags/Google/"}]},{"title":"å†è°ˆCR&LFï¼šGitå·¥ç¨‹é…ç½®","slug":"å†è°ˆCR-LF","date":"2020-05-14T11:58:28.000Z","updated":"2020-05-16T02:59:52.170Z","comments":true,"path":"cr-lf2/","link":"","permalink":"http://www.codec.wang/cr-lf2/","excerpt":"14å¹´å†™è¿‡ä¸€ç¯‡CRä¸LF(æ“ä½œç³»ç»Ÿâ€œä¸‹ä¸€è¡Œâ€çš„ä¸åŒ)ï¼Œç†è§£äº†ä¸åŒæ“ä½œç³»ç»Ÿä¸ºä»€ä¹ˆä¼šæ˜¯ä¸åŒçš„æ¢è¡Œç¬¦ï¼Œå½“æ—¶æ²¡è¯¦ç»†äº†è§£gitçš„å·¥ç¨‹é…ç½®ã€‚å‰æ®µæ—¶é—´åŒäº‹æ¥æ‰‹ä¸€ä¸ªå‰ç«¯é¡¹ç›®æ—¶æ°å¥½ç¢°åˆ°æ¢è¡Œç¬¦æŠ¥é”™çš„é—®é¢˜ï¼Œè§£å†³ä¹‹ä½™çºªå½•ä¸€ä¸‹ã€‚","text":"14å¹´å†™è¿‡ä¸€ç¯‡CRä¸LF(æ“ä½œç³»ç»Ÿâ€œä¸‹ä¸€è¡Œâ€çš„ä¸åŒ)ï¼Œç†è§£äº†ä¸åŒæ“ä½œç³»ç»Ÿä¸ºä»€ä¹ˆä¼šæ˜¯ä¸åŒçš„æ¢è¡Œç¬¦ï¼Œå½“æ—¶æ²¡è¯¦ç»†äº†è§£gitçš„å·¥ç¨‹é…ç½®ã€‚å‰æ®µæ—¶é—´åŒäº‹æ¥æ‰‹ä¸€ä¸ªå‰ç«¯é¡¹ç›®æ—¶æ°å¥½ç¢°åˆ°æ¢è¡Œç¬¦æŠ¥é”™çš„é—®é¢˜ï¼Œè§£å†³ä¹‹ä½™çºªå½•ä¸€ä¸‹ã€‚ Gité»˜è®¤ç­–ç•¥é»˜è®¤æƒ…å†µä¸‹ï¼Œgitç‰ˆæœ¬åº“æœ¬èº«é‡‡ç”¨LFï¼Œä¸ºäº†è§£å†³æ¢è¡Œç¬¦é—®é¢˜ï¼Œgitæ£€å‡ºä»£ç æ—¶ä¼šæŒ‰ç…§æ“ä½œç³»ç»Ÿè‡ªåŠ¨é€‚é…ï¼šMAC/Linuxå°±æ˜¯LFï¼ŒWindowsä¼šè‡ªåŠ¨è½¬ä¸ºCRLFï¼Œä»æš‚å­˜åŒºæäº¤åˆ°åˆ†æ”¯æ—¶ï¼Œå†ç»Ÿä¸€è½¬ä¸ºLFã€‚ æ‰€ä»¥åŒä¸€ä¸ªæ–‡ä»¶åœ¨ä¸åŒOSä¸Šå¤§å°ä¹Ÿä¼šä¸åŒï¼Œæ¯”å¦‚: 12345# test.txtæ–‡ä»¶æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦# Mac: 6 bytes-rw-r--r-- 1 ex2tron 108570 6 5 15 09:59 test.txt# Windows: 7 bytes-rw-r--r-- 1 ex2tron 197609 7 5æœˆ 15 09:58 test.txt å¯èƒ½çš„é—®é¢˜çœ‹ä¸Šå»Gitçš„è§£å†³æ–¹æ¡ˆå¾ˆperfectï¼Œä½†åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹è‡ªåŠ¨è½¬æ¢ä¼šå‡ºé—®é¢˜ã€‚æ¯”å¦‚æˆ‘ä»¬æ–°å»ºä¸€ä¸ª.shçš„è„šæœ¬æ–‡ä»¶crlf.shï¼Œè®°å¾—è¦åŒ…å«ä¸€ä¸ªæ¢è¡Œç¬¦ï¼š 12echo 'crlf testing' å¯ä»¥ç”¨vimæˆ–VSCodeæ¥ç¼–è¾‘å¹¶è®¾ç½®ä¸åŒçš„æ¢è¡Œç¬¦æ ¼å¼ï¼Œè®¾ç½®æ–¹å¼åé¢è®²ã€‚LFæ—¶è¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼š 12$ ./crlf.shcrlf testing æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ”¹æˆCRLFåå†è¿è¡Œä¸€æ¬¡å°±ä¼šæŠ¥é”™ï¼š 123$ ./crlf.sh: command not foundcrlf testing è¿™ç§æƒ…å†µåœ¨ä¸€äº›è·¨å¹³å°é¡¹ç›®çš„è„šæ‰‹æ¶å‘½ä»¤è¡Œå·¥å…·ä¸­ç»å¸¸ç¢°åˆ°ã€‚æˆ‘åŒäº‹å°±æ˜¯å› ä¸ºä»–ç”¨çš„Windowsï¼Œgitæ£€å‡ºæ—¶ä¼šè‡ªåŠ¨é…ç½®ä¸ºCRLFï¼Œç„¶ånpm run serverçš„æ—¶å€™å°±ggäº†ğŸ™ƒ é‚£æ€ä¹ˆçµæ´»é…ç½®gitçš„è¿™ç§è½¬æ¢ç­–ç•¥å‘¢ï¼Ÿå…ˆæ¥çœ‹ä¸‹æœ‰å…³gitçš„å‡ ä¸ªæ¦‚å¿µï¼š åŸºæœ¬æ¦‚å¿µäº†è§£gitåŸç†çš„åŒå­¦åº”è¯¥çŸ¥é“å·¥ä½œåŒºã€æš‚å­˜åŒºå’Œåˆ†æ”¯çš„æ¦‚å¿µ(ä¸ç†Ÿæ‚‰çš„è¯ï¼Œå¯å‚è€ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒº) ç®€å•æ¥è¯´ï¼š å·¥ä½œåŒºå°±æ˜¯ç”µè„‘ä¸Šçœ‹åˆ°çš„ç›®å½• æ‰§è¡Œgit addå…¶å®æ˜¯å°†æ–‡ä»¶æ”¾åˆ°æš‚å­˜åŒº æ‰§è¡Œgit commitæ˜¯å°†æ–‡ä»¶ä»æš‚å­˜åŒºæäº¤åˆ°å½“å‰åˆ†æ”¯ ä»æš‚å­˜åŒºåˆ°åˆ†æ”¯çš„æ“ä½œæˆä¸ºæäº¤commitï¼Œä»æš‚å­˜åŒºæˆ–åˆ†æ”¯åˆ°å·¥ä½œåŒºçš„æ“ä½œç§°ä¸ºæ£€å‡ºcheckoutã€‚åƒgit pullå’Œgit cloneéƒ½æ˜¯å¤åˆå‘½ä»¤ï¼Œå…¶å®å†…éƒ¨éƒ½æ‰§è¡Œäº†checkoutæ“ä½œã€‚ CRLFå‚æ•°gitæœ‰ä¸‰ä¸ªè·Ÿæ¢è¡Œç¬¦ç›¸å…³çš„å‚æ•°ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š core.autocrlf 123456789# Win: æäº¤æ—¶è½¬ä¸ºLFï¼Œæ£€å‡ºæ—¶è½¬ä¸ºCRLF(å·¥ä½œåŒºä¸ºCRLF)git config --global core.autocrlf true# æäº¤æ£€å‡ºæ—¶å‡ä¸è½¬æ¢# Win: ä»¥é»˜è®¤CRLFåˆå§‹å¹¶å¼€å‘çš„é¡¹ç›®ï¼Œå·¥ä½œåŒºå’Œç‰ˆæœ¬åº“å‡ä¸ºCRLFgit config --global core.autocrlf false# Win: æäº¤æ—¶è½¬æ¢ä¸ºLFï¼Œæ£€å‡ºæ—¶ä¸è½¬æ¢(å·¥ä½œåŒºä¸ºLF)git config --global core.autocrlf input core.safecrlf: å·¥ä½œåŒºå‡ºç°ä¸åŒæ¢è¡Œç¬¦æ—¶çš„æ“ä½œ12345678# ä¸å…è®¸åŒ…å«ä¸åŒæ¢è¡Œç¬¦git config --global core.safecrlf true# å…è®¸æœ‰ä¸åŒæ¢è¡Œç¬¦git config --global core.safecrlf false# é»˜è®¤ï¼Œå…è®¸æœ‰ä¸åŒæ¢è¡Œç¬¦ä½†ä¼šå‘å‡ºè­¦å‘Šgit config --global core.safecrlf warn å¦‚æœè®¾ç½®ä¸ºtrueï¼Œåˆ™git addæ—¶ä¼šç›´æ¥æ‹’ç»æ‰ï¼š 12$ git add .fatal: LF would be replaced by CRLF in test.txt å¦‚æœè®¾ç½®ä¸ºwarnï¼Œåˆ™git addæ—¶ä¼šæ ¹æ®å·¥ä½œåŒºçš„æ ¼å¼å¼¹å‡ºè­¦å‘Šï¼š 12345678910# å·¥ä½œåŒºä¸ºCRLF$ git add .warning: LF will be replaced by CRLF in test.txt.The file will have its original line endings in your working directory# æ³¨æ„ç¬¬äºŒå¥è¯ï¼šå·¥ä½œç›®å½•çš„æ–‡ä»¶å°†ä¼šä½¿ç”¨å…¶åŸå§‹çš„æ¢è¡Œç¬¦# å·¥ä½œåŒºä¸ºLF$ git add .warning: CRLF will be replaced by LF in test.txt.The file will have its original line endings in your working directory core.eol: è®¾ç½®å·¥ä½œåŒºæ‰€ä½¿ç”¨çš„æ¢è¡Œç¬¦ å¯é€‰å€¼ä¸ºnativeã€lfã€crlfï¼Œé»˜è®¤ä¸ºnativeï¼Œå³ä½¿ç”¨æ“ä½œç³»ç»Ÿæ¢è¡Œç¬¦ core.autocrlfçš„è®¾ç½®ä¼šè¦†ç›–core.eol è¿™ä¸‰ä¸ªå‚æ•°äº’ç›¸ä¹‹é—´æœ‰å½±å“ï¼Œæˆ‘ä¹Ÿæäº†å¤§åŠå¤©æ‰ææ‡‚ï¼Œæ¨èå¤§å®¶ä¸€ä¸ªä¸ªå‚æ•°åˆ†åˆ«è¯•ä¸‹ã€‚ ç»¼ä¸Šï¼Œä¸¥æ ¼èµ·è§ï¼Œè·¨å¹³å°çš„å¼€å‘é¡¹ç›®åˆæœŸå¯ä»¥åšå¦‚ä¸‹é…ç½®ï¼š 123456# ç»Ÿä¸€å·¥ä½œåŒºä¸ºLFgit config --global core.eol lf# å…³é—­è‡ªåŠ¨è½¬æ¢git config --global core.autocrlf false# ç¦æ­¢æ··ç”¨ä¸¤ç§æ¢è¡Œç¬¦git config --global core.safecrlf true .gitattributesä¸Šé¢è¿™ç§å…¨å±€çš„æ–¹å¼ä¸ä¸€å®šèƒ½ä¿è¯åœ¨å›¢é˜Ÿæ¯ä¸ªäººçš„å¼€å‘æœºä¸Šé…ç½®ï¼Œæ›´ä¼˜çš„æ–¹æ¡ˆæ˜¯åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ·»åŠ .gitattributesæ–‡ä»¶ï¼š 12# æ‰€æœ‰æ–‡æœ¬æ–‡ä»¶å‡é‡‡ç”¨LF* text eol=lf è¯¥æ–‡ä»¶æ›´è¯¦ç»†çš„è®¾ç½®è¯·å‚è€ƒå¼•ç”¨ã€‚ æ˜¾ç¤ºå¹¶è½¬æ¢å‘½ä»¤è½¬æ¢ä½¿ç”¨dos2unixå’Œunix2dosï¼šMACå¯ä»¥ç”¨brewå®‰è£…ï¼ŒWindowså¯ä»¥åœ¨æ­¤å¤„ä¸‹è½½ã€‚ 1234brew install dos2unixdos2unix test.txtunix2dos test.txt vimvimå‘½ä»¤æ¨¡å¼ä¸‹å¯ä»¥è®¾ç½®å¹¶è½¬æ¢æ–‡ä»¶çš„æ¢è¡Œç¬¦æ ¼å¼ï¼š 123:set ff? # æ˜¾ç¤ºå½“å‰çš„fileformatï¼Œå¦‚fileformat=unixset ff=unix # è®¾ç½®æˆunixå³LFset ff=dos # è®¾ç½®æˆdoså³CRLF VSCodeVSCodeæ‰“å¼€æ–‡ä»¶åï¼Œä¼šåœ¨å³ä¸‹è§’status baræ˜¾ç¤ºå½“å‰æ¢è¡Œç¬¦æ ¼å¼ï¼Œç‚¹å‡»å°±å¯ä»¥åˆ‡æ¢ï¼š IDEAJetBrainså‡ºå“çš„ç³»åˆ—IDEéƒ½å¯ä»¥åœ¨è®¾ç½®ä¸­é…ç½®ï¼šPerferences - Editor - Code Style - Line separatorã€‚ notepad++CRä¸LF(æ“ä½œç³»ç»Ÿâ€œä¸‹ä¸€è¡Œâ€çš„ä¸åŒ)ä¸­æœ‰è®²åˆ°ï¼Œè¿™é‡Œå°±ä¸é‡å¤äº†ã€‚ Win10è®°äº‹æœ¬Win10çš„è®°äº‹æœ¬ä¹Ÿæ”¯æŒäº†unixæ–‡ä»¶çš„æ˜¾ç¤ºï¼Œå¹¶ä¼šåœ¨å³ä¸‹è§’æç¤ºï¼š å¼•ç”¨ Configuring Git to handle line endings git config crlf å·¥ä½œåŒºå’Œæš‚å­˜åŒº gitä»£ç â€™æ£€å‡ºâ€™","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"æ¢è¡Œç¬¦","slug":"æ¢è¡Œç¬¦","permalink":"http://www.codec.wang/tags/%E6%8D%A2%E8%A1%8C%E7%AC%A6/"},{"name":"å›è½¦","slug":"å›è½¦","permalink":"http://www.codec.wang/tags/%E5%9B%9E%E8%BD%A6/"},{"name":"æ¢è¡Œ","slug":"æ¢è¡Œ","permalink":"http://www.codec.wang/tags/%E6%8D%A2%E8%A1%8C/"}]},{"title":"å®ä¾‹ï¼šæˆ‘çš„å°ç¨‹åºå·¥ç¨‹æ¶æ„3.0","slug":"å®ä¾‹ï¼šæˆ‘çš„å°ç¨‹åºå·¥ç¨‹æ¶æ„3-0","date":"2020-04-13T06:19:30.000Z","updated":"2020-04-15T02:35:07.530Z","comments":true,"path":"mini-program-architecture-3/","link":"","permalink":"http://www.codec.wang/mini-program-architecture-3/","excerpt":"æˆ‘æ˜¯å»å¹´10æœˆå¼€å§‹è´Ÿè´£å°ç¨‹åºçš„å¼€å‘ç»´æŠ¤å·¥ä½œï¼Œä¸€å¼€å§‹æˆ‘æ˜¯å†²ç€UI/UXå»æ”¹çš„ï¼Œå› ä¸ºæ—§ç‰ˆåœ¨è®¾è®¡å’Œäº¤äº’ä¸Šå­˜åœ¨å¤ªå¤šé—®é¢˜ï¼Œä¸ºæ­¤æˆ‘ç”¨Sketché‡æ–°è®¾è®¡äº†ä¸€å¥—å…¨æ–°UI/UXã€‚ä½†é˜…è¯»ä»£ç æ—¶ï¼Œå‘ç°æ¥å£è°ƒç”¨ã€åŸºç¡€é…ç½®ã€æ•°æ®å¤„ç†ã€é¡µé¢é€»è¾‘ã€æ—¥å¿—å¤„ç†ç­‰ç­‰éƒ½å†™åœ¨ä¸€èµ·ï¼Œéšä¾¿ä¸€ä¸ªå‡½æ•°å°±æ˜¯ç™¾æ¥è¡Œï¼Œçœ‹çš„æˆ‘ç®€ç›´ä¸è¦å¤ªå´©æºƒâ€¦â€¦å’‹åŠå‘¢ï¼Ÿå”‰ï¼Œä½œä¸ºä¸€åå¼ºè¿«ç—‡æ‚£è€…ï¼Œé‡æ„å†™èµ°èµ·å‘—ğŸ™ƒ","text":"æˆ‘æ˜¯å»å¹´10æœˆå¼€å§‹è´Ÿè´£å°ç¨‹åºçš„å¼€å‘ç»´æŠ¤å·¥ä½œï¼Œä¸€å¼€å§‹æˆ‘æ˜¯å†²ç€UI/UXå»æ”¹çš„ï¼Œå› ä¸ºæ—§ç‰ˆåœ¨è®¾è®¡å’Œäº¤äº’ä¸Šå­˜åœ¨å¤ªå¤šé—®é¢˜ï¼Œä¸ºæ­¤æˆ‘ç”¨Sketché‡æ–°è®¾è®¡äº†ä¸€å¥—å…¨æ–°UI/UXã€‚ä½†é˜…è¯»ä»£ç æ—¶ï¼Œå‘ç°æ¥å£è°ƒç”¨ã€åŸºç¡€é…ç½®ã€æ•°æ®å¤„ç†ã€é¡µé¢é€»è¾‘ã€æ—¥å¿—å¤„ç†ç­‰ç­‰éƒ½å†™åœ¨ä¸€èµ·ï¼Œéšä¾¿ä¸€ä¸ªå‡½æ•°å°±æ˜¯ç™¾æ¥è¡Œï¼Œçœ‹çš„æˆ‘ç®€ç›´ä¸è¦å¤ªå´©æºƒâ€¦â€¦å’‹åŠå‘¢ï¼Ÿå”‰ï¼Œä½œä¸ºä¸€åå¼ºè¿«ç—‡æ‚£è€…ï¼Œé‡æ„å†™èµ°èµ·å‘—ğŸ™ƒ æœ¬ç¯‡æè¿°çš„å·¥ç¨‹æ¶æ„å®Œå…¨æ˜¯æˆ‘ä¾é è‡ªå·±çš„å·¥ç¨‹ç»éªŒæ„å»ºï¼Œæ¥æ‰‹æ—¶æˆ‘ä¹Ÿæ˜¯æ–°æ‰‹ï¼Œæ²¡æœ‰å‚è€ƒä»»ä½•å…¶ä»–å·¥ç¨‹ã€‚å†™å‡ºæ¥æ˜¯å› ä¸ºæ¯æ¬¡é‡æ„éƒ½æ˜¯å¯¹éœ€æ±‚çš„ä¿®æ”¹é‡åˆ°ç“¶é¢ˆï¼Œä¸æ–­çªç ´è¾¹ç•Œçš„è¿‡ç¨‹ï¼Œæ­¤æ—¶æˆ‘è‡ªå·±å¯¹æ¶æ„å’Œä»£ç çš„ç†è§£ä¹ŸåŠ æ·±äº†å¾ˆå¤šï¼Œæ‰€ä»¥æœ¬ç¯‡ä»…ä¾›å‚è€ƒã€‚æ¯”å¦‚æˆ‘åœ¨3.0ç‰ˆæœ¬ä¸­æå‡ºçš„controller/normå±‚ï¼Œå¯èƒ½åªæœ‰æˆ‘è¿™ä¹ˆå–åï¼Œä½†æˆ‘ç›¸ä¿¡ä»»ä½•ä¸€ä¸ªä¼˜ç§€çš„å·¥ç¨‹æ¶æ„ç»å¯¹ä¼šåŒ…å«è¿™å…¶ä¸­çš„æ‰€æœ‰ç†å¿µã€‚ demoä¸ºä¾¿äºè¯´æ˜ï¼Œæˆ‘è¿™é‡Œç®€åŒ–ä¸€ä¸ªå°ç¨‹åºçš„æ¡ˆä¾‹å¹¶ä¸€æ­¥æ­¥ä»‹ç»å¦‚ä½•å»ºç«‹å·¥ç¨‹ç›®å½•ã€‚ å‡è®¾æœ‰ä¸€ä¸ªæ–°é—»å°ç¨‹åºï¼Œåªæœ‰ä¸€ä¸ªé¡µé¢homeï¼Œå¦‚ä¸‹å›¾ã€‚å¯åŠ¨æ—¶ä¼šè°ƒç”¨ç™»é™†æ¥å£ï¼Œç™»é™†æˆåŠŸå°±è·å–æ–°é—»åˆ—è¡¨ã€‚ å¾ˆç®€å•ï¼Œåªæœ‰2ä¸ªGETæ¥å£ã€‚æ­¤å¤–é¡µé¢è¿˜æœ‰ä¸ªåˆ·æ–°æŒ‰é’®ï¼ŒåŠŸèƒ½å°±æ˜¯è·å–æ–°é—»åˆ—è¡¨ã€‚ 1.0æš‚ä¸”ç§°æˆ‘æ¥æ‰‹æ—¶çš„æ¶æ„ç‰ˆæœ¬ä¸º1.0ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„æ¶æ„ç®€å•æ¥è¯´å°±æ˜¯æ²¡æœ‰æ¶æ„ï¼Œåªä¸ºå®ç°åŠŸèƒ½ã€‚å„ç±»é€»è¾‘éƒ½å†™åœ¨ä¸€èµ·ï¼ŒUIä¸Šé‡å¤çš„ä»£ç ä¹Ÿæœªæå–æˆç»„ä»¶ã€‚ 1234.â””â”€â”€ home # é¡µé¢ â”œâ”€â”€ home.js â””â”€â”€ home.wxml è¿™ä¹Ÿæ˜¯æ–°æ‰‹å¸¸å¸¸å†™å‡ºæ¥çš„ä»£ç ï¼Œå¤§å®¶è¦ä¸è¦å°è¯•é˜…è¯»ä¸‹ğŸ¤’(çœ‹ä¸ä¸‹å»å¯ä»¥ç›´æ¥ç•¥è¿‡)ï¼š home.js 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/* ä»¥ä¸‹ä»£ç ä»…ä½œä¸ºç¤ºä¾‹ï¼Œå¹¶éå®é™…è¿è¡Œä»£ç  */const ENV = 'test';const domain = ENV === 'test' ? 'http://api.jl.com/test/' : 'http://api.jl.com/prod';const loginData = &#123; appID: 'testappid', loginCode: 'testloginCode',&#125;onLoad: function () &#123; wx.showLoading(&#123; title: 'æ•°æ®åŠ è½½ä¸­' &#125;); wx.request(&#123; url: domain + '/v1/login/?AppID=' + loginData.appID + '&amp;Code=' + loginData.loginCode, method: 'GET', success(result) &#123; wx.hideLoading(); console.log('login succeed: ', result); if (result.statusCode == 200 &amp;&amp; result.data.Status === 'Succeed') &#123; wx.request(&#123; url: domain + '/v1/getNews/', method: 'GET', success(result) &#123; console.log('get news succeed: ', result); if (result.statusCode == 200 &amp;&amp; result.data.Status === 'Succeed') &#123; if (result.data.news.length &gt; 0) &#123; let news = result.data.news; news = news.map((item, index) =&gt; &#123; item.color = index % 2 === 0 ? 'red' : 'green'; &#125;); this.setData(&#123; news &#125;); &#125; &#125; &#125;, fail(error) &#123; console.log('get news failed: ', error); this.showToast(`ä½ å·²åˆ°ç«æ˜Ÿï½$&#123;error&#125;`); &#125;, complete() &#123; /* Do Nothing. */ &#125; &#125;); &#125; else &#123; this.showToast('ä½ å·²åˆ°ç«æ˜Ÿï½'); &#125; &#125;, fail(error) &#123; console.log('login failed: ', error); wx.hideLoading(); this.showToast(`ä½ å·²åˆ°ç«æ˜Ÿï½$&#123;error&#125;`); &#125;, complete() &#123; /* Do Nothing. */ &#125; &#125;);&#125;, è¿™å·²ç»æ˜¯æˆ‘ä»å®é™…ä»£ç ä¸­æå–å¹¶ç®€åŒ–å¾ˆå¤šåçš„ä»£ç äº†ã€‚å…¶å®é€»è¾‘å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸¤ä¸ªæ¥å£çš„è°ƒç”¨ã€‚é‚£ä¸ºä»€ä¹ˆçœ‹ä¸Šå»è¿™ä¹ˆå¤æ‚å‘¢ï¼ŸåŸå› å°±æ˜¯å°†å„ç±»æ¨¡å—å’ŒåŠŸèƒ½éƒ½æ‰æ‚åœ¨äº†ä¸€èµ·ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€æ­¥æ­¥æ‹†åˆ†ã€‚ 2.0é…ç½®å±‚è¿™æ˜¯æœ€ç®€å•çš„ä¸€å—ï¼šä»£ç çš„å‰ä¸¤è¡Œæ˜¯APIçš„ç¯å¢ƒï¼Œæµ‹è¯•ç¯å¢ƒtestè¿˜æ˜¯çº¿ä¸Šç¯å¢ƒprodï¼Œè¿™å±äºé¡¹ç›®çš„åŸºç¡€é…ç½®é¡¹ï¼Œä¸åº”è¯¥å‡ºç°åœ¨é¡µé¢é€»è¾‘ä»£ç ä¸­ã€‚æ‰€ä»¥æˆ‘ä»¬æå–ä¸€ä¸ªå«configçš„ç›®å½•ã€‚ 123456.â”œâ”€â”€ config # é…ç½®å±‚â”‚ â””â”€â”€ config.jsâ””â”€â”€ home # é¡µé¢ â”œâ”€â”€ home.js â””â”€â”€ home.wxml config.js 123456789101112131415161718192021222324/** * é…ç½®æ–‡ä»¶ * * Author: codec.wang */module.exports = &#123; ENV: 'test', GetEnv: function () &#123; return envConfig[this.ENV]; &#125;&#125;;const envConfig = &#123; test: &#123; domain: 'http://api.jl.com/test/', debug: true, &#125;, prod: &#123; domain: 'http://api.jl.com/prod/', debug: false, &#125;&#125;; æ¥å£å±‚è¿™éƒ¨åˆ†æ˜¯2.0æ¶æ„é‡æ„ä¸­çš„å…³é”®ï¼šonLoadä¸­ä¸»è¦æ‰§è¡Œçš„æ˜¯æ¥å£è°ƒç”¨ï¼Œå¤§é‡é‡å¤ä»£ç é›†ä¸­åœ¨è¿™é‡Œï¼Œæ¯”å¦‚æ¥å£è°ƒç”¨æˆåŠŸçš„åˆ¤æ–­ï¼š 1if (result.statusCode == 200 &amp;&amp; result.data.Status === 'Succeed') &#123;&#125; æ¥å£è°ƒç”¨æˆåŠŸæˆ–å¤±è´¥æ—¶çš„å¤„ç†(æ—¥å¿—æ‰“å°)ï¼š 12success(result) &#123;console.log('succeed: ', result);&#125;fail(error) &#123;console.log('error: ', error);&#125; æ˜¾ç„¶è¿™äº›é‡å¤çš„ä»£ç éƒ½éœ€é‡æ„ã€‚ä½†è¿™é‡Œè¿˜æœ‰ä¸ªæœ€å…³é”®çš„ç»´æŠ¤æ€§é—®é¢˜ï¼šæ¥å£æ•£è½åœ¨é¡µé¢ä»£ç ä¸­ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œç™»é™†æ¥å£çš„æ¥å£åæ˜¯/v1/loginã€‚å‡è®¾è¿™ä¸ªæ¥å£åç»­å˜äº†ï¼šæ¥å£åå˜ä¸º /v2/loginServerï¼Œå‚æ•°å¤šåŠ äº†ä¸€ä¸ªTimeå­—æ®µã€‚æ­¤æ—¶ï¼Œä½ éœ€è¦æ‰¾åˆ°ä½¿ç”¨æ­¤æ¥å£çš„æ‰€æœ‰é¡µé¢ï¼Œä¸€ä¸ªä¸ªæ›´æ”¹å­—ç¬¦æ–‡æœ¬ï¼Œè¿™ç§æ“ä½œç®€ç§°â€ä½œæ­»â€ğŸ™‚ ç»¼ä¸Šï¼Œæˆ‘ä»¬éœ€è¦æŠŠwx.requestå°è£…ä¸€å±‚ï¼Œå°†æ¥å£æˆåŠŸæˆ–å¤±è´¥æ—¶çš„é€šç”¨å¤„ç†å†™åœ¨è¿™å±‚ä¸­ã€‚ç„¶åæŠŠæ‰€æœ‰çš„æ¥å£è°ƒç”¨å†™åœ¨ä¸€ä¸ªæ–‡ä»¶api.jsä¸­ã€‚ 12345678â”œâ”€â”€ api # æ¥å£å±‚â”‚ â”œâ”€â”€ api.js # æ‰€æœ‰æ¥å£è°ƒç”¨â”‚ â””â”€â”€ request.js # HTTPè¯·æ±‚å°è£…â”œâ”€â”€ config # é…ç½®å±‚â”‚ â””â”€â”€ config.jsâ””â”€â”€ home # é¡µé¢ â”œâ”€â”€ home.js â””â”€â”€ home.wxml è¦å°è£…ä¸€å±‚å°ç¨‹åºçš„HTTPè¯·æ±‚ï¼Œéœ€è¦ç”¨åˆ°Promiseã€‚æ­¤å¤„é€»è¾‘å…¶å®ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä½†éœ€è¦å¯¹Promiseæœ‰æ‰€äº†è§£ï¼š request.js 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980/** * å°è£…wx.requestä¸ºPromiseå¯¹è±¡ * * Author: codec.wang */class Request &#123; constructor(params) &#123; this.baseUrl = params.baseUrl; // APIæ ¹åœ°å€ this.enableBaseUrl = params.enableBaseUrl; // æ˜¯å¦å¯ç”¨æ ¹åœ°å€ &#125; get(url, data) &#123; return this.request(url, data, 'GET'); &#125; post(url, data) &#123; return this.request(url, data, 'POST'); &#125; put(url, data) &#123; return this.request(url, data, 'PUT'); &#125; request(url, data, method = 'GET') &#123; const actualUrl = this.enableBaseUrl ? this.baseUrl + url : url; return new Promise( (resolve, reject) =&gt; &#123; wx.request(&#123; url: actualUrl, data, header: &#123;&#125;, method: method, dataType: 'json', responseType: 'text', success: function (res) &#123; // ç®€åŒ–å°ç¨‹åºè¯·æ±‚ï¼ŒPromiseçš„thenå³ä¸ºè¯·æ±‚+æ•°æ®æ­£å¸¸ï¼Œcatchä¸ºè¯·æ±‚å¤±è´¥æˆ–æ•°æ®æœ‰æ—  if (res.statusCode === 200 &amp;&amp; res.data.Status === 'succeed') resolve(res.data.Data); else &#123; console.log(`$&#123;url&#125; Return failed: $&#123;JSON.stringify(res.data)&#125;`); reject(res.data); &#125; &#125;, fail: function (res) &#123; console.log(`$&#123;url&#125; Request failed: $&#123;JSON.stringify(res)&#125;`); reject(res.data); &#125;, complete: function (res) &#123; /* Do Nothing. */ &#125;, &#125;) &#125; ) &#125;&#125;/* å°ç¨‹åºçš„Promiseæ²¡æœ‰finallyæ–¹æ³•ï¼Œéœ€è¦è‡ªå·±æ‰©å±• */Promise.prototype.finally = function (callback) &#123; let Promise = this.constructor; return this.then( function (value) &#123; Promise.resolve(callback()).then( function () &#123; return value; &#125; ); &#125;, function (reason) &#123; Promise.resolve(callback()).then( function () &#123; throw reason; &#125; ); &#125; );&#125;;export &#123;Request&#125;; è¿™æ®µä»£ç æ˜¯æ•´ä¸ªæ¥å£å±‚çš„é‡ç‚¹ï¼Œå¤§å®¶ç»†å“ä¸‹ã€‚å°è£…å¥½ä¹‹åï¼Œåœ¨api.jsä¸­ç»Ÿä¸€ç¼–å†™æ¥å£è°ƒç”¨ï¼š api.js 123456789101112131415161718192021/** * ç»Ÿä¸€æ¥å£å®šä¹‰ * * Author: codec.wang */import &#123;Request&#125; from 'request';const CONFIG = require('../config/config');const REQUEST = new Request(&#123;baseUrl: CONFIG.GetEnv().domain, enableBaseUrl: true&#125;);const API = &#123; Login(data) &#123; /* ç™»é™† */ return REQUEST.get('/v1/login/', data); &#125;, GetNews(data) &#123; /* è·å–æ–°é—»åˆ—è¡¨ */ return REQUEST.get('/v1/getNews', data); &#125;,&#125;;export default API; ä¸è¿‡æœ‰å¯çˆ±çš„å°ä¼™ä¼´è¦é—®äº†ï¼Œä½ è¿™ä»£ç å’‹è¶Šå†™è¶Šå¤šå‘¢ï¼Œæ„Ÿè§‰æ›´å¤æ‚äº†å•Šã€‚ è¿™æ ·æé—®çš„ç«¥é‹ä¸€å®šæ˜¯æ²¡åšè¿‡è¾ƒä¸ºå¤æ‚çš„å·¥ç¨‹é¡¹ç›®ã€‚æŠ½ç¦»åˆ†éš”çš„ç›®çš„æ˜¯ä½¿æ¯ä¸ªæ¨¡å—å„å¸å…¶èŒï¼Œæå‡é€»è¾‘æ¶æ„ï¼Œä½¿é¡µé¢åªå…³å¿ƒè‡ªå·±çš„æ•°æ®ç»“æ„å’Œç®—æ³•é€»è¾‘ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œç»è¿‡ä¸Šè¿°çš„é‡æ„ï¼Œhomeé¡µé¢çš„æ¥å£è°ƒç”¨å°±å¾ˆç®€å•äº†ï¼š home.js 1234567891011121314onLoad: function () &#123; wx.showLoading(&#123; title: 'æ•°æ®åŠ è½½ä¸­' &#125;); API.Login(loginData) .then(_ =&gt; this.getNews()) .catch(error =&gt; this.showToast(error)) .finally(() =&gt; wx.hideLoading());&#125;,getNews: function () &#123; API.GetNews(&#123;&#125;) .then(data =&gt; this.setData(&#123;news: data&#125;)) .catch(error =&gt; this.showToast(error)) .finally(() =&gt; &#123;/* Do Nothing. */&#125;);&#125;, æ­¤æ—¶ï¼Œé¡µé¢ä¸Šçš„åˆ·æ–°æŒ‰é’®ç›´æ¥è°ƒç”¨getNewså°±è¡Œï¼Œæ•´ä¸ªé¡µé¢çš„é€»è¾‘éå¸¸æ˜äº†ã€‚ æ—¥å¿—å±‚ä»£ç ä¸­ç”¨äº†å¾ˆå¤šçš„console.log()æ¥æ‰“å°æ—¥å¿—ï¼Œçº¿ä¸Šç¯å¢ƒä¸åº”è¯¥ç›´æ¥è¿™æ ·ä½¿ç”¨ï¼Œè€Œæ˜¯åº”è¯¥æœ‰ä¸“é—¨çš„æ—¥å¿—æ¨¡å—ã€‚å°ç¨‹åºæ­£å¥½ä¹Ÿæä¾›äº†å®æ—¶æ—¥å¿—åŠŸèƒ½ï¼Œå› æ­¤ï¼Œåœ¨æµ‹è¯•ç¯å¢ƒä¸Šç»Ÿä¸€ä½¿ç”¨console.logæ‰“å°æ—¥å¿—ï¼Œä¾¿äºæœ¬åœ°è°ƒè¯•ï¼Œè€Œçº¿ä¸Šç¯å¢ƒåˆ™ä½¿ç”¨å®æ—¶æ—¥å¿—åœ¨å°ç¨‹åºåå°ç®¡ç†ç«¯è®°å½•ã€‚ 1234567891011.â”œâ”€â”€ api # æ¥å£å±‚â”‚ â”œâ”€â”€ api.jsâ”‚ â””â”€â”€ request.jsâ”œâ”€â”€ config # é…ç½®å±‚â”‚ â””â”€â”€ config.jsâ”œâ”€â”€ home # é¡µé¢â”‚ â”œâ”€â”€ home.jsâ”‚ â””â”€â”€ home.wxmlâ””â”€â”€ log # æ—¥å¿—å±‚ â””â”€â”€ log.js log.js 12345678910111213141516171819202122232425262728/** * å°ç¨‹åºå®æ—¶æ—¥å¿—ï¼ˆæœ¬åœ°è°ƒè¯•æ‰“å°ï¼‰ * * Author: codec.wang */const CONFIG = require('../config/config');let _log = wx.getRealtimeLogManager ? wx.getRealtimeLogManager() : null;const _isLogMode = CONFIG.GetEnv().debug;module.exports = &#123; Info() &#123; if (!_log) return; if (!_isLogMode) _log.info.apply(_log, arguments); else console.log(arguments[0]); &#125;, Warn() &#123; if (!_log) return; if (!_isLogMode) _log.warn.apply(_log, arguments); else console.log(arguments[0]); &#125;, Error() &#123; if (!_log) return; if (!_isLogMode) _log.error.apply(_log, arguments); else console.log(arguments[0]); &#125;,&#125;; å·¥å…·å±‚åˆ°ç›®å‰ä¸ºæ­¢æ‰€æœ‰çš„æ”¹åŠ¨æˆ‘ç§°ä¸º2.0ã€‚å½“ç„¶å®é™…ä»£ç ä¸­è¿˜æœ‰å¾ˆå¤šå†…å®¹ï¼Œæ¯”å¦‚ä¸€ä¸ªé€šç”¨çš„æ•°æ®ç¼–ç ç®—æ³•ï¼Œæˆ‘ä¼šæåˆ°å·¥å…·å±‚utilsä¸­å»ã€‚è¿˜æœ‰ä¸€äº›æšä¸¾å­—æ®µçš„å®šä¹‰ï¼Œæ¯”å¦‚æ€§åˆ«ï¼Œæˆ‘ä¼šæ”¾åˆ°é…ç½®å±‚çš„fields.jsä¸­ç­‰ç­‰ã€‚æœ€ç»ˆ2.0ç‰ˆçš„ç›®å½•æ¶æ„å¦‚ä¸‹ï¼š 1234567891011121314.â”œâ”€â”€ api # æ¥å£å±‚â”‚ â”œâ”€â”€ api.jsâ”‚ â””â”€â”€ request.jsâ”œâ”€â”€ config # é…ç½®å±‚â”‚ â”œâ”€â”€ config.jsâ”‚ â””â”€â”€ fields.jsâ”œâ”€â”€ home # é¡µé¢â”‚ â”œâ”€â”€ home.jsâ”‚ â””â”€â”€ home.wxmlâ”œâ”€â”€ log # æ—¥å¿—å±‚â”‚ â””â”€â”€ log.jsâ””â”€â”€ utils # å·¥å…·å±‚ â””â”€â”€ utils.js 3.0åœ¨å‰é¢çš„é‡æ„ä¸­ï¼Œæˆ‘ä»¬å¿½ç•¥äº†è¿™æ ·ä¸€ä¸ªå¤„ç†ï¼šå¤§å®¶çœ‹ä¸‹1.0ç‰ˆæœ¬è·å–æ–°é—»åˆ—è¡¨åçš„æ“ä½œ(25ï½30è¡Œ)ã€‚è¿™é‡Œæ˜¯å¯¹åç«¯è¿”å›æ•°æ®çš„æ ¡éªŒ+é¢„å¤„ç†ã€‚å®é™…å¼€å‘ä¸­ï¼Œæˆ‘å‘ç°åŸºæœ¬æ‰€æœ‰æ¥å£æ•°æ®éƒ½éœ€è¦åœ¨å‰ç«¯åšä¸€æ¬¡å•ç‹¬çš„æ ¡éªŒå’Œé¢„å¤„ç†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸æŠŠå®ƒæå–åˆ°ä¸€ä¸ªæ¨¡å—ä¸­å‘¢ï¼Ÿ å¦å¤–ï¼Œåœ¨1.0çš„ç™»é™†æ¥å£ä¸­(13è¡Œ)ï¼Œå‰åç«¯å‚æ•°åç§°ä¸ä¸€è‡´ï¼šå‰ç«¯æ˜¯{appID, loginCode}ï¼Œä½†è¯·æ±‚å®é™…éœ€è¦çš„å­—æ®µæ˜¯{AppID, Code}ã€‚åŒæ ·ï¼Œè¿™ç§é—®é¢˜åŸºæœ¬ä¸å¯é¿å…ï¼Œå› ä¸ºå‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼å’Œæ¥å£æ–‡æ¡£æ›´æ–°çš„æ—¶é—´å·®(ç ”å‘æµç¨‹)ï¼Œå¼€å‘äººå‘˜ç”¨å„è‡ªçš„å‘½åè§„èŒƒå¾ˆæ­£å¸¸ã€‚ Normå±‚è¿™ä¸¤ä¸ªæ“ä½œéƒ½ä¸é¡µé¢æœ¬èº«æ— å…³ã€‚ç†æƒ³çŠ¶æ€ä¸‹ï¼Œé¡µé¢å°±æ˜¯å‘é€è¯·æ±‚åæ‹¿æ•°æ®æ¸²æŸ“å°±è¡Œã€‚è€Œæ­£å¥½ï¼Œè¿™ä¸¤ä¸ªæ“ä½œéƒ½è·ŸAPIè¯·æ±‚æœ‰å…³ï¼Œåˆ†åˆ«å‘ç”Ÿåœ¨è¯·æ±‚åå’Œè¯·æ±‚å‰ã€‚é‚£ä¹ˆï¼Œå°±å¯ä»¥åŠ å…¥ä¸€ä¸ªæ§åˆ¶å±‚controlleræˆ–æ ‡å‡†åŒ–å±‚normç”¨æ¥å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒ+é¢„å¤„ç†ï¼š ç”±äºæ˜¯åœ¨è¯·æ±‚å‰ååŠ çš„ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ä¸‹è¯·æ±‚çš„å°è£…æ¥ä½¿ç”¨fNormInå’ŒfNormOutã€‚é‡æ–°ç¼–å†™å‰é¢çš„request.jsæ–‡ä»¶ï¼š api/request.js 12345678910111213141516171819202122232425get(url, data, fNormIn, fNormOut) &#123; return this.request(url, data, 'GET', fNormIn, fNormOut);&#125;request(url, data, method = 'GET', fNormIn, fNormOut) &#123; if(fNormIn) data = fNormIn(data); return new Promise( (resolve, reject) =&gt; &#123; wx.request(&#123; // çœç•¥éƒ¨åˆ†ä»£ç  success: function (res) &#123; if (res.statusCode === 200 &amp;&amp; res.data.Status === 'succeed') &#123; if (fNormOut) &#123; const ret = fNormOut(res.data.Data); ret.isNormed ? resolve(ret.data.Data) : reject(ret.msg); &#125; else resolve(res.data.Data); &#125; else &#123;/* çœç•¥ */&#125; &#125;, fail: function (res) &#123;/* çœç•¥ */&#125;, complete: function (res) &#123;/* Do Nothing. */&#125;, &#125;) &#125; )&#125; æ­¤æ—¶ï¼Œåªéœ€å®šä¹‰å„ä¸ªæ¥å£çš„Normå‡½æ•°å³å¯ï¼Œæ”¾ç½®äºnormå±‚ã€‚æœ€ç»ˆ3.0ç‰ˆçš„ç›®å½•æ¶æ„å¦‚ä¸‹ï¼š 1234567891011121314151617.â”œâ”€â”€ api # æ¥å£å±‚â”‚ â”œâ”€â”€ api.jsâ”‚ â””â”€â”€ request.jsâ”œâ”€â”€ config # é…ç½®å±‚â”‚ â”œâ”€â”€ config.jsâ”‚ â””â”€â”€ fields.jsâ”œâ”€â”€ home # é¡µé¢â”‚ â”œâ”€â”€ home.jsâ”‚ â””â”€â”€ home.wxmlâ”œâ”€â”€ log # æ—¥å¿—å±‚â”‚ â””â”€â”€ log.jsâ”œâ”€â”€ norm # æ§åˆ¶/æ ‡å‡†åŒ–å±‚â”‚ â”œâ”€â”€ normIn.jsâ”‚ â””â”€â”€ normOut.jsâ””â”€â”€ utils # å·¥å…·å±‚ â””â”€â”€ utils.js å½“ç„¶è¿™åªæ˜¯æˆ‘è‡ªå·±å®šçš„æ¶æ„ï¼Œè¿˜æœ‰å¾ˆå¤šéœ€è¦ä¼˜åŒ–çš„åœ°æ–¹ï¼Œå‘å„ä½å¤§ä½¬å­¦ä¹ ğŸ‘Š å¼•ç”¨ Promise å°ç¨‹åºï¼šå®æ—¶æ—¥å¿—","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","permalink":"http://www.codec.wang/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"},{"name":"å·¥ç¨‹æ¶æ„","slug":"å·¥ç¨‹æ¶æ„","permalink":"http://www.codec.wang/tags/%E5%B7%A5%E7%A8%8B%E6%9E%B6%E6%9E%84/"}]},{"title":"è§†é¢‘&å›¾ç‰‡æ»‘åŠ¨å¯¹æ¯”ç»„ä»¶","slug":"è§†é¢‘-å›¾ç‰‡æ»‘åŠ¨å¯¹æ¯”ç»„ä»¶","date":"2020-04-06T09:19:36.000Z","updated":"2020-04-17T11:04:46.346Z","comments":true,"path":"video-compassion-slider/","link":"","permalink":"http://www.codec.wang/video-compassion-slider/","excerpt":"æ¬¢è¿å¤§å®¶ä½“éªŒå¹¶StarğŸ™‚ï¼šhttp://codec.wang/vsc å…ˆæ°´ç‚¹èƒŒæ™¯ï¼šç”±äºåœ¨åšè§†é¢‘&amp;å›¾åƒè´¨é‡è¯„æµ‹ç›¸å…³çš„äº‹ï¼Œä¸ºäº†äººçœ¼å¯ä»¥åŒºåˆ†å‰åç®—æ³•çš„æ•ˆæœï¼Œè‡ªç„¶è¦æƒ³ä¸ªåˆç†çš„å±•ç¤ºæ–¹å¼ã€‚ç›®å‰å¸¸è§çš„ä¸‰ç§æ–¹å¼æ˜¯ï¼š","text":"æ¬¢è¿å¤§å®¶ä½“éªŒå¹¶StarğŸ™‚ï¼šhttp://codec.wang/vsc å…ˆæ°´ç‚¹èƒŒæ™¯ï¼šç”±äºåœ¨åšè§†é¢‘&amp;å›¾åƒè´¨é‡è¯„æµ‹ç›¸å…³çš„äº‹ï¼Œä¸ºäº†äººçœ¼å¯ä»¥åŒºåˆ†å‰åç®—æ³•çš„æ•ˆæœï¼Œè‡ªç„¶è¦æƒ³ä¸ªåˆç†çš„å±•ç¤ºæ–¹å¼ã€‚ç›®å‰å¸¸è§çš„ä¸‰ç§æ–¹å¼æ˜¯ï¼š åºåˆ—å¯¹æ¯”ï¼šå…ˆçœ‹Aï¼Œå†çœ‹Bï¼Œç¼ºç‚¹æ˜¯æ— æ³•åŒæ—¶è§‚çœ‹ï¼Œè®°ä¸ä½ç»†èŠ‚é€ æˆéš¾ä»¥åŒºåˆ† åŒçª—å¯¹æ¯”ï¼šABå·¦å³åŒæ—¶å±•ç¤ºï¼Œæ•ˆæœæ›´ä¼˜ã€‚ä½†è§†è§‰ä¸Šè¿˜æ˜¯è¦å·¦å³è·³è½¬ï¼Œå¯¹äºåŠ¨æ€çš„è§†é¢‘è€Œè¨€ï¼Œäººçœ¼åœ¨å·¦å³è·³è½¬æ—¶å¾ˆéš¾åŒæ­¥åˆ°åŒä¸€å¸§ æ»‘åŠ¨å¯¹æ¯”ï¼šABå åŠ åŒæ—¶å±•ç¤ºï¼Œé€šè¿‡æ»‘å—æ§åˆ¶æ˜¾ç¤ºçš„éƒ¨åˆ†ï¼Œæ•ˆæœæœ€ä½³ åŸç†å¥½äº†ï¼Œæ­£æ–‡å¼€å§‹ï¼šè¦åœ¨H5ä¸­å®ç°åºåˆ—å’Œå·¦å³åŒçª—è¾ƒä¸ºç®€å•ã€‚ä½†æ»‘åŠ¨è¦æ€ä¹ˆåšå‘¢ï¼Ÿ ç®€å•ç†ä¸‹æ€è·¯ï¼šæŠŠABå åœ¨ä¸€èµ·ï¼ŒBæ”¾ä¸‹é¢ï¼ŒAæ”¾ä¸Šé¢ã€‚æ»‘åŠ¨æ¡æ»‘åŠ¨æ—¶ï¼ŒBä¸å˜ï¼ŒAéšè—æ‰éƒ¨åˆ†ã€‚ é‚£ä¹ˆæ€ä¹ˆéšè—æ‰éƒ¨åˆ†å‘¢ï¼ŸğŸ¤”éš¾é“æ»‘åŠ¨çš„æ—¶å€™è¦å®æ—¶è£åˆ‡è§†é¢‘å—ï¼Ÿè¿™è‚¯å®šæ˜¯ä¸è¡Œæ»´ï½ï½ è¿™æ—¶å€™å°±å¾—ç¿»å¼€æˆ‘ä»¬çš„CSSå¤§å…¨äº†ï¼Œæˆ‘å‘ç°æœ‰è¿™ä¹ˆä¸€ä¸ªå±æ€§ï¼šoverflow å‚è€ƒï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/CSS/overflow ç”±ä¸Šå›¾å¯è§ï¼Œoverflowè¡¨ç¤ºå…ƒç´ é‡Œé¢çš„å†…å®¹å¤ªå¤§ä»¥è‡³äºæ— æ³•å®¹çº³æ—¶åº”è¯¥åšä»€ä¹ˆã€‚visibleè¯´ï¼šâ€è€å­å°±ç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼Œéš¾çœ‹å°±éš¾çœ‹(ç›´ç”·âš ï¸)â€ï¼Œè€Œä¼˜é›…çš„â€™hiddenè¯´ï¼šâ€è¶…å‡ºçš„éƒ¨åˆ†ç»™æˆ‘æ¶ˆå¤±(éšè—)â€ğŸ˜— è¿™ä¸å°±å®Œç¾è§£å†³æˆ‘ä»¬çš„é—®é¢˜äº†å˜›ï¼šåœ¨ä¸Šå±‚videoçš„å¤–é¢åŒ…ä¸€å±‚divï¼Œé»˜è®¤å®½åº¦ä¸è§†é¢‘ä¸€è‡´ã€‚ç„¶åæˆ‘ä»¬åªéœ€è¦æ§åˆ¶divçš„å®½åº¦ï¼Œè¶…å‡ºdivçš„videoéƒ¨åˆ†ä¼šè¢«è‡ªåŠ¨éšè—æ‰ã€‚Perfectï¼Œå¼€å¹²ï¼ çŸ¥é“åŸç†å°±ä¼šå‘ç°å¾ˆç®€å•ã€‚ç„¶è€ŒçŸ¥é“åŸç†ä¹‹å‰å´å¾ˆéš¾ï¼Œä½ å¦‚æœè®¤çœŸæ”»ç ´äº†è¿™ä¸ªéš¾ç‚¹ï¼Œå³ä½¿è¿™ä¸ªéš¾ç‚¹æ˜¯â€œå¦‚æ­¤ç®€å•â€ï¼Œä½ çš„æˆé•¿å’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›æ˜¯åˆ«äººæ¯”ä¸äº†çš„ï¼Œè¿™ä¹Ÿå°†ä¼šæ˜¯ä½ çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚ The easy way is the hard way. overflowé¦–å…ˆæˆ‘ä»¬æŠŠæœ€åŸºæœ¬çš„htmlå†™å‡ºæ¥ï¼Œç”¨äºéªŒè¯ä¸Šè¿°åŸç†ï¼Œä¸ç”¨æ·»åŠ äº¤äº’åŠŸèƒ½ã€‚è§†é¢‘å¯åˆ°å¼•ç”¨å¤„ä¸‹è½½ã€‚ index.html 123456789&lt;div class=\"video-container\"&gt; &lt;div class=\"video-a\"&gt; &lt;video autoplay muted loop src=\"videos/dolby_amaze_crf32_color.mp4\"&gt;&lt;/video&gt; &lt;/div&gt; &lt;div class=\"video-b\"&gt; &lt;video autoplay muted loop src=\"videos/dolby_amaze_crf32_gray.mp4\"&gt;&lt;/video&gt; &lt;/div&gt;&lt;/div&gt; index.css 1234567891011121314151617181920.video-container &#123; position: relative; width: 960px; height: 448px;&#125;.video-a &#123; position: absolute; width: 50%; overflow: hidden;&#125;.video-b &#123; position: absolute;&#125;video &#123; width: 960px; height: 448px;&#125; è¿™æ ·æ•ˆæœå°±å‡ºæ¥äº†ï¼Œso easyã€‚ç”±äºè¦æŠŠä¸¤ä¸ªvideoå åŠ åœ¨ä¸€èµ·ï¼Œæ‰€ä»¥çˆ¶å®¹å™¨ç”¨relativeå®šä½ï¼Œè§†é¢‘divç”¨absoluteå®šä½ã€‚ç„¶åå°†ä¸Šå±‚çš„è§†é¢‘video-aè®¾ç½®å®½åº¦ä¸ºä¸€åŠï¼Œæœ€å…³é”®çš„overflowä¸ºhiddenã€‚ æ»‘åŠ¨äº¤äº’æ¥ä¸‹æ¥å°±æ˜¯æ»‘åŠ¨æ¡çš„å®ç°ï¼Œä»¥åŠæ»‘åŠ¨çš„äº¤äº’äº†ã€‚è¿™éƒ¨åˆ†æˆ‘æš‚æ—¶ä¸å†™ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥ç›´æ¥çœ‹æºç ï¼Œå¤§å®¶â›½ï¸ï¼ ä¿æŒå¯¹æŠ€æœ¯çš„çƒ­çˆ±ï¼ å¼•ç”¨ ç»„ä»¶ä½“éªŒ æœ¬èŠ‚æºç  è§†é¢‘ç´ æï¼šæœæ¯”å½©è‰² è§†é¢‘ç´ æï¼šæœæ¯”é»‘ç™½ overflow ImageComparsionSlider css overflow:hiddenä¸ºä»€ä¹ˆä¼šå¤±æ•ˆ","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"å›¾åƒå¯¹æ¯”","slug":"å›¾åƒå¯¹æ¯”","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%AF%B9%E6%AF%94/"},{"name":"è§†é¢‘å¯¹æ¯”","slug":"è§†é¢‘å¯¹æ¯”","permalink":"http://www.codec.wang/tags/%E8%A7%86%E9%A2%91%E5%AF%B9%E6%AF%94/"}]},{"title":"å°ç¨‹åºH5é—®å·å¼€å‘2ï¼šæ¨¡ç‰ˆ&è„šæœ¬","slug":"å°ç¨‹åºH5é—®å·å¼€å‘2ï¼šæ¨¡ç‰ˆ-è„šæœ¬","date":"2020-03-20T08:29:15.000Z","updated":"2020-04-07T03:46:59.406Z","comments":true,"path":"wechat-h5-questionnaire2/","link":"","permalink":"http://www.codec.wang/wechat-h5-questionnaire2/","excerpt":"ä¸Šä¸€èŠ‚ä»‹ç»äº†é—®å·å¼€å‘çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œé€šè¿‡ä¸€ä¸ªå°demoèµ°äº†ä¸€éå°ç¨‹åºè°ƒç”¨H5è¿›è¡Œäº¤äº’çš„è¿‡ç¨‹ï¼Œä½†å…¶å®æœ€å¤§çš„å·¥ä½œé‡åœ¨H5ç½‘é¡µçš„åŠ¨æ€ç”Ÿæˆã€‚åŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š åˆ¶å®šJSONé—®å·æ ¼å¼ï¼Œå­˜å‚¨é—®å·é…ç½® ç”¨æ¨¡ç‰ˆåº“å¦‚jinja2ï¼Œç¼–å†™HTMLæ¨¡ç‰ˆ Pythonè¯»å–JSONé…ç½®ï¼Œå¡«å……æ¨¡ç‰ˆï¼Œç”Ÿæˆæœ€ç»ˆçš„H5ç½‘é¡µ","text":"ä¸Šä¸€èŠ‚ä»‹ç»äº†é—®å·å¼€å‘çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œé€šè¿‡ä¸€ä¸ªå°demoèµ°äº†ä¸€éå°ç¨‹åºè°ƒç”¨H5è¿›è¡Œäº¤äº’çš„è¿‡ç¨‹ï¼Œä½†å…¶å®æœ€å¤§çš„å·¥ä½œé‡åœ¨H5ç½‘é¡µçš„åŠ¨æ€ç”Ÿæˆã€‚åŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š åˆ¶å®šJSONé—®å·æ ¼å¼ï¼Œå­˜å‚¨é—®å·é…ç½® ç”¨æ¨¡ç‰ˆåº“å¦‚jinja2ï¼Œç¼–å†™HTMLæ¨¡ç‰ˆ Pythonè¯»å–JSONé…ç½®ï¼Œå¡«å……æ¨¡ç‰ˆï¼Œç”Ÿæˆæœ€ç»ˆçš„H5ç½‘é¡µ é—®å·ç½‘é¡µç‰ˆDemoä½“éªŒ JSONé…ç½®è¿™ä¸€å—æ²¡å•¥å¥½è¯´çš„ï¼ŒæŒ‰ç…§éœ€æ±‚å®šä¹‰å¥½å­—æ®µå°±è¡Œï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œï¼š 1234567891011121314151617&#123; \"qn_id\": 1, \"page_title\": \"è€ƒæ ¸é—®å·\", \"tips\": [ \"è¯·é¢„ç•™30åˆ†é’Ÿå¹¶è‡ªè¡Œå®Œæˆï¼›\", \"ä¸­é€”é€€å‡ºç»“æœä¸ä¼šç¼“å­˜ï¼Œè¯·ä¸€æ¬¡æ€§ä½œç­”å®Œæ¯•ã€‚\", ], \"questions\": [ &#123; \"question\": \"è§‚å¯Ÿå›¾ç‰‡ï¼Œå“ªä¸ªæ›´æ¸…æ™°ï¼Ÿ\", \"pic_a\": \"http://blog.codec.wang/wechat-h5-questionnaire.jpg_webp\", \"pic_b\": \"http://blog.codec.wang/wechat-h5-questionnaire.jpg_webp\", \"type\": \"radio\", \"options\": [\"Aæ›´å¥½\", \"Bæ›´å¥½\", \"æ— æ³•åˆ¤æ–­\"], &#125; ]&#125; åˆ†åˆ«è¡¨ç¤ºï¼šé—®å·IDã€é—®å·æ ‡é¢˜ã€æç¤ºã€é—®é¢˜ã€‚å…¶ä¸­typeè¡¨ç¤ºé—®é¢˜çš„ç±»å‹ï¼Œæœ‰å•é€‰æ¡†radioã€å¤šé€‰æ¡†checkboxå’Œè¾“å…¥æ¡†inputç­‰ã€‚ æ¨¡ç‰ˆå¼•æ“è¦åŠ¨æ€ç”Ÿæˆæ–‡æœ¬æ–‡ä»¶ï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ã€‚ä½†æ˜¾ç„¶è¿™ç§æ–¹å¼å¯¹HTMLè¿™ç§æ ‡è®°è¯­è¨€æ¥è¯´å¤ªä¸ç°å®äº†ï¼Œäºæ˜¯å°±æœ‰äº†æ¨¡ç‰ˆã€‚ é¦–å…ˆï¼Œç¼–å†™ä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å†…å®¹é™¤äº†å¸¸è§„çš„HTMLæ ‡è®°å¤–ï¼Œä¸»è¦æ˜¯åµŒå…¥äº†ä¸€äº›å˜é‡å’ŒæŒ‡ä»¤ã€‚æˆ‘ä»¬ç§°è¿™ä¸ªæ–‡ä»¶ä¸ºæ¨¡ç‰ˆã€‚ç„¶åæ ¹æ®ä¼ å…¥çš„æ•°æ®æ‰§è¡Œæ›¿æ¢æ“ä½œï¼Œç”Ÿæˆæœ€ç»ˆçš„HTMLæ–‡ä»¶ã€‚ ä¸åŒçš„æ¨¡ç‰ˆå¼•æ“çš„è¯­æ³•å’Œæ€§èƒ½æœ‰æ‰€ä¸åŒï¼Œå¸¸ç”¨çš„æœ‰ejsã€Djangoæ¨¡ç‰ˆã€jinja2ã€makoã€genshiç­‰ï¼Œå…¶ä¸­jinja2æ˜¯ä¸€ä¸ªä»¿Djangoæ¨¡ç‰ˆçš„æ¨¡ç‰ˆå¼•æ“ï¼Œè½»é‡ç®€å•ï¼Œæˆ‘ç”¨èµ·æ¥ç†Ÿæ‚‰ç‚¹ã€‚ ç¼–å†™ä¹‹å‰ï¼Œå¯ä»¥å»å®˜ç½‘å­¦ä¹ ä¸‹åŸºæœ¬çš„è¯­æ³•ï¼Œå¸¸ç”¨çš„å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­ç­‰éƒ½æ¯”è¾ƒç®€å•ã€‚ å½“ç„¶æ¨¡ç‰ˆå¼•æ“æ˜¯å¾ˆå¼ºå¤§çš„ï¼Œè¿™é‡Œä¸¾å‡ ä¸ªæˆ‘é‡åˆ°çš„æ“ä½œï¼š æ ¼å¼åŒ–å­—ç¬¦ä¸² æ¨¡ç‰ˆå¼•æ“ä¸­å¯ä»¥å°†å˜é‡ç»è¿‡æŸç§æ“ä½œè¿›è¡Œä¿®æ”¹ï¼Œè¯¥æ“ä½œç§°ä¹‹ä¸ºè¿‡æ»¤å™¨ã€‚jinja2ä¸­æœ‰å¾ˆå¤šå†…ç½®è¿‡æ»¤å™¨ï¼Œæœ€å¸¸ç”¨çš„å°±æ˜¯æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚ 1&lt;p&gt;&#123;&#123; \"%s. %s\"|format(a, b) &#125;&#125;&lt;/p&gt; å¦‚æœa = 1ï¼Œb = â€˜helloâ€™çš„è¯ï¼Œæœ€ç»ˆç”Ÿæˆå‡ºæ¥å°±æ˜¯ï¼š1. hello è·å–å¾ªç¯ç´¢å¼• å‰é¢å®šä¹‰çš„JSONä¸­ï¼Œé—®å·çš„æç¤ºæ˜¯ä¸ªæ•°ç»„ï¼Œæ¸²æŸ“æ—¶æˆ‘æƒ³åœ¨æ¯ä¸ªæç¤ºå‰é¢åŠ ä¸ªæ ‡å·ï¼š 123456&lt;div id=\"tips\"&gt; &lt;h2&gt;è¯„æµ‹æç¤º&lt;/h2&gt; &#123;% for tip in data.tips %&#125; &lt;p&gt;&#123;&#123; \"%s. %s\"|format(loop.index, tip) &#125;&#125;&lt;/p&gt; &#123;% endfor %&#125;&lt;/div&gt; loop.indexç´¢å¼•ä»1å¼€å§‹ï¼Œloop.index0ç´¢å¼•ä»0å¼€å§‹ï¼Œå‚è€ƒï¼šå¾ªç¯For ä¸¤å±‚å¾ªç¯åµŒå¥—æ—¶çš„å†…å¤–ç´¢å¼• é—®å·çš„æ‰€æœ‰é¢˜ç›®æ˜¯ä¸ªæ•°ç»„ï¼Œé¢˜ç›®çš„å•é€‰/å¤šé€‰é€‰é¡¹ä¹Ÿæ˜¯ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥éœ€è¦ä¸¤ä¸ªå¾ªç¯ç”Ÿæˆã€‚æ­¤æ—¶ï¼Œå•é€‰æ¡†çš„idå¯ä»¥é€šè¿‡å†…å¤–ä¸¤ä¸ªç´¢å¼•å…±åŒå”¯ä¸€ç¡®å®šã€‚ 12345678910111213141516171819&#123;% for item in data.questions %&#125;&lt;div id=\"question\"&gt; &#123;% if item.type == 'radio' or item.type == 'checkbox' %&#125; &lt;div&gt; &#123;% set outer_loop = loop %&#125; &#123;% for option in item.options %&#125; &#123;% set id = '%s-%s'|format(outer_loop.index0, loop.index0) %&#125; &lt;label for=\"&#123;&#123;id&#125;&#125;\"&gt; &lt;p&gt;&#123;&#123;option&#125;&#125;&lt;/p&gt; &lt;div&gt; &lt;input type=\"&#123;&#123;item.type&#125;&#125;\" value=\"&#123;&#123;loop.index0&#125;&#125;\" id=\"&#123;&#123;id&#125;&#125;\" /&gt; &lt;span class=\"weui-icon-checked\"&gt;&lt;/span&gt; &lt;/div&gt; &lt;/label&gt; &#123;% endfor %&#125; &lt;/div&gt; &#123;% endif %&#125;&lt;/div&gt;&#123;% endfor %&#125; è¿™é‡Œåœ¨è¿›å…¥ç¬¬äºŒä¸ªå¾ªç¯ä¹‹å‰ï¼Œä½¿ç”¨äº†set outer_loop = loopï¼Œç”¨outer_loopè¡¨ç¤ºå¤–éƒ¨å¾ªç¯ã€‚ Pyè„šæœ¬æœ‰äº†æ¨¡ç‰ˆå¼•æ“åï¼Œå°±éœ€è¦ä¸€ä¸ªæ•°æ®æä¾›å’Œæ‰§è¡Œç”Ÿæˆçš„è„šæœ¬ã€‚æœ€ç®€å•çš„å°±æ˜¯Pythonäº†ã€‚ å®‰è£…æ¨¡ç‰ˆå¼•æ“ 1$ pip3 install jinja2 åŠ è½½æ¨¡ç‰ˆå¹¶ç”Ÿæˆ jinja2ä½¿ç”¨Environmentå¯¹è±¡è¡¨ç¤ºä¸€ä¸ªæ¨¡ç‰ˆç¯å¢ƒï¼Œæ¯”å¦‚æ¨¡ç‰ˆtemplate.htmlè·Ÿè„šæœ¬æ”¾åœ¨ç»Ÿä¸€ç›®å½•ï¼š 12345678from jinja2 import Environment, FileSystemLoaderenv = Environment(loader=FileSystemLoader('.'))template = env.get_template('template.html') # åŠ è½½æ¨¡ç‰ˆwith open('index.html', 'w+') as fout: # ç”Ÿæˆæœ€ç»ˆæ–‡ä»¶ html_content = template.render(title='ç”Ÿæˆæ¨¡ç‰ˆ') fout.write(html_content) è¿™é‡Œçš„æ•°æ®åªæœ‰titleã€‚å½“ç„¶çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œæ•°æ®æ˜¯ä»é—®å·é…ç½®æ–‡ä»¶config.jsonä¸­è¯»å–ã€‚ 123import jsonwith open('config.json', 'r') as fin: data = json.loads(fin.read()) UIç»„ä»¶å› ä¸ºæ˜¯å°ç¨‹åºä¸Šè°ƒç”¨ï¼Œæ‰€ä»¥æ„å»ºä¸€å¥—é€‚ç”¨äºç§»åŠ¨ç«¯çš„UIä¼šå¥½å¾ˆå¤šã€‚è‡ªå·±å†™å¤ªè´¹äº‹ä¹Ÿæ²¡å¿…è¦ï¼Œæ‰¾ä¸€å¥—UIç»„ä»¶å¥—ä¸Šå³å¯ã€‚æˆ‘è¿™é‡Œé€‰æ‹©äº†WeUIï¼Œå®ƒæ˜¯å¾®ä¿¡å®˜æ–¹æ¨å‡ºçš„ä¸€å¥—ä¸å¾®ä¿¡åŸç”Ÿè§†è§‰ä½“éªŒä¸€è‡´çš„åŸºç¡€æ ·å¼åº“ï¼Œå®Œç¾ç¬¦åˆéœ€æ±‚ã€‚ WeUI Github åœ¨è‡ªå·±çš„H5é¡µé¢é“¾æ¥CSSæ ·å¼æ–‡ä»¶ï¼Œç»„ä»¶ä½¿ç”¨å‚è€ƒå®˜æ–¹Githubçš„æºç ç¤ºä¾‹å³å¯ã€‚ å‰ç«¯äº¤äº’ç½‘é¡µè™½ç„¶æ˜¯ä¸ªé™æ€æ–‡æœ¬ï¼Œä½†è¿˜æ˜¯éœ€è¦åŠ å…¥ä¸€äº›äº¤äº’ä»£ç ï¼Œå¦‚é—®å·é—®é¢˜çš„åˆ‡æ¢ï¼Œç»“æœçš„æäº¤ç­‰ã€‚ è¿™é‡Œå°±å¾ˆç®€å•ç²—æš´äº†ï¼Œæˆ‘åªä½¿ç”¨äº†åŸç”ŸJavaScriptï¼šé¦–å…ˆç”Ÿæˆæ‰€æœ‰çš„é¢˜ç›®ï¼Œé»˜è®¤å…¨éƒ¨éšè—ã€‚ç‚¹å‡»å¼€å§‹è¯„æµ‹åï¼Œæ˜¾ç¤ºç¬¬ä¸€é“é¢˜ï¼Œç„¶åç‚¹å‡»ä¸‹ä¸€æ­¥çš„æ—¶å€™éšè—ä¸Šä¸€é¢˜åŒæ—¶æ˜¾ç¤ºä¸‹ä¸€é¢˜â€¦â€¦ æ˜¾ç¤ºå’Œéšè—å¯é€šè¿‡displayæˆ–visibilityæ¥æ§åˆ¶ï¼Œå¦‚ï¼š 123const tips = document.getElementById('tips');tips.style.display = 'none'; // éšè—tips.style.display = 'block'; // æ˜¾ç¤º å¯¹äºæœ€åçš„ç»“æœæäº¤ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œ é‡‡ç”¨ä¸Šä¸€èŠ‚æåˆ°çš„postMessageå°†æ•°æ®å‘é€åˆ°å°ç¨‹åºï¼Œå°ç¨‹åºå†è°ƒç”¨æ¥å£æäº¤ ç½‘é¡µæœ¬èº«å‘é€HTTPè¯·æ±‚æäº¤ç»“æœï¼Œæäº¤æˆåŠŸåˆ™é€€å‡ºç½‘é¡µï¼Œå¦åˆ™å¼¹å‡ºé”™è¯¯æç¤º ä¸¤ç§æ–¹å¼å„æœ‰ä¼˜åŠ£ã€‚ç¬¬ä¸€ç§å¥½å¤„æ˜¯ä¿è¯å°ç¨‹åºæ‰€æœ‰çš„æ¥å£åªæœ‰å°ç¨‹åºæœ¬èº«èƒ½è¯·æ±‚ï¼ŒH5åªèµ·åˆ°è®°å½•ç»“æœçš„ä½œç”¨ã€‚ç¬¬äºŒç§å¥½å¤„æ˜¯åœ¨ç½‘é¡µå†…éƒ¨è¯·æ±‚ï¼Œæ›´é€šç”¨ï¼Œä»¥åç§»æ¤åˆ°å…¶ä»–Webç³»ç»Ÿä¸Šï¼Œä¹Ÿå¾ˆä¾¿æ·ã€‚ æˆ‘è¿™é‡Œç”¨ç¬¬äºŒç§ï¼Œå…³é”®ä»£ç åœ¨äºHTTPè¯·æ±‚å’Œå¯¼èˆªé€€å‡ºï¼š 1234567891011121314151617/* HTTP POST Demo */function Submit() &#123; const data = &#123;&#125;; const url = 'http://api.test.com/' const httpRequest = new XMLHttpRequest(); httpRequest.open('POST', url, true); // è®¾ç½®è¯·æ±‚å¤´ httpRequest.setRequestHeader(\"Content-type\", \"application/json\"); httpRequest.send(JSON.stringify(data)); httpRequest.onreadystatechange = function () &#123; if (httpRequest.status === 200) &#123; console.log(httpRequest.responseText); wx.miniProgram.navigateBack(); &#125; &#125;;&#125; å…¶ä¸­ï¼Œè¯„æµ‹ç»“æœdataæ˜¯åœ¨æ¯æ¬¡ç‚¹å‡»ä¸‹ä¸€æ­¥çš„æ—¶å€™è®°å½•çš„ï¼š å¯¹äºå•é€‰å’Œå¤šé€‰ï¼Œéå†å½“å‰çš„æ‰€æœ‰inputï¼Œé€‰æ‹©å‹¾é€‰çš„å¹¶è®°å½• å¯¹äºè¾“å…¥æ¡†ï¼Œåˆ™ç›´æ¥è®°å½•å½“å‰inputçš„å†…å®¹å³å¯ è¿™é‡Œå°±ä¸å†™Demoäº†ï¼Œå…·ä½“å¯ä»¥çœ‹æœ¬é¡¹ç›®çš„qn.jsæ–‡ä»¶ã€‚ å¥½äº†ï¼Œåˆ°è¿™é‡Œï¼Œè¿™ä¸ªåŸºç¡€é—®å·ç³»ç»Ÿå°±å·²ç»æˆå‹äº†ã€‚çµæ´»å¯é…ç½®ã€ä¹Ÿå¯ä»¥è·¨å¹³å°ä½¿ç”¨ï¼Œbingoï½ å¼•ç”¨ åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆ æœ¬èŠ‚æºç  ä½¿ç”¨æ¨¡æ¿ jinja2 WeUI","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"å¾®ä¿¡","slug":"å¾®ä¿¡","permalink":"http://www.codec.wang/tags/%E5%BE%AE%E4%BF%A1/"},{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","permalink":"http://www.codec.wang/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"},{"name":"é—®å·","slug":"é—®å·","permalink":"http://www.codec.wang/tags/%E9%97%AE%E5%8D%B7/"},{"name":"H5","slug":"H5","permalink":"http://www.codec.wang/tags/H5/"}]},{"title":"å°ç¨‹åºH5é—®å·å¼€å‘1ï¼šæ–¹æ¡ˆ","slug":"å°ç¨‹åºH5é—®å·å¼€å‘1ï¼šæ–¹æ¡ˆ","date":"2020-03-19T09:27:08.000Z","updated":"2020-04-07T03:46:13.524Z","comments":true,"path":"wechat-h5-questionnaire/","link":"","permalink":"http://www.codec.wang/wechat-h5-questionnaire/","excerpt":"æœ€è¿‘åœ¨åšä¸ªéœ€æ±‚ï¼šç”¨æˆ·åœ¨ä½¿ç”¨å°ç¨‹åºå‰å…ˆè¦å¡«å†™ä¸€ä¸ªé—®å·ï¼Œä¸‰ä¸ªè¦æ±‚ï¼š é—®å·å†…å®¹ä¸ä¼šç»å¸¸å˜åŠ¨ï¼Œä½†éœ€è¦å¯é… é—®å·æäº¤ç»“æœæ•°æ®ç›´æ¥è®°å½•ç°æœ‰çš„æ•°æ®åº“ä¸Š é¢˜å‹ï¼šå•é€‰/å¤šé€‰/è¾“å…¥æ¡†","text":"æœ€è¿‘åœ¨åšä¸ªéœ€æ±‚ï¼šç”¨æˆ·åœ¨ä½¿ç”¨å°ç¨‹åºå‰å…ˆè¦å¡«å†™ä¸€ä¸ªé—®å·ï¼Œä¸‰ä¸ªè¦æ±‚ï¼š é—®å·å†…å®¹ä¸ä¼šç»å¸¸å˜åŠ¨ï¼Œä½†éœ€è¦å¯é… é—®å·æäº¤ç»“æœæ•°æ®ç›´æ¥è®°å½•ç°æœ‰çš„æ•°æ®åº“ä¸Š é¢˜å‹ï¼šå•é€‰/å¤šé€‰/è¾“å…¥æ¡† é—®å·ç½‘é¡µç‰ˆDemoä½“éªŒ åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆ ä»éœ€æ±‚æ¥çœ‹ï¼Œé—®é¢˜çš„å…³é”®åœ¨äºåç«¯é—®å·æ•°æ®åº“å­˜å‚¨å’Œå‰ç«¯çš„é¡µé¢è®¾è®¡ã€‚ æ˜¾ç„¶ï¼Œæ•°æ®åº“ææˆå›ºå®šå­—æ®µï¼Œå®åœ¨å¤ªæ‰æ€¥äº†ï¼Œæ€»ä¸èƒ½é…ä¸€æ¬¡é—®å·å°±æ¢ä¸€å¼ è¡¨å§ã€‚æ‰€ä»¥æœ€ç®€å•çš„æ–¹æ¡ˆå°±æ˜¯ç”¨JSONæ•°æ®åº“ï¼Œå¦‚ï¼š é—®å·ID UserID Result 001 005 {1: â€˜wangâ€™, 2: 0, 3: [1, 2] } æ¥ä¸‹æ¥ï¼Œå°±æ˜¯é—®å·çš„ç•Œé¢è®¾è®¡ã€‚å…ˆæ¥è¯´ä¸‹æˆ‘è°ƒæŸ¥è¿‡çš„ä¸€äº›æ–¹æ¡ˆã€‚ æ–¹æ¡ˆè°ƒæŸ¥ç¬¬ä¸‰æ–¹é—®å·ç³»ç»Ÿè¿™æ˜¯æˆ‘æœ€å…ˆæƒ³åˆ°çš„ï¼šç›´æ¥ä½¿ç”¨è…¾è®¯é—®å·ä¹‹ç±»çš„ç¬¬ä¸‰æ–¹ç³»ç»Ÿã€‚ç»è¿‡è°ƒæŸ¥ï¼Œå¸¸ç”¨é—®å·ç³»ç»Ÿéƒ½å¯ä»¥ä½¿ç”¨ï¼š å°ç¨‹åºè·³è½¬è…¾è®¯é—®å·æŒ‡å¼• é—®å·æ˜Ÿï¼šåœ¨è‡ªå·±å°ç¨‹åºä¸­æ‰“å¼€é—®å·æˆ–è€ƒè¯•ï¼ˆå°ç¨‹åºè·³è½¬ï¼‰ é—®å·æ˜Ÿï¼šåœ¨è‡ªå·±å°ç¨‹åºä¸­æ‰“å¼€é—®å·æˆ–è€ƒè¯•ï¼ˆè·³è½¬H5é¡µé¢ï¼‰ ä¸€èˆ¬æ˜¯è‡ªå·±çš„å°ç¨‹åºè·³è½¬åˆ°ç›¸å…³é—®å·çš„å°ç¨‹åºä¸­ï¼Œæˆ–è€…åƒé—®å·æ˜Ÿä¸€æ ·ï¼Œåœ¨è‡ªå·±çš„å°ç¨‹åºä¸­è°ƒç”¨H5é—®å·ç½‘é¡µã€‚å—¯ï¼Œçœ‹ä¸Šå»ä¸é”™â€¦â€¦ ç­‰ç­‰ï¼Œæˆ‘ä»¬çš„éœ€æ±‚æ˜¯æäº¤æ—¶ç›´æ¥è®°å½•åœ¨è‡ªå·±çš„æ•°æ®åº“ä¸­ã€‚é‚£ä¹ˆè¿™äº›é—®å·ç³»ç»Ÿæœ‰å¼€æ”¾APIå—ï¼Ÿ ç›®å‰è€Œè¨€ï¼Œè…¾è®¯é—®å·å®˜æ–¹æ²¡å¼€æ”¾APIï¼Œé—®å·æ˜Ÿæœ‰ï¼šæ•°æ®æ¨é€API ä½†ï¼Œå°Šäº«ç‰ˆæœåŠ¡ï¼ŸæŸ¥äº†ä¸‹ï¼š å¥½å§ï¼Œå†è§ğŸ‘‹ å°ç¨‹åºNativeå®ç°å¦‚æœç”¨å°ç¨‹åºç»„ä»¶åŸç”Ÿå®ç°ï¼Œéœ€æ±‚åŸºæœ¬æ˜¯å¯ä»¥æ»¡è¶³çš„ï¼Œä½†å¼€å‘é‡æ¯”è¾ƒå¤§ä¸”é™åˆ¶æ¯”è¾ƒå¤šã€‚æµç¨‹ä¸Šï¼šé¦–å…ˆåç«¯éœ€è¦è®¾è®¡è·å–é—®å·çš„æ¥å£ï¼Œå°ç¨‹åºè®¿é—®æ­¤æ¥å£ï¼Œå¾—åˆ°æ‰€æœ‰çš„é¢˜ç›®å’Œé¢˜å‹ï¼Œç„¶ååŠ¨æ€ç”ŸæˆUIã€‚ç›¸å½“äºå¼€å‘ä¸€ä¸ªç®€å•çš„é—®å·ç³»ç»Ÿäº†ï¼Œä¸”è¿™ç§æ–¹å¼ç”Ÿæˆçš„ç•Œé¢ä¹Ÿåªèƒ½åœ¨å°ç¨‹åºä¸Šç”¨ã€‚ è‡ªå»ºH5æ–¹æ¡ˆè‡ªå»ºH5çš„è¯æ²¡æœ‰é—®å·ç³»ç»Ÿé‚£ä¹ˆå¤æ‚ï¼Œä¹Ÿèƒ½ä¿è¯è¶³å¤Ÿçš„çµæ´»åº¦ã€‚æ‰€ä»¥è¿˜æ˜¯è‡ªå·±åŠ¨æ‰‹ï¼Œä¸°è¡£è¶³é£Ÿå•Šï¼Œæ–¹æ¡ˆå¦‚ä¸‹ï¼š è™½ç„¶é—®å·å†…å®¹è¦æ±‚å¯é…ï¼Œä½†å› ä¸ºä¸ç»å¸¸æ”¹åŠ¨ï¼Œæ‰€ä»¥ä¸ç”¨åšé…ç½®ç•Œé¢ï¼Œæ”¹åŠ¨æ—¶ç”¨è„šæœ¬ç”Ÿæˆå³å¯ H5ç½‘é¡µæ˜¯è‡ªå·±ç¼–å†™çš„ï¼Œä¸”éƒ¨ç½²åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œè‡ªç„¶å¯ä»¥ç›´æ¥ç”¨è‡ªå·±çš„API æœ€åå°ç¨‹åºç›´æ¥è°ƒç”¨H5è¿›è¡Œäº¤äº’å³å¯ è¿™ç§æ–¹å¼åç«¯åªéœ€è¦è®¾è®¡ä¸€ä¸ªæ¥å£ï¼Œå³æäº¤é—®å·ç»“æœçš„æ¥å£ã€‚å› ä¸ºæ˜¯ç½‘é¡µï¼Œæ‰€ä»¥ä¹Ÿä¸ä»…é™äºå°ç¨‹åºä½¿ç”¨ï¼Œä»»ä½•æµè§ˆå™¨ä¸Šéƒ½å¯ä»¥ä½¿ç”¨ï¼Œå¤§å¤§æå‡çµæ´»æ€§ã€‚é‚£ä¹ˆå¼€å‘é‡ä¸»è¦é›†ä¸­åœ¨ï¼š HTMLæ¨¡ç‰ˆå’ŒH5è„šæœ¬ç¼–å†™ å°ç¨‹åºä¸H5äº¤äº’ï¼ˆé‰´æƒã€æ•°æ®äº¤äº’å’Œé¡µé¢è·³è½¬ï¼‰ Hello Worldä¸ºä¾¿äºç†è§£å’Œèµ°é€šæ–¹æ¡ˆæµç¨‹ï¼Œé¦–å…ˆç¼–å†™ä¸€ä¸ªç®€å•çš„index.htmlï¼Œåœ¨å°ç¨‹åºä¸Šæ˜¾ç¤ºå¹¶äº¤äº’ï¼šæœ¬èŠ‚æºç  1234567891011&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;Hello World&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt; æˆ‘ç”¨çš„ç¼–è¾‘å™¨æ˜¯VSCodeï¼Œä½¿ç”¨Live Serveræ’ä»¶å¯ä»¥å¿«é€Ÿå¯åŠ¨ä¸€ä¸ªæœ¬åœ°WebæœåŠ¡ï¼šhttp://127.0.0.1:5500/index.html å°ç¨‹åºweb-viewå°ç¨‹åºæ‰¿è½½ç½‘é¡µçš„å®¹å™¨æ˜¯web-viewç»„ä»¶ï¼Œç»„ä»¶æœ¬èº«å¾ˆç®€å•ï¼ŒsrcæŒ‡å®šè¦è·³è½¬çš„ç½‘é¡µåœ°å€å³å¯ã€‚ å¥½ï¼Œèµ¶ç´§è·³è½¬ä¸ªç™¾åº¦çœ‹çœ‹ğŸ™ƒâ€¦â€¦Noï¼Œä¸è¡Œï¼Œè‡ªå®šä¹‰ç½‘é¡µçš„åŸŸåéœ€è¦åœ¨å°ç¨‹åºç®¡ç†åå°é…ç½® ä¸è¿‡ä¸ºå¼€å‘æ–¹ä¾¿ï¼Œæœ¬åœ°å¼€å‘æ—¶å‹¾é€‰ä¸æ ¡éªŒåˆæ³•åŸŸåã€web-viewï¼ˆä¸šåŠ¡åŸŸåï¼‰ã€TLSç‰ˆæœ¬ä»¥åŠHTTPSè¯ä¹¦ã€‚è¿™æ ·å°±ä¸ä¼šæ ¡éªŒï¼Œå¯ä»¥éšä¾¿è·³è½¬ã€‚ å°ç¨‹åºä¸H5äº¤äº’ å°ç¨‹åºä¼ å‚ç»™H5ç½‘é¡µ è¿™ä¸ªå¾ˆç®€å•ï¼Œå‚æ•°æ‹¼æ¥åœ¨åœ°å€ä¸Šå°±è¡Œã€‚å¦‚å°†å°ç¨‹åºçš„ç™»é™†ä¿¡æ¯å’Œç”¨æˆ·ä¿¡æ¯ä¼ é€’ç»™H5ï¼Œç›¸å½“äºç»™ç½‘é¡µé‰´æƒï¼š 12&lt;web-view src=\"http://127.0.0.1:5500/index.html?userid=xxx&amp;cookie=xxx/\"&gt;&lt;/web-view&gt; H5ä¼ å‚åŠå¯¼èˆªåˆ°å°ç¨‹åº é¦–å…ˆåœ¨H5é¡µé¢å¼•å…¥å¾®ä¿¡JSSDKæ‰å¯ä»¥ä½¿ç”¨å°ç¨‹åºç›¸å…³æ¥å£ï¼š 12&lt;script type=\"text/javascript\" src=\"https://res.wx.qq.com/open/js/jweixin-1.3.2.js\"&gt;&lt;/script&gt; ç„¶åç½‘é¡µå¯ä»¥é€šè¿‡wx.miniProgram.postMessage() æ¥å£å‘é€ä¿¡æ¯ï¼Œæœ€åweb-viewç»„ä»¶è®¾ç½®bindmessageäº‹ä»¶æ¥æ”¶æ•°æ®ã€‚ ä½†è¿™é‡Œæœ‰ä¸ªå‘ï¼šè¿™ä¸ªæ¶ˆæ¯åªæœ‰åœ¨ç‰¹å®šæ—¶æœºæ‰èƒ½æ”¶åˆ°ï¼Œå¦‚å°ç¨‹åºåé€€ã€ç»„ä»¶é”€æ¯ã€åˆ†äº«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåœ¨ç½‘é¡µä¸­åªä½¿ç”¨wx.miniProgram.postMessage()æ¥å£å‘é€æ¶ˆæ¯ï¼Œä½†æ²¡æœ‰è°ƒç”¨å°ç¨‹åºåé€€/åˆ†äº«ç­‰æ¥å£çš„è¯ï¼Œå°ç¨‹åºæ˜¯æ”¶ä¸åˆ°æ¶ˆæ¯çš„ï¼Œä¸¾ä¾‹ï¼š æˆ‘åœ¨ç½‘é¡µä¸­åŠ äº†ä¸€ä¸ªæŒ‰é’®ï¼Œç”¨æ¥å‘å°ç¨‹åºå‘é€æ¶ˆæ¯ï¼š H5ä»£ç ï¼š 1234567&lt;body&gt; &lt;h1&gt;Hello World&lt;/h1&gt; &lt;button type=\"button\" onclick=\"SendMsg()\"&gt;Click Me&lt;/button&gt; &lt;script src=\"js/qn.js\"&gt;&lt;/script&gt; &lt;script src=\"https://res.wx.qq.com/open/js/jweixin-1.3.2.js\"&gt;&lt;/script&gt;&lt;/body&gt; H5 JSä»£ç ï¼š 12345678function SendMsg() &#123; // ä¸‹é¢è¿™å¥è¯è§¦å‘å°ç¨‹åºåé€€äº‹ä»¶ // è¿™å¥è¯ä¸åŠ ï¼Œåˆ™åé¢ä¸¤å¥å‘é€çš„æ¶ˆæ¯å°ç¨‹åºæ¥æ”¶ä¸åˆ° wx.miniProgram.navigateBack(); wx.miniProgram.postMessage(&#123; data: 'tencent' &#125;); wx.miniProgram.postMessage(&#123; data: &#123;name: 'wang'&#125; &#125;);&#125; è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‘é€æ¶ˆæ¯çš„æ•°æ®ç»“æ„å¿…é¡»åœ¨dataä¸­ï¼Œå¦åˆ™å°ç¨‹åºæ¥æ”¶ä¸åˆ°ã€‚ ç„¶ååœ¨å°ç¨‹åºä¸­æ¥æ”¶æ¶ˆæ¯ï¼Œæ¥æ”¶åˆ°çš„æ•°æ®ä»¥æ•°ç»„å½¢å¼è®°å½•ï¼š å°ç¨‹åºwxmlä»£ç ï¼š 12&lt;web-view src=\"http://127.0.0.1:5501/\" bindmessage=\"handleMsg\"&gt;&lt;/web-view&gt; å°ç¨‹åºjsä»£ç ï¼š 1234handleMsg: function(e) &#123; console.log(\"message: \", e.detail.data); // message: ['tencent', &#123;name: \"wang\"&#125;]&#125; ç¯å¢ƒåˆ¤æ–­H5è¿˜å¯ä»¥ä½¿ç”¨æ›´å¤šçš„å°ç¨‹åºæ¥å£ï¼Œå…·ä½“è¯·å‚è€ƒï¼šweb-view æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ä¸ªæ˜¯åˆ¤æ–­å½“å‰æ˜¯å¦æ˜¯å°ç¨‹åºç¯å¢ƒçš„æ¥å£getEnv()ï¼š 12wx.miniProgram.getEnv(function (res) &#123; console.log(res) &#125;);// &#123;miniprogram: true&#125; ä¸è¿‡å®é™…ä¸­ï¼ŒåŒºåˆ†ç¯å¢ƒæœ€å¥½çš„å®è·µæ–¹å¼æ˜¯é€šè¿‡URLå‚æ•°æ¥åŒºåˆ†ã€‚ H5é¡µé¢è°ƒè¯•åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸Šï¼Œè·³è½¬H5ç½‘é¡µåï¼Œå¯ä»¥åœ¨ä»»æ„åœ°æ–¹å³é”®ï¼Œæ‰“å¼€ç½‘é¡µè°ƒè¯•é¢æ¿ï¼š è¿™æ ·ä½¿ç”¨debuggeræˆ–console.log()ä¹‹ç±»çš„è°ƒè¯•æ–¹æ³•å°±å¾ˆæ–¹ä¾¿ã€‚ åœ¨çœŸæœºä¸Šï¼Œç›®å‰æ²¡æœ‰æ¯”è¾ƒå¥½çš„æ–¹æ³•ï¼Œæ¯”è¾ƒç²—æš´çš„å°±æ˜¯alert()å¤§æ³•äº†ã€‚ Okayï¼Œæœ¬æ–‡ä¸»è¦åˆ†äº«äº†æˆ‘è¿™ä¸¤å¤©åšå°ç¨‹åºH5é—®å·æ—¶ä¸€äº›æ–¹æ¡ˆï¼Œä¸‹ä¸€èŠ‚å¼€å§‹Coding H5ä»£ç ã€‚ å¼•ç”¨ åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆ æœ¬èŠ‚æºç  å°ç¨‹åºweb-viewç»„ä»¶ å¾®ä¿¡å°ç¨‹åº web-view å¼€å‘è¸©å‘å¤§å…¨","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"å¾®ä¿¡","slug":"å¾®ä¿¡","permalink":"http://www.codec.wang/tags/%E5%BE%AE%E4%BF%A1/"},{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","permalink":"http://www.codec.wang/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"},{"name":"é—®å·","slug":"é—®å·","permalink":"http://www.codec.wang/tags/%E9%97%AE%E5%8D%B7/"},{"name":"H5","slug":"H5","permalink":"http://www.codec.wang/tags/H5/"}]},{"title":"MightyPyï¼š(l/r)stripå‡½æ•°çš„å·¨å‘","slug":"MightyPyï¼š-l-r-stripå‡½æ•°çš„å·¨å‘","date":"2019-06-30T14:26:41.000Z","updated":"2020-04-07T03:43:57.760Z","comments":true,"path":"mighty-py-strip/","link":"","permalink":"http://www.codec.wang/mighty-py-strip/","excerpt":"å…ˆæ¥çŒœä¸‹Pythonä¸­è¿™å¥è¯çš„è¾“å‡ºæ˜¯å•¥","text":"å…ˆæ¥çŒœä¸‹Pythonä¸­è¿™å¥è¯çš„è¾“å‡ºæ˜¯å•¥ï¼š 12&gt;&gt;&gt; filename = \"journey_p4.mp4\"&gt;&gt;&gt; filename.rstrip(\".mp4\") ç­”æ¡ˆæ˜¯ï¼šjourney_ï¼Œé‚£p4å»å“ªäº†å‘¢ï¼Ÿæ€ä¹ˆæ ·ï¼Œæœ‰å…´è¶£çœ‹ä¸‹å»äº†å—ï¼Ÿâ†“ I Am Iron Man. â€”â€”ã€Šé’¢é“ä¾ ã€‹æˆ‘å°±æ˜¯é’¢é“ä¾ ã€‚â€”â€”ã€ŠIron Manã€‹ å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼šMovieQuotes strip()å‡½æ•°Pythonä¸­å¸¸ç”¨strip()ä»å­—ç¬¦ä¸²çš„å¼€å¤´å’Œç»“å°¾ç§»é™¤æŒ‡å®šçš„å­—ç¬¦ï¼Œä¸æŒ‡å®šå‚æ•°çš„è¯ï¼Œé»˜è®¤ç§»é™¤çš„æ˜¯ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ç­‰ã€‚åŒæ ·lstrip()å’Œrstrip()åˆ†åˆ«è¡¨ç¤ºå•ç‹¬ä»å¼€å¤´ã€ç»“å°¾ç§»é™¤æŒ‡å®šçš„å­—ç¬¦ã€‚ å‡½æ•°åŸå‹ï¼šstr.strip([chars])ã€str.lstrip([chars])ã€str.rstrip([chars]) ä½†å¾ˆå¤šäººå¹¶ä¸çœŸæ­£äº†è§£å‡½æ•°ç”¨æ³•ï¼Œèƒ¡ä¹±ä½¿ç”¨å°±ä¼šå¯¼è‡´å¼€å¤´çš„é‚£ç§é—®é¢˜ï¼ŒåŒ…æ‹¬ä¹‹å‰çš„æˆ‘( â•¯â–¡â•° )ã€‚ å¡«å‘å…¶å®å®˜æ–¹æ–‡æ¡£ä¸Šå†™çš„å¾ˆæ¸…æ¥šå¹¶ä¸¾äº†å‡ ä¸ªä¾‹å­ï¼š 1The chars argument is not a prefix or suffix; rather, all combinations of its values are stripped. ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼š stripå‡½æ•°çš„å‚æ•°å¹¶ä¸æ˜¯æŒ‡å‰ç¼€æˆ–åç¼€ï¼Œè€Œæ˜¯æ‰€æœ‰å…¶ç»„åˆå€¼éƒ½ä¼šè¢«åˆ é™¤æ‰ï¼ å•¥æ„æ€å‘¢ï¼Ÿä»¥å¼€å¤´é—®é¢˜ä¸ºä¾‹ï¼Œè™½ç„¶æˆ‘ä»¬æŒ‡å®šäº†ä»å°¾éƒ¨åˆ é™¤.mp4è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œä½†å®ƒå¹¶ä¸ä¼šè€è€å®å®åªåˆ é™¤.mp4ï¼Œè€Œæ˜¯åŒ…å«.mp4æ‰€ä»¥ç»„åˆå€¼çš„å­—ç¬¦ä¸²éƒ½ä¼šè¢«åˆ é™¤ï¼Œæ¯”å¦‚æœ«å°¾åŒ…å«äº†m/pm/mp/4p/p4/pm4ç­‰ç­‰éƒ½ä¼šè¢«åˆ é™¤ï¼š 123&gt;&gt;&gt; filename = \"journey_p4mmp.mp4\"&gt;&gt;&gt; filename.rstrip(\".mp4\") journey_ å†æ¥çœ‹äº›å®˜æ–¹çš„ä¾‹å­ï¼š 12&gt;&gt;&gt; 'www.example.com'.strip('cmowz.')example 123&gt;&gt;&gt; comment_string = '#....... Section 3.2.1 Issue #32 .......'&gt;&gt;&gt; comment_string.strip('.#! ')Section 3.2.1 Issue #32 strip()å‡½æ•°ä¼šä»å¼€å¤´å’Œç»“å°¾å¼€å§‹æ£€ç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸æ»¡è¶³è¦æ±‚çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºæ­¢ã€‚æ‰€ä»¥ä¸Šé¢çš„ä¾‹å­ä»ç»“å°¾æ£€ç´¢æ—¶ï¼Œé‡åˆ°2ä¸æ»¡è¶³è¦æ±‚å°±ç»“æŸäº†ã€‚ ç»¼ä¸Šï¼Œstrip()/lstrip()/rstrip()è¦æ…ç”¨å™¢ã€‚ å»æ‰©å±•åp.s.å¼€å¤´é‚£ç§å»æ‰©å±•åå…¶å®æœ‰å¾ˆå¤šå®ç°æ–¹å¼ï¼š 123&gt;&gt;&gt; filename = \"journey_p4.mp4\"&gt;&gt;&gt; filename.split(\".\")[0]journey_p4 æˆ–è€…ç”¨osæ¨¡å—ï¼š 123&gt;&gt;&gt; import os&gt;&gt;&gt; os.path.splitext(filename)('journey_p4', '.mp4') å¼•ç”¨ str.strip([chars]) str.lstrip([chars]) str.rstrip([chars])","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"strip","slug":"strip","permalink":"http://www.codec.wang/tags/strip/"},{"name":"lstrip","slug":"lstrip","permalink":"http://www.codec.wang/tags/lstrip/"},{"name":"rstrip","slug":"rstrip","permalink":"http://www.codec.wang/tags/rstrip/"}]},{"title":"ã€MightyPyã€‘å¤„ç†å‘½ä»¤è¡Œå‚æ•°å’Œé€‰é¡¹çš„å‡ ç§æ–¹å¼","slug":"MightyPyï¼šå¤„ç†å‘½ä»¤è¡Œå‚æ•°å’Œé€‰é¡¹çš„å‡ ç§æ–¹å¼","date":"2019-05-03T02:30:18.000Z","updated":"2020-05-21T02:06:41.634Z","comments":true,"path":"mighty-py-command-line-arguments/","link":"","permalink":"http://www.codec.wang/mighty-py-command-line-arguments/","excerpt":"è®¾è®¡Pythonæ¨¡å—åŠŸèƒ½æ—¶ï¼Œå‘½ä»¤è¡Œå‚æ•°æ˜¯ä¸€ä¸ªéå¸¸çµæ´»ä¸”ä¾¿æ·çš„æ–¹æ³•ï¼šä»å¤–éƒ¨è·å–é…ç½®å‚é‡ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹ä»£ç ã€‚Pythonå†…ç½®å‡ ç§å‘½ä»¤è¡Œå‚æ•°å’Œé€‰é¡¹çš„å¤„ç†æ–¹å¼ï¼Œå½“ç„¶ä¹Ÿæœ‰æ›´åŠ å¼ºå¤§çš„ç¬¬ä¸‰æ–¹çš„æ¨¡å—ï¼Œå¦‚ï¼šclickã€‚","text":"è®¾è®¡Pythonæ¨¡å—åŠŸèƒ½æ—¶ï¼Œå‘½ä»¤è¡Œå‚æ•°æ˜¯ä¸€ä¸ªéå¸¸çµæ´»ä¸”ä¾¿æ·çš„æ–¹æ³•ï¼šä»å¤–éƒ¨è·å–é…ç½®å‚é‡ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹ä»£ç ã€‚Pythonå†…ç½®å‡ ç§å‘½ä»¤è¡Œå‚æ•°å’Œé€‰é¡¹çš„å¤„ç†æ–¹å¼ï¼Œå½“ç„¶ä¹Ÿæœ‰æ›´åŠ å¼ºå¤§çš„ç¬¬ä¸‰æ–¹çš„æ¨¡å—ï¼Œå¦‚ï¼šclickã€‚ ä¸€èˆ¬æ¥è¯´å†…ç½®å°±å¤Ÿç”¨äº†ï¼Œæ‰€ä»¥æœ¬èŠ‚ä¸»è¦çœ‹ä¸‹å†…ç½®çš„ä¸‰ç§æ–¹å¼ã€‚ Louis, I think this is the beginning of a beautiful friendship. â€”â€”ã€ŠCasablancaã€‹è·¯æ˜“ï¼Œæˆ‘æƒ³è¿™æ˜¯ç¾å¥½å‹è°Šçš„å¼€å§‹ã€‚â€”â€”ã€Šå¡è¨å¸ƒå…°å¡ã€‹ å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼šMovieQuotes sys.argvè¿™æ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§æ–¹å¼ï¼Œå‘½ä»¤è¡Œä¼ å…¥çš„å‚æ•°å…¨éƒ¨å­˜å‚¨åœ¨sys.argv(argument values)è¿™ä¸ªåˆ—è¡¨ä¸­ï¼š 123import sysprint(type(sys.argv)) # list éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒPythonåé¢è·Ÿçš„ç¬¬ä¸€ä¸ªæ–‡æœ¬æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥ä¸€èˆ¬è„šæœ¬åæ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ã€‚å¦‚ä¸‹é¢è„šæœ¬åä¸ºusing_sys_argv.pyï¼š 12345print(\"å‚æ•°ä¸ªæ•°ï¼š\\t%s\"%len(sys.argv))print('è„šæœ¬åï¼š\\t%s'%sys.argv[0])print('å‚æ•°åˆ—è¡¨ï¼š')for i in range(1,len(sys.argv)): print('\\t\\tå‚æ•°%s: %s'%(i,sys.argv[i])) è¿è¡Œpython using_sys_argv.py 123å‚æ•°ä¸ªæ•°ï¼š 1è„šæœ¬åï¼š using_sys_argv.pyå‚æ•°åˆ—è¡¨ï¼š è¿è¡Œpython using_sys_argv.py tencent wang 12345å‚æ•°ä¸ªæ•°ï¼š 3è„šæœ¬åï¼š using_sys_argv.pyå‚æ•°åˆ—è¡¨ï¼š å‚æ•°1: tencent å‚æ•°2: wang è¿™ç§æ–¹å¼è™½ç„¶å¾ˆç®€å•ï¼Œä½†ä¸èƒ½å¾ˆå¥½åœ°è¯†åˆ«å‘½ä»¤è¡Œé€‰é¡¹ï¼Œéœ€è¦è‡ªå·±å†™é¢å¤–ä»£ç ï¼Œå¦‚ï¼š è¿è¡Œpython using_sys_argv.py -c tencent --name wang 1234567å‚æ•°ä¸ªæ•°ï¼š 5è„šæœ¬åï¼š using_sys_argv.pyå‚æ•°åˆ—è¡¨ï¼š å‚æ•°1: -c å‚æ•°2: tencent å‚æ•°3: --name å‚æ•°4: wang å¦‚ä¸Šï¼Œsys.argvç»Ÿä¸€è¯†åˆ«æˆäº†å‚æ•°é‡ã€‚ argparseargparseæ˜¯Pythonå†…ç½®çš„æ¨¡å—ï¼Œå®ƒä¼šä»sys.argvä¸­æ­£ç¡®è§£æå‡ºå‘½ä»¤è¡Œé€‰é¡¹å’Œå‚æ•°ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå¸®åŠ©å’Œä½¿ç”¨ä¿¡æ¯ã€‚ åŸºæœ¬ä½¿ç”¨argparseä½¿ç”¨åŸºæœ¬æ˜¯ä¸‰ä¸ªæ­¥éª¤ï¼š åˆ›å»ºArgumentParser()è§£æå™¨å¯¹è±¡ ä½¿ç”¨add_argument()æ·»åŠ å‚æ•° ä½¿ç”¨parse_args()è§£æå‚æ•° 12345678910import argparse# 1.å®šä¹‰è§£æå™¨parser = argparse.ArgumentParser()# 2.æ·»åŠ å‚æ•°parser.add_argument('integer',type=int,help='base number x')# 3.è§£æå‚æ•°args = parser.parse_args()print(args.integer) ä¸Šé¢å°±æ˜¯argparseçš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼Œè¿è¡Œä¸‹çœ‹çœ‹æ•ˆæœï¼š ç›´æ¥è¿è¡Œpython using_argparse.pyï¼Œä¼šæŠ¥é”™ï¼š 12usage: using_argparse.py [-h] integerusing_argparse.py: error: the following arguments are required: integer æç¤ºé€šè¿‡-hè·å–å¸®åŠ©ï¼Œå¹¶ä¸”integerè¿™ä¸ªå‚æ•°æ˜¯å¿…é¡»çš„ã€‚ è¿è¡Œpython using_argparse.py -hï¼Œæ˜¾ç¤ºå¸®åŠ©æ–‡æ¡£ï¼š 1234567usage: using_argparse.py [-h] integerpositional arguments: integer base number xoptional arguments: -h, --help show this help message and exit è¿è¡Œpython using_argparse.py 100 1100 å¯é€‰å‚æ•°å¹³å¸¸ä½¿ç”¨æœ€å¤šçš„åº”è¯¥æ˜¯æ·»åŠ çŸ­é€‰é¡¹-æˆ–é•¿é€‰é¡¹--çš„å¯é€‰å‚æ•°ï¼Œæ¯”å¦‚è¦è®¡ç®—ä¸€ä¸ªæ•°çš„næ¬¡æ–¹ï¼š 123456789101112131415import argparse# 1.å®šä¹‰è§£æå™¨parser = argparse.ArgumentParser()# 2.æ·»åŠ ä½ç½®å‚æ•°parser.add_argument('integer',type=int,help='base number x')# æ·»åŠ å¯é€‰å‚æ•°parser.add_argument('--powern',type=int,help='n power of a number')# 3.è§£æå‚æ•°args = parser.parse_args()if args.powern: # åˆ¤æ–­å¯é€‰å‚æ•° print(args.integer**args.powern)else: print(args.integer) æ­¤æ—¶ä¸åŠ --powernçš„è¿è¡Œç»“æœè·Ÿä¹‹å‰ä¸€æ ·ï¼Œæ·»åŠ åï¼Œä¼šè®¡ç®—x^nï¼š è¿è¡Œpython using_argparse.py 100 --powern 2 110000 æ›´å¤šç”¨æ³•è™½è¯´ä¸»è¦é€šè¿‡ä¸‰ä¸ªæ–¹æ³•å®ç°ï¼Œä½†æ–¹æ³•çš„å‚æ•°å¾ˆå¤šï¼Œæˆ‘ä»¬æŒ‘å‡ ä¸ªå¸¸ç”¨çš„è¯´ä¸‹ï¼Œæ›´å¤šè¯·å‚è€ƒæ¥å£æ–‡æ¡£ã€‚ ArgumentParser() å…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯descriptioné¡¹ï¼Œåœ¨è„šæœ¬å¸®åŠ©æ–‡æ¡£ä¸­èµ·è¯´æ˜ä½œç”¨ï¼Œå¦‚å‰é¢ä»£ç æ›´æ”¹ä¸ºï¼š 1parser = argparse.ArgumentParser(description='Basic Operations of an Integer.') æ­¤æ—¶è¿è¡Œpython using_argparse.py -hï¼š 123456usage: using_argparse.py [-h] [--powern POWERN] integerBasic Operations of an Integer.positional arguments:â€¦â€¦ add_argument() å…¶ä¸­å‚é‡ç±»å‹typeå’Œå¸®åŠ©ä¿¡æ¯helpä¸ç”¨å¤šè®²ï¼Œå…¶ä»–å‡ ä¸ªå¸¸ç”¨çš„è¯´æ˜ä¸€ä¸‹ï¼š name of flagsï¼Œæƒ³è®©è„šæœ¬åŒä¸€ä¸ªå¯é€‰å‚æ•°æ—¢æ”¯æŒçŸ­é€‰é¡¹-åˆæ”¯æŒé•¿é€‰é¡¹--ï¼Œå¯ä»¥ï¼š 1234parser.add_argument('--foo','-f')args = parser.parse_args()print(args.foo) # æ³¨æ„ä¸æ˜¯args.få™¢ï¼ è¿™æ ·çš„è¯ï¼Œè¿è¡Œæ—¶python script.py -f paramæˆ–python script.py --foo paraméƒ½å¯ä»¥ã€‚ 2.nargsï¼Œè¦è¯»å–çš„å‘½ä»¤è¡Œå‚æ•°ä¸ªæ•° nargs=nï¼Œè¡¨ç¤ºè¦è¯»å–nä¸ªå‚æ•°ï¼Œå¦‚ 1parser.add_argument('--foo','-f',nargs=2) è¿è¡Œæ—¶éœ€è¦åœ¨-fååŠ ä¸¤ä¸ªå‚æ•°ï¼špython script.py -f p1 p2 nargs=&#39;*&#39;/&#39;+&#39;ï¼Œå°†æ‰€æœ‰å‚æ•°åˆåœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼ˆ*å·å’Œ+å·çš„åŒºåˆ«ï¼š+å·éœ€è‡³å°‘1ä¸ªå‚æ•°ï¼‰ï¼š 1parser.add_argument('--foo','-f',nargs='+') è¿è¡Œpython script.py -f p1 p2 p3ç»“æœä¸ºï¼šfoo=[&#39;p1&#39;, &#39;p2&#39;, &#39;p3&#39;] nargs=&#39;?&#39;ï¼Œå‚æ•°æ²¡æä¾›æ—¶ï¼Œä½¿ç”¨é»˜è®¤å€¼ï¼ˆå¯é€‰å‚æ•°æ˜¯constï¼Œä½ç½®å‚æ•°æ˜¯defaultï¼‰ï¼š 12parser.add_argument('--foo','-f',nargs='?',const='param')parser.add_argument('integer',nargs='?',default='0') è¿è¡Œpython script.py -fï¼Œç»“æœä¸ºï¼šfoo=&#39;param&#39;,integer=&#39;0&#39; 3.requiredï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œargparseä¼šæŠŠ-å’Œ--çš„å‚æ•°ä½œä¸ºå¯é€‰çš„ï¼Œå¦‚æœéœ€è¦æŒ‡å®šæˆå¿…é¡»çš„è¯ï¼Œå¯ä»¥å°†requiredè®¾ç½®ä¸ºTrueï¼š 1parser.add_argument('--foo','-f',required=True) è¿è¡Œpython script.pyä¼šæç¤ºï¼šerror: the following arguments are required: --foo/-f 4.choicesï¼Œé™å®šå‚æ•°å€¼çš„èŒƒå›´ï¼Œå¦‚ï¼š 1parser.add_argument('--foo','-f',choices=['p1','p2','p3']) è¿è¡Œpython scipt.py -f paramä¼šæç¤ºï¼šerror: argument --foo/-f: invalid choice: &#39;param&#39; (choose from &#39;p1&#39;, &#39;p2&#39;, &#39;p3&#39;) parse_args() è¿™ä¸ªæ–¹æ³•æ²¡å•¥å¥½è®²çš„ï¼Œä¸»è¦æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°argsï¼Œé»˜è®¤æ˜¯ä»sys.argvå–å€¼ï¼Œè°ƒè¯•æ—¶ä¹Ÿå¯ä»¥æŠŠå‘½ä»¤è¡Œå‚æ•°åŠ ä¸Šå»ï¼Œè¿™æ ·å°±ä¸ç”¨åœ¨å‘½ä»¤è¡Œä¸­è®¾ç½®äº†ï¼š 1234parser.add_argument('--foo','-f',choices=['p1','p2','p3'])parser.add_argument('integer',nargs='?',default='0')# ç›´æ¥åœ¨ä»£ç ä¸­ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°args = parser.parse_args(['100','-f','p1']) æ­¤æ—¶ï¼Œåœ¨ç¼–è¾‘å™¨ä¸­ç›´æ¥è¿è¡Œæˆ–åœ¨å‘½ä»¤è¡Œä¸­ä¸åŠ å‚æ•°è¿è¡Œï¼špython scipt.pyéƒ½èƒ½å¾—åˆ°æ­£ç¡®ç»“æœï¼šinteger=&#39;100&#39;,foo=&#39;p1&#39; getoptPythonè¿˜æœ‰ä¸€ä¸ªgetoptæ¨¡å—ï¼Œå®ƒçš„è®¾è®¡ä¸Cè¯­è¨€ä¸­çš„getoptç±»ä¼¼ã€‚Pythonå®˜æ–¹å»ºè®®æ˜¯ä½ å¦‚æœä¸ç†Ÿæ‚‰Cä¸­çš„getoptæˆ–è€…æƒ³å†™æ›´å°‘çš„ä»£ç çš„è¯ï¼Œæ›´æ¨èç”¨argparseï¼Œæ‰€ä»¥ä¸å†è¯¦è¿°ï¼Œæ„Ÿå…´è¶£å¯å‚è€ƒæ¥å£æ–‡æ¡£ï¼š Note: The getopt module is a parser for command line options whose API is designed to be familiar to users of the C getopt() function. Users who are unfamiliar with the C getopt() function or who would like to write less code and get better help and error messages should consider using the argparse module instead. æ¥å£æ–‡æ¡£ Python sys Python argparse Python getopt","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"argv","slug":"argv","permalink":"http://www.codec.wang/tags/argv/"},{"name":"å‘½ä»¤è¡Œå‚æ•°","slug":"å‘½ä»¤è¡Œå‚æ•°","permalink":"http://www.codec.wang/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0/"}]},{"title":"ã€æ ‘è“æ´¾ã€‘å˜èº«å…¨èƒ½æ— çº¿è·¯ç”±å™¨(2/2B)","slug":"ã€æ ‘è“æ´¾ã€‘å˜èº«å…¨èƒ½æ— çº¿è·¯ç”±å™¨(22B)","date":"2019-04-03T03:16:34.000Z","updated":"2020-04-07T08:21:44.688Z","comments":true,"path":"raspberrypi-as-router/","link":"","permalink":"http://www.codec.wang/raspberrypi-as-router/","excerpt":"æ ‘è“æ´¾èƒ½åšçš„äº‹æƒ…å®åœ¨æ˜¯å¤ªå¤šäº†ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥æŠŠå®ƒæ”¹é€ æˆä¸€å°å…¨èƒ½çš„æ— çº¿è·¯ç”±å™¨ã€‚è¦çŸ¥é“æ ‘è“æ´¾çš„Socæ€§èƒ½å¯æ¯”å»‰ä»·è·¯ç”±å™¨é«˜å‡ºä¸å°‘ã€‚","text":"æ ‘è“æ´¾èƒ½åšçš„äº‹æƒ…å®åœ¨æ˜¯å¤ªå¤šäº†ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥æŠŠå®ƒæ”¹é€ æˆä¸€å°å…¨èƒ½çš„æ— çº¿è·¯ç”±å™¨ã€‚è¦çŸ¥é“æ ‘è“æ´¾çš„Socæ€§èƒ½å¯æ¯”å»‰ä»·è·¯ç”±å™¨é«˜å‡ºä¸å°‘ã€‚ äººåœ¨é¡ºå¢ƒæ—¶å€™çš„å‹è°Šï¼Œå¯èƒ½ä¸æ˜¯é‚£ä¹ˆåšå›ºçš„ã€‚ â€”â€”ã€Šé£é©°äººç”Ÿã€‹ å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼šMovieQuotes ç¡¬ä»¶/è½¯ä»¶ç‰ˆæœ¬è¯´æ˜æˆ‘ä¸€å¼€å§‹æ˜¯ç”¨3B+çš„ï¼Œä½†å®˜æ–¹çš„å›ºä»¶çƒ§å†™åä¸æ–­é‡å¯ï¼Œæœ‰é—®é¢˜ï¼Œç½‘ä¸Šå¾ˆå¤šäººä¹Ÿé‡åˆ°ã€‚è™½ç„¶é€šè¿‡çƒ§å†™å¼€å‘ç‰ˆå›ºä»¶è§£å†³äº†ï¼Œä½†æœ¬æ–‡è¿˜æ˜¯å…ˆä»¥å®˜æ–¹å›ºä»¶ä¸ºä¸»ï¼Œåç»­å†å†™ç¯‡3B+çš„ã€‚ æ ‘è“æ´¾ 2B OSï¼šOpenWrt 18.06.2 TFå¡ï¼šé—ªè¿ªSanDisk 16GB C10 USBæ— çº¿ç½‘å¡ï¼šEDUP EP-N8508GS WANã€LANã€WLANåŒºåˆ«åœ¨å¼€å¹²ä¹‹å‰ï¼Œæœ‰å‡ ä¸ªå°æ¦‚å¿µè¿˜æ˜¯è¦äº†è§£ä¸€ä¸‹ï¼š LANï¼šLocal Area Networkå±€åŸŸç½‘ WANï¼šWide Area Networkå¹¿åŸŸç½‘ WLANï¼šWireless Local Area Networksæ— çº¿å±€åŸŸç½‘ ç®€å•æ¥è¯´ï¼ŒLANå°±æ˜¯ç”¨æ¥ç»„å»ºæœ‰çº¿å±€åŸŸç½‘ï¼Œè€ŒWLANæ˜¯ç”¨æ¥ç»„å»ºæ— çº¿å±€åŸŸç½‘çš„ã€‚è¦ä½¿å±€åŸŸç½‘å†…çš„è®¾å¤‡è®¿é—®å¤–ç½‘ï¼Œå°±éœ€è¦WANå£æ¥å…¥ç½‘ç»œè¿è¥å•†æˆ–è€…ä¸Šå±‚ç½‘ç»œã€‚æ„Ÿå…´è¶£çš„å¯å‚è€ƒå¼•ç”¨ã€‚ å®‰è£…é…ç½®OpenWrtOpenWrtå®˜ç½‘æä¾›äº†æ ‘è“æ´¾ç³»åˆ—çš„ç›¸å…³èµ„æ–™å’Œæœ€æ–°å›ºä»¶ä¸‹è½½ï¼š https://openwrt.org/toh/raspberry_pi_foundation/raspberry_pi å‹å· SoC CPU MHz WLAN Hardware Raspberry Pi 2B Broadcom BCM2836 900 æ—  é¦–å…ˆæ˜ç¡®ä¸‹æˆ‘ä»¬è¦åšçš„äº‹æƒ…ï¼šå°†æ ‘è“æ´¾çš„æœ‰çº¿ç½‘å£ä½œä¸ºæ–°è·¯ç”±å™¨çš„WANå£ï¼Œç”±äº2/2Bä¸å¸¦æ— çº¿ç½‘å¡ï¼Œæ‰€ä»¥å°†USBæ— çº¿ç½‘å¡ä½œä¸ºWLANäº§ç”ŸWIFIã€‚ ä¸‹è½½å›ºä»¶å®‰è£…å›ºä»¶å’Œå‡çº§å›ºä»¶ä»»æ„ä¸‹è½½ä¸€ä¸ªå³å¯ï¼š å®‰è£…å›ºä»¶ï¼šopenwrt-18.06.2-brcm2708-bcm2709-rpi-2-ext4-factory.img.gz å‡çº§å›ºä»¶ï¼šopenwrt-18.06.2-brcm2708-bcm2709-rpi-2-ext4-sysupgrade.img.gz å›ºä»¶çƒ§å†™Windowsç³»ç»Ÿçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨Win32DiskImageræˆ–Etcherï¼Œæ“ä½œéƒ½å¾ˆç®€å•ï¼Œé€‰æ‹©å›ºä»¶å’ŒTFå¡ï¼Œç‚¹å‡»çƒ§å†™å°±å¯ä»¥äº†ã€‚åè€…çš„é¢œå€¼æ›´é«˜ä¸€äº›ï¼Œæˆ‘å–œæ¬¢(â—Ë‡âˆ€Ë‡â—) è¿›å…¥ç³»ç»Ÿç°åœ¨è·Ÿç©ä¼ ç»Ÿæ ‘è“æ´¾ä¸€æ ·ï¼Œæ¥ä¸Šç”µæºã€æ˜¾ç¤ºå±å’Œé”®ç›˜åï¼Œæ­£å¸¸å¼€æœºï¼Œéƒ½æ˜¯ç»ˆç«¯ç•Œé¢ï¼Œä¸éœ€è¦é¼ æ ‡ã€‚ å¯åŠ¨åï¼Œæ ¹æ®æç¤ºï¼ŒæŒ‰ä¸‹å›è½¦ï¼Œå°±å¯ä»¥è¿›å…¥ç»ˆç«¯ç•Œé¢ï¼š 12345678910111213141516Please press Enter to activate this console. _______ ________ __ | |.-----.-----.-----.| | | |.----.| |_ | - || _ | -__| || | | || _|| _| |_______|| __|_____|__|__||________||__| |____| |__| W I R E L E S S F R E E D O M ----------------------------------------------------- OpenWrt 18.06.2, r7676-cddd7b4c77 -----------------------------------------------------=== WARNING! ===================================== There is no root password defined on this device! Use the \"passwd\" command to set up a new password in order to prevent unauthorized SSH logins. -------------------------------------------------- root@OpenWrt:~# è¿›å…¥è·¯ç”±å™¨åå°è¿›å…¥åå°æœ‰å¤šç§æ–¹å¼ï¼Œæˆ‘å½’çº³ä¸ºä¸¤ç§ï¼šç½‘çº¿ç›´è¿çš„æ–¹å¼å’Œç»ˆç«¯æ“ä½œçš„æ–¹å¼ã€‚æ¨èç»ˆç«¯æ“ä½œï¼Œè™½ç„¶çœ‹ä¸Šå»å¤æ‚äº†ç‚¹ï¼Œä½†å…¶å®æ›´å¿«æ·ã€‚ æ–¹æ³•1ï¼šç½‘çº¿ç›´è¿å°†ç½‘çº¿çš„ä¸€ç«¯æ’å…¥æ ‘è“æ´¾ï¼Œå¦ä¸€ç«¯æ’å…¥ç”µè„‘ï¼Œæ–­å¼€ç”µè„‘çš„å…¶ä»–æœ‰çº¿æˆ–æ— çº¿è¿æ¥ã€‚å¾…ç½‘ç»œæˆåŠŸè¯†åˆ«åï¼Œæµè§ˆå™¨ä¸­è®¿é—®192.168.1.1ä¾¿å¯è¿›å…¥åå°ã€‚ é»˜è®¤æ²¡æœ‰å¯†ç ç›´æ¥ç™»å½•ï¼Œè¿›å…¥ä¹‹åï¼Œéœ€è¦è®©æ ‘è“æ´¾è¿æ¥åˆ°å·²æœ‰çš„ç½‘ç»œä¸­ï¼šç‚¹å‡» â€˜Networkâ€™ - â€˜Interfaceâ€™ - â€˜Add new interfaceâ€™ï¼Œè¿™é‡Œæˆ‘è®©æ ‘è“æ´¾æ¥å…¥å®¶é‡Œè·¯ç”±å™¨LANå£åˆ†å‡ºçš„æœ‰çº¿ç½‘ç»œï¼Œæ‰€ä»¥åè®®é€‰æ‹© â€˜DHCP clientâ€™ï¼Œç‚¹å‡» â€˜Submitâ€™æäº¤ã€‚ å¦‚æœä½ æ‰“ç®—å°†æ ‘è“æ´¾æ¥å…¥ç½‘ç»œè¿è¥å•†è®¾å¤‡ï¼Œå¯èƒ½éœ€è¦è¾“å…¥å®½å¸¦è´¦å·å¯†ç ï¼Œåè®®é€‰æ‹©â€™PPPoEâ€™ã€‚ ç‚¹å‡»â€™Submitâ€™æäº¤ä¹‹åå†ç‚¹å‡»â€™Save &amp; Applyâ€™ï¼Œä¼šå¼¹å‡º30sçš„é…ç½®åº”ç”¨æ—¶é—´ã€‚ æ­¤æ—¶æ‹”æ‰æ ‘è“æ´¾ä¸ç”µè„‘çš„ç›´è¿ç½‘çº¿ï¼Œæ’å…¥æœ‰çº¿ç½‘ã€‚ç¼–è¾‘/etc/config/networkç½‘ç»œé…ç½®æ–‡ä»¶ï¼Œå°†lané…ç½®çš„ifnameä¸€è¡Œæ³¨é‡Šæ‰ï¼š 1vim /etc/config/network 1234567config interface 'lan' option type 'bridge'# option ifname 'eth0' option proto 'static' option ipaddr '192.168.1.1' option netmask '255.255.255.0' option ip6assign '60' ç”¨ifconfigæŸ¥çœ‹æ ‘è“æ´¾çš„IPåœ°å€ï¼Œå¦‚192.168.1.112ï¼Œåœ¨å±€åŸŸç½‘å†…çš„å…¶ä»–è®¾å¤‡ä¸Šè®¿é—®æ­¤IPå°±å¯ä»¥è¿›å…¥æ ‘è“æ´¾çš„è·¯ç”±å™¨åå°ã€‚ æ–¹æ³•2ï¼šç»ˆç«¯æ“ä½œå…¶å®æ–¹æ³•1æœ¬èº«å°±æ˜¯æ›´æ”¹/etc/config/networkæ–‡ä»¶ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ç¼–è¾‘ï¼Œæ·»åŠ ä¸€ä¸ªå¹¿åŸŸç½‘wanå£é…ç½®ï¼Œå¹¶å°†lançš„ifnameä¸€è¡Œæ³¨é‡Šæ‰ï¼š 1vim /etc/config/network 1234567891011config interface 'lan' option type 'bridge'# option ifname 'eth0' option proto 'static' option ipaddr '192.168.1.1' option netmask '255.255.255.0' option ip6assign '60'config interface 'wan' option proto 'dhcp' option ifname 'eth0' å¦‚æœæ ‘è“æ´¾æ¥çš„æ˜¯å®¶é‡Œè·¯ç”±å™¨LANå£å‡ºæ¥çš„ç½‘çº¿ï¼Œä¸€èˆ¬é…ç½®æˆDHCPåè®®å°±å¯ä»¥äº†ã€‚å¦‚æœæ˜¯ç›´æ¥ä»ç½‘ç»œè¿è¥å•†è®¾å¤‡å‡ºæ¥çš„ç½‘çº¿ï¼Œåˆ™å¯èƒ½éœ€è¦è¾“å…¥å®½å¸¦è´¦å·å¯†ç ï¼š 12345config interface 'wan' option proto 'pppoe' option ifname 'eth0' option username 'xxxxxx' option password 'xxxxxx' æ·»åŠ å®Œä¹‹åï¼Œä½¿ç”¨/etc/init.d/network restarté‡å¯ç½‘ç»œæœåŠ¡ï¼Œä½¿ç”¨ifconfigæŸ¥çœ‹ipåœ°å€ï¼šå¦‚192.168.1.112ï¼Œç„¶ååœ¨å±€åŸŸç½‘å†…çš„å…¶ä»–è®¾å¤‡ä¸Šè¾“å…¥æ­¤IPä¾¿å¯ä»¥è®¿é—®OpenWrt çš„åå°äº†ã€‚ å¦‚æœè®¿é—®æœ‰é—®é¢˜ï¼Œå¯ä»¥å…³é—­é˜²ç«å¢™è¯•ä¸‹ï¼š/etc/init.d/firewall stop ä¸è®ºä½¿ç”¨å“ªç§æ–¹æ³•ï¼Œè¿›å…¥ä¹‹åï¼Œé»˜è®¤éƒ½æ˜¯æ²¡æœ‰å¯†ç çš„ã€‚ä¸ºå®‰å…¨èµ·è§ï¼Œè¿™é‡Œå…ˆè®¾ç½®ä¸ªå¯†ç ï¼Œç‚¹å‡» â€˜Go to password configurationâ€¦â€™ï¼Œè¾“å…¥å¯†ç åï¼Œç›´æ¥ç‚¹å‡» â€˜Save &amp; Applyâ€™ï¼Œå…¶ä»–ä¸ç”¨ç®¡ã€‚ æ›´æ¢æºæ ‘è“æ´¾æˆåŠŸè”ç½‘åï¼Œéœ€è¦ä¸‹è½½ä¸€äº›æ’ä»¶ã€‚ä¸€æ–¹é¢å®˜æ–¹çš„æºäº²æµ‹æ˜¯ä¸åŒ…å«USBç½‘å¡é©±åŠ¨å’Œä¸­æ–‡æ’ä»¶çš„ï¼Œä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼Œå¦ä¸€æ–¹é¢å›½å†…çš„æºé€Ÿåº¦ä¼šå¿«å¾ˆå¤šï¼Œæ‰€ä»¥è¿™é‡Œç»Ÿä¸€æ¢æˆä¸­ç§‘å¤§çš„æºã€‚ ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦å¼€æºé•œåƒç«™ LEDEï¼šä½¿ç”¨å¸®åŠ© å¯ä»¥åœ¨ç»ˆç«¯æ“ä½œï¼Œä¹Ÿå¯ä»¥åœ¨Webåå°æ“ä½œï¼š Webåå°æ“ä½œè¿›å…¥è·¯ç”±å™¨åå°ï¼Œä¾æ¬¡ç‚¹å‡» â€˜Systemâ€™ - â€˜Softwareâ€™ - â€˜Configurationâ€™ï¼Œåœ¨ â€˜Distribution feedsâ€™ä¸‹é¢æˆ‘ä»¬æ›´æ¢æˆå›½å†…çš„æºï¼Œæ³¨æ„ç‰ˆæœ¬å™¢ï¼ˆæœ€å¥½å…ˆå°†åŸæœ‰çš„å¤‡ä»½ä¸‹ï¼‰ï¼š 123456src/gz openwrt_core http://mirrors.ustc.edu.cn/lede/releases/18.06.2/targets/brcm2708/bcm2709/packagessrc/gz openwrt_base http://mirrors.ustc.edu.cn/lede/releases/18.06.2/packages/arm_cortex-a7_neon-vfpv4/basesrc/gz openwrt_luci http://mirrors.ustc.edu.cn/lede/releases/18.06.2/packages/arm_cortex-a7_neon-vfpv4/lucisrc/gz openwrt_packages http://mirrors.ustc.edu.cn/lede/releases/18.06.2/packages/arm_cortex-a7_neon-vfpv4/packagessrc/gz openwrt_routing http://mirrors.ustc.edu.cn/lede/releases/18.06.2/packages/arm_cortex-a7_neon-vfpv4/routingsrc/gz openwrt_telephony http://mirrors.ustc.edu.cn/lede/releases/18.06.2/packages/arm_cortex-a7_neon-vfpv4/telephony ç„¶ååˆ‡æ¢åˆ° â€˜Actionsâ€™æ ‡ç­¾ä¸‹ï¼Œç‚¹å‡» â€˜Update listsâ€™ä¾¿å¯ä»¥è·å–æ‰€æœ‰å¯ç”¨çš„ipkåŒ…ï¼š ç»ˆç«¯æ“ä½œé¦–å…ˆå°†åŸæœ‰çš„æºé…ç½®æ–‡ä»¶å¤‡ä»½ï¼š 1cp /etc/opkg/distfeeds.conf /etc/opkg/distfeeds.conf.bak ç„¶åç”¨sedå‘½ä»¤æ›¿æ¢æ‰æºåœ°å€ï¼š 1sed -i 's|downloads.openwrt.org|mirrors.ustc.edu.cn/lede|g' /etc/opkg/distfeeds.conf æœ€åè®°å¾—æ‰§è¡Œæ›´æ–°ï¼š 1opkg update å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…åœ¨è·¯ç”±å™¨åå°çš„ â€˜Systemâ€™ - â€˜Softwareâ€™ä¸‹é¢çš„ â€˜Filterâ€™ä¸­æœç´¢è¦å®‰è£…çš„è½¯ä»¶åŒ…ï¼Œæˆ–è€…åœ¨ç»ˆç«¯è¾“å…¥ï¼š 1opkg install pkg_name éƒ½å¯ä»¥å®‰è£…ï¼Œä¸»è¦è£…3ä¸ªåŒ…ï¼š è·¯ç”±å™¨åå°ä¸­æ–‡æ’ä»¶ï¼šluci-i18n-base-zh-cn USBæ— çº¿ç½‘å¡é©±åŠ¨ï¼škmod-rtl8192cu æ— çº¿é…ç½®å·¥å…·ï¼šwireless-tools é…ç½®æ— çº¿å®‰è£…ä¸­æ–‡åŒ…åï¼Œåå°è‡ªåŠ¨å˜æˆäº†ä¸­æ–‡ã€‚æ­¤æ—¶èœå•æ â€™ç½‘ç»œâ€™ä¸­ä¼šå¤šå‡ºä¸ªâ€™æ— çº¿â€™ï¼Œç‚¹å‡»è¿›å…¥ï¼š é»˜è®¤æƒ…å†µä¸‹ï¼Œæ— çº¿å¹¶æ²¡æœ‰å¯ç”¨ï¼Œåªéœ€ç‚¹å‡»å¯ç”¨å°±å¯ä»¥äº†ï¼š ä¸è¿‡è¿˜æœ‰ç‚¹å°é—®é¢˜ï¼Œé¦–å…ˆè¿™ä¸ªWiFiæ²¡å¯†ç ï¼Œå…¶æ¬¡ä¹Ÿæ²¡ç½‘ã€‚ç‚¹å‡»â€™ç¼–è¾‘â€™ï¼Œå°†ç½‘ç»œæ¥æºé€‰æ‹©ä¸ºWANï¼š å…¶æ¬¡åœ¨â€™æ— çº¿å®‰å…¨â€™è¿™é‡Œç»™WiFiè®¾ç½®ä¸ªå¯†ç ï¼Œæœ€åä¿å­˜å°±å¯ä»¥äº†ï¼š ç°åœ¨æ‰‹æœºæˆ–ç”µè„‘å¯ä»¥è¿æ¥ä¸Šè¯•è¯•è¾£ï¼š ä¸‡èƒ½è·¯ç”±å™¨ä¹‹æ‰€ä»¥ç§°ä¹‹ä¸ºâ€™ä¸‡èƒ½è·¯ç”±å™¨â€™ï¼Œæ˜¯å› ä¸ºOpenWrtä¸ä»…å®Œå…¨å¼€æºï¼Œå¯ç©æ€§å¾ˆé«˜ï¼Œè€Œä¸”ç¬¬ä¸‰æ–¹æ’ä»¶éå¸¸ä¸°å¯Œï¼Œæ¯”å¦‚å¯ä»¥ç§‘å­¦ä¸Šç½‘çš„shadowsocksï¼Œå®‰è£…é…ç½®ä¹‹åï¼Œå…¨å¤©24hå‡ºå›½æ—…æ¸¸ä¸æˆé—®é¢˜å‘€ï¼ˆæœ‰ç©ºå†™ç¯‡( $ _ $ )ï¼‰ã€‚ å¼•ç”¨ LANã€WANã€WLANçš„åŒºåˆ« OpenWrt Raspberry Pi æ ‘è“æ´¾å®‰è£… OpenWrt æ‰“é€ è¶…çº§è·¯ç”±å™¨ VLOGä¸¨æ ‘è“æ´¾(raspberrypi Pi1-Pi3)å®‰è£…OPENWRT LEDEç§’å˜xxx ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"http://www.codec.wang/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"},{"name":"OpenWrt","slug":"OpenWrt","permalink":"http://www.codec.wang/tags/OpenWrt/"}]},{"title":"ã€æ ‘è“æ´¾ã€‘ç”¨PLEXæ‰“é€ å®¶åº­å½±éŸ³ä¸­å¿ƒï¼","slug":"ã€æ ‘è“æ´¾ã€‘ç”¨PLEXæ‰“é€ å®¶åº­å½±éŸ³ä¸­å¿ƒï¼","date":"2019-03-27T14:43:35.000Z","updated":"2020-04-07T03:53:27.982Z","comments":true,"path":"raspberrypi-how-to-install-plex-server/","link":"","permalink":"http://www.codec.wang/raspberrypi-how-to-install-plex-server/","excerpt":"ç”µè„‘ä¸‹è½½äº†éƒ¨ç”µå½±ï¼Œæ™šä¸Šæƒ³åœ¨æ‰‹æœºä¸Šçœ‹ï¼Œè€å©†ä¹Ÿæƒ³çœ‹ï¼ˆå•¥ï¼Ÿï¼ï¼‰ï¼Œæ‹·è´ï¼Ÿæƒ³åœ¨æ‰‹æœºä¸Šçœ‹ä»¥å‰çš„ç”µå½±æˆ–è€…ç¡¬ç›˜é‡Œå­˜çš„è§†é¢‘/ç…§ç‰‡ï¼Œæ‹·è´ï¼Ÿä½¿ç”¨äº‘ç›˜å­˜å‚¨å‘¢ï¼Ÿé€Ÿåº¦ã€å®¹é‡ã€æ’­æ”¾ç ç‡ã€é‡å¤å ç”¨æœ¬åœ°å®¹é‡éƒ½æ˜¯é—®é¢˜ã€‚å¦‚æœæœ‰ä¸€å—å­˜æ”¾èµ„æºçš„ç¡¬ç›˜ï¼Œå®¶äººéƒ½å¯ä»¥é«˜é€Ÿè®¿é—®å®ƒï¼Œä½•ä¹è€Œä¸ä¸ºå‘¢ï¼Ÿæˆ‘è¯´çš„ä¸æ˜¯NASå™¢~","text":"ç”µè„‘ä¸‹è½½äº†éƒ¨ç”µå½±ï¼Œæ™šä¸Šæƒ³åœ¨æ‰‹æœºä¸Šçœ‹ï¼Œè€å©†ä¹Ÿæƒ³çœ‹ï¼ˆå•¥ï¼Ÿï¼ï¼‰ï¼Œæ‹·è´ï¼Ÿæƒ³åœ¨æ‰‹æœºä¸Šçœ‹ä»¥å‰çš„ç”µå½±æˆ–è€…ç¡¬ç›˜é‡Œå­˜çš„è§†é¢‘/ç…§ç‰‡ï¼Œæ‹·è´ï¼Ÿä½¿ç”¨äº‘ç›˜å­˜å‚¨å‘¢ï¼Ÿé€Ÿåº¦ã€å®¹é‡ã€æ’­æ”¾ç ç‡ã€é‡å¤å ç”¨æœ¬åœ°å®¹é‡éƒ½æ˜¯é—®é¢˜ã€‚å¦‚æœæœ‰ä¸€å—å­˜æ”¾èµ„æºçš„ç¡¬ç›˜ï¼Œå®¶äººéƒ½å¯ä»¥é«˜é€Ÿè®¿é—®å®ƒï¼Œä½•ä¹è€Œä¸ä¸ºå‘¢ï¼Ÿæˆ‘è¯´çš„ä¸æ˜¯NASå™¢~ May the force be with you. â€”â€”ã€ŠStar Warsã€‹æ„¿åŸåŠ›ä¸ä½ åŒåœ¨ï¼â€”â€”ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼šMovieQuotes ç‰ˆæœ¬è¯´æ˜ æ ‘è“æ´¾ 3B+ OSï¼šRaspbian 9.4 (Stretch) TFå¡ï¼šä¸‰æ˜ŸSAMSUNG 32GB EVO+ PMSï¼š1.15.2.793 armhf ç§»åŠ¨ç¡¬ç›˜ï¼š1TB ä»€ä¹ˆæ˜¯PlexPlexä¸»æ‰“æµåª’ä½“ä¼ è¾“æœåŠ¡ï¼Œç®€å•æ¥è¯´ï¼Œæœ‰ä¸€å°æ”¾æ»¡èµ„æ–™çš„è®¾å¤‡ï¼Œé€šè¿‡å®‰è£… PMS(Plex Media Server)ï¼Œå°±å¯ä»¥æ‰“é€šWindows/Linux/Macç”µè„‘ã€ç”µè§†TVã€Android/IOSæ‰‹æœºã€PS/XBOXæ¸¸æˆä¸»æœºç­‰ç­‰è®¾å¤‡ã€‚Plexæ˜¯åœ¨æœåŠ¡ç«¯è§£ç ï¼Œç„¶åå®ç°ä¸²æµï¼Œæ‰€ä»¥åœ¨æ ‘è“æ´¾ä¸Šå®‰è£…PlexæœåŠ¡çš„è¯ï¼Œå—æ€§èƒ½é™åˆ¶ï¼Œ720Pä»¥ä¸‹çš„æ„Ÿè§‰è¿˜è¡Œï¼Œæµç•…æ’­æ”¾ï¼Œå†é«˜å°±æœ‰ç‚¹åƒä¸æ¶ˆäº†ã€‚ ç›¸æ¯”Kodiï¼ŒPlexçš„ç•Œé¢ç¾è§‚ç®€å•ã€äº¤äº’ä¼˜ç§€ã€æœåŠ¡å®Œæ•´ï¼Œé…ç½®èµ·æ¥å¯¹æ–°æ‰‹ä¹Ÿå‹å¥½ã€‚p.sæƒ³äº†è§£æ›´å¤šPlexçš„ä¸œè¥¿å¯ä»¥çœ‹ä¸‹å¼•ç”¨ï¼Œè¿™ç¯‡æˆ‘ä¸»è¦åˆ†äº«ä¸‹æ ‘è“æ´¾ä¸Šçš„å®‰è£…å’ŒæŒ‚è½½Uç›˜ç­‰æŠ€æœ¯é—®é¢˜ã€‚ å®‰è£…PMSå®˜ç½‘å·²ç»æœ‰äº†åŸºäºarmhf/ARMv7å¹¶æ”¯æŒæ ‘è“æ´¾çš„å®‰è£…åŒ…äº†ï¼Œéå¸¸æ–¹ä¾¿ï¼ ä¹‹æ‰€ä»¥å¼ºè°ƒä¸Šé¢è¿™å¥è¯ï¼Œæ˜¯å› ä¸ºç½‘ä¸Šå¤§éƒ¨åˆ†èµ„æ–™éƒ½æ˜¯åŸºäºdev2day.deçš„ç‰ˆæœ¬ï¼Œè£…èµ·æ¥ç•¥å¾®éº»çƒ¦ä¸€ç‚¹ï¼Œå°±è¿è¿™ä¸ªåŒ…çš„ä½œè€…éƒ½è¡¨ç¤ºï¼š Plex now provides official packages. So, this project is considered EOL by me. å®˜æ–¹çš„ç‰ˆæœ¬è£…èµ·æ¥å°±å¾ˆå®¹æ˜“äº†ï¼Œå®‰è£…ä¹‹å‰ï¼Œå¤§å®¶éœ€è¦åˆ°Plexå®˜ç½‘å…ˆæ³¨å†Œä¸ªè´¦å·ã€‚ ç¬¬ä¸€æ­¥ï¼šæ›´æ–°æ ‘è“æ´¾åˆ°æœ€æ–°ã€‚å¯ä»¥æ›´æ¢æˆå›½å†…æºï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤šã€‚ 1234567# æ›´æ¢æ¸…åå¤§å­¦æºsudo sed -i 's|raspbian.raspberrypi.org|mirrors.tuna.tsinghua.edu.cn/raspbian|g' /etc/apt/sources.list# æ›´æ–°ç³»ç»Ÿsudo apt updatesudo apt upgrade# æœ€å¥½é‡å¯ä¸€ä¸‹reboot æ›´æ–°åï¼Œæœ€å¥½é‡å¯ä¸€ä¸‹ï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šæç¤ºé‡å¯ã€‚ ç¬¬äºŒæ­¥ï¼šä¸‹è½½å®˜æ–¹åŒ…å¹¶å®‰è£…ã€‚ 1wget https://downloads.plex.tv/plex-media-server-new/1.15.2.793-782228f99/debian/plexmediaserver_1.15.2.793-782228f99_armhf.deb ä¸‹è½½æ…¢çš„è¯ï¼Œå¯ä»¥åˆ°å®˜ç½‘ä¸‹è½½ç¦»çº¿ç‰ˆï¼šhttps://www.plex.tv/media-server-downloads/ï¼Œæ³¨æ„é€‰æ‹©ARMv7ç‰ˆæœ¬ï¼ˆarmhfä¸ARMv7ã€ARMv8ç­‰åŒºåˆ«å¯å‚è€ƒå¼•ç”¨ï¼‰ã€‚ debçš„åŒ…å®‰è£…å¤§å®¶åº”è¯¥å¾ˆç†Ÿæ‚‰äº†ï¼Œä¸€å¥è¯ï¼š 1sudo dpkg -i plexmediaserver_1.15.2.793-782228f99_armhf.deb æœ€åçœ‹ä¸‹æœåŠ¡æœ‰æ²¡æœ‰å¯åŠ¨ï¼š 1systemctl status plexmediaserver å¦‚æœå‡ºç°runningçš„æç¤º ï¼Œå°±è¯´æ˜æœåŠ¡è¿è¡Œæ­£å¸¸ï¼š 123â— plexmediaserver.service - Plex Media Server Loaded: loaded (/lib/systemd/system/plexmediaserver.service; enabled; vendor preset: enabled) Active: active (running) since Wed 2019-03-27 17:30:23 CST; 2h 51min ago æ­¤æ—¶å¯ä»¥åœ¨èœå•é‡Œé¢å¯åŠ¨ï¼Œæˆ–è€…ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼šhttp://localhost:32400/web/ é¦–æ¬¡å¯åŠ¨éœ€è¦ä½ ç™»å½•Plexè´¦å·ï¼š è®¾ç½®æœåŠ¡å™¨çš„åç§°ï¼š åœ¨æ·»åŠ èµ„æ–™åº“è¿™é‡Œï¼Œé»˜è®¤æ˜¯ä¸æ”¯æŒæ ‘è“æ´¾ä¸ŠæŒ‚è½½çš„Uç›˜å’Œç§»åŠ¨ç¡¬ç›˜ï¼ˆwhatï¼Ÿæˆ‘çš„pianéƒ½åœ¨ç¡¬ç›˜é‡Œå•Šï¼‰ï¼Œåˆ«æ‹…å¿ƒï¼Œæˆ‘ä»¬åç»­è§£å†³ã€‚ç°åœ¨å…ˆä¸æ·»åŠ ï¼Œç›´æ¥ä¸‹ä¸€æ­¥ï¼š ç‚¹å‡»å®Œæˆå°±è¿›å…¥Plexçš„æ§åˆ¶é¢æ¿äº†ï¼Œå±€åŸŸç½‘å†…çš„ä»»ä½•è®¾å¤‡åœ¨æµè§ˆå™¨ä¸­è®¿é—®https://app.plex.tvä¹Ÿå¯ä»¥ã€‚ å¤–æŒ‚Uç›˜æˆ–ç§»åŠ¨ç¡¬ç›˜ ç°åœ¨æ€»ä¸èƒ½æŠŠç”µå½±ã€èµ„æ–™å•¥çš„éƒ½å­˜åœ¨æ ‘è“æ´¾çš„TFå¡é‡Œå§ã€‚è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼šä½¿ç”¨åˆ†åŒºçš„å”¯ä¸€æ ‡è¯†ç ï¼ˆUniversally Unique Identifier/UUIDï¼‰åœ¨fstabæ–‡ä»¶ä¸­è‡ªåŠ¨æŒ‚è½½åˆ†åŒºã€‚ é¦–å…ˆåœ¨æ ‘è“æ´¾ä¸Šæ’å…¥ç§»åŠ¨ç¡¬ç›˜ï¼Œæ‰“å°å‡ºå…¶çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚æˆ‘çš„è®¾å¤‡åœ°å€æ˜¯/dev/sda1ï¼š 12sudo cat /proc/mounts# /dev/sda1 /media/pi/ex2tronMovie fuseblk rw,nosuid,nodev,relatime,user_id=0,group_id=0,default_permissions,allow_other,blksize=4096 0 0 å®‰è£…NTFS-3Gé©±åŠ¨ç¨‹åºï¼š 1sudo apt install ntfs-3g ä½¿ç”¨idæŒ‡ä»¤æ‰“å°å‡ºUser ID(UID)å’ŒGroup ID(GID)ï¼š 12id -g pi # 1000id -u pi # 1000 å†æ‰“å°å‡ºç¡¬ç›˜åˆ†åŒºçš„UUIDï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯ï¼šB6A28862A2882947 12ls -l /dev/disk/by-uuid# lrwxrwxrwx 1 root root 10 3æœˆ 27 16:13 B6A28862A2882947 -&gt; ../../sda1 ç°åœ¨åˆ›å»ºä¸€ä¸ªæŒ‚è½½ç¡¬ç›˜çš„ç›®å½•ï¼š 1sudo mkdir /media/usb1 Linuxç³»ç»Ÿå¼€æœºæ—¶ä¼šè¯»å–/etc/fstabæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œç„¶åæ ¹æ®é…ç½®æŒ‚è½½ç£ç›˜ã€‚æ‰€ä»¥ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨æœ«å°¾æ–°å¢ä¸€æ¡é…ç½®ï¼š 1UUID=B6A28862A2882947 /media/usb1 auto nofail,uid=1000,gid=1000,noatime 0 0 å…¶ä¸­ä¸‰ä¸ªidæ ¹æ®å‰é¢æ‰“å°å‡ºæ¥çš„å®é™…æƒ…å†µå¡«å†™ã€‚ æ¥ä¸‹æ¥å…ˆå¸è½½ã€å†é‡æ–°æŒ‚è½½ç¡¬ç›˜ï¼Œæœ€åé‡å¯æ ‘è“æ´¾ç”Ÿæ•ˆï¼š 123sudo umount /dev/sda1sudo mount -asudo reboot æ·»åŠ èµ„æºåº“é‡å¯åï¼Œæ‰“å¼€Plexç½‘é¡µé¢æ¿ï¼Œåœ¨å·¦ä¾§ç‚¹å‡»â€æ·»åŠ èµ„æºåº“â€ï¼Œé€‰æ‹©usb1ï¼Œå“‡å•¦ï¼Œå‡ºæ¥å’¯ï¼š æˆ‘é‡Œé¢æ”¾äº†å‡ éƒ¨ç”µå½±ï¼Œæ·»åŠ åï¼ŒPlexä¼šè‡ªåŠ¨è§£ç å¹¶æ£€ç´¢å½±ç‰‡çš„ç›¸å…³ä¿¡æ¯ï¼Œæ¯”å¦‚å½±ç‰‡å°é¢/èµ„æ–™ç­‰ï¼š ä¸€ä¸ªå­—ï¼šçˆ½~ï¼ æœ€åï¼Œæˆ‘æµ‹è¯•äº†ä¸‹åœ¨å±€åŸŸç½‘å†…å…¶ä»–è®¾å¤‡ä¸Šçš„æ’­æ”¾é€Ÿåº¦è¡¨ç°ï¼Œå¦‚é¢„æœŸï¼Œ720P 2Gä»¥ä¸‹çš„æµç•…æ’­æ”¾ï¼Œè¡¨ç°ä¸é”™ã€‚å…¶ä»–çš„å˜›ï¼Œâ€è¦ä»€ä¹ˆè‡ªè¡Œè½¦ï¼ï¼ï¼â€ å…³äºPlexè®¾ç½®è¿œç¨‹è®¿é—®å’Œæ›´å¤šé…ç½®ç©æ³•ï¼Œå¤§å®¶è‡ªè¡Œæ¢ç´¢å•Šï¼Œä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œæœ‰æ—¶é—´æˆ‘ä¹Ÿä¼šåˆ†äº«ä¸‹æˆ‘çš„ç»éªŒã€‚p.s.çœ‹çœ‹æˆ‘è¿™ä¸ªâ€ç”µå½±è¾¾äººâ€çš„ç‰‡(â—Ë‡âˆ€Ë‡â—)ï¼š å¼•ç”¨ About Server ARMv7 and ARMv8 Ubuntu / Debian Plex Media Server on Debian armhf How to Install Plex on a Raspberry Pi â€“ Raspberry Pi Plex Server HOWTO - Using Raspberry Pi 3+ as Plex Media Server å®˜æ–¹ï¼šæ›´å¥½çš„å‘½åä½ çš„èµ„æºæ–‡ä»¶ æ ‘è“æ´¾å®éªŒå®¤ï¼šæµ…æ fstab ä¸ç§»åŠ¨ç¡¬ç›˜æŒ‚è½½æ–¹æ³• VLOGä¸¨æ ‘è“æ´¾Raspberry Pi 3å®‰è£…PLEXâ€¦] å¦‚ä½•è®¾ç½®Plexï¼ˆå¹¶åœ¨ä»»ä½•è®¾å¤‡ä¸Šè§‚çœ‹æ‚¨çš„ç”µå½±ï¼‰ æ ‘è“æ´¾PI3çš„å……åˆ†åˆ©ç”¨ ç¯‡ä¸‰ï¼šæå®šæ ‘è“æ´¾ç«¯çš„PlexæœåŠ¡ç«¯â€¦ ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"http://www.codec.wang/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"},{"name":"Plex","slug":"Plex","permalink":"http://www.codec.wang/tags/Plex/"}]},{"title":"ä¸²å£ä¼ è¾“ä¸­å¯¹floatæ•°æ®çš„å¤„ç†","slug":"ä¸²å£ä¼ è¾“ä¸­å¯¹floatæ•°æ®çš„å¤„ç†","date":"2019-03-25T08:16:35.000Z","updated":"2020-04-07T03:54:25.206Z","comments":true,"path":"float-data-in-serialport/","link":"","permalink":"http://www.codec.wang/float-data-in-serialport/","excerpt":"æˆ‘æœ¬ä¸“ä¸šæ˜¯ææ§åˆ¶çš„ï¼Œè½¯ä»¶ä¸Šå°±æ˜¯å¤©å¤©è·Ÿä¸Š/ä¸‹ä½æœºã€é€šè®¯åè®®æ‰“äº¤é“ã€‚ä¸€æ¬¡ï¼Œæœ‰ä¸ªå­¦å¼Ÿé—®æˆ‘ï¼Œä»–å•ç‰‡æœºé‡‡é›†çš„æ¸©åº¦æ˜¯å°æ•°ï¼Œä¸²å£åº”è¯¥æ€ä¹ˆå‘ï¼Œåè®®æ€ä¹ˆè®¾è®¡ã€‚","text":"æˆ‘æœ¬ä¸“ä¸šæ˜¯ææ§åˆ¶çš„ï¼Œè½¯ä»¶ä¸Šå°±æ˜¯å¤©å¤©è·Ÿä¸Š/ä¸‹ä½æœºã€é€šè®¯åè®®æ‰“äº¤é“ã€‚ä¸€æ¬¡ï¼Œæœ‰ä¸ªå­¦å¼Ÿé—®æˆ‘ï¼Œä»–å•ç‰‡æœºé‡‡é›†çš„æ¸©åº¦æ˜¯å°æ•°ï¼Œä¸²å£åº”è¯¥æ€ä¹ˆå‘ï¼Œåè®®æ€ä¹ˆè®¾è®¡ã€‚ çˆ±ä½ æ‰€çˆ±ï¼Œè¡Œä½ æ‰€è¡Œï¼Œå¬ä»ä½ å¿ƒï¼Œæ— é—®è¥¿ä¸œã€‚â€”â€”ã€Šæ— é—®è¥¿ä¸œã€‹ å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼šMovieQuotes ä»–çš„æƒ³æ³•æ˜¯æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†åˆ†å¼€å‘ï¼Œæ¯”å¦‚100.3ï¼Œ1ä¸ªå­—èŠ‚ä»£è¡¨æ•´æ•°éƒ¨åˆ†ï¼Œ1ä¸ªå­—èŠ‚ä»£è¡¨å°æ•°éƒ¨åˆ†ï¼Œé‚£å¦‚æœæ˜¯300.421å‘¢ï¼Ÿè¶…å‡ºäº†1ä¸ªå­—èŠ‚çš„è¡¨ç¤ºèŒƒå›´ï¼Œè´Ÿæ•°-3.14åˆè¯¥æ€ä¹ˆå‘å‘¢ï¼Ÿå½“ç„¶å¯ä»¥è®¾ç½®å¤šä¸ªå­—èŠ‚è¡¨ç¤ºæ•°æ®ï¼Œç„¶åå•ç‹¬è®¾ç½®1ä¸ªå­—èŠ‚è¡¨ç¤ºæ­£è´Ÿï¼Œä½†æ˜¾ç„¶è¿™ç§æ–¹å¼å³éº»çƒ¦åˆä¸åˆç†ã€‚ å…¶å®ï¼Œfloatç±»å‹æ•°æ®ï¼Œæ— è®ºæ­£è´Ÿ/å¤§å°ï¼Œå®ƒéƒ½æ˜¯å ç”¨4ä¸ªå­—èŠ‚çš„ã€‚å› æ­¤ï¼Œä¸‹ä½æœºå¯ä»¥å°†ä¼ æ„Ÿå™¨æ•°æ®è½¬æˆ4ä¸ªå­—èŠ‚ï¼Œä¸Šä½æœºå†æŠŠå››ä¸ªå­—èŠ‚è½¬æˆfloatå³å¯ï¼Œå¹¶ä¸”è½¬æ¢åœ¨Cå’ŒC#ç­‰è¯­è¨€ä¸­éƒ½æ˜¯ä¸€å¥è¯çš„äº‹ã€‚å®Œæ•´ä»£ç å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ IEE 754æµ®ç‚¹æ•°16è¿›åˆ¶åœ¨çº¿è½¬æ¢ å¤§å°ç«¯æ¨¡å¼å¤§å°ç«¯æ¨¡å¼å¤§å®¶åº”è¯¥æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼Œå¤§ç«¯æ¨¡å¼æ˜¯é«˜å­—èŠ‚å­˜æ”¾åœ¨ä½åœ°å€ä¸­ï¼Œä½å­—èŠ‚å­˜æ”¾åœ¨é«˜åœ°å€ä¸­ã€‚ç±»ä¼¼æˆ‘ä»¬æ­£å¸¸çš„ä»å·¦åˆ°å³é˜…è¯»ï¼Œæ•°æ®ç”±å°åˆ°å¤§ï¼Œå°ç«¯æ¨¡å¼åä¹‹ã€‚è¿™é‡Œä¹‹æ‰€ä»¥æåŠï¼Œæ˜¯å› ä¸ºæœ‰æ—¶å€™ä¸åŒçš„ç³»ç»Ÿ/å·¥å…·å¾—åˆ°çš„ç»“æœæ˜¯åçš„ï¼Œæ­¤æ—¶ä¸ç”¨åœ¨æ„ï¼Œæ˜¯æ²¡é”™çš„ã€‚ Cè¯­è¨€/ä¸‹ä½æœº èœé¸ŸCåœ¨çº¿å·¥å…· ä¸‹ä½æœºä¸€èˆ¬æ˜¯Cè¯­è¨€ç¼–å†™çš„ï¼Œå¯ä»¥å°†ä¼ æ„Ÿå™¨æ•°æ®è½¬æˆå­—èŠ‚æ•°ç»„ï¼ŒCä¸­ä¹Ÿå°±æ˜¯å­—ç¬¦æ•°ç»„ï¼Œæœ‰å¤šç§æ–¹å¼ï¼š æœ‰çš„å•ç‰‡æœºèŠ¯ç‰‡ï¼Œå½“ä½¿ç”¨unsigned charæ—¶ï¼Œä¸²å£å‘é€ä¸äº†ï¼Œæ­¤æ—¶å¯ä»¥å»æ‰unsignedè¯•ä¸‹ã€‚ æ–¹æ³•ä¸€ï¼šå¼ºåˆ¶æŒ‡é’ˆç±»å‹è½¬æ¢12345// float -&gt; char []float sensorData = -3.14;unsigned char *arr = (unsigned char *)(&amp;sensorData);printf(\"%02X,%02X,%02X,%02X\\n\", arr[0], arr[1], arr[2], arr[3]);// ç»“æœï¼šC3,F5,48,C0 å¦‚æœæƒ³ä¿å­˜åˆ°charæ•°ç»„ä¸­ï¼š 12unsigned char charArr[4], i;for (i = 0; i &lt; 4; i++) charArr[i] = *arr++; æ¥ä¸‹æ¥åå‘è½¬æ¢ï¼š 12345678// char [] -&gt; floatunsigned char sBuf[4];sBuf[0] = 0xC3;sBuf[1] = 0xF5;sBuf[2] = 0x48;sBuf[3] = 0xC0;float *data = (float*)(&amp;sBuf);printf(\"%f\\n\", *data); // ç»“æœï¼š-3.140000 æ–¹æ³•äºŒï¼šä½¿ç”¨è”åˆä½“åˆ©ç”¨è”åˆä½“å…±äº«å†…å­˜çš„åŸç†ï¼Œå¯ä»¥åœ¨è”åˆä½“å†…åŒæ—¶å®šä¹‰floatå’Œcharæ•°ç»„ç±»å‹ï¼š 1234union &#123; float data; unsigned char arr[4];&#125; dataFormat; ç„¶åè½¬æ¢å°±æ¯”è¾ƒç®€å•äº†ï¼š 1234// float -&gt; char []dataFormat.data = -3.14;printf(\"%02X,%02X,%02X,%02X\\n\", dataFormat.arr[0], dataFormat.arr[1], dataFormat.arr[2], dataFormat.arr[3]);// ç»“æœï¼šC3,F5,48,C0 åå‘è½¬ï¼š 123456// char [] -&gt; floatdataFormat.arr[0] = 0xC3;dataFormat.arr[1] = 0xF5;dataFormat.arr[2] = 0x48;dataFormat.arr[3] = 0xC0;printf(\"%f\\n\", dataFormat.data); // ç»“æœï¼š-3.140000 Cè¯­è¨€è¿˜æ˜¯å¾ˆæ·±å¥¥çš„ï¼Œä¸Šé¢ä¸¤ç§æ˜¯æœ€é€šä¿—æ˜“æ‡‚çš„æ–¹å¼ï¼Œæ›´å¤šç‰›é€¼çš„æ–¹å¼å°½åœ¨Googleâ€¦ï¼ï¹ï¼œ C#/ä¸Šä½æœº èœé¸ŸC#åœ¨çº¿å·¥å…· æˆ‘ä¸€èˆ¬ä½¿ç”¨C#ç¼–å†™ä¸Šä½æœºï¼Œæ‰€ä»¥ä»¥å®ƒä¸ºä¾‹ã€‚ä¸€èˆ¬è¿™ç±»è¯­è¨€ä¸­éƒ½æœ‰è‡ªå¸¦çš„å‡½æ•°å¯ä»¥ä¸€å¥è§£å†³ï¼Œæ¯”å¦‚C#ä¸­ç”¨BitConverter.ToSingle()å’ŒBitConverter.GetBytes()ä¾¿å¯å®ç°è½¬æ¢ï¼š 1234// byte[] -&gt; floatbyte[] recData = &#123;0xC3,0XF5,0X48,0XC0&#125;;float sensorData = BitConverter.ToSingle(recData,0); Console.WriteLine(sensorData); // ç»“æœï¼š-3.14 123456// float -&gt; byte[]float sData = -3.14f;byte[] rData = BitConverter.GetBytes(sData);foreach (byte data in rData) Console.Write(\"&#123;0:X000&#125;,\", data);// ç»“æœï¼šC3,F5,48,C0,// åˆ¤æ–­å¤§å°ç«¯ï¼šConsole.WriteLine(BitConverter.IsLittleEndian); æ€è€ƒ æ—¢ç„¶çŸ¥é“äº†floatæ•°æ®æ€ä¹ˆå¤„ç†ï¼Œé‚£int/doubleå‘¢ï¼Ÿï¼ˆåŸç†æ˜¯ä¸€æ ·çš„ï¼‰ å¼•ç”¨ æœ¬èŠ‚æºç  Microsoft float (C# Reference) æµ®ç‚¹å‹(FLOAT)ä¸CHARå‹è½¬æ¢ floatå‹æ•°æ®ä¸å­—èŠ‚æ•°ç»„çš„è½¬åŒ– ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"ä¸²å£","slug":"ä¸²å£","permalink":"http://www.codec.wang/tags/%E4%B8%B2%E5%8F%A3/"},{"name":"float","slug":"float","permalink":"http://www.codec.wang/tags/float/"}]},{"title":"é€Ÿåº¦UPï¼Python/Ubuntu/NodeJS/æ ‘è“æ´¾ç­‰æ›´æ¢å›½å†…æºæ±‡æ€»","slug":"é€Ÿåº¦UPï¼PythonUbuntuNodeJSæ ‘è“æ´¾ç­‰æ›´æ¢å›½å†…æºæ±‡æ€»","date":"2019-03-21T07:08:09.000Z","updated":"2020-04-07T03:55:42.910Z","comments":true,"path":"python-ubuntu-nodejs-change-sources/","link":"","permalink":"http://www.codec.wang/python-ubuntu-nodejs-change-sources/","excerpt":"åœ¨Python/Linux/Node.jså¼€å‘ä¸­ï¼Œè¦ç»å¸¸ä¸‹è½½å„ç§å„æ ·çš„çš„åŒ…ï¼Œç„¶è€Œç”±äºé»˜è®¤çš„å®‰è£…æºå¤§éƒ¨åˆ†æ˜¯åœ¨å›½å¤–çš„æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥ä¸‹è½½é€Ÿåº¦å˜›â€¦â€¦","text":"åœ¨Python/Linux/Node.jså¼€å‘ä¸­ï¼Œè¦ç»å¸¸ä¸‹è½½å„ç§å„æ ·çš„çš„åŒ…ï¼Œç„¶è€Œç”±äºé»˜è®¤çš„å®‰è£…æºå¤§éƒ¨åˆ†æ˜¯åœ¨å›½å¤–çš„æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥ä¸‹è½½é€Ÿåº¦å˜›â€¦â€¦ Youâ€˜ll never win with violence, Tony, you only win when you maintain your dignity. â€”â€”ã€ŠGreen Bookã€‹æš´åŠ›æ°¸è¿œæ— æ³•å–èƒœï¼Œæ‰˜å°¼ï¼Œåªæœ‰åšå®ˆå°Šä¸¥æ‰ä¼šèµ¢ã€‚â€”â€”ã€Šç»¿çš®ä¹¦ã€‹ å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼šMovieQuotes æœ‰æ—¶çœŸçš„æ˜¯å¾ˆæ‰æ€¥å‘€ï¼Œæ‰€ä»¥å­¦ä¼šæ›´æ”¹å®‰è£…æºè¿˜æ˜¯å¾ˆæœ‰å¿…è¦æ»´â€¦â€¦Pythoné»˜è®¤æºï¼šhttps://pypi.org/ï¼ŒUbuntué»˜è®¤æºï¼šhttp://mirrors.ubuntu.com/ï¼ŒNodeé»˜è®¤æºï¼šhttp://registry.npmjs.orgã€‚ Python/pipæ›´æ¢æºæ›´æ¢å‰åé€Ÿåº¦å¯¹æ¯”å…·ä½“é€Ÿåº¦æå‡è·Ÿç½‘ç»œä¹Ÿæœ‰å…³ç³»ï¼Œä¸è¿‡ä¸€èˆ¬æ¥è¯´ï¼Œæå‡è¿˜æ˜¯ç›¸å½“æ˜æ˜¾çš„ï¼š å¸¸ç”¨å›½å†…æº æ¸…åå¤§å­¦ï¼šhttps://pypi.tuna.tsinghua.edu.cn/simple/ | pypié•œåƒä½¿ç”¨å¸®åŠ© é˜¿é‡Œå·´å·´ï¼šhttps://mirrors.aliyun.com/pypi/simple/ è…¾è®¯äº‘ï¼šhttp://mirrors.cloud.tencent.com/pypi/simple/ è±†ç“£ï¼šhttps://pypi.doubanio.com/simple/ ä¸´æ—¶æ›´æ”¹ä¸´æ—¶æ›´æ¢æºåªéœ€è¦å¤šåŠ ä¸€ä¸ª-iå‚æ•°ï¼ˆiè¡¨ç¤ºindexç´¢å¼•ï¼‰ï¼Œæ¯”å¦‚è¿™é‡Œæ›´æ¢æˆæ¸…åæºï¼š 1pip install pkg -i https://pypi.tuna.tsinghua.edu.cn/simple æ°¸ä¹…æ›´æ”¹å¦‚æœä¸æƒ³æ¯æ¬¡éƒ½è¿™ä¹ˆéº»çƒ¦çš„è¯ï¼Œå¯ä»¥å†™å…¥é…ç½®æ–‡ä»¶ã€‚æ–°ç‰ˆçš„pip(&gt;=10.0.0)ç›´æ¥ç”¨ä¸‹é¢ä¸€å¥è¯å°±è¡Œï¼š 12pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple# æŸ¥çœ‹pipç‰ˆæœ¬ï¼špip --version æ‰§è¡Œåï¼ŒWindows/Linuxéƒ½ä¼šåœ¨ç”¨æˆ·ç›®å½•ç”Ÿæˆpipé…ç½®æ–‡ä»¶ï¼Œå¦‚æˆ‘çš„Windowsæ˜¯åœ¨ï¼š C:\\Users\\ex2tron\\AppData\\Roaming\\pip\\pip.iniï¼ŒLinuxæ˜¯åœ¨ï¼š /home/ex2tron/.config/pip/pip.confã€‚ å¦‚æœæ˜¯æ—§ç‰ˆçš„pipï¼Œå¯ä»¥æ‰‹åŠ¨æ–°å»ºä¸Šé¢ä¸¤ä¸ªæ–‡ä»¶ï¼Œç„¶åç¼–è¾‘å†…å®¹ä¸ºï¼š 12[global]index-url &#x3D; https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple é…ç½®æ–‡ä»¶ä¹Ÿå¯ä»¥ç›´æ¥å»ºåœ¨ç”¨æˆ·ç›®å½•ä¸‹ï¼Œå¦‚Windowsï¼šC:\\Users\\ex2tron\\pip\\pip.iniï¼ŒLinuxï¼š/home/ex2tron/.pip/pip.confã€‚ä¿å­˜åï¼Œç…§å¸¸pip install pkgå³å¯ã€‚ Ubuntu/aptæ›´æ¢æºå›¾å½¢ç•Œé¢é…ç½®ï¼ˆæ–°æ‰‹æ¨èï¼‰å¦‚æœä½¿ç”¨çš„æ˜¯Ubuntuçš„Desktopç‰ˆæœ¬ï¼Œæ›´æ¢èµ·æ¥å°±æ¯”è¾ƒå®¹æ˜“äº†ï¼šæ‰“å¼€â€™è½¯ä»¶å’Œæ›´æ–°â€™ï¼Œâ€™ä¸‹è½½è‡ªâ€™è¿™é‡Œé€‰æ‹©â€™å…¶ä»–ç«™ç‚¹â€™ï¼š ç„¶ååœ¨å¼¹å‡ºçš„ç•Œé¢ä¸­é€‰æ‹©ä½ è¦æ›´æ¢çš„æœåŠ¡å™¨ï¼Œæ¯”å¦‚è¿™é‡Œæ›´æ¢ä¸ºé˜¿é‡Œäº‘ï¼š ç‚¹å‡»â€™é€‰æ‹©æœåŠ¡å™¨â€™åéœ€è¦éªŒè¯å¯†ç ï¼Œæ‰§è¡Œæ›´æ–°æ“ä½œå°±å¯ä»¥äº†ã€‚ æ‰‹åŠ¨é…ç½®å¦‚æœæ˜¯ä¸å¸¦GUIçš„UbuntuæœåŠ¡å™¨ï¼Œæˆ–æ˜¯æƒ³è£…Xï¼Œé‚£ä¹ˆå¯ä»¥æ‰‹åŠ¨æ›´æ¢ã€‚æ›´æ¢æºæ—¶è·ŸUbuntuç³»ç»Ÿçš„ç‰ˆæœ¬ä¹Ÿæœ‰å…³ç³»ï¼Œè¿™é‡Œæˆ‘ä»¥Ubuntu 18.04å’Œæ¸…åé•œåƒä¸ºä¾‹ï¼Œåé¢æˆ‘å†™äº†ä¸ªå°è„šæœ¬ï¼Œæ–¹ä¾¿ä¸åŒç‰ˆæœ¬çš„ç«¥é‹ä½¿ç”¨ã€‚ é¦–å…ˆéœ€è¦çŸ¥é“çš„æ˜¯ï¼ŒLinuxæŠŠæºåˆ—è¡¨å­˜åœ¨/etc/apt/sources.listé‡Œé¢ï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹ä¸‹å…¶ä¸­å†…å®¹ï¼š 1more /etc/apt/sources.list æ¥ä¸‹æ¥æ›´æ¢æ–¹æ³•éƒ½ä¸€æ ·ï¼Œå¾ˆå¤šå¼€æºé•œåƒç«™å®˜æ–¹ä¹Ÿæœ‰è¯´æ˜ï¼Œæ¯”å¦‚ï¼š æ¸…åå¤§å­¦Ubuntué•œåƒä½¿ç”¨å¸®åŠ© ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦Ubuntué•œåƒä½¿ç”¨å¸®åŠ© é˜¿é‡Œäº‘Ubuntué•œåƒä½¿ç”¨å¸®åŠ© ç‚¹Ubuntué¡¹å³ä¾§çš„å¸®åŠ© ç½‘æ˜“Ubuntué•œåƒä½¿ç”¨å¸®åŠ© ç¬¬ä¸€æ­¥ï¼šå…ˆå°†åŸæœ‰çš„å¤‡ä»½ï¼š 1sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak ç¬¬äºŒæ­¥ï¼šsudoç¼–è¾‘sources.listæ–‡ä»¶ï¼Œä¿®æ”¹å…¶å†…å®¹ä¸ºé•œåƒç«™æä¾›çš„ï¼Œå¦‚æ¸…åé•œåƒç«™18.04ï¼š 123456789# é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Šdeb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic main restricted universe multiverse# deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic main restricted universe multiversedeb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiverse# deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiversedeb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiverse# deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiversedeb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiverse# deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiverse ç¬¬ä¸‰æ­¥ï¼šä¿å­˜å…³é—­åï¼Œæ‰§è¡Œæ›´æ–°ç´¢å¼•çš„æ“ä½œå°±å¯ä»¥äº†ï¼š 1sudo apt update å…¶å®åªè¦Ubuntuç³»ç»Ÿçš„ç‰ˆæœ¬ä»£å·å¯¹åº”èµ·æ¥å°±è¡Œã€‚Ubuntu X.XXï¼Œç¬¬ä¸€ä¸ªXä»£è¡¨å¹´ä»½ï¼Œåä¸¤ä¸ªXä»£è¡¨æœˆä»½ï¼Œä¸€èˆ¬4æœˆä»½ä¼šå‘å¸ƒLTS(Long Term Support)é•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼Œå¸¸è§çš„ç‰ˆæœ¬å·å’Œä»£ç å¦‚ä¸‹ï¼š æ„Ÿå…´è¶£çš„å¯ä»¥çœ‹å¼•ç”¨ã€‚ ç‰ˆæœ¬ ä»£å· æ—¥æœŸ 14.04 LTS Trusty Tahr / å¯é çš„å¡”å°”ç¾Š 2014å¹´4æœˆ 16.04 LTS Xenial Xerus / å¥½å®¢çš„éæ´²åœ°æ¾é¼  2016å¹´4æœˆ 18.04 LTS Bionic Beaver / ä»¿ç”Ÿæµ·ç‹¸ 2018å¹´4æœˆ è‡ªåŠ¨åŒ–è„šæœ¬ä¸ºäº†æ–¹ä¾¿åœ¨Ubuntuå¸¸è§çš„ç‰ˆæœ¬ä¸Šæ›´æ¢æºï¼Œæˆ‘å†™äº†ä¸ªè‡ªåŠ¨åŒ–å°è„šæœ¬ï¼šUbuntuAutoChangeSource.shã€‚è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹Ubuntuç³»ç»Ÿç‰ˆæœ¬ï¼Œç„¶åé€‰æ‹©ä½ æƒ³æ›´æ¢çš„é•œåƒæºå°±å¯ä»¥äº†ï¼š æ ‘è“æ´¾Raspbianå¸¸ç”¨æºæ ‘è“æ´¾æ”¯æŒçš„OSå¾ˆå¤šï¼Œç»å¸¸ç”¨çš„ä¹Ÿæ˜¯å®˜æ–¹æ¨èçš„æ˜¯Raspbianã€‚å®˜ç½‘ä¸Šæœ‰ä¸ªé•œåƒåˆ—è¡¨ï¼šhttp://www.raspbian.org/RaspbianMirrorsï¼Œå›½å†…å¸¸ç”¨ï¼š æ¸…åå¤§å­¦ï¼šhttp://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ | ä½¿ç”¨å¸®åŠ© ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ï¼šhttp://mirrors.ustc.edu.cn/raspbian/raspbian/ | ä½¿ç”¨å¸®åŠ© æ›´æ¢æ–¹æ³•æºåˆ—è¡¨åŒæ ·å­˜å‚¨åœ¨ /etc/apt/sources.listä¸­ï¼Œæ‰€ä»¥æœ€å¥½å…ˆå¤‡ä»½ä¸‹ï¼š 1sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak æ›´æ¢æ—¶ä¹Ÿè·Ÿç‰ˆæœ¬æœ‰å…³ï¼Œæ¯”å¦‚åŸºäºDebian 9 Stretchæ„å»ºçš„Raspbian 2018-11-13ç‰ˆæœ¬ä¿®æ”¹æˆæ¸…åå¤§å­¦çš„æºï¼ˆå¯å°†åŸå…ˆçš„ç”¨#æ³¨é‡Šæ‰ï¼Œä¹Ÿå¯ä»¥è¦†ç›–ä¿®æ”¹ï¼Œåæ­£å·²ç»å¤‡ä»½äº†ï¼‰ï¼š 12deb http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;raspbian&#x2F;raspbian&#x2F; stretch main contrib non-free rpideb-src http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;raspbian&#x2F;raspbian&#x2F; stretch main contrib non-free rpi è™½è¯´è·Ÿç‰ˆæœ¬æœ‰å…³ï¼Œä½†åŸºæœ¬ä¸Šåªè¦æŠŠæºçš„åœ°å€æ”¹æ‰å°±å¥½äº†ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¿®æ”¹æ–¹å¼ä¹Ÿå¯ä»¥ä½¿ç”¨sedå·¥å…·ä¸€é”®ä¿®æ”¹ï¼ˆé’ˆå¯¹Raspbian 2018-04-19åçš„ç‰ˆæœ¬ï¼‰ï¼š 1sudo sed -i 's|raspbian.raspberrypi.org|mirrors.tuna.tsinghua.edu.cn/raspbian|g' /etc/apt/sources.list æœ€åè®°å¾—æ›´æ–°ä¸€ä¸‹å°±å¥½äº†ï¼š 1sudo apt update Node.js/npmæ›´æ¢æºä¸´æ—¶æ›´æ¢å›½å†…æœ€å¸¸ç”¨çš„npmé•œåƒç«™æ˜¯æ·˜å®çš„ï¼šhttp://npm.taobao.org/ ã€‚ä¸´æ—¶æ›´æ¢å°±æ˜¯åŠ ä¸Š--registryé€‰é¡¹ï¼š 1npm install pkg --registry=https://registry.npm.taobao.org æ°¸ä¹…æ›´æ”¹ç±»ä¼¼äºpipï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨npm configè®¾ç½®ï¼š 1npm config set registry https://registry.npm.taobao.org éªŒè¯æœ‰æ— ç”Ÿæ•ˆï¼š 1npm config get registry è¦æ¢å¤é»˜è®¤çš„è¯ï¼š 1npm config set registry http://registry.npmjs.org é€Ÿåº¦å¯¹æ¯”æˆ‘å°±ä¸æ”¾äº†ï¼Œæ€»ä¹‹ï¼Œå„ç±»åŒ…ç®¡ç†å™¨ï¼Œæ›´æ¢ä¸ºå›½å†…çš„æºä¹‹åï¼Œé€Ÿåº¦éƒ½ä¼šå¤§å¹…æå‡ã€‚ å¼•ç”¨ æ¸…åå¤§å­¦å¼€æºé•œåƒç«™ é˜¿é‡Œå·´å·´å¼€æºé•œåƒç«™ ç½‘æ˜“å¼€æºé•œåƒç«™ æµ™æ±Ÿå¤§å­¦å¼€æºé•œåƒç«™ ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦å¼€æºé•œåƒç«™ æ·˜å®NPMé•œåƒç«™ æœ¬èŠ‚æºç  Ubuntuå®˜ç½‘ç‰ˆæœ¬å·åŠä»£å·è¯´æ˜ï¼šDevelopmentCodeNames ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"Ubuntu","slug":"Ubuntu","permalink":"http://www.codec.wang/tags/Ubuntu/"},{"name":"NodeJS","slug":"NodeJS","permalink":"http://www.codec.wang/tags/NodeJS/"},{"name":"pip","slug":"pip","permalink":"http://www.codec.wang/tags/pip/"},{"name":"nmp","slug":"nmp","permalink":"http://www.codec.wang/tags/nmp/"},{"name":"apt","slug":"apt","permalink":"http://www.codec.wang/tags/apt/"}]},{"title":"Ubuntuä¸Šå®‰è£…Windows10åŒç³»ç»Ÿæ­¥éª¤åŠå¸¸è§é—®é¢˜","slug":"Ubuntuä¸Šå®‰è£…Windows10åŒç³»ç»Ÿæ­¥éª¤åŠå¸¸è§é—®é¢˜","date":"2019-03-17T12:42:59.000Z","updated":"2020-04-07T04:46:51.592Z","comments":true,"path":"install-windows10-on-ubuntu/","link":"","permalink":"http://www.codec.wang/install-windows10-on-ubuntu/","excerpt":"ä¹‹å‰æƒ³è£…ä¸ªWindows10+Ubuntuçš„åŒç³»ç»Ÿï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹æ˜¯Windowsä¸Šæ€ä¹ˆå®‰è£…Ubuntuçš„ï¼Œå¯æˆ‘ç”µè„‘TMDæœ¬èº«å°±æ˜¯Ubuntuå•Šï¼Œåœ¨Ubuntuä¸Šå®‰è£…Windowsçš„èµ„æ–™ç›¸å¯¹è¾ƒå°‘ï¼ŒçœŸæ˜¯ç¥å‘ã€‚ä¸‹é¢åˆ†äº«ä¸‹æˆ‘çš„æ•™ç¨‹ï¼š","text":"ä¹‹å‰æƒ³è£…ä¸ªWindows10+Ubuntuçš„åŒç³»ç»Ÿï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹æ˜¯Windowsä¸Šæ€ä¹ˆå®‰è£…Ubuntuçš„ï¼Œå¯æˆ‘ç”µè„‘TMDæœ¬èº«å°±æ˜¯Ubuntuå•Šï¼Œåœ¨Ubuntuä¸Šå®‰è£…Windowsçš„èµ„æ–™ç›¸å¯¹è¾ƒå°‘ï¼ŒçœŸæ˜¯ç¥å‘ã€‚ä¸‹é¢åˆ†äº«ä¸‹æˆ‘çš„æ•™ç¨‹ï¼š The world is full of lonely people waiting to make the first move. â€”â€”ã€ŠGreen Bookã€‹ä¸–ç•Œä¸Šæœ‰å¤ªå¤šå­¤ç‹¬çš„äººå®³æ€•å…ˆè¸å‡ºç¬¬ä¸€æ­¥ã€‚â€”â€”ã€Šç»¿çš®ä¹¦ã€‹ å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼šMovieQuotes åˆ†åŒºå’Œå®‰è£…æœ‰é£é™©ï¼Œä¸ç†Ÿæ‚‰çš„åŒå­¦è¯·æå‰å¤‡ä»½æ•°æ®å¹¶è°¨æ…æ“ä½œï¼ï¼ï¼ Ubuntu 16.04.5 Windows 10 1809 å®‰è£…æ­¥éª¤åˆ†åŒºåˆ†åŒºæ˜¯æœ€ä¸ºå…³é”®çš„æ­¥éª¤ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æƒ…å†µï¼š ä½ çš„ç”µè„‘ä¸Šå·²ç»æœ‰ä¸€ä¸ªå•ç‹¬çš„ä¸ç”¨çš„åˆ†åŒºï¼Œæ¯”å¦‚æœ‰çš„ç”µè„‘ä¸Šæ˜¯SSD+HDDçš„ï¼Œè¿™ç§æƒ…å†µä¸‹ä½ å¯ä»¥å°†Windowsç›´æ¥å®‰è£…åœ¨è¿™ä¸ªåˆ†åŒºä¸Šï¼Œæœ€ååªè¦æ·»åŠ ä¸‹å¼•å¯¼å°±è¡Œã€‚ å¦‚æœä¸æ˜¯ä¸Šé¢çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªç¡¬ç›˜éƒ½åœ¨ä¸ºUbuntuæ‰€ä½¿ç”¨ï¼Œå°±è¦åˆ†å‡ºä¸€ä¸ªåŒºæ¥ï¼š ç®€å•çš„åˆ†åŒºæ–¹å¼ï¼ˆç®€å•çš„ä¸è¡Œå¯ä»¥çœ‹åé¢å¤æ‚çš„ï¼‰ Ubuntuä¸Šå®‰è£…gpartedå›¾å½¢åŒ–åˆ†åŒºå·¥å…·ï¼šsudo apt install gpartedã€‚æ‰“å¼€ä¹‹åï¼Œé€‰æ‹©è¦åˆ†åŒºçš„åŒºåŸŸï¼Œæ¯”å¦‚æˆ‘è¦ä»/dev/sda1ä¸­åˆ†åŒºï¼Œç„¶åç‚¹å‡»èœå•æ çš„è°ƒæ•´åˆ†åŒºå¤§å°æŒ‰é’®ï¼š å¦‚æœå‡ºæ¥çš„ç•Œé¢æŸäº›é¡¹æ˜¯ç°è‰²çš„ï¼ˆå°±åƒä¸Šå›¾è¿™æ ·ï¼‰ï¼Œè¯´æ˜ä¸å¯ä»¥ç”¨è¿™ç§æ–¹å¼åˆ†åŒºã€‚ ç•¥å¾®å¤æ‚çš„æ–¹å¼ éœ€è¦ä¸€ä¸ªUbuntuçš„Uç›˜é•œåƒï¼ˆä¸å¿…è·Ÿä½ åŸæ¥çš„Ubuntuç³»ç»ŸåŒç‰ˆæœ¬ï¼‰ï¼Œä»¥æ™®é€šçš„è£…æœºæ–¹å¼è¿›å…¥å®‰è£…ç¨‹åºåï¼Œåˆ°å®‰è£…ç±»å‹è¿™ä¸€æ­¥ï¼Œåƒä¸‡ä¸è¦ä¹±é€‰ï¼Œä¸€å®šè¦é€‰å…¶ä»–é€‰é¡¹ï¼š ç„¶åé€‰æ‹©ä½ è¦åˆ†åŒºçš„åŒºåŸŸï¼Œç‚¹å‡»ä¸‹æ–¹çš„æ›´æ”¹ï¼š åœ¨å¼¹å‡ºçš„æ›´æ”¹åŒºåŸŸå¤§å°ä¸­ï¼Œè¾“å…¥æ–°åˆ†åŒºçš„å¤§å°ï¼Œç‚¹å‡»OKï¼ŒæˆåŠŸä¹‹åï¼Œå°±é€€å‡ºå®‰è£…ï¼Œä¸è¦å†å®‰è£…ä¸€ä¸ªUbuntuäº†ï¼š å‰é¢å°±å®ç°äº†åˆ†åŒºï¼Œä½†Windowsçš„åˆ†åŒºæ ¼å¼è·ŸUbuntuä¸ä¸€æ ·ï¼Œæ‰€ä»¥éœ€è¦å›åˆ°Ubuntuç³»ç»Ÿï¼Œæ‰“å¼€gpartedï¼Œå°†åˆ†åŒºè½¬æ¢æˆntfsæ ¼å¼ï¼Œç”¨äºå®‰è£…Windowsï¼š å®‰è£…Windowsè¿™ä¸€æ­¥å°±æ˜¯æ­£å¸¸çš„Windowså®‰è£…æµç¨‹ï¼ˆä¸èµ˜è¿°ï¼Œå®‰è£…çš„æ—¶å€™è®°å¾—é€‰æ‹©æˆ‘ä»¬åˆšåˆ†å¥½çš„åŒºï¼‰ å¼•å¯¼é¡¹ä¿®å¤å®‰è£…å®ŒWindowsåï¼ŒUbuntuçš„å¼•å¯¼é¡¹å°±ä¸è§äº†ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯åœ¨Windowsä¸Šå®‰è£…ä½¿ç”¨EasyBCDå¼•å¯¼Ubuntuï¼š é¦–å…ˆæ·»åŠ å¼•å¯¼é¡¹ï¼Œä¸€å®šè®°å¾—é€‰Swapäº¤æ¢åˆ†åŒº ç„¶åç‚¹å‡»â€œç¼–è¾‘å¼•å¯¼èœå•â€å¹¶ä¿å­˜è®¾ç½® è¿™æ ·å°±å®Œæˆäº†å…¨éƒ¨å®‰è£…æµç¨‹ã€‚ å¸¸è§é—®é¢˜é—®é¢˜1ï¼šå¦‚æœå¼€æœºé€‰æ‹©Ubuntuç³»ç»Ÿæ—¶å‡ºç°ï¼š è§£å†³æ–¹æ¡ˆï¼šè¿›å…¥Windowsç³»ç»Ÿï¼Œä½¿ç”¨EasyBCDé‡æ–°å¼•å¯¼å³å¯ï¼Œå…·ä½“æ­¥éª¤ï¼š å…ˆå°†åŸæœ‰çš„Ubuntuå¼•å¯¼é¡¹åˆ é™¤ ç„¶åé‡å¤ä¹‹å‰æ·»åŠ å¼•å¯¼é¡¹çš„æ­¥éª¤å³å¯ã€‚ é—®é¢˜2ï¼šä½¿ç”¨åˆ»å½•çš„Ubuntu Uç›˜é•œåƒå®‰è£…ç³»ç»Ÿæ—¶å‡ºç°ï¼š è§£å†³æ–¹æ¡ˆï¼šæŒ‰ä¸‹tabé”®ï¼Œä¼šå¼¹å‡ºå¦‚ä¸‹æç¤ºï¼š æŒ‰ç…§æç¤ºï¼Œè¾“å…¥live live-installå›è½¦å³å¯ã€‚ ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"Build","slug":"Build","permalink":"http://www.codec.wang/tags/Build/"},{"name":"Windows","slug":"Windows","permalink":"http://www.codec.wang/tags/Windows/"},{"name":"Ubuntu","slug":"Ubuntu","permalink":"http://www.codec.wang/tags/Ubuntu/"}]},{"title":"ä½¿ç”¨ç¯å¢ƒå˜é‡é¿å…åœ¨ä»£ç ä¸­å†™æ˜å¯†ç å’Œå¯†é’¥ç­‰é‡è¦ä¿¡æ¯","slug":"ä½¿ç”¨ç¯å¢ƒå˜é‡é¿å…åœ¨ä»£ç ä¸­å†™æ˜å¯†ç å’Œå¯†é’¥ç­‰é‡è¦ä¿¡æ¯","date":"2019-01-19T14:29:07.000Z","updated":"2020-04-07T03:55:17.425Z","comments":true,"path":"hiding-passwds-secret-keys-in-environment-variables/","link":"","permalink":"http://www.codec.wang/hiding-passwds-secret-keys-in-environment-variables/","excerpt":"å¾ˆå¤šäººä¼šåœ¨ä»£ç ä¸­ç›´æ¥æ˜ç å†™ä¸Šæ•°æ®åº“ç”¨æˆ·å/å¯†ç ã€API Keyè¿™äº›é‡è¦ä¿¡æ¯ï¼Œè¿™ç§æ–¹å¼å¾ˆä¸å®‰å…¨ï¼Œå› ä¸ºåˆ«äººåœ¨çœ‹åˆ°ä»£ç åæ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›ä¿¡æ¯çš„ã€‚","text":"å¾ˆå¤šäººä¼šåœ¨ä»£ç ä¸­ç›´æ¥æ˜ç å†™ä¸Šæ•°æ®åº“ç”¨æˆ·å/å¯†ç ã€API Keyè¿™äº›é‡è¦ä¿¡æ¯ï¼Œè¿™ç§æ–¹å¼å¾ˆä¸å®‰å…¨ï¼Œå› ä¸ºåˆ«äººåœ¨çœ‹åˆ°ä»£ç åæ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›ä¿¡æ¯çš„ã€‚æœ‰å¾ˆå¤šéšè—å¯†ç çš„æŠ€å·§ï¼Œç¯å¢ƒå˜é‡ä¾¿æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚ ä½¿ç”¨ç¯å¢ƒå˜é‡çš„å¥½å¤„åœ¨äºï¼Œä½ ä»ç„¶å¯ä»¥å®Œå…¨å…±äº«ä½ çš„ä»£ç è€Œä¸ç”¨æ‹…å¿ƒæ³„éœ²é‡è¦ä¿¡æ¯ã€‚ æµ‹è¯•ä»£ç ä»¥ä¸‹é¢è¿™æ®µPythonä»£ç ä¸ºä¾‹ï¼Œä»£ç ä¸­ç›´æ¥å†™æ˜äº†æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç ï¼š 1234db_user = \"ex2tron\"db_passwd = \"ex2tron12345\"print(db_user, db_passwd) æˆ‘ä»¬çœ‹ä¸‹å¦‚ä½•ä½¿ç”¨ç¯å¢ƒå˜é‡éšè—è¿™äº›ä¿¡æ¯ï¼š Linuxä¸‹éšè—æ–¹å¼Linuxç³»ç»Ÿçš„è¿è¡Œæ˜¯ä»¥å„ç§å¯è‡ªç”±ç¼–è¾‘çš„é…ç½®æ–‡ä»¶ä¸ºåŸºç¡€çš„ï¼Œä»¥Ubuntuä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–è¾‘å½“å‰ç”¨æˆ·çš„ç»ˆç«¯é…ç½®æ–‡ä»¶.bashrcã€‚ å¤§éƒ¨åˆ†é…ç½®æ–‡ä»¶ä½äºå½“å‰ç”¨æˆ·ç›®å½•ä¸‹ï¼Œå¦‚æœåœ¨å…¶ä»–ç›®å½•çš„è¯ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥cdå¿«é€Ÿåˆ‡æ¢ã€‚ åœ¨.bashrcæ–‡ä»¶çš„æœ«å°¾æ·»åŠ ä¸‹é¢ä¸¤å¥ï¼Œæ³¨æ„ç­‰å·å·¦å³æ— ç©ºæ ¼å™¢ï¼š 12export DB_USER=\"ex2tron\"export DB_PASSWD=\"ex2tron12345\" å¯ä»¥åœ¨å½“å‰ç»ˆç«¯source ~/.bashrcæˆ–é‡å¯ç»ˆç«¯ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚ä¹‹åä»£ç åªéœ€ç•¥ä½œä¿®æ”¹ï¼š 123456import osdb_user = os.environ.get(\"DB_USER\")db_passwd = os.environ.get(\"DB_PASSWD\")print(db_user, db_passwd) Windowsä¸‹éšè—æ–¹å¼ç†Ÿæ‚‰Windowsé…ç½®è½¯ä»¶çš„ç«¥é‹åº”è¯¥ç»å¸¸ç”¨åˆ°Pathç¯å¢ƒå˜é‡ï¼ŒåŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å»ºä¸¤ä¸ªè‡ªå·±çš„ç¯å¢ƒå˜é‡ã€‚åœ¨å¼€å§‹èœå•æœç´¢ç¯å¢ƒå˜é‡ï¼Œæ‰“å¼€ç³»ç»Ÿå±æ€§çª—å£å¹¶ç‚¹å‡»â€œç¯å¢ƒå˜é‡â€ï¼š åœ¨ç¯å¢ƒå˜é‡ç•Œé¢ï¼Œå¯ä»¥åœ¨ç”¨æˆ·ç¯å¢ƒå˜é‡ä¸‹ç‚¹å‡»æ–°å»ºï¼Œæ–°å»ºä¸¤ä¸ªå˜é‡ç”¨æ¥å­˜å‚¨æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç ï¼š 12DB_USER ex2tronDB_PASSWD ex2tron12345 ç¼–è¾‘å¥½ä¹‹åï¼Œä»£ç è·Ÿå‰é¢çš„ä¿®æ”¹æ–¹å¼ä¸€æ ·ã€‚å¦‚æœæ‰“å°å‡ºæ¥ä¸ºç©ºï¼Œè¯´æ˜ç¯å¢ƒå˜é‡æ²¡æœ‰ç”Ÿæ•ˆï¼Œå¯ä»¥é‡å¯ä½ çš„IDEã€‚ ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"Build","slug":"Build","permalink":"http://www.codec.wang/tags/Build/"},{"name":"hiding-info","slug":"hiding-info","permalink":"http://www.codec.wang/tags/hiding-info/"},{"name":"environment-variables","slug":"environment-variables","permalink":"http://www.codec.wang/tags/environment-variables/"}]},{"title":"å¦‚ä½•ä½¿ç”¨Windows 10çš„OpenSSH Clientå’ŒServer","slug":"å¦‚ä½•ä½¿ç”¨Windows 10çš„OpenSSH Clientå’ŒServer","date":"2019-01-02T13:00:54.000Z","updated":"2020-04-07T03:54:51.684Z","comments":true,"path":"how-to-use-ssh-on-windows10/","link":"","permalink":"http://www.codec.wang/how-to-use-ssh-on-windows10/","excerpt":"SSHç›®å‰æ˜¯Unixå’ŒLinuxä¸Šç”¨äºåŠ å¯†è¿æ¥è¿œç¨‹æœåŠ¡å™¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¾®è½¯ä¹Ÿåœ¨æœ€æ–°çš„Windows10ä¸­é›†æˆäº†OpenSSHï¼Œä¸‹é¢å°±æ¥çœ‹ä¸‹æ€ä¹ˆå¼€å¯å¹¶ä½¿ç”¨ã€‚","text":"SSHç›®å‰æ˜¯Unixå’ŒLinuxä¸Šç”¨äºåŠ å¯†è¿æ¥è¿œç¨‹æœåŠ¡å™¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¾®è½¯ä¹Ÿåœ¨æœ€æ–°çš„Windows10ä¸­é›†æˆäº†OpenSSHï¼Œä¸‹é¢å°±æ¥çœ‹ä¸‹æ€ä¹ˆå¼€å¯å¹¶ä½¿ç”¨ã€‚ ç‰ˆæœ¬è¯´æ˜æ–°ç‰ˆWindows 10ï¼ˆ1803åŠä»¥ä¸Šï¼‰éƒ½å·²é¢„è£…äº†OpenSSH Clientï¼Œä½†é»˜è®¤å¹¶æ²¡æœ‰è£…SSH Serverã€‚è¦æµ‹è¯•æœ‰æ²¡æœ‰å®‰è£…çš„è¯ï¼Œå¯ä»¥æ‰“å¼€å‘½ä»¤è¡Œcmdï¼Œè¾“å…¥ï¼š 12ssh -V# OpenSSH_for_Windows_7.6p1, LibreSSL 2.6.4 å¦‚æœä½ çš„Win10ç‰ˆæœ¬è¾ƒä½çš„è¯ï¼Œå¯èƒ½æ²¡æœ‰é¢„è£…ï¼Œä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œä¸‹é¢æ¥çœ‹ã€‚ å®‰è£…Windows 10å¼€å§‹èœå•æœç´¢â€œç®¡ç†å¯é€‰åŠŸèƒ½â€ï¼Œæˆ–æ‰“å¼€Windows 10çš„è®¾ç½®ï¼Œæ‰¾åˆ°åº”ç”¨å’ŒåŠŸèƒ½ï¼Œå¹¶é€‰æ‹©â€œç®¡ç†å¯é€‰åŠŸèƒ½â€ï¼š åœ¨ç®¡ç†å¯é€‰åŠŸèƒ½é¡µé¢ï¼Œç‚¹å‡»â€œæ·»åŠ åŠŸèƒ½â€ï¼Œæ‰¾åˆ°OpenSSH å®¢æˆ·ç«¯å’ŒOpenSSH æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯æ²¡æœ‰çš„è¯ï¼Œè¯´æ˜å·²ç»å®‰è£…äº†ï¼š å¦‚æœä½ åªæ˜¯æƒ³ä½¿ç”¨SSHè¿æ¥æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯æŠŠè‡ªå·±çš„ç”µè„‘å½“ä½œæœåŠ¡å™¨çš„è¯ï¼ŒServeræ˜¯ä¸éœ€è¦å®‰è£…çš„ã€‚å®‰è£…è·¯å¾„æ˜¯åœ¨C:\\Windows\\System32\\OpenSSH\\ç›®å½•ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°é™¤äº†SSHï¼ŒWindows 10ä¹Ÿè‡ªå¸¦äº†scpï¼Œsftpç­‰å¾ˆå®ç”¨çš„å·¥å…·ã€‚ 12345dir C:\\Windows\\System32\\OpenSSH# scp.exe# sftp.exe# ssh-keygen.exe# â€¦â€¦ SSH Clientçš„ä½¿ç”¨å®‰è£…å¥½ä¹‹åï¼Œå°±å’Œæ­£å¸¸ä½¿ç”¨SSHæ²¡æœ‰åŒºåˆ«äº†ï¼Œæ¯”å¦‚å±€åŸŸç½‘å†…æœ‰å°æœåŠ¡å™¨IPåœ°å€æ˜¯192.168.1.110ï¼Œé‚£ä¹ˆåœ¨Win10 cmdä¸‹è¾“å…¥ï¼š 1ssh username@192.168.1.110 å®¢æˆ·ç«¯çš„ä½¿ç”¨è·ŸLinuxä¸‹SSHçš„ä½¿ç”¨ä¸€è‡´ï¼Œå°±ä¸èµ˜è¿°äº†ã€‚ä¸»è¦æ¥çœ‹ä¸‹Win10ä¸ŠServerçš„é…ç½®ã€‚ SSH Serverçš„ä½¿ç”¨å®‰è£…å¥½OpenSSH Serveråï¼ŒWin10å¼€å§‹èœå•æœç´¢æœåŠ¡ï¼Œæ‰“å¼€æœåŠ¡ï¼Œæ‰¾åˆ°OpenSSH SSH Serverï¼Œç›®å‰å®ƒçš„çŠ¶æ€æ˜¯æ‰‹åŠ¨å¹¶å·²åœæ­¢æœåŠ¡ï¼š æˆ‘ä»¬å¯ä»¥å³é”®å¯åŠ¨æœåŠ¡ï¼Œå¦‚æœä½ ç»å¸¸ç”¨åˆ°å®ƒçš„è¯ï¼Œå¯ä»¥åœ¨å±æ€§ä¸­è®¾ç½®ä¸ºè‡ªåŠ¨å¯åŠ¨ã€‚ è¦æ£€æµ‹SSHæœåŠ¡æœ‰æ²¡æœ‰è¿è¡Œçš„è¯ï¼Œå¯ä»¥åœ¨cmdä¸­è¾“å…¥ï¼š 12netstat -a | findstr 22# TCP 0.0.0.0:22 ex2tronSurface:0 LISTENING ç¡®è®¤å¼€å¯åï¼Œæœ¬æœºWin10å°±å¯ä»¥æ¥æ”¶å¤–éƒ¨SSHè¿æ¥äº†ã€‚åœ¨cmdè¾“å…¥ipconfigï¼Œè·å–ç°åœ¨Win10çš„IPï¼Œæ¯”å¦‚æ˜¯192.168.1.199ï¼Œç”¨å¦ä¸€å°ä»»æ„æ“ä½œç³»ç»Ÿçš„ç”µè„‘ä½¿ç”¨SSHä¾¿å¯è¿æ¥ï¼š 1ssh username@192.168.1.199 æ³¨æ„æ­¤æ—¶ç”¨æˆ·åå’Œå¯†ç æ˜¯ä½ Win10çš„ç”¨æˆ·åå’Œå¯†ç ã€‚ sshd é…ç½®æ–‡ä»¶SSHæœåŠ¡å¼€å¯åï¼Œé»˜è®¤çš„é…ç½®æ–‡ä»¶åœ¨C:\\Windows\\System32\\OpenSSH\\ç›®å½•ä¸‹ï¼š 12dir C:\\Windows\\System32\\OpenSSH\\# sshd_config_default ä½†å®é™…è¿è¡Œçš„é…ç½®æ–‡ä»¶æ˜¯C:\\ProgramData\\ssh\\sshd_configï¼Œç†Ÿæ‚‰SSHçš„åŒå­¦å¯¹é‡Œé¢çš„é…ç½®é¡¹åº”è¯¥éƒ½äº†è§£ï¼Œæ¯”å¦‚sshé»˜è®¤å¯åŠ¨è·¯å¾„ChrootDirectoryã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œsshè¿æ¥åï¼Œå¯åŠ¨è·¯å¾„æ˜¯Windowsçš„ä¸ªäººæ–‡ä»¶å¤¹ï¼Œå¦‚C:\\Users\\ex2tronï¼Œæˆ‘ä¸€èˆ¬ä¼šæ›´æ”¹åˆ°æˆ‘çš„å·¥ä½œè·¯å¾„ï¼Œå¦‚ï¼šD:\\Surfaceï¼Œå°±å¯ä»¥è¿™æ ·ä¿®æ”¹ï¼š 1ChrootDirectory D:\\Surface å…¶ä»–é…ç½®é¡¹å¸¸ç”¨çš„æœ‰ï¼š 1234PermitRootLogin # æ˜¯å¦å…è®¸rootç™»é™†PasswordAuthentication # æ˜¯å¦è¿è¡Œä½¿ç”¨å¯†ç ç™»é™†ï¼Œå¦‚æœä½ å·²ç»å»ºç«‹å¥½sshå…¬é’¥çš„è¯ï¼Œå¯ä»¥è®¾ç½®ä¸ºnoå…å¯†ç™»é™†ï¼Œæ›´å®‰å…¨PermitEmptyPasswords # æ˜¯å¦å…è®¸ç©ºå¯†ç AuthorizedKeysFile # sshå…¬é’¥ç›®å½• é…ç½®å®Œä¹‹åä¸€å®šè®°å¾—é‡å¯ssh serverï¼Œå¦åˆ™æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚ä¸€ç§æ–¹æ³•æ˜¯æœåŠ¡é‡Œé¢ï¼Œå³é”®é€‰æ‹©é‡å¯ï¼š è¿˜æœ‰ä¸€ç§å°±æ˜¯åœ¨cmdä¸‹ç›´æ¥é‡å¯ï¼Œcmdéœ€ä»¥ç®¡ç†å‘˜æƒé™æ‰“å¼€ï¼š 12net stop sshdnet start sshd ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"Build","slug":"Build","permalink":"http://www.codec.wang/tags/Build/"},{"name":"Windows10","slug":"Windows10","permalink":"http://www.codec.wang/tags/Windows10/"},{"name":"SSH","slug":"SSH","permalink":"http://www.codec.wang/tags/SSH/"},{"name":"SSH-Server","slug":"SSH-Server","permalink":"http://www.codec.wang/tags/SSH-Server/"}]},{"title":"2018æœ€åä¸€ä¸ªå·¥ä½œæ—¥ï¼Œä¸€ä»½å°ç¤¼ç‰©","slug":"2018æœ€åä¸€ä¸ªå·¥ä½œæ—¥ï¼Œä¸€ä»½å°ç¤¼ç‰©","date":"2018-12-29T10:00:31.000Z","updated":"2020-04-07T03:54:06.736Z","comments":true,"path":"a-gift-for-2019-moviequotes/","link":"","permalink":"http://www.codec.wang/a-gift-for-2019-moviequotes/","excerpt":"[**moviequotes.ex2tron.wang**](http://moviequotes.ex2tron.wang) 2018æ˜¯æ„Ÿä¼¤çš„ä¸€å¹´ï¼Œå¾ˆå¤šäººç¦»æˆ‘ä»¬è€Œå»ï¼Œå¤ªå¤šçš„ä¸å¼€å¿ƒâ€¦å¥½åœ¨å°±è¦ç»“æŸäº†ã€‚ä»Šå¤©æ˜¯æœ€åä¸€ä¸ªå·¥ä½œæ—¥ï¼ˆå…¶å®åœ¨å­¦æ ¡æˆ‘æ¯å¤©éƒ½åœ¨æ”¾å‡(â—Ë‡âˆ€Ë‡â—)ï¼‰ï¼Œç‰¹é€ä¸Šä¸€ä»½å°ç¤¼ç‰©ç»™å¤§å®¶ï¼šMovieQuotes","text":"[**moviequotes.ex2tron.wang**](http://moviequotes.ex2tron.wang) 2018æ˜¯æ„Ÿä¼¤çš„ä¸€å¹´ï¼Œå¾ˆå¤šäººç¦»æˆ‘ä»¬è€Œå»ï¼Œå¤ªå¤šçš„ä¸å¼€å¿ƒâ€¦å¥½åœ¨å°±è¦ç»“æŸäº†ã€‚ä»Šå¤©æ˜¯æœ€åä¸€ä¸ªå·¥ä½œæ—¥ï¼ˆå…¶å®åœ¨å­¦æ ¡æˆ‘æ¯å¤©éƒ½åœ¨æ”¾å‡(â—Ë‡âˆ€Ë‡â—)ï¼‰ï¼Œç‰¹é€ä¸Šä¸€ä»½å°ç¤¼ç‰©ç»™å¤§å®¶ï¼šMovieQuotes è¿™æ˜¯ä¸ªç®€å•çš„ç”µå½±ç»å…¸å°è¯ç½‘ç«™ï¼Œçµæ„Ÿæ¥è‡ªæˆ‘ä»¥å‰åœ¨è…¾è®¯å­¦ä¹ Scrapyæ—¶çš„ä¸€ä¸ªç½‘ç«™[quotes.toscrape.com](http://quotes.toscrape.com)ï¼Œè¿™ä¸Šé¢æ˜¯ä¸€äº›åäººåå¥ã€‚å› ä¸ºæˆ‘å¹³å¸¸å–œæ¬¢çœ‹ç”µå½±ï¼Œå†™åšå®¢çš„æ—¶å€™ä¹Ÿç»å¸¸åœ¨å¼€å¤´æ”¾ä¸€å¥ç»å…¸å°è¯ï¼Œæ‰€ä»¥å¹³æ—¶æœé›†äº†ä¸å°‘ï¼Œäºæ˜¯å°±æœ‰äº†è¿™ä¸ªç½‘ç«™ã€‚ç½‘ç«™æœ¬èº«å¾ˆç®€å•ï¼Œç”¨Pythonå’ŒDjangoæ­çš„ï¼Œæ²¡ä»€ä¹ˆéš¾çš„ä¸œè¥¿ï¼Œä¸‹é¢æ˜¯ä¸€äº›æˆªå›¾ï¼š å„ä½çœ‹å®˜ä¸è¦å«ŒUIä¸‘å•Šï¼Œæˆ‘æ˜¯å®Œå…¨æ¨¡ä»¿åŸç½‘ç«™åšçš„ã€‚åæœŸå¦‚æœæœ‰æ—¶é—´æˆ‘ä¼šæ›´æ¢ä¸€å¥—è‡ªå·±çš„UIã€‚ å…¶å®æ¯å¥ç”µå½±å°è¯é…ä¸€å¼ æˆªå›¾æœ€å¥½äº†ï¼Œä¸è¿‡åŠ ä¸Šå»æœ‰ç‚¹ä¸‘ï¼Œæ‰€ä»¥æ²¡æ”¾å‡ºæ¥ã€‚å¦å¤–ï¼Œå¤šç”¨æˆ·ç™»é™†æ³¨å†Œå’Œåˆ†äº«çš„åŠŸèƒ½åŒæ ·ä¹Ÿæ²¡æ”¾å‡ºæ¥ï¼Œç›®å‰ä¸€åˆ‡ä»ç®€ã€‚æœ‰æƒ³è¦è´¡çŒ®è¯æ¡çš„åŒå­¦å¯ä»¥è”ç³»æˆ‘å™¢ï¼Œæœ€åç¥å¤§å®¶å…ƒæ—¦å¿«ä¹ï¼(â˜†â–½â˜†) ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"Build","slug":"Build","permalink":"http://www.codec.wang/tags/Build/"},{"name":"Django","slug":"Django","permalink":"http://www.codec.wang/tags/Django/"},{"name":"ç”µå½±å°è¯","slug":"ç”µå½±å°è¯","permalink":"http://www.codec.wang/tags/%E7%94%B5%E5%BD%B1%E5%8F%B0%E8%AF%8D/"}]},{"title":"MightyPyï¼šBase64","slug":"MightyPyï¼šç†è§£Base64","date":"2018-04-28T14:20:53.000Z","updated":"2020-04-07T03:43:24.716Z","comments":true,"path":"mighty-py-base64/","link":"","permalink":"http://www.codec.wang/mighty-py-base64/","excerpt":"æˆ‘ä»¬çŸ¥é“æ—¥å¸¸çš„å›¾ç‰‡ã€è§†é¢‘ã€pdfã€exeç­‰ç­‰è¿™äº›æ–‡ä»¶éƒ½æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚æœç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å®ƒä»¬ï¼ŒåŸºæœ¬éƒ½æ˜¯ä¹±ç ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§ç®€å•çš„äºŒè¿›åˆ¶è½¬æˆå­—ç¬¦ä¸²çš„æ–¹å¼å‘¢ï¼Ÿ","text":"æˆ‘ä»¬çŸ¥é“æ—¥å¸¸çš„å›¾ç‰‡ã€è§†é¢‘ã€pdfã€exeç­‰ç­‰è¿™äº›æ–‡ä»¶éƒ½æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚æœç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å®ƒä»¬ï¼ŒåŸºæœ¬éƒ½æ˜¯ä¹±ç ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§ç®€å•çš„äºŒè¿›åˆ¶è½¬æˆå­—ç¬¦ä¸²çš„æ–¹å¼å‘¢ï¼Ÿ Valar Morghulis, Valar Dohaeris. â€”â€”ã€ŠGame of Thronesã€‹å‡¡äººçš†æœ‰ä¸€æ­»ï¼Œå‡¡äººçš†é¡»ä¾å¥‰ã€‚â€”â€”ã€ŠæƒåŠ›çš„æ¸¸æˆã€‹ å‹æƒ…å¹¿å‘Šï¼šç”µå½±å°è¯åˆ†äº«ç½‘ç«™ï¼šMovieQuotes Base64Base64æ˜¯ä¸€ç§ç”¨64ä¸ªå¯æ‰“å°å­—ç¬¦æ¥è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„ä¸€ç§æ–¹æ³•ã€‚ åŸç†å…¶å®å¾ˆç®€å•ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªé•¿åº¦ä¸º64çš„å­—ç¬¦æ•°ç»„ï¼š 1base = ['A', 'B', ..., 'Z', 'a', 'b', ..., 'z', '0', '1', ..., '9', '+', '/'] æ ‡å‡†çš„Base64ç¼–ç æ˜¯ç”±26ä¸ªå¤§å†™å­—æ¯ã€26ä¸ªå°å†™å­—æ¯ã€[0-9]10ä¸ªæ•°å­—ã€â€™+â€™ã€â€™/â€˜å…±64ä¸ªå­—ç¬¦ç»„æˆçš„ã€‚ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è¿™äº›å­—ç¬¦æ¥å®ç°è‡ªå·±çš„Base64ç¼–ç ã€‚ å°†åŸäºŒè¿›åˆ¶æ•°æ®æ¯3ä¸ªå­—èŠ‚ä¸ºä¸€ç»„è¿›è¡Œåˆ’åˆ†ï¼Œä¸€å…±3Ã—8=24bitï¼Œåˆ’åˆ†æˆ4ç»„ï¼Œä¹Ÿå°±æ˜¯æ¯ç»„6bitï¼Œ6bitå¯è¡¨ç¤ºçš„é•¿åº¦ä¸º2^6=64ï¼Œè¿™å°±æ˜¯Base64åç§°çš„ç”±æ¥ã€‚ç„¶åå°†æ¯ç»„6bitå¯¹åº”çš„å€¼ä½œä¸ºç´¢å¼•ï¼Œåœ¨å‰é¢å®šä¹‰çš„æ•°ç»„ä¸­æŸ¥è¡¨ï¼Œå°±å¾—åˆ°äº†ç¼–ç åå¯¹åº”çš„4ä¸ªå­—ç¬¦ã€‚ æ¯”å¦‚ï¼ŒæŠŠâ€Manâ€è¿›è¡ŒBase64ç¼–ç ï¼š Pythonä¸­å¯ä»¥ç›´æ¥ç”¨å†…ç½®çš„base64æ¨¡å—ï¼š 12345import base64print(base64.b64encode(b'Man')) # 'TWFu'# æˆ–ï¼šbase64.b64encode(b'\\x4D\\x61\\x6E')print(base64.b64decode('TWFu')) # 'man' ä¸æ˜¯3çš„å€æ•°Base64æ˜¯æ¯3ä¸ªå­—èŠ‚ç¼–ç çš„ï¼Œé‡åˆ°ä¸è¶³3ä¸ªå­—èŠ‚çš„æƒ…å†µæ—¶ï¼Œä¼šåœ¨æœ«å°¾è¡¥0ï¼Œå†åœ¨æœ«å°¾åŠ ä¸ª1ä¸ªæˆ–2ä¸ª â€˜=â€™å·è¡¨ç¤ºè¡¥äº†å¤šå°‘ä¸ªå­—èŠ‚ï¼Œè§£ç æ—¶å†å°†â€™=â€™å»æ‰ã€‚ æ¯”å¦‚å‚è€ƒå‰é¢çš„â€™Manâ€™ï¼Œå¯¹â€™Mâ€™å•ç‹¬è¿›è¡Œç¼–ç ï¼šç¬¬ä¸€ç»„è¿˜æ˜¯åŸæœ‰çš„6bitï¼Œç»“æœæ˜¯å­—ç¬¦â€™Tâ€™ï¼›ç¬¬äºŒç»„åªå‰©ä¸‹â€™01â€™ï¼Œè¡¥å……4ä¸ª0ï¼Œå³â€™010000â€™ï¼Œç´¢å¼•å€¼ä¸º16ï¼Œå¯¹åº”çš„å­—ç¬¦æ˜¯â€™Qâ€™ï¼›ç¬¬ä¸‰å’Œç¬¬å››ç»„éƒ½æ˜¯0äº†ï¼Œæ‰€ä»¥å†åŠ ä¸¤ä¸ªâ€™=â€™ï¼Œæœ€ç»ˆç»“æœæ˜¯â€™TQ==â€™ã€‚ 1print(base64.b64encode(b'M')) # 'TQ==' æ€»ä¹‹ï¼ŒBase64ç¼–ç åçš„é•¿åº¦æ°¸è¿œæ˜¯4çš„å€æ•°ï¼ URLä¸­ç‰¹æ®Šå­—ç¬¦çš„å¤„ç†æ ‡å‡†Base64ç¼–ç ä¸­ä¼šå‡ºç°â€™+â€™å’Œâ€™/â€˜å­—ç¬¦ï¼Œå¦‚æœåœ¨urlä¸­ä½¿ç”¨ï¼Œurlç¼–ç å™¨ä¼šè½¬æ¢æˆâ€™%2Bâ€™å’Œâ€™%2Fâ€™ï¼Œè§£ç æˆ–æ•°æ®åº“å­˜å‚¨æ—¶éœ€è¦å°†%å†æ¬¡è½¬æ¢ã€‚ä¸ºé¿å…å‡ºé”™å¹¶ç®€åŒ–æ“ä½œï¼Œæå‡ºäº†ä¸€ç§å¯ç”¨äºurlçš„æ”¹è¿›Base64ç¼–ç ï¼šå°†â€™+â€™å’Œâ€™/â€˜åˆ†åˆ«æ”¹æˆâ€™-â€˜å’Œâ€™_â€™ã€‚ 12print(base64.b64encode(b'\\xFB\\xfe')) # '+/4='print(base64.urlsafe_b64encode(b'\\xFB\\xfe')) # '-_4=' å›¾ç‰‡Base64ç¼–ç å›¾ç‰‡çš„Base64ç¼–ç ç”¨çš„è¾ƒå¤šã€‚Pythonæ‰“å¼€æ–‡ä»¶æ—¶ï¼ŒæŒ‡å®šâ€™rbâ€™å‚æ•°ï¼Œå¯ä»¥è·å–åŸå§‹çš„äºŒè¿›åˆ¶æ•°æ®ï¼š 123456import base64with open('lena.jpg', 'rb') as pic: pic_str_data = base64.b64encode(pic.read())print(pic_str_data) ä¸­æ–‡Base64ç¼–ç Base64åªè·ŸäºŒè¿›åˆ¶æœ‰å…³ç³»ï¼Œè·Ÿå­—ç¬¦é›†æ— å…³ã€‚å¯¹äºä¸­æ–‡çš„è¯ï¼ŒæŒ‰ç…§ä½ ä½¿ç”¨çš„å­—ç¬¦é›†ï¼ˆæ¯”å¦‚utf-8ï¼‰ç¼–ç æˆäºŒè¿›åˆ¶åå†ç”¨Base64å°±å¯ä»¥äº†ï¼š 12345ch_bytes = 'ä¸­'.encode('utf-8') # b'\\xe4\\xb8\\xad'# encode()é»˜è®¤æ˜¯utf-8ï¼Œå¯çœç•¥print(ch_bytes.decode()) # 'ä¸­'print(base64.b64encode(ch_bytes)) ä¼˜ç¼ºç‚¹ä½œä¸ºä¸€ç§äºŒè¿›åˆ¶åˆ°å­—ç¬¦ä¸²çš„ç¼–ç æ–¹å¼ï¼ŒBase64å¯ä»¥ç¼–ç ä»»æ„çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œä¾¿äºæ–‡æœ¬æ˜¾ç¤ºå’Œæ¥å£å¤„ç†ï¼›ä½†å› ä¸ºæ˜¯å°†3ä¸ªå­—èŠ‚ç¼–ç æˆ4ä¸ªå­—èŠ‚ï¼ŒäºŒè¿›åˆ¶æ•°æ®é•¿åº¦ç›¸å½“äºå¢åŠ äº†1/3=33%å·¦å³ã€‚ æ‰‹åŠ¨å®ç°Base64å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å®ç°è‡ªå·±çš„Base64ç¼–ç ï¼Œä¸è¿‡ä¸€èˆ¬æ²¡æœ‰å¿…è¦ã€‚æ¯”å¦‚ä¸‹é¢æ˜¯æˆ‘è‡ªå·±å®ç°çš„æ ‡å‡†Base64ç¼–ç ï¼Œæ•ˆç‡æ…¢äº†8å€å·¦å³ï¼Œä»…ä¾›å­¦ä¹ å‚è€ƒï¼Œç½‘ä¸Šä¹Ÿæœ‰å…¶ä»–æ–¹å¼ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839import string# å®šä¹‰64å­—ç¬¦base_charset = string.ascii_uppercase+string.ascii_lowercase+string.digits+\"+/\"def my_b64_encode(ori_bytes): ret, ori_len = \"\", len(ori_bytes) for i in range(0, ori_len, 3): # ç¬¬ä¸€ç»„ first = (ori_bytes[i] &amp; 0xFC) &gt;&gt; 2 ret += base_charset[first] # ç¬¬äºŒç»„ if i+1 &gt;= ori_len: second = (ori_bytes[i] &amp; 0x03)*16 ret += base_charset[second] + \"==\" break second = (ori_bytes[i] &amp; 0x03)*16 + ((ori_bytes[i+1] &amp; 0xF0) &gt;&gt; 4) ret += base_charset[second] # ç¬¬ä¸‰ç»„ if i+2 &gt;= ori_len: third = (ori_bytes[i+1] &amp; 0x0F)*4 ret += base_charset[third] + \"=\" break third = (ori_bytes[i+1] &amp; 0x0F)*4 + ((ori_bytes[i+2] &amp; 0xC0) &gt;&gt; 6) ret += base_charset[third] # ç¬¬å››ç»„ fourth = ori_bytes[i+2] &amp; 0x3F ret += base_charset[fourth] return retprint(my_b64_encode(b'ManM')) # TWFuTQ== æ¥å£æ–‡æ¡£ Python base64 Python string å¼•ç”¨ æœ¬èŠ‚æºç  ç»´åŸºç™¾ç§‘ Base64 å»–é›ªå³°Pythonæ•™ç¨‹","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"Base64","slug":"Base64","permalink":"http://www.codec.wang/tags/Base64/"}]},{"title":"Python+OpenCVæ•™ç¨‹æŒ‘æˆ˜ä»»åŠ¡ï¼šè½¦é“æ£€æµ‹","slug":"Python-OpenCVæ•™ç¨‹æŒ‘æˆ˜ä»»åŠ¡3ï¼šè½¦é“æ£€æµ‹","date":"2017-12-28T03:38:11.000Z","updated":"2020-04-07T04:59:50.572Z","comments":true,"path":"opencv-python-lane-road-detection/","link":"","permalink":"http://www.codec.wang/opencv-python-lane-road-detection/","excerpt":"æŒ‘æˆ˜ä»»åŠ¡ï¼šå®é™…å…¬è·¯çš„è½¦é“çº¿æ£€æµ‹ã€‚","text":"æŒ‘æˆ˜ä»»åŠ¡ï¼šå®é™…å…¬è·¯çš„è½¦é“çº¿æ£€æµ‹ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ æŒ‘æˆ˜å†…å®¹ 1. åœ¨æ‰€æä¾›çš„å…¬è·¯å›¾ç‰‡ä¸Šæ£€æµ‹å‡ºè½¦é“çº¿å¹¶æ ‡è®°ï¼š 2. åœ¨æ‰€æä¾›çš„å…¬è·¯è§†é¢‘ä¸Šæ£€æµ‹å‡ºè½¦é“çº¿å¹¶æ ‡è®°ï¼š æœ¬æ¬¡æŒ‘æˆ˜å†…å®¹æ¥è‡ªUdacityè‡ªåŠ¨é©¾é©¶çº³ç±³å­¦ä½è¯¾ç¨‹ï¼Œç´ æä¸­è½¦é“ä¿æŒä¸å˜ï¼Œè½¦é“çº¿æ¸…æ™°æ˜ç¡®ï¼Œæ˜“äºæ£€æµ‹ï¼Œæ˜¯è½¦é“æ£€æµ‹çš„åŸºç¡€ç‰ˆæœ¬ï¼Œç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šé’ˆå¯¹å¤æ‚åœºæ™¯çš„é«˜çº§å®ç°ï¼Œæ„Ÿå…´è¶£çš„ç«¥é‹å¯ä»¥è‡ªè¡Œäº†è§£ã€‚ æŒ‘æˆ˜é¢˜ä¸ä¼šåšä¹Ÿæœ¨æœ‰å…³ç³»ï¼Œä½†è¯·åŠ¡å¿…åœ¨è‡ªè¡Œå°è¯•åï¼Œå†çœ‹ä¸‹é¢çš„è§£ç­”å™¢ï¼Œä¸ç„¶â€¦æˆ‘ä¹Ÿæ²¡åŠæ³•(ï¿£â–½ï¿£)â€ æŒ‘æˆ˜è§£ç­”æ–¹æ¡ˆè¦æ£€æµ‹å‡ºå½“å‰è½¦é“ï¼Œå°±æ˜¯è¦æ£€æµ‹å‡ºå·¦å³ä¸¤æ¡è½¦é“ç›´çº¿ã€‚ç”±äºæ— äººè½¦ä¸€ç›´ä¿æŒåœ¨å½“å‰è½¦é“ï¼Œé‚£ä¹ˆæ— äººè½¦ä¸Šçš„ç›¸æœºæ‹æ‘„çš„è§†é¢‘ä¸­ï¼Œè½¦é“çº¿çš„ä½ç½®åº”è¯¥åŸºæœ¬å›ºå®šåœ¨æŸä¸€ä¸ªèŒƒå›´å†…ï¼š å¦‚æœæˆ‘ä»¬æ‰‹åŠ¨æŠŠè¿™éƒ¨åˆ†ROIåŒºåŸŸæŠ å‡ºæ¥ï¼Œå°±ä¼šæ’é™¤æ‰å¤§éƒ¨åˆ†å¹²æ‰°ã€‚æ¥ä¸‹æ¥æ£€æµ‹ç›´çº¿è‚¯å®šæ˜¯ç”¨éœå¤«å˜æ¢ï¼Œä½†ROIåŒºåŸŸå†…çš„è¾¹ç¼˜ç›´çº¿ä¿¡æ¯è¿˜æ˜¯å¾ˆå¤šï¼Œè€ƒè™‘åˆ°åªæœ‰å·¦å³ä¸¤æ¡è½¦é“çº¿ï¼Œä¸€æ¡æ–œç‡ä¸ºæ­£ï¼Œä¸€æ¡ä¸ºè´Ÿï¼Œå¯å°†æ‰€æœ‰çš„çº¿åˆ†ä¸ºä¸¤ç»„ï¼Œæ¯ç»„å†é€šè¿‡å‡å€¼æˆ–æœ€å°äºŒä¹˜æ³•æ‹Ÿåˆçš„æ–¹å¼ç¡®å®šå”¯ä¸€ä¸€æ¡çº¿å°±å¯ä»¥å®Œæˆæ£€æµ‹ã€‚æ€»ä½“æ­¥éª¤å¦‚ä¸‹ï¼š ç°åº¦åŒ– é«˜æ–¯æ¨¡ç³Š Cannyè¾¹ç¼˜æ£€æµ‹ ä¸è§„åˆ™ROIåŒºåŸŸæˆªå– éœå¤«ç›´çº¿æ£€æµ‹ è½¦é“è®¡ç®— å¯¹äºè§†é¢‘æ¥è¯´ï¼Œåªè¦ä¸€å¹…å›¾èƒ½æ£€æŸ¥å‡ºæ¥ï¼Œåˆæˆä¸‹å°±å¯ä»¥äº†ï¼Œé—®é¢˜ä¸å¤§ã€‚ å›¾åƒé¢„å¤„ç†ç°åº¦åŒ–å’Œæ»¤æ³¢æ“ä½œæ˜¯å¤§éƒ¨åˆ†å›¾åƒå¤„ç†çš„å¿…è¦æ­¥éª¤ã€‚ç°åº¦åŒ–ä¸å¿…å¤šè¯´ï¼Œå› ä¸ºä¸æ˜¯åŸºäºè‰²å½©ä¿¡æ¯è¯†åˆ«çš„ä»»åŠ¡ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦ç”¨å½©è‰²å›¾ï¼Œå¯ä»¥å¤§å¤§å‡å°‘è®¡ç®—é‡ã€‚è€Œæ»¤æ³¢ä¼šå‰Šå¼±å›¾åƒå™ªç‚¹ï¼Œæ’é™¤å¹²æ‰°ä¿¡æ¯ã€‚å¦å¤–ï¼Œæ ¹æ®å‰é¢å­¦ä¹ çš„çŸ¥è¯†ï¼Œè¾¹ç¼˜æå–æ˜¯åŸºäºå›¾åƒæ¢¯åº¦çš„ï¼Œæ¢¯åº¦å¯¹å™ªå£°å¾ˆæ•æ„Ÿï¼Œæ‰€ä»¥å¹³æ»‘æ»¤æ³¢æ“ä½œå¿…ä¸å¯å°‘ã€‚ è¿™æ¬¡çš„ä»£ç æˆ‘ä»¬åˆ†æ¨¡å—æ¥å†™ï¼Œè§„èŒƒä¸€ç‚¹ã€‚å…¶ä¸­process_an_image()æ˜¯ä¸»è¦çš„å›¾åƒå¤„ç†æµç¨‹ï¼š 1234567891011121314151617181920import cv2import numpy as np# é«˜æ–¯æ»¤æ³¢æ ¸å¤§å°blur_ksize = 5# Cannyè¾¹ç¼˜æ£€æµ‹é«˜ä½é˜ˆå€¼canny_lth = 50canny_hth = 150def process_an_image(img): # 1. ç°åº¦åŒ–ã€æ»¤æ³¢å’ŒCanny gray = cv2.cvtColor(img, cv2.COLOR_RGB2GRAY) blur_gray = cv2.GaussianBlur(gray, (blur_ksize, blur_ksize), 1) edges = cv2.Canny(blur_gray, canny_lth, canny_hth)if __name__ == \"__main__\": img = cv2.imread('test_pictures/lane.jpg') result = process_an_image(img) cv2.imshow(\"lane\", np.hstack((img, result))) cv2.waitKey(0) ROIæˆªå–æŒ‰ç…§å‰é¢æè¿°çš„æ–¹æ¡ˆï¼Œåªéœ€ä¿ç•™è¾¹ç¼˜å›¾ä¸­çš„çº¢çº¿éƒ¨åˆ†åŒºåŸŸç”¨äºåç»­çš„éœå¤«ç›´çº¿æ£€æµ‹ï¼Œå…¶ä½™éƒ½æ˜¯æ— ç”¨çš„ä¿¡æ¯ï¼š å¦‚ä½•å®ç°å‘¢ï¼Ÿè¿˜è®°å¾—å›¾åƒæ··åˆä¸­çš„è¿™å¼ å›¾å—ï¼Ÿ æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ¢¯å½¢çš„maskæ©è†œï¼Œç„¶åä¸è¾¹ç¼˜æ£€æµ‹ç»“æœå›¾æ··åˆè¿ç®—ï¼Œæ©è†œä¸­ç™½è‰²çš„éƒ¨åˆ†ä¿ç•™ï¼Œé»‘è‰²çš„éƒ¨åˆ†èˆå¼ƒã€‚æ¢¯å½¢çš„å››ä¸ªåæ ‡éœ€è¦æ‰‹åŠ¨æ ‡è®°ï¼š 12345678910111213141516def process_an_image(img): # 1. ç°åº¦åŒ–ã€æ»¤æ³¢å’ŒCanny # 2. æ ‡è®°å››ä¸ªåæ ‡ç‚¹ç”¨äºROIæˆªå– rows, cols = edges.shape points = np.array([[(0, rows), (460, 325), (520, 325), (cols, rows)]]) # [[[0 540], [460 325], [520 325], [960 540]]] roi_edges = roi_mask(edges, points) def roi_mask(img, corner_points): # åˆ›å»ºæ©è†œ mask = np.zeros_like(img) cv2.fillPoly(mask, corner_points, 255) masked_img = cv2.bitwise_and(img, mask) return masked_img è¿™æ ·ï¼Œç»“æœå›¾â€roi_edgesâ€åº”è¯¥æ˜¯ï¼š éœå¤«ç›´çº¿æå–ä¸ºäº†æ–¹ä¾¿åç»­è®¡ç®—ç›´çº¿çš„æ–œç‡ï¼Œæˆ‘ä»¬ä½¿ç”¨ç»Ÿè®¡æ¦‚ç‡éœå¤«ç›´çº¿å˜æ¢ï¼ˆå› ä¸ºå®ƒèƒ½ç›´æ¥å¾—åˆ°ç›´çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹åæ ‡ï¼‰ã€‚éœå¤«å˜æ¢çš„å‚æ•°æ¯”è¾ƒå¤šï¼Œå¯ä»¥æ”¾åœ¨ä»£ç å¼€å¤´ï¼Œä¾¿äºä¿®æ”¹ï¼š 1234567891011121314151617181920212223242526272829# éœå¤«å˜æ¢å‚æ•°rho = 1theta = np.pi / 180threshold = 15min_line_len = 40max_line_gap = 20def process_an_image(img): # 1. ç°åº¦åŒ–ã€æ»¤æ³¢å’ŒCanny # 2. æ ‡è®°å››ä¸ªåæ ‡ç‚¹ç”¨äºROIæˆªå– # 3. éœå¤«ç›´çº¿æå– drawing, lines = hough_lines(roi_edges, rho, theta, threshold, min_line_len, max_line_gap)def hough_lines(img, rho, theta, threshold, min_line_len, max_line_gap): # ç»Ÿè®¡æ¦‚ç‡éœå¤«ç›´çº¿å˜æ¢ lines = cv2.HoughLinesP(img, rho, theta, threshold, minLineLength=min_line_len, maxLineGap=max_line_gap) # æ–°å»ºä¸€å‰¯ç©ºç™½ç”»å¸ƒ drawing = np.zeros((img.shape[0], img.shape[1], 3), dtype=np.uint8) # draw_lines(drawing, lines) # ç”»å‡ºç›´çº¿æ£€æµ‹ç»“æœ return drawing, linesdef draw_lines(img, lines, color=[0, 0, 255], thickness=1): for line in lines: for x1, y1, x2, y2 in line: cv2.line(img, (x1, y1), (x2, y2), color, thickness) draw_lines()æ˜¯ç”¨æ¥ç”»ç›´çº¿æ£€æµ‹çš„ç»“æœï¼Œåé¢æˆ‘ä»¬ä¼šæ¥ç€å¤„ç†ç›´çº¿ï¼Œæ‰€ä»¥è¿™é‡Œæ³¨é‡Šæ‰äº†ï¼Œå¯ä»¥å–æ¶ˆæ³¨é‡Šçœ‹ä¸‹æ•ˆæœï¼š å¯¹æœ¬ä¾‹çš„è¿™å¼ æµ‹è¯•å›¾æ¥è¯´ï¼Œå¦‚æœæ‰“å°å‡ºç›´çº¿çš„æ¡æ•°print(len(lines))ï¼Œåº”è¯¥æ˜¯æœ‰16æ¡ã€‚ è½¦é“è®¡ç®—è¿™éƒ¨åˆ†åº”è¯¥ç®—æ˜¯æœ¬æ¬¡æŒ‘æˆ˜ä»»åŠ¡çš„æ ¸å¿ƒå†…å®¹äº†ï¼šå‰é¢é€šè¿‡éœå¤«å˜æ¢å¾—åˆ°äº†å¤šæ¡ç›´çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯é€šè¿‡æŸç§ç®—æ³•åªå¾—åˆ°å·¦å³ä¸¤æ¡è½¦é“çº¿ã€‚ ç¬¬ä¸€æ­¥ã€æ ¹æ®æ–œç‡æ­£è´Ÿåˆ’åˆ†æŸæ¡çº¿æ˜¯å·¦è½¦é“è¿˜æ˜¯å³è½¦é“ã€‚$$æ–œç‡=\\frac{y_2-y_1}{x_2-x_1}(\\leq0:å·¦,&gt;0:å³)$$ ç»éªŒä¹‹è°ˆï¼šå†æ¬¡å¼ºè°ƒï¼Œæ–œç‡è®¡ç®—æ˜¯åœ¨å›¾åƒåæ ‡ç³»ä¸‹ï¼Œæ‰€ä»¥æ–œç‡æ­£è´Ÿ/å·¦å³è·Ÿå¹³é¢åæ ‡æœ‰åŒºåˆ«ã€‚ ç¬¬äºŒæ­¥ã€è¿­ä»£è®¡ç®—å„ç›´çº¿æ–œç‡ä¸æ–œç‡å‡å€¼çš„å·®ï¼Œæ’é™¤æ‰å·®å€¼è¿‡å¤§çš„å¼‚å¸¸æ•°æ®ã€‚ æ³¨æ„è¿™é‡Œè¿­ä»£çš„å«ä¹‰ï¼Œæ„æ€æ˜¯ç¬¬ä¸€æ¬¡è®¡ç®—å®Œæ–œç‡å‡å€¼å¹¶æ’é™¤æ‰å¼‚å¸¸å€¼åï¼Œå†åœ¨å‰©ä½™çš„æ–œç‡ä¸­å–å‡å€¼ï¼Œç»§ç»­æ’é™¤â€¦â€¦è¿™æ ·è¿­ä»£ä¸‹å»ã€‚ ç¬¬ä¸‰æ­¥ã€æœ€å°äºŒä¹˜æ³•æ‹Ÿåˆå·¦å³è½¦é“çº¿ã€‚ ç»è¿‡ç¬¬äºŒæ­¥çš„ç­›é€‰ï¼Œå°±åªå‰©ä¸‹å¯èƒ½çš„å·¦å³è½¦é“çº¿äº†ï¼Œè¿™æ ·åªéœ€ä»å¤šæ¡ç›´çº¿ä¸­æ‹Ÿåˆå‡ºä¸€æ¡å°±è¡Œã€‚æ‹Ÿåˆæ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œæœ€å¸¸ç”¨çš„ä¾¿æ˜¯æœ€å°äºŒä¹˜æ³•ï¼Œå®ƒé€šè¿‡æœ€å°åŒ–è¯¯å·®çš„å¹³æ–¹å’Œæ¥å¯»æ‰¾æ•°æ®çš„æœ€ä½³åŒ¹é…å‡½æ•°ã€‚ å…·ä½“æ¥è¯´ï¼Œå‡è®¾ç›®å‰å¯èƒ½çš„å·¦è½¦é“çº¿æœ‰6æ¡ï¼Œä¹Ÿå°±æ˜¯12ä¸ªåæ ‡ç‚¹ï¼ŒåŒ…æ‹¬12ä¸ªxå’Œ12ä¸ªyï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯æ‹Ÿåˆå‡ºè¿™æ ·ä¸€æ¡ç›´çº¿ï¼š$$f(x_i) = ax_i+b$$ä½¿å¾—è¯¯å·®å¹³æ–¹å’Œæœ€å°ï¼š$$E=\\sum(f(x_i)-y_i)^2$$ Pythonä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨np.polyfit()è¿›è¡Œæœ€å°äºŒä¹˜æ³•æ‹Ÿåˆã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677def process_an_image(img): # 1. ç°åº¦åŒ–ã€æ»¤æ³¢å’ŒCanny # 2. æ ‡è®°å››ä¸ªåæ ‡ç‚¹ç”¨äºROIæˆªå– # 3. éœå¤«ç›´çº¿æå– # 4. è½¦é“æ‹Ÿåˆè®¡ç®— draw_lanes(drawing, lines) # 5. æœ€ç»ˆå°†ç»“æœåˆåœ¨åŸå›¾ä¸Š result = cv2.addWeighted(img, 0.9, drawing, 0.2, 0) return resultdef draw_lanes(img, lines, color=[255, 0, 0], thickness=8): # a. åˆ’åˆ†å·¦å³è½¦é“ left_lines, right_lines = [], [] for line in lines: for x1, y1, x2, y2 in line: k = (y2 - y1) / (x2 - x1) if k &lt; 0: left_lines.append(line) else: right_lines.append(line) if (len(left_lines) &lt;= 0 or len(right_lines) &lt;= 0): return # b. æ¸…ç†å¼‚å¸¸æ•°æ® clean_lines(left_lines, 0.1) clean_lines(right_lines, 0.1) # c. å¾—åˆ°å·¦å³è½¦é“çº¿ç‚¹çš„é›†åˆï¼Œæ‹Ÿåˆç›´çº¿ left_points = [(x1, y1) for line in left_lines for x1, y1, x2, y2 in line] left_points = left_points + [(x2, y2) for line in left_lines for x1, y1, x2, y2 in line] right_points = [(x1, y1) for line in right_lines for x1, y1, x2, y2 in line] right_points = right_points + [(x2, y2) for line in right_lines for x1, y1, x2, y2 in line] left_results = least_squares_fit(left_points, 325, img.shape[0]) right_results = least_squares_fit(right_points, 325, img.shape[0]) # æ³¨æ„è¿™é‡Œç‚¹çš„é¡ºåº vtxs = np.array([[left_results[1], left_results[0], right_results[0], right_results[1]]]) # d. å¡«å……è½¦é“åŒºåŸŸ cv2.fillPoly(img, vtxs, (0, 255, 0)) # æˆ–è€…åªç”»è½¦é“çº¿ # cv2.line(img, left_results[0], left_results[1], (0, 255, 0), thickness) # cv2.line(img, right_results[0], right_results[1], (0, 255, 0), thickness) def clean_lines(lines, threshold): # è¿­ä»£è®¡ç®—æ–œç‡å‡å€¼ï¼Œæ’é™¤æ‰ä¸å·®å€¼å·®å¼‚è¾ƒå¤§çš„æ•°æ® slope = [(y2 - y1) / (x2 - x1) for line in lines for x1, y1, x2, y2 in line] while len(lines) &gt; 0: mean = np.mean(slope) diff = [abs(s - mean) for s in slope] idx = np.argmax(diff) if diff[idx] &gt; threshold: slope.pop(idx) lines.pop(idx) else: break def least_squares_fit(point_list, ymin, ymax): # æœ€å°äºŒä¹˜æ³•æ‹Ÿåˆ x = [p[0] for p in point_list] y = [p[1] for p in point_list] # polyfitç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºæ‹Ÿåˆå¤šé¡¹å¼çš„é˜¶æ•°ï¼Œæ‰€ä»¥1ä»£è¡¨çº¿æ€§ fit = np.polyfit(y, x, 1) fit_fn = np.poly1d(fit) # è·å–æ‹Ÿåˆçš„ç»“æœ xmin = int(fit_fn(ymin)) xmax = int(fit_fn(ymax)) return [(xmin, ymin), (xmax, ymax)] è¿™æ®µä»£ç æ¯”è¾ƒå¤šï¼Œè¯·æ¯ä¸ªæ­¥éª¤å•ç‹¬æ¥çœ‹ã€‚æœ€åå¾—åˆ°çš„æ˜¯å·¦å³ä¸¤æ¡è½¦é“çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹åæ ‡ï¼Œå¯ä»¥é€‰æ‹©ç”»å‡ºè½¦é“çº¿ï¼Œè¿™é‡Œæˆ‘ç›´æ¥å¡«å……äº†æ•´ä¸ªåŒºåŸŸï¼š è§†é¢‘å¤„ç†æå®šäº†ä¸€å¼ å›¾ï¼Œè§†é¢‘ä¹Ÿå°±æ²¡ä»€ä¹ˆé—®é¢˜äº†ï¼Œå…³é”®å°±æ˜¯è§†é¢‘å¸§çš„æå–å’Œåˆæˆï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬è¦ç”¨åˆ°Pythonçš„è§†é¢‘ç¼–è¾‘åŒ…moviepyï¼š 1pip install moviepy å¦å¤–è¿˜éœ€è¦ffmpegï¼Œé¦–æ¬¡è¿è¡Œmoviepyæ—¶ä¼šè‡ªåŠ¨ä¸‹è½½ï¼Œä¹Ÿå¯æ‰‹åŠ¨ä¸‹è½½ã€‚ åªéœ€åœ¨å¼€å¤´å¯¼å…¥moviepyï¼Œç„¶åå°†ä¸»å‡½æ•°æ”¹æ‰å°±å¯ä»¥äº†ï¼Œå…¶ä½™ä»£ç ä¸éœ€è¦æ›´æ”¹ï¼š 123456789# å¼€å¤´å¯¼å…¥moviepyfrom moviepy.editor import VideoFileClip# ä¸»å‡½æ•°æ›´æ”¹ä¸ºï¼šif __name__ == \"__main__\": output = 'test_videos/output.mp4' clip = VideoFileClip(\"test_videos/cv2_white_lane.mp4\") out_clip = clip.fl_image(process_an_image) out_clip.write_videofile(output, audio=False) æœ¬æ–‡å®ç°äº†è½¦é“æ£€æµ‹çš„åŸºç¡€ç‰ˆæœ¬ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥è‡ªè¡Œæœç´¢æˆ–å‚è€ƒå¼•ç”¨éƒ¨åˆ†äº†è§£æ›´å¤šã€‚ å¼•ç”¨ å›¾ç‰‡å’Œè§†é¢‘ç´ æ æœ¬èŠ‚æºç  ä»é›¶å¼€å§‹å­¦ä¹ æ— äººé©¾é©¶æŠ€æœ¯ â€” è½¦é“æ£€æµ‹ æ— äººé©¾é©¶ä¹‹é«˜çº§è½¦é“çº¿æ£€æµ‹","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"è½¦é“æ£€æµ‹","slug":"è½¦é“æ£€æµ‹","permalink":"http://www.codec.wang/tags/%E8%BD%A6%E9%81%93%E6%A3%80%E6%B5%8B/"}]},{"title":"Python+OpenCVæ•™ç¨‹17ï¼šéœå¤«å˜æ¢","slug":"Python-OpenCVæ•™ç¨‹17ï¼šéœå¤«å˜æ¢","date":"2017-12-28T03:35:11.000Z","updated":"2020-04-07T04:55:46.735Z","comments":true,"path":"opencv-python-hough-transform/","link":"","permalink":"http://www.codec.wang/opencv-python-hough-transform/","excerpt":"å­¦ä¹ ä½¿ç”¨éœå¤«å˜æ¢è¯†åˆ«å‡ºå›¾åƒä¸­çš„ç›´çº¿å’Œåœ†ã€‚","text":"å­¦ä¹ ä½¿ç”¨éœå¤«å˜æ¢è¯†åˆ«å‡ºå›¾åƒä¸­çš„ç›´çº¿å’Œåœ†ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ ç†è§£éœå¤«å˜æ¢çš„å®ç° åˆ†åˆ«ä½¿ç”¨éœå¤«çº¿å˜æ¢å’Œåœ†å˜æ¢æ£€æµ‹å›¾åƒä¸­çš„ç›´çº¿å’Œåœ† OpenCVå‡½æ•°ï¼šcv2.HoughLines(), cv2.HoughLinesP(), cv2.HoughCircles() æ•™ç¨‹ç†è§£éœå¤«å˜æ¢éœå¤«å˜æ¢å¸¸ç”¨æ¥åœ¨å›¾åƒä¸­æå–ç›´çº¿å’Œåœ†ç­‰å‡ ä½•å½¢çŠ¶ï¼Œæˆ‘æ¥åšä¸ªç®€æ˜“çš„è§£é‡Šï¼š å­¦è¿‡å‡ ä½•çš„éƒ½çŸ¥é“ï¼Œç›´çº¿å¯ä»¥åˆ†åˆ«ç”¨ç›´è§’åæ ‡ç³»å’Œæåæ ‡ç³»æ¥è¡¨ç¤ºï¼š é‚£ä¹ˆç»è¿‡æŸä¸ªç‚¹(x0,y0)çš„æ‰€æœ‰ç›´çº¿éƒ½å¯ä»¥ç”¨è¿™ä¸ªå¼å­æ¥è¡¨ç¤ºï¼š $$r_\\theta=x_0\\cdot\\cos \\theta+y_0\\cdot\\sin \\theta$$ ä¹Ÿå°±æ˜¯è¯´æ¯ä¸€ä¸ª(r,Î¸)éƒ½è¡¨ç¤ºä¸€æ¡ç»è¿‡(x0,y0)ç›´çº¿ï¼Œé‚£ä¹ˆåŒä¸€æ¡ç›´çº¿ä¸Šçš„ç‚¹å¿…ç„¶ä¼šæœ‰åŒæ ·çš„(r,Î¸)ã€‚å¦‚æœå°†æŸä¸ªç‚¹æ‰€æœ‰çš„(r,Î¸)ç»˜åˆ¶æˆä¸‹é¢çš„æ›²çº¿ï¼Œé‚£ä¹ˆåŒä¸€æ¡ç›´çº¿ä¸Šçš„ç‚¹çš„(r,Î¸)æ›²çº¿ä¼šç›¸äº¤äºä¸€ç‚¹ï¼š OpenCVä¸­é¦–å…ˆè®¡ç®—(r,Î¸) ç´¯åŠ æ•°ï¼Œç´¯åŠ æ•°è¶…è¿‡ä¸€å®šå€¼åå°±è®¤ä¸ºåœ¨åŒä¸€ç›´çº¿ä¸Šã€‚ éœå¤«ç›´çº¿å˜æ¢OpenCVä¸­ç”¨cv2.HoughLines()åœ¨äºŒå€¼å›¾ä¸Šå®ç°éœå¤«å˜æ¢ï¼Œå‡½æ•°è¿”å›çš„æ˜¯ä¸€ç»„ç›´çº¿çš„(r,Î¸)æ•°æ®ï¼š 1234567891011import cv2import numpy as np# 1.åŠ è½½å›¾ç‰‡ï¼Œè½¬ä¸ºäºŒå€¼å›¾img = cv2.imread('shapes.jpg')drawing = np.zeros(img.shape[:], dtype=np.uint8)gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)edges = cv2.Canny(gray, 50, 150)# 2.éœå¤«ç›´çº¿å˜æ¢lines = cv2.HoughLines(edges, 0.8, np.pi / 180, 90) å‡½æ•°ä¸­ï¼š å‚æ•°1ï¼šè¦æ£€æµ‹çš„äºŒå€¼å›¾ï¼ˆä¸€èˆ¬æ˜¯é˜ˆå€¼åˆ†å‰²æˆ–è¾¹ç¼˜æ£€æµ‹åçš„å›¾ï¼‰ å‚æ•°2ï¼šè·ç¦»rçš„ç²¾åº¦ï¼Œå€¼è¶Šå¤§ï¼Œè€ƒè™‘è¶Šå¤šçš„çº¿ å‚æ•°3ï¼šè§’åº¦Î¸çš„ç²¾åº¦ï¼Œå€¼è¶Šå°ï¼Œè€ƒè™‘è¶Šå¤šçš„çº¿ å‚æ•°4ï¼šç´¯åŠ æ•°é˜ˆå€¼ï¼Œå€¼è¶Šå°ï¼Œè€ƒè™‘è¶Šå¤šçš„çº¿ 12345678910111213# 3.å°†æ£€æµ‹çš„çº¿ç”»å‡ºæ¥ï¼ˆæ³¨æ„æ˜¯æåæ ‡å™¢ï¼‰for line in lines: rho, theta = line[0] a = np.cos(theta) b = np.sin(theta) x0 = a * rho y0 = b * rho x1 = int(x0 + 1000 * (-b)) y1 = int(y0 + 1000 * (a)) x2 = int(x0 - 1000 * (-b)) y2 = int(y0 - 1000 * (a)) cv2.line(drawing, (x1, y1), (x2, y2), (0, 0, 255)) ç»Ÿè®¡æ¦‚ç‡éœå¤«ç›´çº¿å˜æ¢å‰é¢çš„æ–¹æ³•åˆç§°ä¸ºæ ‡å‡†éœå¤«å˜æ¢ï¼Œå®ƒä¼šè®¡ç®—å›¾åƒä¸­çš„æ¯ä¸€ä¸ªç‚¹ï¼Œè®¡ç®—é‡æ¯”è¾ƒå¤§ï¼Œå¦å¤–å®ƒå¾—åˆ°çš„æ˜¯æ•´ä¸€æ¡çº¿ï¼ˆrå’ŒÎ¸ï¼‰ï¼Œå¹¶ä¸çŸ¥é“åŸå›¾ä¸­ç›´çº¿çš„ç«¯ç‚¹ã€‚æ‰€ä»¥æå‡ºäº†ç»Ÿè®¡æ¦‚ç‡éœå¤«ç›´çº¿å˜æ¢(Probabilistic Hough Transform)ï¼Œæ˜¯ä¸€ç§æ”¹è¿›çš„éœå¤«å˜æ¢ï¼š 1234drawing = np.zeros(img.shape[:], dtype=np.uint8)# 3.ç»Ÿè®¡æ¦‚ç‡éœå¤«çº¿å˜æ¢lines = cv2.HoughLinesP(edges, 0.8, np.pi / 180, 90, minLineLength=50, maxLineGap=10) å‰é¢å‡ ä¸ªå‚æ•°è·Ÿä¹‹å‰çš„ä¸€æ ·ï¼Œæœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼š minLineLengthï¼šæœ€çŸ­é•¿åº¦é˜ˆå€¼ï¼Œæ¯”è¿™ä¸ªé•¿åº¦çŸ­çš„çº¿ä¼šè¢«æ’é™¤ maxLineGapï¼šåŒä¸€ç›´çº¿ä¸¤ç‚¹ä¹‹é—´çš„æœ€å¤§è·ç¦» 1234# 3.å°†æ£€æµ‹çš„çº¿ç”»å‡ºæ¥for line in lines: x1, y1, x2, y2 = line[0] cv2.line(drawing, (x1, y1), (x2, y2), (0, 255, 0), 1, lineType=cv2.LINE_AA) cv2.LINE_AAåœ¨ä¹‹å‰ç»˜å›¾åŠŸèƒ½ä¸­è®²è§£è¿‡ï¼Œè¡¨ç¤ºæŠ—é”¯é½¿çº¿å‹ã€‚ éœå¤«åœ†å˜æ¢éœå¤«åœ†å˜æ¢è·Ÿç›´çº¿å˜æ¢ç±»ä¼¼ï¼Œåªä¸è¿‡çº¿æ˜¯ç”¨(r,Î¸)è¡¨ç¤ºï¼Œåœ†æ˜¯ç”¨(x_center,y_center,r)æ¥è¡¨ç¤ºï¼Œä»äºŒç»´å˜æˆäº†ä¸‰ç»´ï¼Œæ•°æ®é‡å˜å¤§äº†å¾ˆå¤šï¼›æ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨éœå¤«æ¢¯åº¦æ³•å‡å°‘è®¡ç®—é‡ï¼Œå¯¹è¯¥ç®—æ³•æ„Ÿå…´è¶£çš„åŒå­¦å¯å‚è€ƒï¼šCircle Hough Transform 1234drawing = np.zeros(img.shape[:], dtype=np.uint8)# 2.éœå¤«åœ†å˜æ¢circles = cv2.HoughCircles(edges, cv2.HOUGH_GRADIENT, 1, 20, param2=30)circles = np.int0(np.around(circles)) å…¶ä¸­ï¼Œ å‚æ•°2ï¼šå˜æ¢æ–¹æ³•ï¼Œä¸€èˆ¬ä½¿ç”¨éœå¤«æ¢¯åº¦æ³•ï¼Œè¯¦æƒ…ï¼šHoughModes å‚æ•°3 dp=1ï¼šè¡¨ç¤ºéœå¤«æ¢¯åº¦æ³•ä¸­ç´¯åŠ å™¨å›¾åƒçš„åˆ†è¾¨ç‡ä¸åŸå›¾ä¸€è‡´ å‚æ•°4ï¼šä¸¤ä¸ªä¸åŒåœ†åœ†å¿ƒçš„æœ€çŸ­è·ç¦» å‚æ•°5ï¼šparam2è·Ÿéœå¤«ç›´çº¿å˜æ¢ä¸­çš„ç´¯åŠ æ•°é˜ˆå€¼ä¸€æ · 1234# å°†æ£€æµ‹çš„åœ†ç”»å‡ºæ¥for i in circles[0, :]: cv2.circle(drawing, (i[0], i[1]), i[2], (0, 255, 0), 2) # ç”»å‡ºå¤–åœ† cv2.circle(drawing, (i[0], i[1]), 2, (0, 0, 255), 3) # ç”»å‡ºåœ†å¿ƒ å°ç»“ éœå¤«å˜æ¢ç”¨æ¥æå–å›¾åƒä¸­çš„ç›´çº¿å’Œåœ†ç­‰å‡ ä½•å½¢çŠ¶ã€‚ éœå¤«ç›´çº¿å˜æ¢ï¼šcv2.HoughLines()ï¼ˆæ•´æ¡ç›´çº¿ï¼‰, cv2.HoughLinesP()ã€‚ éœå¤«åœ†å˜æ¢ï¼šcv2.HoughCircles()ã€‚ å¼•ç”¨ æœ¬èŠ‚æºç  Hough Line Transform Hough Circle Transform Hough transform ç»å…¸éœå¤«å˜æ¢ï¼ˆHough Transformï¼‰","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"éœå¤«å˜æ¢","slug":"éœå¤«å˜æ¢","permalink":"http://www.codec.wang/tags/%E9%9C%8D%E5%A4%AB%E5%8F%98%E6%8D%A2/"}]},{"title":"Python+OpenCVæ•™ç¨‹16ï¼šæ¨¡æ¿åŒ¹é…","slug":"Python-OpenCVæ•™ç¨‹16ï¼šæ¨¡æ¿åŒ¹é…","date":"2017-12-27T08:45:31.000Z","updated":"2020-04-07T04:56:15.137Z","comments":true,"path":"opencv-python-template-matching/","link":"","permalink":"http://www.codec.wang/opencv-python-template-matching/","excerpt":"å­¦ä¹ ä½¿ç”¨æ¨¡æ¿åŒ¹é…åœ¨å›¾åƒä¸­å¯»æ‰¾ç‰©ä½“ã€‚","text":"å­¦ä¹ ä½¿ç”¨æ¨¡æ¿åŒ¹é…åœ¨å›¾åƒä¸­å¯»æ‰¾ç‰©ä½“ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ ä½¿ç”¨æ¨¡æ¿åŒ¹é…åœ¨å›¾åƒä¸­å¯»æ‰¾ç‰©ä½“ OpenCVå‡½æ•°ï¼šcv2.matchTemplate(), cv2.minMaxLoc() æ•™ç¨‹æ¨¡æ¿åŒ¹é…æ¨¡æ¿åŒ¹é…å°±æ˜¯ç”¨æ¥åœ¨å¤§å›¾ä¸­æ‰¾å°å›¾ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ä¸€å‰¯å›¾åƒä¸­å¯»æ‰¾å¦å¤–ä¸€å¼ æ¨¡æ¿å›¾åƒçš„ä½ç½®ï¼š ç”¨cv2.matchTemplate()å®ç°æ¨¡æ¿åŒ¹é…ã€‚é¦–å…ˆæˆ‘ä»¬æ¥è¯»å…¥å›¾ç‰‡å’Œæ¨¡æ¿ï¼š 1234567import cv2import numpy as npfrom matplotlib import pyplot as pltimg = cv2.imread('lena.jpg', 0)template = cv2.imread('face.jpg', 0)h, w = template.shape[:2] # rows-&gt;h, cols-&gt;w åŒ¹é…å‡½æ•°è¿”å›çš„æ˜¯ä¸€å‰¯ç°åº¦å›¾ï¼Œæœ€ç™½çš„åœ°æ–¹è¡¨ç¤ºæœ€å¤§çš„åŒ¹é…ã€‚ä½¿ç”¨cv2.minMaxLoc()å‡½æ•°å¯ä»¥å¾—åˆ°æœ€å¤§åŒ¹é…å€¼çš„åæ ‡ï¼Œä»¥è¿™ä¸ªç‚¹ä¸ºå·¦ä¸Šè§’è§’ç‚¹ï¼Œæ¨¡æ¿çš„å®½å’Œé«˜ç”»çŸ©å½¢å°±æ˜¯åŒ¹é…çš„ä½ç½®äº†ï¼š 1234567# ç›¸å…³ç³»æ•°åŒ¹é…æ–¹æ³•ï¼šcv2.TM_CCOEFFres = cv2.matchTemplate(img, template, cv2.TM_CCOEFF)min_val, max_val, min_loc, max_loc = cv2.minMaxLoc(res)left_top = max_loc # å·¦ä¸Šè§’right_bottom = (left_top[0] + w, left_top[1] + h) # å³ä¸‹è§’cv2.rectangle(img, left_top, right_bottom, 255, 2) # ç”»å‡ºçŸ©å½¢ä½ç½® åŸç† è¿™éƒ¨åˆ†å¯çœ‹å¯ä¸çœ‹ï¼Œä¸å¤ªç†è§£ä¹Ÿæ²¡å…³ç³»ï¼Œè¿˜è®°å¾—å‰é¢çš„æ–¹æ³•å—ï¼Ÿä¸æ‡‚å¾—å°±åˆ’æ‰(âœ¿â—•â€¿â—•âœ¿) æ¨¡æ¿åŒ¹é…çš„åŸç†å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸æ–­åœ°åœ¨åŸå›¾ä¸­ç§»åŠ¨æ¨¡æ¿å›¾åƒå»æ¯”è¾ƒï¼Œæœ‰6ç§ä¸åŒçš„æ¯”è¾ƒæ–¹æ³•ï¼Œè¯¦æƒ…å¯å‚è€ƒï¼šTemplateMatchModes å¹³æ–¹å·®åŒ¹é…CV_TM_SQDIFFï¼šç”¨ä¸¤è€…çš„å¹³æ–¹å·®æ¥åŒ¹é…ï¼Œæœ€å¥½çš„åŒ¹é…å€¼ä¸º0 å½’ä¸€åŒ–å¹³æ–¹å·®åŒ¹é…CV_TM_SQDIFF_NORMED ç›¸å…³åŒ¹é…CV_TM_CCORRï¼šç”¨ä¸¤è€…çš„ä¹˜ç§¯åŒ¹é…ï¼Œæ•°å€¼è¶Šå¤§è¡¨æ˜åŒ¹é…ç¨‹åº¦è¶Šå¥½ å½’ä¸€åŒ–ç›¸å…³åŒ¹é…CV_TM_CCORR_NORMED ç›¸å…³ç³»æ•°åŒ¹é…CV_TM_CCOEFFï¼šç”¨ä¸¤è€…çš„ç›¸å…³ç³»æ•°åŒ¹é…ï¼Œ1è¡¨ç¤ºå®Œç¾çš„åŒ¹é…ï¼Œ-1è¡¨ç¤ºæœ€å·®çš„åŒ¹é… å½’ä¸€åŒ–ç›¸å…³ç³»æ•°åŒ¹é…CV_TM_CCOEFF_NORMED å½’ä¸€åŒ–çš„æ„æ€å°±æ˜¯å°†å€¼ç»Ÿä¸€åˆ°0~1ï¼Œè¿™äº›æ–¹æ³•çš„å¯¹æ¯”ä»£ç å¯åˆ°æºç å¤„æŸ¥çœ‹ã€‚æ¨¡æ¿åŒ¹é…ä¹Ÿæ˜¯åº”ç”¨å·ç§¯æ¥å®ç°çš„ï¼šå‡è®¾åŸå›¾å¤§å°ä¸ºWÃ—Hï¼Œæ¨¡æ¿å›¾å¤§å°ä¸ºwÃ—hï¼Œé‚£ä¹ˆç”Ÿæˆå›¾å¤§å°æ˜¯(W-w+1)Ã—(H-h+1)ï¼Œç”Ÿæˆå›¾ä¸­çš„æ¯ä¸ªåƒç´ å€¼è¡¨ç¤ºåŸå›¾ä¸æ¨¡æ¿çš„åŒ¹é…ç¨‹åº¦ã€‚ åŒ¹é…å¤šä¸ªç‰©ä½“å‰é¢æˆ‘ä»¬æ˜¯æ‰¾æœ€å¤§åŒ¹é…çš„ç‚¹ï¼Œæ‰€ä»¥åªèƒ½åŒ¹é…ä¸€æ¬¡ã€‚æˆ‘ä»¬å¯ä»¥è®¾å®šä¸€ä¸ªåŒ¹é…é˜ˆå€¼æ¥åŒ¹é…å¤šæ¬¡ï¼š 123456789101112131415# 1.è¯»å…¥åŸå›¾å’Œæ¨¡æ¿img_rgb = cv2.imread('mario.jpg')img_gray = cv2.cvtColor(img_rgb, cv2.COLOR_BGR2GRAY)template = cv2.imread('mario_coin.jpg', 0)h, w = template.shape[:2]# 2.æ ‡å‡†ç›¸å…³æ¨¡æ¿åŒ¹é…res = cv2.matchTemplate(img_gray, template, cv2.TM_CCOEFF_NORMED)threshold = 0.8 # 3.è¿™è¾¹æ˜¯Python/Numpyçš„çŸ¥è¯†ï¼Œåé¢è§£é‡Šloc = np.where(res &gt;= threshold) # åŒ¹é…ç¨‹åº¦å¤§äº%80çš„åæ ‡y,xfor pt in zip(*loc[::-1]): # *å·è¡¨ç¤ºå¯é€‰å‚æ•° right_bottom = (pt[0] + w, pt[1] + h) cv2.rectangle(img_rgb, pt, right_bottom, (0, 0, 255), 2) ç¬¬3æ­¥æœ‰å‡ ä¸ªPython/Numpyçš„é‡è¦çŸ¥è¯†ï¼Œæ¥å¤§è‡´çœ‹ä¸‹ï¼š np.where()åœ¨è¿™é‡Œè¿”å›resä¸­å€¼å¤§äº0.8çš„æ‰€æœ‰åæ ‡ï¼Œå¦‚ï¼š 123x = np.arange(9.).reshape(3, 3)print(np.where(x &gt; 5))# ç»“æœ(å…ˆyåæ ‡ï¼Œå†xåæ ‡)ï¼š(array([2, 2, 2]), array([0, 1, 2])) zip()å‡½æ•°ï¼ŒåŠŸèƒ½å¼ºå¤§åˆ°éš¾ä»¥è§£é‡Šï¼Œä¸¾ä¸ªç®€å•ä¾‹å­å°±çŸ¥é“äº†ï¼š 123x = [1, 2, 3]y = [4, 5, 6]print(list(zip(x, y))) # [(1, 4), (2, 5), (3, 6)] è¿™æ ·å¤§å®¶å°±èƒ½ç†è§£å‰é¢ä»£ç çš„ç”¨æ³•äº†å§ï¼šå› ä¸ºlocæ˜¯å…ˆyåæ ‡å†xåæ ‡ï¼Œæ‰€ä»¥ç”¨loc[::-1]ç¿»è½¬ä¸€ä¸‹ï¼Œç„¶åå†ç”¨zipå‡½æ•°æ‹¼æ¥åœ¨ä¸€èµ·ã€‚ ç»ƒä¹  ä¹‹å‰æˆ‘ä»¬æœ‰å­¦è¿‡å½¢çŠ¶åŒ¹é…ï¼Œä¸è®ºå½¢çŠ¶æ—‹è½¬/ç¼©æ”¾éƒ½å¯ä»¥åŒ¹é…åˆ°ã€‚æ€è€ƒä¸€ä¸‹ï¼Œå›¾ç‰‡æ—‹è½¬æˆ–ç¼©æ”¾çš„è¯æ¨¡æ¿åŒ¹é…è¿˜æœ‰ä½œç”¨å—ï¼Ÿ å°ç»“ æ¨¡æ¿åŒ¹é…ç”¨æ¥åœ¨å¤§å›¾ä¸­æ‰¾å°å›¾ã€‚ cv2.matchTemplate()ç”¨æ¥è¿›è¡Œæ¨¡æ¿åŒ¹é…ã€‚ å¼•ç”¨ æœ¬èŠ‚æºç  Template Matching æ¨¡æ¿åŒ¹é… TemplateMatchModes","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"æ¨¡æ¿åŒ¹é…","slug":"æ¨¡æ¿åŒ¹é…","permalink":"http://www.codec.wang/tags/%E6%A8%A1%E6%9D%BF%E5%8C%B9%E9%85%8D/"}]},{"title":"Python+OpenCVæ•™ç¨‹15ï¼šç›´æ–¹å›¾","slug":"Python-OpenCVæ•™ç¨‹15ï¼šç›´æ–¹å›¾","date":"2017-12-23T09:48:30.000Z","updated":"2020-04-07T04:56:40.764Z","comments":true,"path":"opencv-python-histograms/","link":"","permalink":"http://www.codec.wang/opencv-python-histograms/","excerpt":"å­¦ä¹ è®¡ç®—å¹¶ç»˜åˆ¶ç›´æ–¹å›¾ï¼Œç›´æ–¹å›¾å‡è¡¡åŒ–ç­‰ã€‚","text":"å­¦ä¹ è®¡ç®—å¹¶ç»˜åˆ¶ç›´æ–¹å›¾ï¼Œç›´æ–¹å›¾å‡è¡¡åŒ–ç­‰ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ è®¡ç®—å¹¶ç»˜åˆ¶ç›´æ–¹å›¾ ï¼ˆè‡ªé€‚åº”ï¼‰ç›´æ–¹å›¾å‡è¡¡åŒ– OpenCVå‡½æ•°ï¼šcv2.calcHist(), cv2.equalizeHist() æ•™ç¨‹å•¥å«ç›´æ–¹å›¾ç›´æ–¹å›¾ç®€å•æ¥è¯´å°±æ˜¯å›¾åƒä¸­æ¯ä¸ªåƒç´ å€¼çš„ä¸ªæ•°ç»Ÿè®¡ï¼Œæ¯”å¦‚è¯´ä¸€å‰¯ç°åº¦å›¾ä¸­åƒç´ å€¼ä¸º0çš„æœ‰å¤šå°‘ä¸ªï¼Œ1çš„æœ‰å¤šå°‘ä¸ªâ€¦â€¦ç›´æ–¹å›¾æ˜¯ä¸€ç§åˆ†æå›¾ç‰‡çš„æ‰‹æ®µï¼š åœ¨è®¡ç®—ç›´æ–¹å›¾ä¹‹å‰ï¼Œæœ‰å‡ ä¸ªæœ¯è¯­å…ˆæ¥äº†è§£ä¸€ä¸‹ï¼š dimsï¼šè¦è®¡ç®—çš„é€šé“æ•°ï¼Œå¯¹äºç°åº¦å›¾dims=1ï¼Œæ™®é€šå½©è‰²å›¾dims=3 rangeï¼šè¦è®¡ç®—çš„åƒç´ å€¼èŒƒå›´ï¼Œä¸€èˆ¬ä¸º[0,256) binsï¼šå­åŒºæ®µæ•°ç›®ï¼Œå¦‚æœæˆ‘ä»¬ç»Ÿè®¡0255æ¯ä¸ªåƒç´ å€¼ï¼Œbins=256ï¼›å¦‚æœåˆ’åˆ†åŒºé—´ï¼Œæ¯”å¦‚015, 1631â€¦240255è¿™æ ·16ä¸ªåŒºé—´ï¼Œbins=16 è®¡ç®—ç›´æ–¹å›¾OpenCVå’ŒNumpyä¸­éƒ½æä¾›äº†è®¡ç®—ç›´æ–¹å›¾çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯¹æ¯”ä¸‹å®ƒä»¬çš„æ€§èƒ½ã€‚ OpenCVä¸­ç›´æ–¹å›¾è®¡ç®—ä½¿ç”¨cv2.calcHist(images, channels, mask, histSize, ranges)è®¡ç®—ï¼Œå…¶ä¸­ï¼š å‚æ•°1ï¼šè¦è®¡ç®—çš„åŸå›¾ï¼Œä»¥æ–¹æ‹¬å·çš„ä¼ å…¥ï¼Œå¦‚ï¼š[img] å‚æ•°2ï¼šç±»ä¼¼å‰é¢æåˆ°çš„dimsï¼Œç°åº¦å›¾å†™[0]å°±è¡Œï¼Œå½©è‰²å›¾B/G/Råˆ†åˆ«ä¼ å…¥[0]/[1]/[2] å‚æ•°3ï¼šè¦è®¡ç®—çš„åŒºåŸŸï¼Œè®¡ç®—æ•´å¹…å›¾çš„è¯ï¼Œå†™None å‚æ•°4ï¼šå‰é¢æåˆ°çš„bins å‚æ•°5ï¼šå‰é¢æåˆ°çš„range 123456import cv2import numpy as npimport matplotlib.pyplot as pltimg = cv2.imread('hist.jpg', 0)hist = cv2.calcHist([img], [0], None, [256], [0, 256]) # æ€§èƒ½ï¼š0.025288 s Numpyä¸­ç›´æ–¹å›¾è®¡ç®—ä¹Ÿå¯ç”¨Numpyçš„å‡½æ•°è®¡ç®—ï¼Œå…¶ä¸­ravel()å‡½æ•°å°†äºŒç»´çŸ©é˜µå±•å¹³å˜æˆä¸€ç»´æ•°ç»„ï¼Œä¹‹å‰æœ‰æåˆ°è¿‡ï¼š 1hist, bins = np.histogram(img.ravel(), 256, [0, 256]) # æ€§èƒ½ï¼š0.020628 s ç»éªŒä¹‹è°ˆï¼šNumpyä¸­è¿˜æœ‰ä¸€ç§æ›´é«˜æ•ˆçš„æ–¹å¼ï¼šï¼ˆè¿˜è®°å¾—æ€ä¹ˆè¯„ä¼°æ€§èƒ½å—ï¼šç•ªå¤–ç¯‡ï¼šä»£ç æ€§èƒ½ä¼˜åŒ–ï¼‰ 1hist = np.bincount(img.ravel(), minlength=256) # æ€§èƒ½ï¼š0.003163 s è®¡ç®—å‡ºç›´æ–¹å›¾ä¹‹åï¼Œæ€ä¹ˆæŠŠå®ƒç”»å‡ºæ¥å‘¢ï¼Ÿ ç»˜åˆ¶ç›´æ–¹å›¾å…¶å®Matplotlibè‡ªå¸¦äº†ä¸€ä¸ªè®¡ç®—å¹¶ç»˜åˆ¶ç›´æ–¹å›¾çš„åŠŸèƒ½ï¼Œä¸éœ€è¦ç”¨åˆ°ä¸Šé¢çš„å‡½æ•°ï¼š 12plt.hist(img.ravel(), 256, [0, 256])plt.show() å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç”¨å‰é¢è®¡ç®—å‡ºæ¥çš„ç»“æœç»˜åˆ¶ï¼š 12plt.plot(hist)plt.show() ä»ç›´æ–¹å›¾ä¸Šå¯ä»¥çœ‹åˆ°å›¾ç‰‡çš„å¤§éƒ¨åˆ†åŒºåŸŸé›†ä¸­åœ¨150åç™½çš„é™„è¿‘ï¼Œè¿™å…¶å®å¹¶ä¸æ˜¯å¾ˆå¥½çš„æ•ˆæœï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•æ”¹å–„å®ƒã€‚ ä½¿ç”¨OpenCVçš„ç”»çº¿åŠŸèƒ½ä¹Ÿå¯ä»¥ç”»ç›´æ–¹å›¾ï¼Œä¸è¿‡å¤ªéº»çƒ¦äº†ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹ä¸‹å®˜æ–¹ç¤ºä¾‹ï¼šhist.pyã€‚ ç›´æ–¹å›¾å‡è¡¡åŒ–ä¸€å‰¯æ•ˆæœå¥½çš„å›¾åƒé€šå¸¸åœ¨ç›´æ–¹å›¾ä¸Šçš„åˆ†å¸ƒæ¯”è¾ƒå‡åŒ€ï¼Œç›´æ–¹å›¾å‡è¡¡åŒ–å°±æ˜¯ç”¨æ¥æ”¹å–„å›¾åƒçš„å…¨å±€äº®åº¦å’Œå¯¹æ¯”åº¦ã€‚å…¶å®ä»è§‚æ„Ÿä¸Šå°±å¯ä»¥å‘ç°ï¼Œå‰é¢é‚£å¹…å›¾å¯¹æ¯”åº¦ä¸é«˜ï¼Œåç°ç™½ã€‚å¯¹å‡è¡¡åŒ–ç®—æ³•æ„Ÿå…´è¶£çš„åŒå­¦å¯å‚è€ƒï¼šç»´åŸºç™¾ç§‘ï¼šç›´æ–¹å›¾å‡è¡¡åŒ– 1equ = cv2.equalizeHist(img) OpenCVä¸­ç”¨cv2.equalizeHist()å®ç°å‡è¡¡åŒ–ã€‚æˆ‘ä»¬æŠŠä¸¤å¼ å›¾ç‰‡å¹¶æ’æ˜¾ç¤ºï¼Œå¯¹æ¯”ä¸€ä¸‹ï¼š 12cv2.imshow('equalization', np.hstack((img, equ))) # å¹¶æ’æ˜¾ç¤ºcv2.waitKey(0) å¯ä»¥çœ‹åˆ°å‡è¡¡åŒ–åå›¾ç‰‡çš„äº®åº¦å’Œå¯¹æ¯”åº¦æ•ˆæœæ˜æ˜¾å¥½äºåŸå›¾ã€‚ è‡ªé€‚åº”å‡è¡¡åŒ–ä¸éš¾çœ‹å‡ºæ¥ï¼Œç›´æ–¹å›¾å‡è¡¡åŒ–æ˜¯åº”ç”¨äºæ•´å¹…å›¾ç‰‡çš„ï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿçœ‹ä¸‹å›¾ï¼š å¾ˆæ˜æ˜¾ï¼Œå› ä¸ºå…¨å±€è°ƒæ•´äº®åº¦å’Œå¯¹æ¯”åº¦çš„åŸå› ï¼Œè„¸éƒ¨å¤ªäº®ï¼Œå¤§éƒ¨åˆ†ç»†èŠ‚éƒ½ä¸¢å¤±äº†ã€‚ è‡ªé€‚åº”å‡è¡¡åŒ–å°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸€é—®é¢˜çš„ï¼šå®ƒåœ¨æ¯ä¸€ä¸ªå°åŒºåŸŸå†…ï¼ˆé»˜è®¤8Ã—8ï¼‰è¿›è¡Œç›´æ–¹å›¾å‡è¡¡åŒ–ã€‚å½“ç„¶ï¼Œå¦‚æœæœ‰å™ªç‚¹çš„è¯ï¼Œå™ªç‚¹ä¼šè¢«æ”¾å¤§ï¼Œéœ€è¦å¯¹å°åŒºåŸŸå†…çš„å¯¹æ¯”åº¦è¿›è¡Œäº†é™åˆ¶ï¼Œæ‰€ä»¥è¿™ä¸ªç®—æ³•å…¨ç§°å«ï¼šå¯¹æ¯”åº¦å—é™çš„è‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡åŒ–CLAHE(Contrast Limited Adaptive Histogram Equalization)ã€‚ 123# è‡ªé€‚åº”å‡è¡¡åŒ–ï¼Œå‚æ•°å¯é€‰clahe = cv2.createCLAHE(clipLimit=2.0, tileGridSize=(8, 8))cl1 = clahe.apply(img) ç»ƒä¹  cv2.calcHist()å‡½æ•°ä¸­çš„å‚æ•°3æ˜¯æŒ‡è¦è®¡ç®—çš„åŒºåŸŸ(maskï¼šç›®æ ‡åŒºåŸŸç™½è‰²ï¼Œå…¶ä½™é»‘è‰²)ï¼Œç¼–å†™ä¸€ä¸ªåªè®¡ç®—å›¾ç‰‡å·¦ä¸Šè§’200Ã—200åŒºåŸŸç›´æ–¹å›¾çš„ç¨‹åºã€‚ å°ç»“ ç›´æ–¹å›¾æ˜¯ä¸€ç§åˆ†æå›¾åƒçš„æ‰‹æ®µã€‚ cv2.calcHist()å’Œnumpy.bincount()å‡å¯ç”¨æ¥è®¡ç®—ç›´æ–¹å›¾ï¼Œä½¿ç”¨Matplotlibç»˜åˆ¶ç›´æ–¹å›¾ã€‚ å‡è¡¡åŒ–ç”¨æ¥ä½¿å›¾åƒçš„ç›´æ–¹å›¾åˆ†å¸ƒæ›´åŠ å‡åŒ€ï¼Œæå‡äº®åº¦å’Œå¯¹æ¯”åº¦ã€‚ å¼•ç”¨ æœ¬èŠ‚æºç  Histograms - 1 : Find, Plot, Analyze !!! Histograms - 2: Histogram Equalization ç»´åŸºç™¾ç§‘ï¼šç›´æ–¹å›¾å‡è¡¡åŒ– ç»´åŸºç™¾ç§‘ï¼šè‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡åŒ– Cambridge in Color website","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"ç›´æ–¹å›¾","slug":"ç›´æ–¹å›¾","permalink":"http://www.codec.wang/tags/%E7%9B%B4%E6%96%B9%E5%9B%BE/"}]},{"title":"Python+OpenCVæ•™ç¨‹14ï¼šè½®å»“ç‰¹å¾","slug":"Python-OpenCVæ•™ç¨‹14ï¼šè½®å»“ç‰¹å¾","date":"2017-12-20T10:46:19.000Z","updated":"2020-04-07T04:57:04.954Z","comments":true,"path":"opencv-python-contour-features/","link":"","permalink":"http://www.codec.wang/opencv-python-contour-features/","excerpt":"å­¦ä¹ è®¡ç®—è½®å»“ç‰¹å¾ï¼Œå¦‚é¢ç§¯ã€å‘¨é•¿ã€æœ€å°å¤–æ¥çŸ©å½¢ç­‰ã€‚","text":"å­¦ä¹ è®¡ç®—è½®å»“ç‰¹å¾ï¼Œå¦‚é¢ç§¯ã€å‘¨é•¿ã€æœ€å°å¤–æ¥çŸ©å½¢ç­‰ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ è®¡ç®—ç‰©ä½“çš„å‘¨é•¿ã€é¢ç§¯ã€è´¨å¿ƒã€æœ€å°å¤–æ¥çŸ©å½¢ç­‰ OpenCVå‡½æ•°ï¼šcv2.contourArea(), cv2.arcLength(), cv2.approxPolyDP() ç­‰ æ•™ç¨‹åœ¨è®¡ç®—è½®å»“ç‰¹å¾ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç”¨ä¸Šä¸€èŠ‚çš„ä»£ç æŠŠè½®å»“æ‰¾åˆ°ï¼š 123456789import cv2import numpy as npimg = cv2.imread('handwriting.jpg', 0)_, thresh = cv2.threshold(img, 0, 255, cv2.THRESH_BINARY_INV + cv2.THRESH_OTSU)image, contours, hierarchy = cv2.findContours(thresh, 3, 2)# ä»¥æ•°å­—3çš„è½®å»“ä¸ºä¾‹cnt = contours[0] ä¸ºäº†ä¾¿äºç»˜åˆ¶ï¼Œæˆ‘ä»¬åˆ›å»ºå‡ºä¸¤å¹…å½©è‰²å›¾ï¼Œå¹¶æŠŠè½®å»“ç”»åœ¨ç¬¬ä¸€å¹…å›¾ä¸Šï¼š 123img_color1 = cv2.cvtColor(image, cv2.COLOR_GRAY2BGR)img_color2 = np.copy(img_color1)cv2.drawContours(img_color1, [cnt], 0, (0, 0, 255), 2) è½®å»“é¢ç§¯1area = cv2.contourArea(cnt) # 4386.5 æ³¨æ„è½®å»“ç‰¹å¾è®¡ç®—çš„ç»“æœå¹¶ä¸ç­‰åŒäºåƒç´ ç‚¹çš„ä¸ªæ•°ï¼Œè€Œæ˜¯æ ¹æ®å‡ ä½•æ–¹æ³•ç®—å‡ºæ¥çš„ï¼Œæ‰€ä»¥æœ‰å°æ•°ã€‚ å¦‚æœç»Ÿè®¡äºŒå€¼å›¾ä¸­åƒç´ ç‚¹ä¸ªæ•°ï¼Œåº”å°½é‡é¿å…å¾ªç¯ï¼Œå¯ä»¥ä½¿ç”¨cv2.countNonZero()ï¼Œæ›´åŠ é«˜æ•ˆã€‚ è½®å»“å‘¨é•¿1perimeter = cv2.arcLength(cnt, True) # 585.7 å‚æ•°2è¡¨ç¤ºè½®å»“æ˜¯å¦å°é—­ï¼Œæ˜¾ç„¶æˆ‘ä»¬çš„è½®å»“æ˜¯å°é—­çš„ï¼Œæ‰€ä»¥æ˜¯Trueã€‚ å›¾åƒçŸ©çŸ©å¯ä»¥ç†è§£ä¸ºå›¾åƒçš„å„ç±»å‡ ä½•ç‰¹å¾ï¼Œè¯¦æƒ…è¯·å‚è€ƒï¼š[Image Moments] 1M = cv2.moments(cnt) Mä¸­åŒ…å«äº†å¾ˆå¤šè½®å»“çš„ç‰¹å¾ä¿¡æ¯ï¼Œæ¯”å¦‚M[â€˜m00â€™]è¡¨ç¤ºè½®å»“é¢ç§¯ï¼Œä¸å‰é¢cv2.contourArea()è®¡ç®—ç»“æœæ˜¯ä¸€æ ·çš„ã€‚è´¨å¿ƒä¹Ÿå¯ä»¥ç”¨å®ƒæ¥ç®—ï¼š 1cx, cy = M['m10'] / M['m00'], M['m01'] / M['m00'] # (205, 281) å¤–æ¥çŸ©å½¢å½¢çŠ¶çš„å¤–æ¥çŸ©å½¢æœ‰ä¸¤ç§ï¼Œå¦‚ä¸‹å›¾ï¼Œç»¿è‰²çš„å«å¤–æ¥çŸ©å½¢ï¼Œè¡¨ç¤ºä¸è€ƒè™‘æ—‹è½¬å¹¶ä¸”èƒ½åŒ…å«æ•´ä¸ªè½®å»“çš„çŸ©å½¢ã€‚è“è‰²çš„å«æœ€å°å¤–æ¥çŸ©ï¼Œè€ƒè™‘äº†æ—‹è½¬ï¼š 12x, y, w, h = cv2.boundingRect(cnt) # å¤–æ¥çŸ©å½¢cv2.rectangle(img_color1, (x, y), (x + w, y + h), (0, 255, 0), 2) 123rect = cv2.minAreaRect(cnt) # æœ€å°å¤–æ¥çŸ©å½¢box = np.int0(cv2.boxPoints(rect)) # çŸ©å½¢çš„å››ä¸ªè§’ç‚¹å–æ•´cv2.drawContours(img_color1, [box], 0, (255, 0, 0), 2) å…¶ä¸­np.int0(x)æ˜¯æŠŠxå–æ•´çš„æ“ä½œï¼Œæ¯”å¦‚377.93å°±ä¼šå˜æˆ377ï¼Œä¹Ÿå¯ä»¥ç”¨x.astype(np.int)ã€‚ æœ€å°å¤–æ¥åœ†å¤–æ¥åœ†è·Ÿå¤–æ¥çŸ©å½¢ä¸€æ ·ï¼Œæ‰¾åˆ°ä¸€ä¸ªèƒ½åŒ…å›´ç‰©ä½“çš„æœ€å°åœ†ï¼š 123(x, y), radius = cv2.minEnclosingCircle(cnt)(x, y, radius) = np.int0((x, y, radius)) # åœ†å¿ƒå’ŒåŠå¾„å–æ•´cv2.circle(img_color2, (x, y), radius, (0, 0, 255), 2) æ‹Ÿåˆæ¤­åœ†æˆ‘ä»¬å¯ä»¥ç”¨å¾—åˆ°çš„è½®å»“æ‹Ÿåˆå‡ºä¸€ä¸ªæ¤­åœ†ï¼š 12ellipse = cv2.fitEllipse(cnt)cv2.ellipse(img_color2, ellipse, (255, 255, 0), 2) å½¢çŠ¶åŒ¹é…cv2.matchShapes()å¯ä»¥æ£€æµ‹ä¸¤ä¸ªå½¢çŠ¶ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œè¿”å›å€¼è¶Šå°ï¼Œè¶Šç›¸ä¼¼ã€‚å…ˆè¯»å…¥ä¸‹é¢è¿™å¼ å›¾ç‰‡ï¼š 1234img = cv2.imread('shapes.jpg', 0)_, thresh = cv2.threshold(img, 0, 255, cv2.THRESH_BINARY + cv2.THRESH_OTSU)image, contours, hierarchy = cv2.findContours(thresh, 3, 2)img_color = cv2.cvtColor(thresh, cv2.COLOR_GRAY2BGR) # ç”¨äºç»˜åˆ¶çš„å½©è‰²å›¾ å›¾ä¸­æœ‰3æ¡è½®å»“ï¼Œæˆ‘ä»¬ç”¨A/B/Cè¡¨ç¤ºï¼š 1234cnt_a, cnt_b, cnt_c = contours[0], contours[1], contours[2]print(cv2.matchShapes(cnt_b, cnt_b, 1, 0.0)) # 0.0print(cv2.matchShapes(cnt_b, cnt_c, 1, 0.0)) # 2.17e-05print(cv2.matchShapes(cnt_b, cnt_a, 1, 0.0)) # 0.418 å¯ä»¥çœ‹åˆ°BCç›¸ä¼¼ç¨‹åº¦æ¯”ABé«˜å¾ˆå¤šï¼Œå¹¶ä¸”å›¾å½¢çš„æ—‹è½¬æˆ–ç¼©æ”¾å¹¶æ²¡æœ‰å½±å“ã€‚å…¶ä¸­ï¼Œå‚æ•°3æ˜¯åŒ¹é…æ–¹æ³•ï¼Œè¯¦æƒ…å¯å‚è€ƒï¼šShapeMatchModesï¼Œå‚æ•°4æ˜¯OpenCVçš„é¢„ç•™å‚æ•°ï¼Œæš‚æ—¶æ²¡æœ‰å®ç°ï¼Œå¯ä»¥ä¸ç”¨ç†ä¼šã€‚ å½¢çŠ¶åŒ¹é…æ˜¯é€šè¿‡å›¾åƒçš„HuçŸ©æ¥å®ç°çš„(cv2.HuMoments())ï¼Œå¤§å®¶å¦‚æœæ„Ÿå…´è¶£ï¼Œå¯ä»¥å‚è€ƒï¼šHu-Moments ç»ƒä¹  å‰é¢æˆ‘ä»¬æ˜¯å¯¹å›¾ç‰‡ä¸­çš„æ•°å­—3è¿›è¡Œè½®å»“ç‰¹å¾è®¡ç®—çš„ï¼Œå¤§å®¶æ¢æˆæ•°å­—1çœ‹çœ‹ã€‚ ï¼ˆé€‰åšï¼‰ç”¨å½¢çŠ¶åŒ¹é…æ¯”è¾ƒä¸¤ä¸ªå­—æ¯æˆ–æ•°å­—ï¼ˆè¿™ç›¸å½“äºå¾ˆç®€å•çš„ä¸€ä¸ªOCRå™¢ï¼‰ã€‚ å°ç»“å¸¸ç”¨çš„è½®å»“ç‰¹å¾ï¼š cv2.contourArea()ç®—é¢ç§¯ï¼Œcv2.arcLength()ç®—å‘¨é•¿ï¼Œcv2.boundingRect()ç®—å¤–æ¥çŸ©ã€‚ cv2.minAreaRect()ç®—æœ€å°å¤–æ¥çŸ©ï¼Œcv2.minEnclosingCircle()ç®—æœ€å°å¤–æ¥åœ†ã€‚ cv2.matchShapes()è¿›è¡Œå½¢çŠ¶åŒ¹é…ã€‚ æ¥å£æ–‡æ¡£ cv2.contourArea() cv2.arcLength() cv2.moments() cv2.boundingRect() cv2.minAreaRect() cv2.minEnclosingCircle() cv2.fitEllipse() cv2.matchShapes() cv2.ShapeMatchModes å¼•ç”¨ æœ¬èŠ‚æºç  Contour Features Contours : More Functions","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"è½®å»“","slug":"è½®å»“","permalink":"http://www.codec.wang/tags/%E8%BD%AE%E5%BB%93/"}]},{"title":"Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡11ï¼šå‡¸åŒ…åŠæ›´å¤šè½®å»“ç‰¹å¾","slug":"Python-OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡11ï¼šå‡¸åŒ…åŠæ›´å¤šè½®å»“ç‰¹å¾","date":"2017-12-20T05:41:11.000Z","updated":"2020-04-07T04:52:02.253Z","comments":true,"path":"opencv-python-extra-convex-hull/","link":"","permalink":"http://www.codec.wang/opencv-python-extra-convex-hull/","excerpt":"è®¡ç®—å‡¸åŒ…åŠæ›´å¤šè½®å»“ç‰¹å¾ã€‚","text":"è®¡ç®—å‡¸åŒ…åŠæ›´å¤šè½®å»“ç‰¹å¾ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ å¤šè¾¹å½¢é€¼è¿‘å‰é¢æˆ‘ä»¬å­¦ä¹ è¿‡æœ€å°å¤–æ¥çŸ©å’Œæœ€å°å¤–æ¥åœ†ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ä¸€ä¸ªæœ€å°çš„å¤šè¾¹å½¢åŒ…å›´ç‰©ä½“å—ï¼Ÿå½“ç„¶å¯ä»¥ï¼š 123456789101112131415import cv2import numpy as np# 1.å…ˆæ‰¾åˆ°è½®å»“img = cv2.imread('unregular.jpg', 0)_, thresh = cv2.threshold(img, 0, 255, cv2.THRESH_BINARY + cv2.THRESH_OTSU)image, contours, hierarchy = cv2.findContours(thresh, 3, 2)cnt = contours[0]# 2.è¿›è¡Œå¤šè¾¹å½¢é€¼è¿‘ï¼Œå¾—åˆ°å¤šè¾¹å½¢çš„è§’ç‚¹approx = cv2.approxPolyDP(cnt, 3, True)# 3.ç”»å‡ºå¤šè¾¹å½¢image = cv2.cvtColor(image, cv2.COLOR_GRAY2BGR)cv2.polylines(image, [approx], True, (0, 255, 0), 2) å…¶ä¸­cv2.approxPolyDP()çš„å‚æ•°2(epsilon)æ˜¯ä¸€ä¸ªè·ç¦»å€¼ï¼Œè¡¨ç¤ºå¤šè¾¹å½¢çš„è½®å»“æ¥è¿‘å®é™…è½®å»“çš„ç¨‹åº¦ï¼Œå€¼è¶Šå°ï¼Œè¶Šç²¾ç¡®ï¼›å‚æ•°3è¡¨ç¤ºæ˜¯å¦é—­åˆã€‚ å‡¸åŒ…å‡¸åŒ…è·Ÿå¤šè¾¹å½¢é€¼è¿‘å¾ˆåƒï¼Œåªä¸è¿‡å®ƒæ˜¯ç‰©ä½“æœ€å¤–å±‚çš„â€å‡¸â€å¤šè¾¹å½¢ï¼šé›†åˆAå†…è¿æ¥ä»»æ„ä¸¤ä¸ªç‚¹çš„ç›´çº¿éƒ½åœ¨Açš„å†…éƒ¨ï¼Œåˆ™ç§°é›†åˆAæ˜¯å‡¸å½¢çš„ã€‚å¦‚ä¸‹å›¾ï¼Œçº¢è‰²çš„éƒ¨åˆ†ä¸ºæ‰‹æŒçš„å‡¸åŒ…ï¼ŒåŒç®­å¤´éƒ¨åˆ†è¡¨ç¤ºå‡¸ç¼ºé™·(Convexity Defects)ï¼Œå‡¸ç¼ºé™·å¸¸ç”¨æ¥è¿›è¡Œæ‰‹åŠ¿è¯†åˆ«ç­‰ï¼š 123456789101112# 1.å…ˆæ‰¾åˆ°è½®å»“img = cv2.imread('convex.jpg', 0)_, thresh = cv2.threshold(img, 0, 255, cv2.THRESH_BINARY + cv2.THRESH_OTSU)image, contours, hierarchy = cv2.findContours(thresh, 3, 2)cnt = contours[0]# 2.å¯»æ‰¾å‡¸åŒ…ï¼Œå¾—åˆ°å‡¸åŒ…çš„è§’ç‚¹hull = cv2.convexHull(cnt)# 3.ç»˜åˆ¶å‡¸åŒ…image = cv2.cvtColor(image, cv2.COLOR_GRAY2BGR)cv2.polylines(image, [hull], True, (0, 255, 0), 2) å…¶ä¸­å‡½æ•°cv2.convexHull()æœ‰ä¸ªå¯é€‰å‚æ•°returnPointsï¼Œé»˜è®¤æ˜¯Trueï¼Œä»£è¡¨è¿”å›è§’ç‚¹çš„x/yåæ ‡ï¼›å¦‚æœä¸ºFalseçš„è¯ï¼Œè¡¨ç¤ºè¿”å›è½®å»“ä¸­æ˜¯å‡¸åŒ…è§’ç‚¹çš„ç´¢å¼•ï¼Œæ¯”å¦‚è¯´ï¼š 1234print(hull[0]) # [[362 184]]ï¼ˆåæ ‡ï¼‰hull2 = cv2.convexHull(cnt, returnPoints=False)print(hull2[0]) # [510]ï¼ˆcntä¸­çš„ç´¢å¼•ï¼‰print(cnt[510]) # [[362 184]] å½“ä½¿ç”¨cv2.convexityDefects()è®¡ç®—å‡¸åŒ…ç¼ºé™·æ—¶ï¼ŒreturnPointséœ€ä¸ºFalseï¼Œè¯¦æƒ…å¯å‚è€ƒï¼šConvexity Defects å¦å¤–å¯ä»¥ç”¨ä¸‹é¢çš„è¯­å¥æ¥åˆ¤æ–­è½®å»“æ˜¯å¦æ˜¯å‡¸å½¢çš„ï¼š 1print(cv2.isContourConvex(hull)) # True ç‚¹åˆ°è½®å»“è·ç¦»cv2.pointPolygonTest()å‡½æ•°è®¡ç®—ç‚¹åˆ°è½®å»“çš„æœ€çŸ­è·ç¦»ï¼ˆä¹Ÿå°±æ˜¯å‚çº¿ï¼‰ï¼Œåˆç§°å¤šè¾¹å½¢æµ‹è¯•ï¼š 1dist = cv2.pointPolygonTest(cnt, (100, 100), True) # -3.53 å…¶ä¸­å‚æ•°3ä¸ºTrueæ—¶è¡¨ç¤ºè®¡ç®—è·ç¦»å€¼ï¼šç‚¹åœ¨è½®å»“å¤–é¢å€¼ä¸ºè´Ÿï¼Œç‚¹åœ¨è½®å»“ä¸Šå€¼ä¸º0ï¼Œç‚¹åœ¨è½®å»“é‡Œé¢å€¼ä¸ºæ­£ï¼›å‚æ•°3ä¸ºFalseæ—¶ï¼Œåªè¿”å›-1/0/1è¡¨ç¤ºç‚¹ç›¸å¯¹è½®å»“çš„ä½ç½®ï¼Œä¸è®¡ç®—è·ç¦»ã€‚ æ›´å¤šè½®å»“ç‰¹å¾ï¼Œå¦‚å½“é‡ç›´å¾„ã€å¹³å‡å¼ºåº¦ç­‰ï¼Œæˆ‘ç›®å‰ä¹Ÿæ²¡ç”¨åˆ°è¿‡ï¼Œä»¥åç”¨åˆ°å†å†™å§ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å‚çœ‹ï¼šContour Propertiesã€Contours Hierarchy å¼•ç”¨ æœ¬èŠ‚æºç  Convexity Defects Contour Properties Contours Hierarchy","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"å‡¸åŒ…","slug":"å‡¸åŒ…","permalink":"http://www.codec.wang/tags/%E5%87%B8%E5%8C%85/"}]},{"title":"Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡10ï¼šè½®å»“å±‚çº§","slug":"Python-OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡10ï¼šè½®å»“å±‚çº§","date":"2017-12-20T04:41:11.000Z","updated":"2020-04-07T04:52:22.603Z","comments":true,"path":"opencv-python-extra-contours-hierarchy/","link":"","permalink":"http://www.codec.wang/opencv-python-extra-contours-hierarchy/","excerpt":"äº†è§£è½®å»“é—´çš„å±‚çº§å…³ç³»ã€‚","text":"äº†è§£è½®å»“é—´çš„å±‚çº§å…³ç³»ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ å‰é¢æˆ‘ä»¬ä½¿ç”¨cv2.findContours()å¯»æ‰¾è½®å»“æ—¶ï¼Œå‚æ•°3è¡¨ç¤ºè½®å»“çš„å¯»æ‰¾æ–¹å¼(RetrievalModes)ï¼Œå½“æ—¶æˆ‘ä»¬ä¼ å…¥çš„æ˜¯cv2.RETR_TREEï¼Œå®ƒè¡¨ç¤ºä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå¦å¤–ï¼Œå‡½æ•°è¿”å›å€¼hierarchyæœ‰ä»€ä¹ˆç”¨é€”å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬å°±æ¥ç ”ç©¶ä¸‹è¿™ä¸¤ä¸ªé—®é¢˜ã€‚ ç†è§£è½®å»“å±‚çº§å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå›¾åƒä¸­çš„å½¢çŠ¶ä¹‹é—´æ˜¯æœ‰å…³è”çš„ï¼Œæ¯”å¦‚è¯´ä¸‹å›¾ï¼š å›¾ä¸­æ€»å…±æœ‰8æ¡è½®å»“ï¼Œ2å’Œ2aåˆ†åˆ«è¡¨ç¤ºå¤–å±‚å’Œé‡Œå±‚çš„è½®å»“ï¼Œ3å’Œ3aä¹Ÿæ˜¯ä¸€æ ·ã€‚ä»å›¾ä¸­çœ‹å¾—å‡ºæ¥ï¼š è½®å»“0/1/2æ˜¯æœ€å¤–å±‚çš„è½®å»“ï¼Œæˆ‘ä»¬å¯ä»¥è¯´å®ƒä»¬å¤„äºåŒä¸€è½®å»“ç­‰çº§ï¼š0çº§ è½®å»“2aæ˜¯è½®å»“2çš„å­è½®å»“ï¼Œåè¿‡æ¥è¯´2æ˜¯2açš„çˆ¶è½®å»“ï¼Œè½®å»“2aç®—ä¸€ä¸ªç­‰çº§ï¼š1çº§ åŒæ ·3æ˜¯2açš„å­è½®å»“ï¼Œè½®å»“3å¤„äºä¸€ä¸ªç­‰çº§ï¼š2çº§ ç±»ä¼¼çš„ï¼Œ3aæ˜¯3çš„å­è½®å»“ï¼Œç­‰ç­‰â€¦â€¦â€¦â€¦ è¿™é‡Œé¢OpenCVå…³æ³¨çš„å°±æ˜¯ä¸¤ä¸ªæ¦‚å¿µï¼šåŒä¸€è½®å»“ç­‰çº§å’Œè½®å»“é—´çš„å­å±å…³ç³»ã€‚ OpenCVä¸­è½®å»“ç­‰çº§çš„è¡¨ç¤ºå¦‚æœæˆ‘ä»¬æ‰“å°å‡ºcv2.findContours()å‡½æ•°çš„è¿”å›å€¼hierarchyï¼Œä¼šå‘ç°å®ƒæ˜¯ä¸€ä¸ªåŒ…å«4ä¸ªå€¼çš„æ•°ç»„ï¼š[Next, Previous, First Child, Parent] Nextï¼šä¸å½“å‰è½®å»“å¤„äºåŒä¸€å±‚çº§çš„ä¸‹ä¸€æ¡è½®å»“ ä¸¾ä¾‹æ¥è¯´ï¼Œå‰é¢å›¾ä¸­è·Ÿ0å¤„äºåŒä¸€å±‚çº§çš„ä¸‹ä¸€æ¡è½®å»“æ˜¯1ï¼Œæ‰€ä»¥Next=1ï¼›åŒç†ï¼Œå¯¹è½®å»“1æ¥è¯´ï¼ŒNext=2ï¼›é‚£ä¹ˆå¯¹äºè½®å»“2å‘¢ï¼Ÿæ²¡æœ‰ä¸å®ƒåŒä¸€å±‚çº§çš„ä¸‹ä¸€æ¡è½®å»“äº†ï¼Œæ­¤æ—¶Next=-1ã€‚ Previousï¼šä¸å½“å‰è½®å»“å¤„äºåŒä¸€å±‚çº§çš„ä¸Šä¸€æ¡è½®å»“ è·Ÿå‰é¢ä¸€æ ·ï¼Œå¯¹äºè½®å»“1æ¥è¯´ï¼ŒPrevious=0ï¼›å¯¹äºè½®å»“2ï¼ŒPrevious=1ï¼›å¯¹äºè½®å»“1ï¼Œæ²¡æœ‰ä¸Šä¸€æ¡è½®å»“äº†ï¼Œæ‰€ä»¥Previous=-1ã€‚ First Childï¼šå½“å‰è½®å»“çš„ç¬¬ä¸€æ¡å­è½®å»“ æ¯”å¦‚å¯¹äºè½®å»“2ï¼Œç¬¬ä¸€æ¡å­è½®å»“å°±æ˜¯è½®å»“2aï¼Œæ‰€ä»¥First Child=2aï¼›å¯¹è½®å»“3aï¼ŒFirst Child=4ã€‚ Parentï¼šå½“å‰è½®å»“çš„çˆ¶è½®å»“ æ¯”å¦‚2açš„çˆ¶è½®å»“æ˜¯2ï¼ŒParent=2ï¼›è½®å»“2æ²¡æœ‰çˆ¶è½®å»“ï¼Œæ‰€ä»¥Parent=-1ã€‚ ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç éªŒè¯ä¸€ä¸‹ï¼š 12345678910111213import cv2# 1.è¯»å…¥å›¾ç‰‡img = cv2.imread('hierarchy.jpg')img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)_, thresh = cv2.threshold(img_gray, 0, 255, cv2.THRESH_BINARY + cv2.THRESH_OTSU)# 2.å¯»æ‰¾è½®å»“image, contours, hierarchy = cv2.findContours(thresh, cv2.RETR_TREE, 2)# 3.ç»˜åˆ¶è½®å»“print(len(contours),hierarchy) # 8æ¡cv2.drawContours(img, contours, -1, (0, 0, 255), 2) ç»éªŒä¹‹è°ˆï¼šOpenCVä¸­æ‰¾åˆ°çš„è½®å»“åºå·è·Ÿå‰é¢è®²çš„ä¸åŒå™¢ï¼Œå¦‚ä¸‹å›¾ï¼š ç°åœ¨æ—¢ç„¶æˆ‘ä»¬äº†è§£äº†å±‚çº§çš„æ¦‚å¿µï¼Œé‚£ä¹ˆç±»ä¼¼cv2.RETR_TREEçš„è½®å»“å¯»æ‰¾æ–¹å¼åˆæ˜¯å•¥æ„æ€å‘¢ï¼Ÿ è½®å»“å¯»æ‰¾æ–¹å¼OpenCVä¸­æœ‰å››ç§è½®å»“å¯»æ‰¾æ–¹å¼RetrievalModesï¼Œä¸‹é¢åˆ†åˆ«æ¥çœ‹ä¸‹ï¼š 1. RETR_LISTè¿™æ˜¯æœ€ç®€å•çš„ä¸€ç§å¯»æ‰¾æ–¹å¼ï¼Œå®ƒä¸å»ºç«‹è½®å»“é—´çš„å­å±å…³ç³»ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰è½®å»“éƒ½å±äºåŒä¸€å±‚çº§ã€‚è¿™æ ·ï¼Œhierarchyä¸­çš„åä¸¤ä¸ªå€¼[First Child, Parent]éƒ½ä¸º-1ã€‚æ¯”å¦‚åŒæ ·çš„å›¾ï¼Œæˆ‘ä»¬ä½¿ç”¨cv2.RETR_LISTæ¥å¯»æ‰¾è½®å»“ï¼š 1234567891011_, _, hierarchy = cv2.findContours(thresh, cv2.RETR_LIST, 2)print(hierarchy)# ç»“æœå¦‚ä¸‹[[[ 1 -1 -1 -1] [ 2 0 -1 -1] [ 3 1 -1 -1] [ 4 2 -1 -1] [ 5 3 -1 -1] [ 6 4 -1 -1] [ 7 5 -1 -1] [-1 6 -1 -1]]] å› ä¸ºæ²¡æœ‰ä»å±å…³ç³»ï¼Œæ‰€ä»¥è½®å»“0çš„ä¸‹ä¸€æ¡æ˜¯1ï¼Œ1çš„ä¸‹ä¸€æ¡æ˜¯2â€¦â€¦ ç»éªŒä¹‹è°ˆï¼šå¦‚æœä½ ä¸éœ€è¦è½®å»“å±‚çº§ä¿¡æ¯çš„è¯ï¼Œcv2.RETR_LISTæ›´æ¨èä½¿ç”¨ï¼Œå› ä¸ºæ€§èƒ½æ›´å¥½ã€‚ 2. RETR_TREEcv2.RETR_TREEå°±æ˜¯ä¹‹å‰æˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨çš„æ–¹å¼ï¼Œå®ƒä¼šå®Œæ•´å»ºç«‹è½®å»“çš„å±‚çº§ä»å±å…³ç³»ï¼Œå‰é¢å·²ç»è¯¦ç»†è¯´æ˜è¿‡äº†ã€‚ 3. RETR_EXTERNALè¿™ç§æ–¹å¼åªå¯»æ‰¾æœ€é«˜å±‚çº§çš„è½®å»“ï¼Œä¹Ÿå°±æ˜¯å®ƒåªä¼šæ‰¾åˆ°å‰é¢æˆ‘ä»¬æ‰€è¯´çš„3æ¡0çº§è½®å»“ï¼š 1234567_, contours, hierarchy = cv2.findContours(thresh, cv2.RETR_EXTERNAL, 2)print(len(contours), hierarchy, sep='\\n')# ç»“æœå¦‚ä¸‹3[[[ 1 -1 -1 -1] [ 2 0 -1 -1] [-1 1 -1 -1]]] 4. RETR_CCOMPç›¸æ¯”ä¹‹ä¸‹cv2.RETR_CCOMPæ¯”è¾ƒéš¾ç†è§£ï¼Œä½†å…¶å®ä¹Ÿå¾ˆç®€å•ï¼šå®ƒæŠŠæ‰€æœ‰çš„è½®å»“åªåˆ†ä¸º2ä¸ªå±‚çº§ï¼Œä¸æ˜¯å¤–å±‚çš„å°±æ˜¯é‡Œå±‚çš„ã€‚ç»“åˆä»£ç å’Œå›¾ç‰‡ï¼Œæˆ‘ä»¬æ¥ç†è§£ä¸‹ï¼š 1234567891011_, contours, hierarchy = cv2.findContours(thresh, cv2.RETR_CCOMP, 2)print(hierarchy)# ç»“æœå¦‚ä¸‹[[[ 1 -1 -1 -1] [ 2 0 -1 -1] [ 4 1 3 -1] [-1 -1 -1 2] [ 6 2 5 -1] [-1 -1 -1 4] [ 7 4 -1 -1] [-1 6 -1 -1]]] æ³¨æ„ï¼šä½¿ç”¨è¿™ä¸ªå‚æ•°æ‰¾åˆ°çš„è½®å»“åºå·ä¸ä¹‹å‰ä¸åŒã€‚ å›¾ä¸­æ‹¬å·é‡Œé¢1ä»£è¡¨å¤–å±‚è½®å»“ï¼Œ2ä»£è¡¨é‡Œå±‚è½®å»“ã€‚æ¯”å¦‚è¯´å¯¹äºè½®å»“2ï¼ŒNextå°±æ˜¯4ï¼ŒPreviousæ˜¯1ï¼Œå®ƒæœ‰é‡Œå±‚çš„è½®å»“3ï¼Œæ‰€ä»¥First Child=3ï¼Œä½†å› ä¸ºåªæœ‰ä¸¤ä¸ªå±‚çº§ï¼Œå®ƒæœ¬èº«å°±æ˜¯å¤–å±‚è½®å»“ï¼Œæ‰€ä»¥Parent=-1ã€‚å¤§å®¶å¯ä»¥é’ˆå¯¹å…¶ä»–çš„è½®å»“è‡ªå·±éªŒè¯ä¸€ä¸‹ã€‚ ç»ƒä¹  å¦‚ä¸‹å›¾ï¼Œæ‰¾åˆ°3ä¸ªåœ†ç¯çš„å†…ç¯ï¼Œç„¶åå¡«å……æˆ(180,215,215)è¿™ç§é¢œè‰²ï¼š å¼•ç”¨ æœ¬èŠ‚æºç  Contours Hierarchy","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"è½®å»“å±‚çº§","slug":"è½®å»“å±‚çº§","permalink":"http://www.codec.wang/tags/%E8%BD%AE%E5%BB%93%E5%B1%82%E7%BA%A7/"}]},{"title":"Python+OpenCVæ•™ç¨‹13ï¼šè½®å»“","slug":"Python-OpenCVæ•™ç¨‹13ï¼šè½®å»“","date":"2017-12-20T01:44:23.000Z","updated":"2020-04-07T04:57:19.085Z","comments":true,"path":"opencv-python-contours/","link":"","permalink":"http://www.codec.wang/opencv-python-contours/","excerpt":"å­¦ä¹ å¦‚ä½•å¯»æ‰¾å¹¶ç»˜åˆ¶è½®å»“ã€‚","text":"å­¦ä¹ å¦‚ä½•å¯»æ‰¾å¹¶ç»˜åˆ¶è½®å»“ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ äº†è§£è½®å»“æ¦‚å¿µ å¯»æ‰¾å¹¶ç»˜åˆ¶è½®å»“ OpenCVå‡½æ•°ï¼šcv2.findContours(), cv2.drawContours() æ•™ç¨‹å•¥å«è½®å»“è½®å»“æ˜¯ä¸€ç³»åˆ—ç›¸è¿çš„ç‚¹ç»„æˆçš„æ›²çº¿ï¼Œä»£è¡¨äº†ç‰©ä½“çš„åŸºæœ¬å¤–å½¢ã€‚ è°ˆèµ·è½®å»“ä¸å…æƒ³åˆ°è¾¹ç¼˜ï¼Œå®ƒä»¬ç¡®å®å¾ˆåƒã€‚ç®€å•çš„è¯´ï¼Œè½®å»“æ˜¯è¿ç»­çš„ï¼Œè¾¹ç¼˜å¹¶ä¸å…¨éƒ½è¿ç»­ï¼ˆä¸‹å›¾ï¼‰ã€‚å…¶å®è¾¹ç¼˜ä¸»è¦æ˜¯ä½œä¸ºå›¾åƒçš„ç‰¹å¾ä½¿ç”¨ï¼Œæ¯”å¦‚å¯ä»¥ç”¨è¾¹ç¼˜ç‰¹å¾å¯ä»¥åŒºåˆ†è„¸å’Œæ‰‹ï¼Œè€Œè½®å»“ä¸»è¦ç”¨æ¥åˆ†æç‰©ä½“çš„å½¢æ€ï¼Œæ¯”å¦‚ç‰©ä½“çš„å‘¨é•¿å’Œé¢ç§¯ç­‰ï¼Œå¯ä»¥è¯´è¾¹ç¼˜åŒ…æ‹¬è½®å»“ã€‚ å¯»æ‰¾è½®å»“çš„æ“ä½œä¸€èˆ¬ç”¨äºäºŒå€¼åŒ–å›¾ï¼Œæ‰€ä»¥é€šå¸¸ä¼šä½¿ç”¨é˜ˆå€¼åˆ†å‰²æˆ–Cannyè¾¹ç¼˜æ£€æµ‹å…ˆå¾—åˆ°äºŒå€¼å›¾ã€‚ ç»éªŒä¹‹è°ˆï¼šå¯»æ‰¾è½®å»“æ˜¯é’ˆå¯¹ç™½è‰²ç‰©ä½“çš„ï¼Œä¸€å®šè¦ä¿è¯ç‰©ä½“æ˜¯ç™½è‰²ï¼Œè€ŒèƒŒæ™¯æ˜¯é»‘è‰²ï¼Œä¸ç„¶å¾ˆå¤šäººåœ¨å¯»æ‰¾è½®å»“æ—¶ä¼šæ‰¾åˆ°å›¾ç‰‡æœ€å¤–é¢çš„ä¸€ä¸ªæ¡†ã€‚ å¯»æ‰¾è½®å»“ä½¿ç”¨cv2.findContours()å¯»æ‰¾è½®å»“ï¼š 12345678910import cv2img = cv2.imread('handwriting.jpg')img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)ret, thresh = cv2.threshold(img_gray, 0, 255, cv2.THRESH_BINARY_INV + cv2.THRESH_OTSU)# å¯»æ‰¾äºŒå€¼åŒ–å›¾ä¸­çš„è½®å»“image, contours, hierarchy = cv2.findContours( thresh, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)print(len(contours)) # ç»“æœåº”è¯¥ä¸º2 å‚æ•°2ï¼šè½®å»“çš„æŸ¥æ‰¾æ–¹å¼ï¼Œä¸€èˆ¬ä½¿ç”¨cv2.RETR_TREEï¼Œè¡¨ç¤ºæå–æ‰€æœ‰çš„è½®å»“å¹¶å»ºç«‹è½®å»“é—´çš„å±‚çº§ã€‚æ›´å¤šè¯·å‚è€ƒï¼šRetrievalModes å‚æ•°3ï¼šè½®å»“çš„è¿‘ä¼¼æ–¹æ³•ã€‚æ¯”å¦‚å¯¹äºä¸€æ¡ç›´çº¿ï¼Œæˆ‘ä»¬å¯ä»¥å­˜å‚¨è¯¥ç›´çº¿çš„æ‰€æœ‰åƒç´ ç‚¹ï¼Œä¹Ÿå¯ä»¥åªå­˜å‚¨èµ·ç‚¹å’Œç»ˆç‚¹ã€‚ä½¿ç”¨cv2.CHAIN_APPROX_SIMPLEå°±è¡¨ç¤ºç”¨å°½å¯èƒ½å°‘çš„åƒç´ ç‚¹è¡¨ç¤ºè½®å»“ã€‚æ›´å¤šè¯·å‚è€ƒï¼šContourApproximationModes ç®€ä¾¿èµ·è§ï¼Œè¿™ä¸¤ä¸ªå‚æ•°ä¹Ÿå¯ä»¥ç›´æ¥ç”¨çœŸå€¼3å’Œ2è¡¨ç¤ºã€‚ å‡½æ•°æœ‰3ä¸ªè¿”å›å€¼ï¼Œimageè¿˜æ˜¯åŸæ¥çš„äºŒå€¼åŒ–å›¾ç‰‡ï¼Œhierarchyæ˜¯è½®å»“é—´çš„å±‚çº§å…³ç³»ï¼ˆç•ªå¤–ç¯‡ï¼šè½®å»“å±‚çº§ï¼‰ï¼Œè¿™ä¸¤ä¸ªæš‚æ—¶ä¸ç”¨ç†ä¼šã€‚æˆ‘ä»¬ä¸»è¦çœ‹contoursï¼Œå®ƒå°±æ˜¯æ‰¾åˆ°çš„è½®å»“äº†ï¼Œä»¥æ•°ç»„å½¢å¼å­˜å‚¨ï¼Œè®°å½•äº†æ¯æ¡è½®å»“çš„æ‰€æœ‰åƒç´ ç‚¹çš„åæ ‡(x,y)ã€‚ ç»˜åˆ¶è½®å»“è½®å»“æ‰¾å‡ºæ¥åï¼Œä¸ºäº†æ–¹ä¾¿è§‚çœ‹ï¼Œå¯ä»¥åƒå‰é¢å›¾ä¸­é‚£æ ·ç”¨çº¢è‰²ç”»å‡ºæ¥ï¼šcv2.drawContours() 1cv2.drawContours(img, contours, -1, (0, 0, 255), 2) å…¶ä¸­å‚æ•°2å°±æ˜¯å¾—åˆ°çš„contoursï¼Œå‚æ•°3è¡¨ç¤ºè¦ç»˜åˆ¶å“ªä¸€æ¡è½®å»“ï¼Œ-1è¡¨ç¤ºç»˜åˆ¶æ‰€æœ‰è½®å»“ï¼Œå‚æ•°4æ˜¯é¢œè‰²ï¼ˆB/G/Ré€šé“ï¼Œæ‰€ä»¥(0,0,255)è¡¨ç¤ºçº¢è‰²ï¼‰ï¼Œå‚æ•°5æ˜¯çº¿å®½ï¼Œä¹‹å‰åœ¨ç»˜åˆ¶å›¾å½¢ä¸­ä»‹ç»è¿‡ã€‚ ç»éªŒä¹‹è°ˆï¼šå¾ˆå¤šäººç”»å›¾æ—¶æ˜æ˜ç”¨äº†å½©è‰²ï¼Œä½†æ²¡æœ‰æ•ˆæœï¼Œè¯·æ£€æŸ¥ä½ æ˜¯åœ¨å“ªä¸ªå›¾ä¸Šç”»ï¼Œç”»åœ¨ç°åº¦å›¾å’ŒäºŒå€¼å›¾ä¸Šæ˜¾ç„¶æ˜¯æ²¡æœ‰å½©è‰²çš„(âŠ™oâŠ™)ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šé¦–å…ˆè·å¾—è¦æ“ä½œçš„è½®å»“ï¼Œå†è¿›è¡Œè½®å»“ç»˜åˆ¶åŠåˆ†æï¼š 12cnt = contours[1]cv2.drawContours(img, [cnt], 0, (0, 0, 255), 2) å°ç»“ è½®å»“ç‰¹å¾éå¸¸æœ‰ç”¨ï¼Œä½¿ç”¨cv2.findContours()å¯»æ‰¾è½®å»“ï¼Œcv2.drawContours()ç»˜åˆ¶è½®å»“ã€‚ æ¥å£æ–‡æ¡£ cv2.findContours() cv2.RetrievalModes cv2.ContourApproximationModes cv2.drawContours() å¼•ç”¨ æœ¬èŠ‚æºç  Contours : Getting Started","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"è½®å»“","slug":"è½®å»“","permalink":"http://www.codec.wang/tags/%E8%BD%AE%E5%BB%93/"}]},{"title":"Python+OpenCVæ•™ç¨‹12ï¼šè…èš€ä¸è†¨èƒ€","slug":"Python-OpenCVæ•™ç¨‹12ï¼šè…èš€ä¸è†¨èƒ€","date":"2017-12-19T12:52:23.000Z","updated":"2020-04-07T04:57:33.752Z","comments":true,"path":"opencv-python-erode-and-dilate/","link":"","permalink":"http://www.codec.wang/opencv-python-erode-and-dilate/","excerpt":"å­¦ä¹ å¸¸ç”¨å½¢æ€å­¦æ“ä½œï¼šè…èš€è†¨èƒ€ï¼Œå¼€è¿ç®—å’Œé—­è¿ç®—ã€‚","text":"å­¦ä¹ å¸¸ç”¨å½¢æ€å­¦æ“ä½œï¼šè…èš€è†¨èƒ€ï¼Œå¼€è¿ç®—å’Œé—­è¿ç®—ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ äº†è§£å½¢æ€å­¦æ“ä½œçš„æ¦‚å¿µ å­¦ä¹ è†¨èƒ€ã€è…èš€ã€å¼€è¿ç®—å’Œé—­è¿ç®—ç­‰å½¢æ€å­¦æ“ä½œ OpenCVå‡½æ•°ï¼šcv2.erode(), cv2.dilate(), cv2.morphologyEx() æ•™ç¨‹å•¥å«å½¢æ€å­¦æ“ä½œå½¢æ€å­¦æ“ä½œå…¶å®å°±æ˜¯æ”¹å˜ç‰©ä½“çš„å½¢çŠ¶ï¼Œæ¯”å¦‚è…èš€å°±æ˜¯â€å˜ç˜¦â€ï¼Œè†¨èƒ€å°±æ˜¯â€å˜èƒ–â€ï¼Œçœ‹ä¸‹å›¾å°±æ˜ç™½äº†ï¼š ç»éªŒä¹‹è°ˆï¼šå½¢æ€å­¦æ“ä½œä¸€èˆ¬ä½œç”¨äºäºŒå€¼åŒ–å›¾ï¼Œæ¥è¿æ¥ç›¸é‚»çš„å…ƒç´ æˆ–åˆ†ç¦»æˆç‹¬ç«‹çš„å…ƒç´ ã€‚è…èš€å’Œè†¨èƒ€æ˜¯é’ˆå¯¹å›¾ç‰‡ä¸­çš„ç™½è‰²éƒ¨åˆ†ï¼ è…èš€è…èš€çš„æ•ˆæœæ˜¯æŠŠå›¾ç‰‡â€å˜ç˜¦â€ï¼Œå…¶åŸç†æ˜¯åœ¨åŸå›¾çš„å°åŒºåŸŸå†…å–å±€éƒ¨æœ€å°å€¼ã€‚å› ä¸ºæ˜¯äºŒå€¼åŒ–å›¾ï¼Œåªæœ‰0å’Œ255ï¼Œæ‰€ä»¥å°åŒºåŸŸå†…æœ‰ä¸€ä¸ªæ˜¯0è¯¥åƒç´ ç‚¹å°±ä¸º0ï¼š è¿™æ ·åŸå›¾ä¸­è¾¹ç¼˜åœ°æ–¹å°±ä¼šå˜æˆ0ï¼Œè¾¾åˆ°äº†ç˜¦èº«ç›®çš„ï¼ˆå°èƒ–ç¦åˆ©(â—Ë‡âˆ€Ë‡â—)ï¼‰ OpenCVä¸­ç”¨cv2.erode()å‡½æ•°è¿›è¡Œè…èš€ï¼Œåªéœ€è¦æŒ‡å®šæ ¸çš„å¤§å°å°±è¡Œï¼š 123456import cv2import numpy as npimg = cv2.imread('j.bmp', 0)kernel = np.ones((5, 5), np.uint8)erosion = cv2.erode(img, kernel) # è…èš€ è¿™ä¸ªæ ¸ä¹Ÿå«ç»“æ„å…ƒç´ ï¼Œå› ä¸ºå½¢æ€å­¦æ“ä½œå…¶å®ä¹Ÿæ˜¯åº”ç”¨å·ç§¯æ¥å®ç°çš„ã€‚ç»“æ„å…ƒç´ å¯ä»¥æ˜¯çŸ©å½¢/æ¤­åœ†/åå­—å½¢ï¼Œå¯ä»¥ç”¨cv2.getStructuringElement()æ¥ç”Ÿæˆä¸åŒå½¢çŠ¶çš„ç»“æ„å…ƒç´ ï¼Œæ¯”å¦‚ï¼š 123kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (5, 5)) # çŸ©å½¢ç»“æ„kernel = cv2.getStructuringElement(cv2.MORPH_ELLIPSE, (5, 5)) # æ¤­åœ†ç»“æ„kernel = cv2.getStructuringElement(cv2.MORPH_CROSS, (5, 5)) # åå­—å½¢ç»“æ„ è†¨èƒ€è†¨èƒ€ä¸è…èš€ç›¸åï¼Œå–çš„æ˜¯å±€éƒ¨æœ€å¤§å€¼ï¼Œæ•ˆæœæ˜¯æŠŠå›¾ç‰‡â€å˜èƒ–â€ï¼š 1dilation = cv2.dilate(img, kernel) # è†¨èƒ€ å¼€/é—­è¿ç®—å…ˆè…èš€åè†¨èƒ€å«å¼€è¿ç®—ï¼ˆå› ä¸ºå…ˆè…èš€ä¼šåˆ†å¼€ç‰©ä½“ï¼Œè¿™æ ·å®¹æ˜“è®°ä½ï¼‰ï¼Œå…¶ä½œç”¨æ˜¯ï¼šåˆ†ç¦»ç‰©ä½“ï¼Œæ¶ˆé™¤å°åŒºåŸŸã€‚è¿™ç±»å½¢æ€å­¦æ“ä½œç”¨cv2.morphologyEx()å‡½æ•°å®ç°ï¼š 1234kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (5, 5)) # å®šä¹‰ç»“æ„å…ƒç´ img = cv2.imread('j_noise_out.bmp', 0)opening = cv2.morphologyEx(img, cv2.MORPH_OPEN, kernel) # å¼€è¿ç®— é—­è¿ç®—åˆ™ç›¸åï¼šå…ˆè†¨èƒ€åè…èš€ï¼ˆå…ˆè†¨èƒ€ä¼šä½¿ç™½è‰²çš„éƒ¨åˆ†æ‰©å¼ ï¼Œä»¥è‡³äºæ¶ˆé™¤/â€œé—­åˆâ€ç‰©ä½“é‡Œé¢çš„å°é»‘æ´ï¼Œæ‰€ä»¥å«é—­è¿ç®—ï¼‰ 12img = cv2.imread('j_noise_in.bmp', 0)closing = cv2.morphologyEx(img, cv2.MORPH_CLOSE, kernel) # é—­è¿ç®— ç»éªŒä¹‹è°ˆï¼šå¾ˆå¤šäººå¯¹å¼€é—­è¿ç®—çš„ä½œç”¨ä¸æ˜¯å¾ˆæ¸…æ¥šï¼ˆå¥½å§ï¼Œå…¶å®æ˜¯æ¯”è¾ƒå®¹æ˜“æ··â—‘ï¹â—ï¼‰ï¼Œä½†çœ‹ä¸Šå›¾â†‘ï¼Œä¸ç”¨æ€•ï¼šå¦‚æœæˆ‘ä»¬çš„ç›®æ ‡ç‰©ä½“å¤–é¢æœ‰å¾ˆå¤šæ— å…³çš„å°åŒºåŸŸï¼Œå°±ç”¨å¼€è¿ç®—å»é™¤æ‰ï¼›å¦‚æœç‰©ä½“å†…éƒ¨æœ‰å¾ˆå¤šå°é»‘æ´ï¼Œå°±ç”¨é—­è¿ç®—å¡«å……æ‰ã€‚ æ¥ä¸‹æ¥çš„3ç§å½¢æ€å­¦æ“ä½œå¹¶ä¸å¸¸ç”¨ï¼Œå¤§å®¶æœ‰å…´è¶£å¯ä»¥çœ‹çœ‹ï¼ˆå› ä¸ºè¾ƒçŸ­ï¼Œæ²¡æœ‰åšæˆç•ªå¤–ç¯‡ï¼‰ï¼š å…¶ä»–å½¢æ€å­¦æ“ä½œ å½¢æ€å­¦æ¢¯åº¦ï¼šè†¨èƒ€å›¾å‡å»è…èš€å›¾ï¼Œdilation - erosionï¼Œè¿™æ ·ä¼šå¾—åˆ°ç‰©ä½“çš„è½®å»“ï¼š 12img = cv2.imread('school.bmp', 0)gradient = cv2.morphologyEx(img, cv2.MORPH_GRADIENT, kernel) é¡¶å¸½ï¼šåŸå›¾å‡å»å¼€è¿ç®—åçš„å›¾ï¼šsrc - opening 1tophat = cv2.morphologyEx(img, cv2.MORPH_TOPHAT, kernel) é»‘å¸½ï¼šé—­è¿ç®—åçš„å›¾å‡å»åŸå›¾ï¼šclosing - src 1blackhat = cv2.morphologyEx(img, cv2.MORPH_BLACKHAT, kernel) å°ç»“ å½¢æ€å­¦æ“ä½œå°±æ˜¯æ”¹å˜ç‰©ä½“çš„å½¢çŠ¶ï¼Œå¦‚è…èš€ä½¿ç‰©ä½“â€å˜ç˜¦â€ï¼Œè†¨èƒ€ä½¿ç‰©ä½“â€å˜èƒ–â€ã€‚ å…ˆè…èš€åè†¨èƒ€ä¼šåˆ†ç¦»ç‰©ä½“ï¼Œæ‰€ä»¥å«å¼€è¿ç®—ï¼Œå¸¸ç”¨æ¥å»é™¤å°åŒºåŸŸç‰©ä½“ã€‚ å…ˆè†¨èƒ€åè…èš€ä¼šæ¶ˆé™¤ç‰©ä½“å†…çš„å°æ´ï¼Œæ‰€ä»¥å«é—­è¿ç®—ã€‚å¼€/é—­ç†è§£äº†ä¹‹åå¾ˆå®¹æ˜“è®°å¿†å™¢(âŠ™oâŠ™)ã€‚ æ¥å£æ–‡æ¡£ cv2.erode() cv2.getStructuringElement() cv2.dilate() cv2.MorphShapes cv2.morphologyEx() cv2.MorphTypes å¼•ç”¨ æœ¬èŠ‚æºç  Morphological Operations Computer Vision: Algorithms and Applications","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"è…èš€","slug":"è…èš€","permalink":"http://www.codec.wang/tags/%E8%85%90%E8%9A%80/"},{"name":"è†¨èƒ€","slug":"è†¨èƒ€","permalink":"http://www.codec.wang/tags/%E8%86%A8%E8%83%80/"},{"name":"å½¢æ€å­¦","slug":"å½¢æ€å­¦","permalink":"http://www.codec.wang/tags/%E5%BD%A2%E6%80%81%E5%AD%A6/"}]},{"title":"Python+OpenCVæ•™ç¨‹11ï¼šè¾¹ç¼˜æ£€æµ‹","slug":"Python-OpenCVæ•™ç¨‹11ï¼šè¾¹ç¼˜æ£€æµ‹","date":"2017-12-18T09:11:48.000Z","updated":"2020-04-07T04:57:49.806Z","comments":true,"path":"opencv-python-edge-detection/","link":"","permalink":"http://www.codec.wang/opencv-python-edge-detection/","excerpt":"å­¦ä¹ ä½¿ç”¨Cannyè·å–å›¾åƒçš„è¾¹ç¼˜ã€‚","text":"å­¦ä¹ ä½¿ç”¨Cannyè·å–å›¾åƒçš„è¾¹ç¼˜ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ Canny J . A Computational Approach To Edge Detection[J]. IEEE Transactions on Pattern Analysis and Machine Intelligence, 1986, PAMI-8(6):679-698. ç›®æ ‡ Cannyè¾¹ç¼˜æ£€æµ‹çš„ç®€å•æ¦‚å¿µ OpenCVå‡½æ•°ï¼šcv2.Canny() æ•™ç¨‹Cannyè¾¹ç¼˜æ£€æµ‹æ–¹æ³•å¸¸è¢«èª‰ä¸ºè¾¹ç¼˜æ£€æµ‹çš„æœ€ä¼˜æ–¹æ³•ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œå…ˆçœ‹ä¸ªä¾‹å­ï¼š 12345678import cv2import numpy as npimg = cv2.imread('handwriting.jpg', 0)edges = cv2.Canny(img, 30, 70) # cannyè¾¹ç¼˜æ£€æµ‹cv2.imshow('canny', np.hstack((img, edges)))cv2.waitKey(0) cv2.Canny()è¿›è¡Œè¾¹ç¼˜æ£€æµ‹ï¼Œå‚æ•°2ã€3è¡¨ç¤ºæœ€ä½ã€é«˜é˜ˆå€¼ï¼Œä¸‹é¢æ¥è§£é‡Šä¸‹å…·ä½“åŸç†ã€‚ ç»éªŒä¹‹è°ˆï¼šä¹‹å‰æˆ‘ä»¬ç”¨ä½é€šæ»¤æ³¢çš„æ–¹å¼æ¨¡ç³Šäº†å›¾ç‰‡ï¼Œé‚£åè¿‡æ¥ï¼Œæƒ³å¾—åˆ°ç‰©ä½“çš„è¾¹ç¼˜ï¼Œå°±éœ€è¦ç”¨åˆ°é«˜é€šæ»¤æ³¢ã€‚æ¨èå…ˆé˜…è¯»ï¼šç•ªå¤–ç¯‡ï¼šå›¾åƒæ¢¯åº¦ã€‚ Cannyè¾¹ç¼˜æ£€æµ‹Cannyè¾¹ç¼˜æå–çš„å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š 1ï¼Œä½¿ç”¨5Ã—5é«˜æ–¯æ»¤æ³¢æ¶ˆé™¤å™ªå£°ï¼š è¾¹ç¼˜æ£€æµ‹æœ¬èº«å±äºé”åŒ–æ“ä½œï¼Œå¯¹å™ªç‚¹æ¯”è¾ƒæ•æ„Ÿï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œå¹³æ»‘å¤„ç†ã€‚é«˜æ–¯æ»¤æ³¢çš„å…·ä½“å†…å®¹å‚è€ƒå‰ä¸€ç¯‡ï¼šå¹³æ»‘å›¾åƒ$$K=\\frac{1}{256}\\left[ \\begin{matrix} 1 &amp; 4 &amp; 6 &amp; 4 &amp; 1 \\newline 4 &amp; 16 &amp; 24 &amp; 16 &amp; 4 \\newline 6 &amp; 24 &amp; 36 &amp; 24 &amp; 6 \\newline 4 &amp; 16 &amp; 24 &amp; 16 &amp; 4 \\newline 1 &amp; 4 &amp; 6 &amp; 4 &amp; 1 \\end{matrix} \\right]$$2ï¼Œè®¡ç®—å›¾åƒæ¢¯åº¦çš„æ–¹å‘ï¼š é¦–å…ˆä½¿ç”¨Sobelç®—å­è®¡ç®—ä¸¤ä¸ªæ–¹å‘ä¸Šçš„æ¢¯åº¦$ G_x $å’Œ$ G_y $ï¼Œç„¶åç®—å‡ºæ¢¯åº¦çš„æ–¹å‘ï¼š$$\\theta=\\arctan(\\frac{G_y}{G_x})$$ä¿ç•™è¿™å››ä¸ªæ–¹å‘çš„æ¢¯åº¦ï¼š0Â°/45Â°/90Â°/135Â°ï¼Œæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿæˆ‘ä»¬æ¥ç€çœ‹ã€‚ 3ï¼Œå–å±€éƒ¨æå¤§å€¼ï¼š æ¢¯åº¦å…¶å®å·²ç»è¡¨ç¤ºäº†è½®å»“ï¼Œä½†ä¸ºäº†è¿›ä¸€æ­¥ç­›é€‰ï¼Œå¯ä»¥åœ¨ä¸Šé¢çš„å››ä¸ªè§’åº¦æ–¹å‘ä¸Šå†å–å±€éƒ¨æå¤§å€¼ï¼š æ¯”å¦‚ï¼ŒAç‚¹åœ¨45Â°æ–¹å‘ä¸Šå¤§äºB/Cç‚¹ï¼Œé‚£å°±ä¿ç•™å®ƒï¼ŒæŠŠB/Cè®¾ç½®ä¸º0ã€‚ 4ï¼Œæ»åé˜ˆå€¼ï¼š ç»è¿‡å‰é¢ä¸‰æ­¥ï¼Œå°±åªå‰©ä¸‹0å’Œå¯èƒ½çš„è¾¹ç¼˜æ¢¯åº¦å€¼äº†ï¼Œä¸ºäº†æœ€ç»ˆç¡®å®šä¸‹æ¥ï¼Œéœ€è¦è®¾å®šé«˜ä½é˜ˆå€¼ï¼š åƒç´ ç‚¹çš„å€¼å¤§äºæœ€é«˜é˜ˆå€¼ï¼Œé‚£è‚¯å®šæ˜¯è¾¹ç¼˜ï¼ˆä¸Šå›¾Aï¼‰ åŒç†åƒç´ å€¼å°äºæœ€ä½é˜ˆå€¼ï¼Œé‚£è‚¯å®šä¸æ˜¯è¾¹ç¼˜ åƒç´ å€¼ä»‹äºä¸¤è€…ä¹‹é—´ï¼Œå¦‚æœä¸é«˜äºæœ€é«˜é˜ˆå€¼çš„ç‚¹è¿æ¥ï¼Œä¹Ÿç®—è¾¹ç¼˜ï¼Œæ‰€ä»¥ä¸Šå›¾ä¸­Cç®—ï¼ŒBä¸ç®— Cannyæ¨èçš„é«˜ä½é˜ˆå€¼æ¯”åœ¨2:1åˆ°3:1ä¹‹é—´ã€‚ å…ˆé˜ˆå€¼åˆ†å‰²åæ£€æµ‹å…¶å®å¾ˆå¤šæƒ…å†µä¸‹ï¼Œé˜ˆå€¼åˆ†å‰²åå†æ£€æµ‹è¾¹ç¼˜ï¼Œæ•ˆæœä¼šæ›´å¥½ï¼š 12345_, thresh = cv2.threshold(img, 0, 255, cv2.THRESH_BINARY + cv2.THRESH_OTSU)edges = cv2.Canny(thresh, 30, 70)cv2.imshow('canny', np.hstack((img, thresh, edges)))cv2.waitKey(0) ä»£ç ä¸­æˆ‘ç”¨äº†ç•ªå¤–ç¯‡ï¼šOtsué˜ˆå€¼æ³•ä¸­çš„è‡ªåŠ¨é˜ˆå€¼åˆ†å‰²ï¼Œå¦‚æœä½ ä¸å¤ªäº†è§£ï¼Œå¤§å¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹æ³•ï¼Œä¸è¿‡å¦‚æœæ˜¯ä¸‹é¢è¿™ç§å›¾ç‰‡ï¼Œæ¨èç”¨Otsué˜ˆå€¼æ³•ã€‚å¦å¤–Pythonä¸­æŸä¸ªå€¼ä¸ç”¨çš„è¯ï¼Œå°±å†™ä¸ªä¸‹åˆ’çº¿â€™_â€™ã€‚ ç»ƒä¹  ï¼ˆé€‰åšï¼‰å¦‚æœä½ ä¸å¤ªç†è§£é«˜ä½é˜ˆå€¼çš„æ•ˆæœï¼Œåˆ›å»ºä¸¤ä¸ªæ»‘åŠ¨æ¡æ¥è°ƒèŠ‚å®ƒä»¬çš„å€¼çœ‹çœ‹ï¼š å°ç»“ Cannyæ˜¯ç”¨çš„æœ€å¤šçš„è¾¹ç¼˜æ£€æµ‹ç®—æ³•ï¼Œç”¨cv2.Canny()å®ç°ã€‚ æ¥å£æ–‡æ¡£ cv2.Canny() å¼•ç”¨ æœ¬èŠ‚æºç  Canny Edge Detection Canny è¾¹ç¼˜æ£€æµ‹ Canny J . A Computational Approach To Edge Detection[J]. IEEE Transactions on Pattern Analysis and Machine Intelligence, 1986, PAMI-8(6):679-698.","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"è¾¹ç¼˜","slug":"è¾¹ç¼˜","permalink":"http://www.codec.wang/tags/%E8%BE%B9%E7%BC%98/"},{"name":"Canny","slug":"Canny","permalink":"http://www.codec.wang/tags/Canny/"}]},{"title":"Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡9ï¼šå›¾åƒæ¢¯åº¦","slug":"Python-OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡9ï¼šå›¾åƒæ¢¯åº¦","date":"2017-12-18T02:51:43.000Z","updated":"2020-04-07T04:52:40.918Z","comments":true,"path":"opencv-python-extra-image-gradients/","link":"","permalink":"http://www.codec.wang/opencv-python-extra-image-gradients/","excerpt":"äº†è§£å›¾åƒæ¢¯åº¦å’Œè¾¹ç¼˜æ£€æµ‹çš„ç›¸å…³æ¦‚å¿µã€‚","text":"äº†è§£å›¾åƒæ¢¯åº¦å’Œè¾¹ç¼˜æ£€æµ‹çš„ç›¸å…³æ¦‚å¿µã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ è¿˜è®°å¾—å‰é¢å¹³æ»‘å›¾åƒä¸­æåˆ°çš„æ»¤æ³¢ä¸æ¨¡ç³Šçš„åŒºåˆ«å—ï¼Ÿæˆ‘ä»¬è¯´ä½é€šæ»¤æ³¢å™¨æ˜¯æ¨¡ç³Šï¼Œé«˜é€šæ»¤æ³¢å™¨æ˜¯é”åŒ–ï¼Œè¿™èŠ‚æˆ‘ä»¬å°±æ¥çœ‹çœ‹é«˜é€šæ»¤æ³¢å™¨ã€‚ å›¾åƒæ¢¯åº¦å¦‚æœä½ è¿˜è®°å¾—é«˜æ•°ä¸­ç”¨ä¸€é˜¶å¯¼æ•°æ¥æ±‚æå€¼çš„è¯ï¼Œå°±å¾ˆå®¹æ˜“ç†è§£äº†ï¼šæŠŠå›¾ç‰‡æƒ³è±¡æˆè¿ç»­å‡½æ•°ï¼Œå› ä¸ºè¾¹ç¼˜éƒ¨åˆ†çš„åƒç´ å€¼æ˜¯ä¸æ—è¾¹åƒç´ æ˜æ˜¾æœ‰åŒºåˆ«çš„ï¼Œæ‰€ä»¥å¯¹å›¾ç‰‡å±€éƒ¨æ±‚æå€¼ï¼Œå°±å¯ä»¥å¾—åˆ°æ•´å¹…å›¾ç‰‡çš„è¾¹ç¼˜ä¿¡æ¯äº†ã€‚ä¸è¿‡å›¾ç‰‡æ˜¯äºŒç»´çš„ç¦»æ•£å‡½æ•°ï¼Œå¯¼æ•°å°±å˜æˆäº†å·®åˆ†ï¼Œè¿™ä¸ªå·®åˆ†å°±ç§°ä¸ºå›¾åƒçš„æ¢¯åº¦ã€‚ å½“ç„¶ï¼Œå¤§éƒ¨åˆ†äººåº”è¯¥æ˜¯æ—©å¿˜è®°é«˜æ•°äº†(ï¿£â–½ï¿£)â€ï¼Œæ‰€ä»¥çœ‹ä¸æ‡‚çš„è¯ï¼Œå°±æŠŠä¸Šé¢çš„è§£é‡Šåˆ’æ‰ï¼Œæˆ‘ä»¬é‡æ–°ä»å·ç§¯çš„è§’åº¦æ¥çœ‹çœ‹ã€‚ å‚ç›´è¾¹ç¼˜æå–æ»¤æ³¢æ˜¯åº”ç”¨å·ç§¯æ¥å®ç°çš„ï¼Œå·ç§¯çš„å…³é”®å°±æ˜¯å·ç§¯æ ¸ï¼Œæˆ‘ä»¬æ¥è€ƒå¯Ÿä¸‹é¢è¿™ä¸ªå·ç§¯æ ¸ï¼š $$k1 = \\left[ \\begin{matrix} -1 &amp; 0 &amp; 1 \\newline -2 &amp; 0 &amp; 2 \\newline -1 &amp; 0 &amp; 1 \\end{matrix} \\right]$$ è¿™ä¸ªæ ¸æ˜¯ç”¨æ¥æå–å›¾ç‰‡ä¸­çš„å‚ç›´è¾¹ç¼˜çš„ï¼Œæ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿçœ‹ä¸‹å›¾ï¼š å½“å‰åˆ—å·¦å³ä¸¤ä¾§çš„å…ƒç´ è¿›è¡Œå·®åˆ†ï¼Œç”±äºè¾¹ç¼˜çš„å€¼æ˜æ˜¾å°äºï¼ˆæˆ–å¤§äºï¼‰å‘¨è¾¹åƒç´ ï¼Œæ‰€ä»¥è¾¹ç¼˜çš„å·®åˆ†ç»“æœä¼šæ˜æ˜¾ä¸åŒï¼Œè¿™æ ·å°±æå–å‡ºäº†å‚ç›´è¾¹ç¼˜ã€‚åŒç†ï¼ŒæŠŠä¸Šé¢é‚£ä¸ªçŸ©é˜µè½¬ç½®ä¸€ä¸‹ï¼Œå°±æ˜¯æå–æ°´å¹³è¾¹ç¼˜ã€‚è¿™ç§å·®åˆ†æ“ä½œå°±ç§°ä¸ºå›¾åƒçš„æ¢¯åº¦è®¡ç®—ï¼š $$k2 = \\left[ \\begin{matrix} -1 &amp; -2 &amp; -1 \\newline 0 &amp; 0 &amp; 0 \\newline 1 &amp; 2 &amp; 1 \\end{matrix} \\right]$$ è¿˜è®°å¾—æ»¤æ³¢å‡½æ•°cv2.filter2D()å—ï¼Ÿï¼ˆç•ªå¤–ç¯‡ï¼šå·ç§¯åŸºç¡€ï¼‰æˆ‘ä»¬æ¥æ‰‹åŠ¨å®ç°ä¸Šé¢çš„åŠŸèƒ½ï¼š 123456789101112img = cv2.imread('sudoku.jpg', 0)# è‡ªå·±è¿›è¡Œå‚ç›´è¾¹ç¼˜æå–kernel = np.array([[-1, 0, 1], [-2, 0, 2], [-1, 0, 1]], dtype=np.float32)dst_v = cv2.filter2D(img, -1, kernel)# è‡ªå·±è¿›è¡Œæ°´å¹³è¾¹ç¼˜æå–dst_h = cv2.filter2D(img, -1, kernel.T)# æ¨ªå‘å¹¶æ’å¯¹æ¯”æ˜¾ç¤ºcv2.imshow('edge', np.hstack((img, dst_v, dst_h)))cv2.waitKey(0) Sobelç®—å­ä¸Šé¢çš„è¿™ç§å·®åˆ†æ–¹æ³•å°±å«Sobelç®—å­ï¼Œå®ƒå…ˆåœ¨å‚ç›´æ–¹å‘è®¡ç®—æ¢¯åº¦$ G_x=k_1Ã—src $ï¼Œå†åœ¨æ°´å¹³æ–¹å‘è®¡ç®—æ¢¯åº¦$ G_y=k_2Ã—src $ï¼Œæœ€åæ±‚å‡ºæ€»æ¢¯åº¦ï¼š\\(G=\\sqrt{Gx^2+Gy^2}\\) æˆ‘ä»¬å¯ä»¥æŠŠå‰é¢çš„ä»£ç ç”¨Sobelç®—å­æ›´ç®€å•åœ°å®ç°ï¼š 12sobelx = cv2.Sobel(img, -1, 1, 0, ksize=3) # åªè®¡ç®—xæ–¹å‘sobely = cv2.Sobel(img, -1, 0, 1, ksize=3) # åªè®¡ç®—yæ–¹å‘ ç»éªŒä¹‹è°ˆï¼šå¾ˆå¤šäººç–‘é—®ï¼ŒSobelç®—å­çš„å·ç§¯æ ¸è¿™å‡ ä¸ªå€¼æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿäº‹å®ä¸Šï¼Œå¹¶æ²¡æœ‰è§„å®šï¼Œä½ å¯ä»¥ç”¨ä½ è‡ªå·±çš„ã€‚ æ¯”å¦‚ï¼Œæœ€åˆåªåˆ©ç”¨é¢†åŸŸé—´çš„åŸå§‹å·®å€¼æ¥æ£€æµ‹è¾¹ç¼˜çš„Prewittç®—å­ï¼š $$K = \\left[ \\begin{matrix} -1 &amp; 0 &amp; 1 \\newline -1 &amp; 0 &amp; 1 \\newline -1 &amp; 0 &amp; 1 \\end{matrix} \\right]$$ è¿˜æœ‰æ¯”Sobelæ›´å¥½ç”¨çš„Scharrç®—å­ï¼Œå¤§å®¶å¯ä»¥äº†è§£ä¸‹ï¼š $$K = \\left[ \\begin{matrix} -3 &amp; 0 &amp; 3 \\newline -10 &amp; 0 &amp; 10 \\newline -3 &amp; 0 &amp; 3 \\end{matrix} \\right]$$ è¿™äº›ç®—æ³•éƒ½æ˜¯ä¸€é˜¶è¾¹ç¼˜æ£€æµ‹çš„ä»£è¡¨ï¼Œç½‘ä¸Šä¹Ÿæœ‰ç®—å­ä¹‹é—´çš„å¯¹æ¯”èµ„æ–™ï¼Œæœ‰å…´è¶£çš„å¯å‚è€ƒå¼•ç”¨ã€‚ Laplacianç®—å­é«˜æ•°ä¸­ç”¨ä¸€é˜¶å¯¼æ•°æ±‚æå€¼ï¼Œåœ¨è¿™äº›æå€¼çš„åœ°æ–¹ï¼ŒäºŒé˜¶å¯¼æ•°ä¸º0ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥é€šè¿‡æ±‚äºŒé˜¶å¯¼è®¡ç®—æ¢¯åº¦ï¼š$ dst=\\frac{\\partial^2 f}{\\partial x^2}+\\frac{\\partial^2 f}{\\partial y^2} $ ä¸€ç»´çš„ä¸€é˜¶å’ŒäºŒé˜¶å·®åˆ†å…¬å¼åˆ†åˆ«ä¸ºï¼š$$\\frac{\\partial f}{\\partial x}=f(x+1)-f(x)$$ $$\\frac{\\partial^2 f}{\\partial x^2}=f(x+1)+f(x-1)-2f(x)$$ æå–å‰é¢çš„ç³»æ•°ï¼Œé‚£ä¹ˆä¸€ç»´çš„Laplacianæ»¤æ³¢æ ¸æ˜¯ï¼š$$K=\\left[ \\begin{matrix} 1 &amp; -2 &amp; 1 \\end{matrix} \\right]$$è€Œå¯¹äºäºŒç»´å‡½æ•°f(x,y)ï¼Œä¸¤ä¸ªæ–¹å‘çš„äºŒé˜¶å·®åˆ†åˆ†åˆ«æ˜¯ï¼š $$\\frac{\\partial^2 f}{\\partial x^2}=f(x+1,y)+f(x-1,y)-2f(x,y)$$ $$\\frac{\\partial^2 f}{\\partial y^2}=f(x,y+1)+f(x,y-1)-2f(x,y)$$ åˆåœ¨ä¸€èµ·å°±æ˜¯ï¼š $$\\triangledown^2 f(x,y)=f(x+1,y)+f(x-1,y)+f(x,y+1)+f(x,y-1)-4f(x,y)$$ åŒæ ·æå–å‰é¢çš„ç³»æ•°ï¼Œé‚£ä¹ˆäºŒç»´çš„Laplacianæ»¤æ³¢æ ¸å°±æ˜¯ï¼š $$K = \\left[ \\begin{matrix} 0 &amp; 1 &amp; 0 \\newline 1 &amp; -4 &amp; 1 \\newline 0 &amp; 1 &amp; 0 \\end{matrix} \\right]$$ è¿™å°±æ˜¯Laplacianç®—å­çš„å›¾åƒå·ç§¯æ¨¡æ¿ï¼Œæœ‰äº›èµ„æ–™ä¸­åœ¨æ­¤åŸºç¡€ä¸Šè€ƒè™‘æ–œå¯¹è§’æƒ…å†µï¼Œå°†å·ç§¯æ ¸æ‹“å±•ä¸ºï¼š $$K = \\left[ \\begin{matrix} 1 &amp; 1 &amp; 1 \\newline 1 &amp; -8 &amp; 1 \\newline 1 &amp; 1 &amp; 1 \\end{matrix} \\right]$$ OpenCVä¸­ç›´æ¥ä½¿ç”¨cv2.Laplacian()å‡½æ•°ï¼š 1laplacian = cv2.Laplacian(img, -1) # ä½¿ç”¨Laplacianç®—å­ Laplacianç®—å­æ˜¯äºŒé˜¶è¾¹ç¼˜æ£€æµ‹çš„å…¸å‹ä»£è¡¨ï¼Œä¸€/äºŒé˜¶è¾¹ç¼˜æ£€æµ‹å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œå¤§å®¶å¯è‡ªè¡Œäº†è§£ã€‚ ç»ƒä¹  ï¼ˆé€‰åšï¼‰åŒå¿—ä»¬æœ‰ç©ºè¡¥è¡¥é«˜æ•°å§¿åŠ¿ï¼ˆçŸ¥è¯†ï¼‰å‘—ï¼(âœ¿â—•â€¿â—•âœ¿) å¼•ç”¨ æœ¬èŠ‚æºç  Image Gradients Sobelå¯¼æ•° ç»´åŸºç™¾ç§‘ï¼šè¾¹ç¼˜æ£€æµ‹ æ•°å­—å›¾åƒ - è¾¹ç¼˜æ£€æµ‹åŸç† - Sobel, Laplace, Cannyç®—å­","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"æ¢¯åº¦","slug":"æ¢¯åº¦","permalink":"http://www.codec.wang/tags/%E6%A2%AF%E5%BA%A6/"},{"name":"Sobel","slug":"Sobel","permalink":"http://www.codec.wang/tags/Sobel/"}]},{"title":"Python+OpenCVæ•™ç¨‹10ï¼šå¹³æ»‘å›¾åƒ","slug":"Python-OpenCVæ•™ç¨‹10ï¼šå¹³æ»‘å›¾åƒ","date":"2017-12-15T01:44:24.000Z","updated":"2020-04-07T04:45:13.352Z","comments":true,"path":"opencv-python-smoothing-images/","link":"","permalink":"http://www.codec.wang/opencv-python-smoothing-images/","excerpt":"å­¦ä¹ æ¨¡ç³Š/å¹³æ»‘å›¾åƒï¼Œæ¶ˆé™¤å™ªç‚¹ã€‚","text":"å­¦ä¹ æ¨¡ç³Š/å¹³æ»‘å›¾åƒï¼Œæ¶ˆé™¤å™ªç‚¹ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ æ¨¡ç³Š/å¹³æ»‘å›¾ç‰‡æ¥æ¶ˆé™¤å›¾ç‰‡å™ªå£° OpenCVå‡½æ•°ï¼šcv2.blur(), cv2.GaussianBlur(), cv2.medianBlur(), cv2.bilateralFilter() æ•™ç¨‹æ»¤æ³¢ä¸æ¨¡ç³Š æ¨èå¤§å®¶å…ˆé˜…è¯»ï¼šç•ªå¤–ç¯‡ï¼šå·ç§¯åŸºç¡€(å›¾ç‰‡è¾¹æ¡†)ï¼Œæœ‰åŠ©äºç†è§£å·ç§¯å’Œæ»¤æ³¢çš„æ¦‚å¿µã€‚ å…³äºæ»¤æ³¢å’Œæ¨¡ç³Šï¼Œå¾ˆå¤šäººåˆ†ä¸æ¸…ï¼Œæˆ‘æ¥ç»™å¤§å®¶ç†ç†ï¼ˆè™½è¯´å¦‚æ­¤ï¼Œæˆ‘åé¢ä¹Ÿä¼šæ··ç€ç”¨,,Ô¾ã…‚Ô¾,,ï¼‰ï¼š å®ƒä»¬éƒ½å±äºå·ç§¯ï¼Œä¸åŒæ»¤æ³¢æ–¹æ³•ä¹‹é—´åªæ˜¯å·ç§¯æ ¸ä¸åŒï¼ˆå¯¹çº¿æ€§æ»¤æ³¢è€Œè¨€ï¼‰ ä½é€šæ»¤æ³¢å™¨æ˜¯æ¨¡ç³Šï¼Œé«˜é€šæ»¤æ³¢å™¨æ˜¯é”åŒ– ä½é€šæ»¤æ³¢å™¨å°±æ˜¯å…è®¸ä½é¢‘ä¿¡å·é€šè¿‡ï¼Œåœ¨å›¾åƒä¸­è¾¹ç¼˜å’Œå™ªç‚¹éƒ½ç›¸å½“äºé«˜é¢‘éƒ¨åˆ†ï¼Œæ‰€ä»¥ä½é€šæ»¤æ³¢å™¨ç”¨äºå»é™¤å™ªç‚¹ã€å¹³æ»‘å’Œæ¨¡ç³Šå›¾åƒã€‚é«˜é€šæ»¤æ³¢å™¨åˆ™åä¹‹ï¼Œç”¨æ¥å¢å¼ºå›¾åƒè¾¹ç¼˜ï¼Œè¿›è¡Œé”åŒ–å¤„ç†ã€‚ å¸¸è§å™ªå£°æœ‰æ¤’ç›å™ªå£°å’Œé«˜æ–¯å™ªå£°ï¼Œæ¤’ç›å™ªå£°å¯ä»¥ç†è§£ä¸ºæ–‘ç‚¹ï¼Œéšæœºå‡ºç°åœ¨å›¾åƒä¸­çš„é»‘ç‚¹æˆ–ç™½ç‚¹ï¼›é«˜æ–¯å™ªå£°å¯ä»¥ç†è§£ä¸ºæ‹æ‘„å›¾ç‰‡æ—¶ç”±äºå…‰ç…§ç­‰åŸå› é€ æˆçš„å™ªå£°ã€‚ å‡å€¼æ»¤æ³¢å‡å€¼æ»¤æ³¢æ˜¯ä¸€ç§æœ€ç®€å•çš„æ»¤æ³¢å¤„ç†ï¼Œå®ƒå–çš„æ˜¯å·ç§¯æ ¸åŒºåŸŸå†…å…ƒç´ çš„å‡å€¼ï¼Œç”¨cv2.blur()å®ç°ï¼Œå¦‚3Ã—3çš„å·ç§¯æ ¸ï¼š $$ kernel = \\frac{1}{9}\\left[ \\begin{matrix} 1 &amp; 1 &amp; 1 \\newline 1 &amp; 1 &amp; 1 \\newline 1 &amp; 1 &amp; 1 \\end{matrix} \\right]$$ 12img = cv2.imread('lena.jpg')blur = cv2.blur(img, (3, 3)) # å‡å€¼æ¨¡ç³Š æ‰€æœ‰çš„æ»¤æ³¢å‡½æ•°éƒ½æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°borderTypeï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯ç•ªå¤–ç¯‡ï¼šå·ç§¯åŸºç¡€(å›¾ç‰‡è¾¹æ¡†)ä¸­æ‰€è¯´çš„è¾¹æ¡†å¡«å……æ–¹å¼ã€‚ æ–¹æ¡†æ»¤æ³¢æ–¹æ¡†æ»¤æ³¢è·Ÿå‡å€¼æ»¤æ³¢å¾ˆåƒï¼Œå¦‚3Ã—3çš„æ»¤æ³¢æ ¸å¦‚ä¸‹ï¼š $$k = a\\left[ \\begin{matrix} 1 &amp; 1 &amp; 1 \\newline 1 &amp; 1 &amp; 1 \\newline 1 &amp; 1 &amp; 1 \\end{matrix} \\right]$$ ç”¨cv2.boxFilter()å‡½æ•°å®ç°ï¼Œå½“å¯é€‰å‚æ•°normalizeä¸ºTrueçš„æ—¶å€™ï¼Œæ–¹æ¡†æ»¤æ³¢å°±æ˜¯å‡å€¼æ»¤æ³¢ï¼Œä¸Šå¼ä¸­çš„aå°±ç­‰äº1/9ï¼›normalizeä¸ºFalseçš„æ—¶å€™ï¼Œa=1ï¼Œç›¸å½“äºæ±‚åŒºåŸŸå†…çš„åƒç´ å’Œã€‚ 12# å‰é¢çš„å‡å€¼æ»¤æ³¢ä¹Ÿå¯ä»¥ç”¨æ–¹æ¡†æ»¤æ³¢å®ç°ï¼šnormalize=Trueblur = cv2.boxFilter(img, -1, (3, 3), normalize=True) é«˜æ–¯æ»¤æ³¢å‰é¢ä¸¤ç§æ»¤æ³¢æ–¹å¼ï¼Œå·ç§¯æ ¸å†…çš„æ¯ä¸ªå€¼éƒ½ä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯è¯´å›¾åƒåŒºåŸŸä¸­æ¯ä¸ªåƒç´ çš„æƒé‡ä¹Ÿå°±ä¸€æ ·ã€‚é«˜æ–¯æ»¤æ³¢çš„å·ç§¯æ ¸æƒé‡å¹¶ä¸ç›¸åŒï¼šä¸­é—´åƒç´ ç‚¹æƒé‡æœ€é«˜ï¼Œè¶Šè¿œç¦»ä¸­å¿ƒçš„åƒç´ æƒé‡è¶Šå°ï¼Œæ¥ï¼Œæ•°å­¦æ—¶é—´( â•¯â–¡â•° )ï¼Œè¿˜è®°å¾—æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„æ›²çº¿å—ï¼Ÿ æ˜¾ç„¶è¿™ç§å¤„ç†å…ƒç´ é—´æƒå€¼çš„æ–¹å¼æ›´åŠ åˆç†ä¸€äº›ã€‚å›¾åƒæ˜¯2ç»´çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨2ç»´çš„é«˜æ–¯å‡½æ•°ï¼Œæ¯”å¦‚OpenCVä¸­é»˜è®¤çš„3Ã—3çš„é«˜æ–¯å·ç§¯æ ¸ï¼ˆå…·ä½“åŸç†å’Œå·ç§¯æ ¸ç”Ÿæˆæ–¹å¼è¯·å‚è€ƒæ–‡æœ«çš„ç•ªå¤–å°ç¯‡ï¼‰ï¼š $$k = \\left[ \\begin{matrix} 0.0625 &amp; 0.125 &amp; 0.0625 \\newline 0.125 &amp; 0.25 &amp; 0.125 \\newline 0.0625 &amp; 0.125 &amp; 0.0625 \\end{matrix} \\right]$$OpenCVä¸­å¯¹åº”å‡½æ•°ä¸ºcv2.GaussianBlur(src,ksize,sigmaX)ï¼š 1234img = cv2.imread('gaussian_noise.bmp')# å‡å€¼æ»¤æ³¢vsé«˜æ–¯æ»¤æ³¢blur = cv2.blur(img, (5, 5)) # å‡å€¼æ»¤æ³¢gaussian = cv2.GaussianBlur(img, (5, 5), 1) # é«˜æ–¯æ»¤æ³¢ å‚æ•°3 Ïƒxå€¼è¶Šå¤§ï¼Œæ¨¡ç³Šæ•ˆæœè¶Šæ˜æ˜¾ã€‚é«˜æ–¯æ»¤æ³¢ç›¸æ¯”å‡å€¼æ»¤æ³¢æ•ˆç‡è¦æ…¢ï¼Œä½†å¯ä»¥æœ‰æ•ˆæ¶ˆé™¤é«˜æ–¯å™ªå£°ï¼Œèƒ½ä¿ç•™æ›´å¤šçš„å›¾åƒç»†èŠ‚ï¼Œæ‰€ä»¥ç»å¸¸è¢«ç§°ä¸ºæœ€æœ‰ç”¨çš„æ»¤æ³¢å™¨ã€‚å‡å€¼æ»¤æ³¢ä¸é«˜æ–¯æ»¤æ³¢çš„å¯¹æ¯”ç»“æœå¦‚ä¸‹ï¼ˆå‡å€¼æ»¤æ³¢ä¸¢å¤±çš„ç»†èŠ‚æ›´å¤šï¼‰ï¼š ä¸­å€¼æ»¤æ³¢ä¸­å€¼åˆå«ä¸­ä½æ•°ï¼Œæ˜¯æ‰€æœ‰æ•°æ’åºåå–ä¸­é—´çš„å€¼ã€‚ä¸­å€¼æ»¤æ³¢å°±æ˜¯ç”¨åŒºåŸŸå†…çš„ä¸­å€¼æ¥ä»£æ›¿æœ¬åƒç´ å€¼ï¼Œæ‰€ä»¥é‚£ç§å­¤ç«‹çš„æ–‘ç‚¹ï¼Œå¦‚0æˆ–255å¾ˆå®¹æ˜“æ¶ˆé™¤æ‰ï¼Œé€‚ç”¨äºå»é™¤æ¤’ç›å™ªå£°å’Œæ–‘ç‚¹å™ªå£°ã€‚ä¸­å€¼æ˜¯ä¸€ç§éçº¿æ€§æ“ä½œï¼Œæ•ˆç‡ç›¸æ¯”å‰é¢å‡ ç§çº¿æ€§æ»¤æ³¢è¦æ…¢ã€‚ æ¯”å¦‚ä¸‹é¢è¿™å¼ æ–‘ç‚¹å™ªå£°å›¾ï¼Œç”¨ä¸­å€¼æ»¤æ³¢æ˜¾ç„¶æ›´å¥½ï¼š 1234img = cv2.imread('salt_noise.bmp', 0)# å‡å€¼æ»¤æ³¢vsä¸­å€¼æ»¤æ³¢blur = cv2.blur(img, (5, 5)) # å‡å€¼æ»¤æ³¢median = cv2.medianBlur(img, 5) # ä¸­å€¼æ»¤æ³¢ åŒè¾¹æ»¤æ³¢æ¨¡ç³Šæ“ä½œåŸºæœ¬éƒ½ä¼šæŸå¤±æ‰å›¾åƒç»†èŠ‚ä¿¡æ¯ï¼Œå°¤å…¶å‰é¢ä»‹ç»çš„çº¿æ€§æ»¤æ³¢å™¨ï¼Œå›¾åƒçš„è¾¹ç¼˜ä¿¡æ¯å¾ˆéš¾ä¿ç•™ä¸‹æ¥ã€‚ç„¶è€Œï¼Œè¾¹ç¼˜ï¼ˆedgeï¼‰ä¿¡æ¯æ˜¯å›¾åƒä¸­å¾ˆé‡è¦çš„ä¸€ä¸ªç‰¹å¾ï¼Œæ‰€ä»¥è¿™æ‰æœ‰äº†åŒè¾¹æ»¤æ³¢ã€‚ç”¨cv2.bilateralFilter()å‡½æ•°å®ç°ï¼š 1234img = cv2.imread('lena.jpg')# åŒè¾¹æ»¤æ³¢vsé«˜æ–¯æ»¤æ³¢gau = cv2.GaussianBlur(img, (5, 5), 0) # é«˜æ–¯æ»¤æ³¢blur = cv2.bilateralFilter(img, 9, 75, 75) # åŒè¾¹æ»¤æ³¢ å¯ä»¥çœ‹åˆ°ï¼ŒåŒè¾¹æ»¤æ³¢æ˜æ˜¾ä¿ç•™äº†æ›´å¤šè¾¹ç¼˜ä¿¡æ¯ã€‚ ç•ªå¤–å°ç¯‡ï¼šé«˜æ–¯æ»¤æ³¢å·ç§¯æ ¸è¦è§£é‡Šé«˜æ–¯æ»¤æ³¢å·ç§¯æ ¸æ˜¯å¦‚ä½•ç”Ÿæˆçš„ï¼Œéœ€è¦å…ˆå¤ä¹ ä¸‹æ¦‚ç‡è®ºçš„çŸ¥è¯†ï¼ˆWhatï¼Ÿï¼Ÿåˆæ˜¯æ•°å­¦( â•¯â–¡â•° )ï¼‰ ä¸€ç»´çš„é«˜æ–¯å‡½æ•°/æ­£æ€åˆ†å¸ƒ$ X\\sim N(\\mu, \\sigma^2) $ï¼š$$G(x)=\\frac{1}{\\sqrt{2\\pi}\\sigma}exp(-\\frac{(x-\\mu)^2}{2\\sigma^2})$$å½“$ \\mu=0, \\sigma^2=1 $æ—¶ï¼Œç§°ä¸ºæ ‡å‡†æ­£æ€åˆ†å¸ƒ$ X\\sim N(0, 1) $ï¼š$$G(x)=\\frac{1}{\\sqrt{2\\pi}}exp(-\\frac{x^2}{2})$$äºŒç»´X/Yç›¸äº’ç‹¬ç«‹çš„é«˜æ–¯å‡½æ•°ï¼š$$G(x,y)=\\frac{1}{2\\pi\\sigma_x\\sigma_y}exp(-\\frac{(x-\\mu_x)^2+(y-\\mu_y)^2}{2\\sigma_x\\sigma_y})=G(x)G(y)$$ ç”±ä¸Šå¯çŸ¥ï¼ŒäºŒç»´é«˜æ–¯å‡½æ•°å…·æœ‰å¯åˆ†ç¦»æ€§ï¼Œæ‰€ä»¥OpenCVåˆ†ä¸¤æ­¥è®¡ç®—äºŒç»´é«˜æ–¯å·ç§¯ï¼Œå…ˆæ°´å¹³å†å‚ç›´ï¼Œæ¯ä¸ªæ–¹å‘ä¸Šéƒ½æ˜¯ä¸€ç»´çš„å·ç§¯ã€‚OpenCVä¸­è¿™ä¸ªä¸€ç»´å·ç§¯çš„è®¡ç®—å…¬å¼ç±»ä¼¼äºä¸Šé¢çš„ä¸€ç»´é«˜æ–¯å‡½æ•°ï¼š$$G(i)=\\alpha *exp(-\\frac{(i-\\frac{ksize-1}{2})^2}{2\\sigma^2})$$å…¶ä¸­i=0â€¦ksize-1ï¼ŒÎ±æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œä¹Ÿç§°ä¸ºç¼©æ”¾å› å­ï¼Œå®ƒä½¿å¾—\\(\\sum{G(i)}=1\\) æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç”¨cv2.getGaussianKernel(ksize,sigma)æ¥ç”Ÿæˆä¸€ç»´å·ç§¯æ ¸ï¼š sigma&lt;=0æ—¶ï¼Œsigma=0.3*((ksize-1)*0.5 - 1) + 0.8 sigma&gt;0æ—¶ï¼Œsigma=sigma 12print(cv2.getGaussianKernel(3, 0))# ç»“æœï¼š[[0.25][0.5][0.25]] ç”Ÿæˆä¹‹åï¼Œå…ˆè¿›è¡Œä¸‰æ¬¡çš„æ°´å¹³å·ç§¯ï¼š$$IÃ—\\left[ \\begin{matrix} 0.25 &amp; 0.5 &amp; 0.25 \\newline 0.25 &amp; 0.5 &amp; 0.25 \\newline 0.25 &amp; 0.5 &amp; 0.25 \\end{matrix} \\right]$$ç„¶åå†è¿›è¡Œå‚ç›´çš„ä¸‰æ¬¡å·ç§¯ï¼š$$IÃ—\\left[ \\begin{matrix} 0.25 &amp; 0.5 &amp; 0.25 \\newline 0.25 &amp; 0.5 &amp; 0.25 \\newline 0.25 &amp; 0.5 &amp; 0.25 \\end{matrix} \\right]Ã—\\left[ \\begin{matrix} 0.25 &amp; 0.25 &amp; 0.25 \\newline 0.5 &amp; 0.5 &amp; 0.5 \\newline 0.25 &amp; 0.25 &amp; 0.25 \\end{matrix} \\right] =IÃ—\\left[ \\begin{matrix} 0.0625 &amp; 0.125 &amp; 0.0625 \\newline 0.125 &amp; 0.25 &amp; 0.125 \\newline 0.0625 &amp; 0.125 &amp; 0.0625 \\end{matrix} \\right]$$è¿™å°±æ˜¯OpenCVä¸­é«˜æ–¯å·ç§¯æ ¸çš„ç”Ÿæˆæ–¹å¼ã€‚å…¶å®ï¼ŒOpenCVæºç ä¸­å¯¹å°äº7Ã—7çš„æ ¸æ˜¯ç›´æ¥è®¡ç®—å¥½æ”¾åœ¨æ•°ç»„é‡Œé¢çš„ï¼Œè¿™æ ·è®¡ç®—é€Ÿåº¦ä¼šå¿«ä¸€ç‚¹ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹ä¸‹æºç ï¼šgetGaussianKernel() ä¸Šé¢çŸ©é˜µä¹Ÿå¯ä»¥å†™æˆï¼š$$\\frac{1}{16}\\left[ \\begin{matrix} 1&amp; 2 &amp; 1 \\newline 2 &amp; 4 &amp; 2 \\newline 1 &amp; 2 &amp; 1 \\end{matrix} \\right]$$ å°ç»“ åœ¨ä¸çŸ¥é“ç”¨ä»€ä¹ˆæ»¤æ³¢å™¨å¥½çš„æ—¶å€™ï¼Œä¼˜å…ˆé«˜æ–¯æ»¤æ³¢cv2.GaussianBlur()ï¼Œç„¶åå‡å€¼æ»¤æ³¢cv2.blur()ã€‚ æ–‘ç‚¹å’Œæ¤’ç›å™ªå£°ä¼˜å…ˆä½¿ç”¨ä¸­å€¼æ»¤æ³¢cv2.medianBlur()ã€‚ è¦å»é™¤å™ªç‚¹çš„åŒæ—¶å°½å¯èƒ½ä¿ç•™æ›´å¤šçš„è¾¹ç¼˜ä¿¡æ¯ï¼Œä½¿ç”¨åŒè¾¹æ»¤æ³¢cv2.bilateralFilter()ã€‚ çº¿æ€§æ»¤æ³¢æ–¹å¼ï¼šå‡å€¼æ»¤æ³¢ã€æ–¹æ¡†æ»¤æ³¢ã€é«˜æ–¯æ»¤æ³¢ï¼ˆé€Ÿåº¦ç›¸å¯¹å¿«ï¼‰ã€‚ éçº¿æ€§æ»¤æ³¢æ–¹å¼ï¼šä¸­å€¼æ»¤æ³¢ã€åŒè¾¹æ»¤æ³¢ï¼ˆé€Ÿåº¦ç›¸å¯¹æ…¢ï¼‰ã€‚ æ¥å£æ–‡æ¡£ cv2.blur() cv2.boxFilter() cv2.GaussianBlur() cv2.getGaussianKernel() cv2.medianBlur() cv2.bilateralFilter() å¼•ç”¨ æœ¬èŠ‚æºç  Smoothing Images å›¾åƒå¹³æ»‘å¤„ç†","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"æ¨¡ç³Š","slug":"æ¨¡ç³Š","permalink":"http://www.codec.wang/tags/%E6%A8%A1%E7%B3%8A/"}]},{"title":"Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡8ï¼šå·ç§¯åŸºç¡€(å›¾ç‰‡è¾¹æ¡†)","slug":"Python-OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡8ï¼šå·ç§¯åŸºç¡€-å›¾ç‰‡è¾¹æ¡†","date":"2017-12-14T08:27:45.000Z","updated":"2020-04-07T04:53:04.946Z","comments":true,"path":"opencv-python-extra-padding-and-convolution/","link":"","permalink":"http://www.codec.wang/opencv-python-extra-padding-and-convolution/","excerpt":"äº†è§£å·ç§¯/æ»¤æ³¢çš„åŸºç¡€çŸ¥è¯†ï¼Œç»™å›¾ç‰‡æ·»åŠ è¾¹æ¡†ã€‚","text":"äº†è§£å·ç§¯/æ»¤æ³¢çš„åŸºç¡€çŸ¥è¯†ï¼Œç»™å›¾ç‰‡æ·»åŠ è¾¹æ¡†ã€‚å¦‚æœä½ å·²äº†è§£ç›¸å…³ç†è®ºï¼Œè¯·ç›´æ¥è·³åˆ°æ·»åŠ è¾¹æ¡†éƒ¨åˆ†ã€‚ å·ç§¯çš„æ¦‚å¿µå…¶å®å¾ˆå¥½ç†è§£ï¼Œä¸‹é¢æˆ‘å°±ç»™å¤§å®¶åšä¸ªæœ€ç®€å•çš„è§£é‡Šï¼Œç»å¯¹è½»æ¾åŠ æ„‰å¿«çš„è¾£o(ï¿£â–½ï¿£)o å·ç§¯ä»€ä¹ˆæ˜¯äºŒç»´å·ç§¯å‘¢ï¼Ÿçœ‹ä¸‹é¢ä¸€å¼ å›¾å°±ä¸€ç›®äº†ç„¶ï¼š å·ç§¯å°±æ˜¯å¾ªç¯å¯¹å›¾åƒè·Ÿä¸€ä¸ªæ ¸é€ä¸ªå…ƒç´ ç›¸ä¹˜å†æ±‚å’Œå¾—åˆ°å¦å¤–ä¸€å‰¯å›¾åƒçš„æ“ä½œï¼Œæ¯”å¦‚ç»“æœå›¾ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ 5æ˜¯æ€ä¹ˆç®—çš„å‘¢ï¼ŸåŸå›¾ä¸­3Ã—3çš„åŒºåŸŸä¸3Ã—3çš„æ ¸é€ä¸ªå…ƒç´ ç›¸ä¹˜å†ç›¸åŠ ï¼š$$5=1\\times1+2\\times0+1\\times0+0\\times0+1\\times0+1\\times0+3\\times0+0\\times0+2\\times2$$ç®—å®Œä¹‹åï¼Œæ•´ä¸ªæ¡†å†å¾€å³ç§»ä¸€æ­¥ç»§ç»­è®¡ç®—ï¼Œæ¨ªå‘è®¡ç®—å®Œåï¼Œå†å¾€ä¸‹ç§»ä¸€æ­¥ç»§ç»­è®¡ç®—â€¦â€¦ç½‘ä¸Šæœ‰ä¸€å‰¯å¾ˆç»å…¸çš„åŠ¨æ€å›¾ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç†è§£å·ç§¯ï¼š paddingä¸éš¾å‘ç°ï¼Œå‰é¢æˆ‘ä»¬ç”¨3Ã—3çš„æ ¸å¯¹ä¸€å‰¯6Ã—6çš„å›¾åƒè¿›è¡Œå·ç§¯ï¼Œå¾—åˆ°çš„æ˜¯4Ã—4çš„å›¾ï¼Œå›¾ç‰‡ç¼©å°äº†ï¼é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æŠŠåŸå›¾æ‰©å……ä¸€åœˆï¼Œå†å·ç§¯ï¼Œè¿™ä¸ªæ“ä½œå«å¡«å……paddingã€‚ äº‹å®ä¸Šï¼ŒåŸå›¾ä¸ºnÃ—nï¼Œå·ç§¯æ ¸ä¸ºfÃ—fï¼Œæœ€ç»ˆç»“æœå›¾å¤§å°ä¸º(n-f+1) Ã— (n-f+1)ã€‚ é‚£ä¹ˆæ‰©å±•çš„è¿™ä¸€å±‚åº”è¯¥å¡«å……ä»€ä¹ˆå€¼å‘¢ï¼ŸOpenCVä¸­æœ‰å¥½å‡ ç§å¡«å……æ–¹å¼ï¼Œéƒ½ä½¿ç”¨cv2.copyMakeBorder()å‡½æ•°å®ç°ï¼Œä¸€èµ·æ¥çœ‹çœ‹ã€‚ æ·»åŠ è¾¹æ¡†cv2.copyMakeBorder()ç”¨æ¥ç»™å›¾ç‰‡æ·»åŠ è¾¹æ¡†ï¼Œå®ƒæœ‰ä¸‹é¢å‡ ä¸ªå‚æ•°ï¼š srcï¼šè¦å¤„ç†çš„åŸå›¾ top, bottom, left, rightï¼šä¸Šä¸‹å·¦å³è¦æ‰©å±•çš„åƒç´ æ•° borderTypeï¼šè¾¹æ¡†ç±»å‹ï¼Œè¿™ä¸ªå°±æ˜¯éœ€è¦å…³æ³¨çš„å¡«å……æ–¹å¼ï¼Œè¯¦æƒ…è¯·å‚è€ƒï¼šBorderTypes å…¶ä¸­é»˜è®¤æ–¹å¼å’Œå›ºå®šå€¼æ–¹å¼æœ€å¸¸ç”¨ï¼Œæˆ‘ä»¬è¯¦ç»†è¯´æ˜ä¸€ä¸‹ï¼š å›ºå®šå€¼å¡«å……é¡¾åæ€ä¹‰ï¼Œcv2.BORDER_CONSTANTè¿™ç§æ–¹å¼å°±æ˜¯è¾¹æ¡†éƒ½å¡«å……æˆä¸€ä¸ªå›ºå®šçš„å€¼ï¼Œæ¯”å¦‚ä¸‹é¢çš„ç¨‹åºéƒ½å¡«å……0ï¼š 123456img = cv2.imread('6_by_6.bmp', 0)print(img)# å›ºå®šå€¼è¾¹æ¡†ï¼Œç»Ÿä¸€éƒ½å¡«å……0ä¹Ÿç§°ä¸ºzero paddingcons = cv2.copyMakeBorder(img, 1, 1, 1, 1, cv2.BORDER_CONSTANT, value=0)print(cons) é»˜è®¤è¾¹æ¡†ç±»å‹é»˜è®¤è¾¹æ¡†cv2.BORDER_DEFAULTå…¶å®æ˜¯å–é•œåƒå¯¹ç§°çš„åƒç´ å¡«å……ï¼Œæ¯”è¾ƒæ‹—å£ï¼Œä¸€æ­¥æ­¥è§£é‡Šï¼š 12default = cv2.copyMakeBorder(img, 1, 1, 1, 1, cv2.BORDER_DEFAULT)print(default) é¦–å…ˆè¿›è¡Œä¸Šä¸‹å¡«å……ï¼Œå¡«å……æˆä¸åŸå›¾åƒè¾¹ç•Œå¯¹ç§°çš„å€¼ï¼Œå¦‚ä¸‹å›¾ï¼š åŒç†å†è¿›è¡Œå·¦å³ä¸¤è¾¹çš„å¡«å……ï¼Œæœ€åæŠŠå››ä¸ªé¡¶ç‚¹è¡¥å……ä¸Šå°±å¥½äº†ï¼š ç»éªŒä¹‹è°ˆï¼šä¸€èˆ¬æƒ…å†µä¸‹é»˜è®¤æ–¹å¼æ›´åŠ åˆç†ï¼Œå› ä¸ºè¾¹ç•Œçš„åƒç´ å€¼æ›´åŠ æ¥è¿‘ã€‚å…·ä½“åº”è§†åœºåˆè€Œå®šã€‚ OpenCVè¿›è¡Œå·ç§¯OpenCVä¸­ç”¨cv2.filter2D()å®ç°å·ç§¯æ“ä½œï¼Œæ¯”å¦‚æˆ‘ä»¬çš„æ ¸æ˜¯ä¸‹é¢è¿™æ ·ï¼ˆ3Ã—3åŒºåŸŸåƒç´ çš„å’Œé™¤ä»¥10ï¼‰ï¼š $$M = \\frac{1}{10}\\left[ \\begin{matrix} 1 &amp; 1 &amp; 1 \\newline 1 &amp; 1 &amp; 1 \\newline 1 &amp; 1 &amp; 1 \\end{matrix} \\right] \\tag{3}$$ 12345img = cv2.imread('lena.jpg')# å®šä¹‰å·ç§¯æ ¸kernel = np.ones((3, 3), np.float32) / 10# å·ç§¯æ“ä½œï¼Œ-1è¡¨ç¤ºé€šé“æ•°ä¸åŸå›¾ç›¸åŒdst = cv2.filter2D(img, -1, kernel) å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ ¸å¯¹å›¾åƒè¿›è¡Œäº†æ¨¡ç³Šå¤„ç†ï¼Œè¿™æ˜¯å·ç§¯çš„ä¼—å¤šåŠŸèƒ½ä¹‹ä¸€ã€‚å½“ç„¶å·ç§¯è¿˜æœ‰å¾ˆå¤šçŸ¥è¯†æ²¡æœ‰å­¦åˆ°ï¼Œåé¢æˆ‘ä»¬å†ç»§ç»­æ·±å…¥ã€‚ ç»ƒä¹  å°è¯•ç»™â€lena.jpgâ€æ·»åŠ å‡ ç§ä¸åŒçš„è¾¹æ¡†ç±»å‹ï¼Œå¯¹æ¯”ä¸‹æ•ˆæœã€‚ å¼•ç”¨ æœ¬èŠ‚æºç  Basic Operations on Images å›¾åƒå·ç§¯ä¸æ»¤æ³¢çš„ä¸€äº›çŸ¥è¯†ç‚¹","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"å·ç§¯","slug":"å·ç§¯","permalink":"http://www.codec.wang/tags/%E5%8D%B7%E7%A7%AF/"}]},{"title":"Python+OpenCVæ•™ç¨‹9ï¼šå›¾åƒæ··åˆ","slug":"Python-OpenCVæ•™ç¨‹9ï¼šå›¾åƒæ··åˆ","date":"2017-12-10T06:13:10.000Z","updated":"2020-04-07T04:44:48.367Z","comments":true,"path":"opencv-python-image-blending/","link":"","permalink":"http://www.codec.wang/opencv-python-image-blending/","excerpt":"å­¦ä¹ å›¾ç‰‡é—´çš„æ•°å­¦è¿ç®—ï¼Œå›¾åƒæ··åˆã€‚","text":"å­¦ä¹ å›¾ç‰‡é—´çš„æ•°å­¦è¿ç®—ï¼Œå›¾åƒæ··åˆã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ å›¾ç‰‡é—´çš„æ•°å­¦è¿ç®—ï¼Œå¦‚ç›¸åŠ ã€æŒ‰ä½è¿ç®—ç­‰ OpenCVå‡½æ•°ï¼šcv2.add(), cv2.addWeighted(), cv2.bitwise_and() æ•™ç¨‹ é¦–å…ˆæ­å–œä½ å·²ç»å®Œæˆäº†å…¥é—¨ç¯‡çš„å­¦ä¹ å™¢ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ ä¸€äº›OpenCVçš„åŸºç¡€å†…å®¹ï¼ŒåŠ æ²¹(à¸‡ â€¢_â€¢)à¸‡ å›¾ç‰‡ç›¸åŠ è¦å åŠ ä¸¤å¼ å›¾ç‰‡ï¼Œå¯ä»¥ç”¨cv2.add()å‡½æ•°ï¼Œç›¸åŠ ä¸¤å¹…å›¾ç‰‡çš„å½¢çŠ¶ï¼ˆé«˜åº¦/å®½åº¦/é€šé“æ•°ï¼‰å¿…é¡»ç›¸åŒã€‚numpyä¸­å¯ä»¥ç›´æ¥ç”¨res = img + img1ç›¸åŠ ï¼Œä½†è¿™ä¸¤è€…çš„ç»“æœå¹¶ä¸ç›¸åŒï¼š 1234x = np.uint8([250])y = np.uint8([10])print(cv2.add(x, y)) # 250+10 = 260 =&gt; 255print(x + y) # 250+10 = 260 % 256 = 4 å¦‚æœæ˜¯äºŒå€¼åŒ–å›¾ç‰‡ï¼ˆåªæœ‰0å’Œ255ä¸¤ç§å€¼ï¼‰ï¼Œä¸¤è€…ç»“æœæ˜¯ä¸€æ ·çš„ï¼ˆç”¨numpyçš„æ–¹å¼æ›´ç®€ä¾¿ä¸€äº›ï¼‰ã€‚ å›¾åƒæ··åˆå›¾åƒæ··åˆcv2.addWeighted()ä¹Ÿæ˜¯ä¸€ç§å›¾ç‰‡ç›¸åŠ çš„æ“ä½œï¼Œåªä¸è¿‡ä¸¤å¹…å›¾ç‰‡çš„æƒé‡ä¸ä¸€æ ·ï¼ŒÎ³ç›¸å½“äºä¸€ä¸ªä¿®æ­£å€¼ï¼š $$dst = \\alpha\\times img1+\\beta\\times img2 + \\gamma$$ 123img1 = cv2.imread('lena_small.jpg')img2 = cv2.imread('opencv-logo-white.png')res = cv2.addWeighted(img1, 0.6, img2, 0.4, 0) ç»éªŒä¹‹è°ˆï¼šÎ±å’ŒÎ²éƒ½ç­‰äº1æ—¶ï¼Œå°±ç›¸å½“äºå›¾ç‰‡ç›¸åŠ ã€‚ æŒ‰ä½æ“ä½œæŒ‰ä½æ“ä½œåŒ…æ‹¬æŒ‰ä½ä¸/æˆ–/é/å¼‚æˆ–æ“ä½œï¼Œæœ‰ä»€ä¹ˆç”¨é€”å‘¢ï¼Ÿæ¯”å¦‚è¯´æˆ‘ä»¬è¦å®ç°ä¸‹å›¾çš„æ•ˆæœï¼š å¦‚æœå°†ä¸¤å¹…å›¾ç‰‡ç›´æ¥ç›¸åŠ ä¼šæ”¹å˜å›¾ç‰‡çš„é¢œè‰²ï¼Œå¦‚æœç”¨å›¾åƒæ··åˆï¼Œåˆ™ä¼šæ”¹å˜å›¾ç‰‡çš„é€æ˜åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨æŒ‰ä½æ“ä½œã€‚é¦–å…ˆæ¥äº†è§£ä¸€ä¸‹æ©è†œï¼ˆmaskï¼‰çš„æ¦‚å¿µï¼šæ©è†œæ˜¯ç”¨ä¸€å‰¯äºŒå€¼åŒ–å›¾ç‰‡å¯¹å¦å¤–ä¸€å¹…å›¾ç‰‡è¿›è¡Œå±€éƒ¨çš„é®æŒ¡ï¼Œçœ‹ä¸‹å›¾å°±ä¸€ç›®äº†ç„¶äº†ï¼š æ‰€ä»¥æˆ‘ä»¬çš„æ€è·¯å°±æ˜¯æŠŠåŸå›¾ä¸­è¦æ”¾logoçš„åŒºåŸŸæŠ å‡ºæ¥ï¼Œå†æŠŠlogoæ”¾è¿›å»å°±è¡Œäº†ï¼š 12345678910111213141516img1 = cv2.imread('lena.jpg')img2 = cv2.imread('opencv-logo-white.png')# æŠŠlogoæ”¾åœ¨å·¦ä¸Šè§’ï¼Œæ‰€ä»¥æˆ‘ä»¬åªå…³å¿ƒè¿™ä¸€å—åŒºåŸŸrows, cols = img2.shape[:2]roi = img1[:rows, :cols]# åˆ›å»ºæ©è†œimg2gray = cv2.cvtColor(img2, cv2.COLOR_BGR2GRAY)ret, mask = cv2.threshold(img2gray, 10, 255, cv2.THRESH_BINARY)mask_inv = cv2.bitwise_not(mask)# ä¿ç•™é™¤logoå¤–çš„èƒŒæ™¯img1_bg = cv2.bitwise_and(roi, roi, mask=mask_inv)dst = cv2.add(img1_bg, img2) # è¿›è¡Œèåˆimg1[:rows, :cols] = dst # èåˆåæ”¾åœ¨åŸå›¾ä¸Š ç»éªŒä¹‹è°ˆï¼šæ©è†œçš„æ¦‚å¿µåœ¨å›¾åƒæ··åˆ/å åŠ çš„åœºæ™¯ä¸‹ä½¿ç”¨è¾ƒå¤šï¼Œå¯ä»¥å¤šå¤šç»ƒä¹ å™¢ï¼ å°ç»“ cv2.add()ç”¨æ¥å åŠ ä¸¤å¹…å›¾ç‰‡ï¼Œcv2.addWeighted()ä¹Ÿæ˜¯å åŠ ä¸¤å¹…å›¾ç‰‡ï¼Œä½†ä¸¤å¹…å›¾ç‰‡çš„æƒé‡ä¸ä¸€æ ·ã€‚ cv2.bitwise_and(), cv2.bitwise_not(), cv2.bitwise_or(), cv2.bitwise_xor()åˆ†åˆ«æ‰§è¡ŒæŒ‰ä½ä¸/æˆ–/é/å¼‚æˆ–è¿ç®—ã€‚æ©è†œå°±æ˜¯ç”¨æ¥å¯¹å›¾ç‰‡è¿›è¡Œå…¨å±€æˆ–å±€éƒ¨çš„é®æŒ¡ã€‚ æ¥å£æ–‡æ¡£ cv2.add() cv2.addWeighted() cv2.bitwise_and() cv2.bitwise_not() å¼•ç”¨ æœ¬èŠ‚æºç  æ©è†œ Arithmetic Operations on Images","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"å›¾åƒæ··åˆ","slug":"å›¾åƒæ··åˆ","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E6%B7%B7%E5%90%88/"}]},{"title":"Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡7ï¼šäº®åº¦ä¸å¯¹æ¯”åº¦","slug":"Python-OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡7ï¼šäº®åº¦ä¸å¯¹æ¯”åº¦","date":"2017-12-10T06:05:10.000Z","updated":"2020-04-07T04:53:18.632Z","comments":true,"path":"opencv-python-extra-contrast-brightness/","link":"","permalink":"http://www.codec.wang/opencv-python-extra-contrast-brightness/","excerpt":"å­¦ä¹ å¦‚ä½•è°ƒæ•´å›¾ç‰‡çš„äº®åº¦å’Œå¯¹æ¯”åº¦ã€‚","text":"å­¦ä¹ å¦‚ä½•è°ƒæ•´å›¾ç‰‡çš„äº®åº¦å’Œå¯¹æ¯”åº¦ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ äº®åº¦ä¸å¯¹æ¯”åº¦äº®åº¦è°ƒæ•´æ˜¯å°†å›¾åƒåƒç´ çš„å¼ºåº¦æ•´ä½“å˜å¤§/å˜å°ï¼Œå¯¹æ¯”åº¦è°ƒæ•´æŒ‡çš„æ˜¯å›¾åƒæš—å¤„çš„åƒç´ å¼ºåº¦å˜ä½ï¼Œäº®å‡ºçš„å˜é«˜ï¼Œä»è€Œæ‹“å®½æŸä¸ªåŒºåŸŸå†…çš„æ˜¾ç¤ºç²¾åº¦ã€‚ OpenCVä¸­äº®åº¦å’Œå¯¹æ¯”åº¦åº”ç”¨è¿™ä¸ªå…¬å¼æ¥è®¡ç®—ï¼š$ g(x)=\\alpha f(x)+\\beta $ï¼Œå…¶ä¸­ï¼šÎ±(&gt;0)ã€Î²å¸¸ç§°ä¸ºå¢ç›Šä¸åç½®å€¼ï¼Œåˆ†åˆ«æ§åˆ¶å›¾ç‰‡çš„å¯¹æ¯”åº¦å’Œäº®åº¦ã€‚ ç»éªŒä¹‹è°ˆï¼šæ­¤å¤„å¯¹Î±/Î²æ§åˆ¶å¯¹æ¯”åº¦å’Œäº®åº¦æœ‰äº‰è®®ï¼Œå…·ä½“è¯·å‚è€ƒï¼šOpenCVå…³äºå¯¹æ¯”åº¦å’Œäº®åº¦çš„è¯¯è§£ã€‚ 12345678910import cv2import numpy as npimg = cv2.imread('lena.jpg')# æ­¤å¤„éœ€æ³¨æ„ï¼Œè¯·å‚è€ƒåé¢çš„è§£é‡Šres = np.uint8(np.clip((1.5 * img + 10), 0, 255))tmp = np.hstack((img, res)) # ä¸¤å¼ å›¾ç‰‡æ¨ªå‘åˆå¹¶ï¼ˆä¾¿äºå¯¹æ¯”æ˜¾ç¤ºï¼‰cv2.imshow('image', tmp)cv2.waitKey(0) è¿˜è®°å¾—å›¾åƒæ··åˆé‚£ä¸€èŠ‚ä¸­numpyå¯¹æ•°æ®æº¢å‡ºçš„å–æ¨¡å¤„ç†å—ï¼Ÿ250+10 = 260 =&gt; 260%256=4ï¼Œå®ƒå¹¶ä¸é€‚ç”¨äºæˆ‘ä»¬çš„å›¾åƒå¤„ç†ï¼Œæ‰€ä»¥ç”¨np.clip()å‡½æ•°å°†æ•°æ®é™å®šï¼ša&lt;0 =&gt; a=0, a&gt;255 =&gt; a=255ã€‚ ç»ƒä¹  åˆ›å»ºä¸¤ä¸ªæ»‘åŠ¨æ¡åˆ†åˆ«è°ƒæ•´å¯¹æ¯”åº¦å’Œäº®åº¦ï¼ˆå¯¹æ¯”åº¦èŒƒå›´ï¼š00.3ï¼Œäº®åº¦ï¼š0100ï¼‰ã€‚æç¤ºï¼šå› ä¸ºæ»‘åŠ¨æ¡æ²¡æœ‰å°æ•°ï¼Œæ‰€ä»¥å¯ä»¥è®¾ç½®ä¸º0~300ï¼Œç„¶åä¹˜ä»¥0.01ã€‚ äº®åº¦/å¯¹æ¯”åº¦ç”¨C++å®ç°ä¹Ÿå¾ˆæœ‰è¶£ï¼Œæ¨èé˜…è¯»ï¼šOpenCVæ”¹å˜å›¾åƒäº®åº¦å’Œå¯¹æ¯”åº¦ä»¥åŠä¼˜åŒ–ã€‚ å¼•ç”¨ æœ¬èŠ‚æºç  numpy.clip() OpenCVå…³äºå¯¹æ¯”åº¦å’Œäº®åº¦çš„è¯¯è§£ OpenCVæ”¹å˜å›¾åƒäº®åº¦å’Œå¯¹æ¯”åº¦ä»¥åŠä¼˜åŒ– Mat::convertTo","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"äº®åº¦","slug":"äº®åº¦","permalink":"http://www.codec.wang/tags/%E4%BA%AE%E5%BA%A6/"},{"name":"å¯¹æ¯”åº¦","slug":"å¯¹æ¯”åº¦","permalink":"http://www.codec.wang/tags/%E5%AF%B9%E6%AF%94%E5%BA%A6/"}]},{"title":"Python+OpenCVæ•™ç¨‹æ‹“å±•æŒ‘æˆ˜ï¼šPyQtç¼–å†™GUIç•Œé¢","slug":"Python-OpenCVæ•™ç¨‹æŒ‘æˆ˜ä»»åŠ¡2ï¼šPyQtç¼–å†™GUIç•Œé¢","date":"2017-12-09T09:30:34.000Z","updated":"2020-04-07T04:51:01.399Z","comments":true,"path":"opencv-python-using-pyqt5-create-gui/","link":"","permalink":"http://www.codec.wang/opencv-python-using-pyqt5-create-gui/","excerpt":"æ‹“å±•æŒ‘æˆ˜ï¼šç¼–å†™GUIå›¾åƒå¤„ç†åº”ç”¨ç¨‹åºã€‚","text":"æ‹“å±•æŒ‘æˆ˜ï¼šç¼–å†™GUIå›¾åƒå¤„ç†åº”ç”¨ç¨‹åºã€‚ æŒ‘æˆ˜å†…å®¹å‰é¢æˆ‘ä»¬å­¦ä¹ çš„OpenCVå†…å®¹éƒ½æ˜¯è¿è¡Œåœ¨å‘½ä»¤è¡Œä¸­çš„ï¼Œæ²¡æœ‰ç•Œé¢ï¼Œæ‰€ä»¥æœ¬æ¬¡çš„æ‹“å±•æŒ‘æˆ˜å†…å®¹ä¾¿æ˜¯ï¼š äº†è§£Pythonç¼–å†™GUIç•Œé¢çš„æ–¹æ³•ï¼Œä½¿ç”¨PyQt5ç¼–å†™å¦‚ä¸‹çš„å›¾åƒå¤„ç†åº”ç”¨ç¨‹åºï¼Œå®ç°æ‰“å¼€æ‘„åƒå¤´ã€æ•è·å›¾ç‰‡ã€è¯»å–æœ¬åœ°å›¾ç‰‡ã€ç°åº¦åŒ–å’ŒOtsuè‡ªåŠ¨é˜ˆå€¼åˆ†å‰²çš„åŠŸèƒ½ã€‚ æŒ‘æˆ˜é¢˜ä¸ä¼šåšä¹Ÿæœ¨æœ‰å…³ç³»ï¼Œä½†è¯·åŠ¡å¿…åœ¨è‡ªè¡Œå°è¯•åï¼Œå†çœ‹ä¸‹é¢çš„è§£ç­”å™¢ï¼Œä¸ç„¶â€¦æˆ‘ä¹Ÿæ²¡åŠæ³•(ï¿£â–½ï¿£)â€ æŒ‘æˆ˜è§£ç­”ç®€ä»‹ ç›®å‰æˆ‘ä»¬å­¦çš„å†…å®¹éƒ½æ˜¯è·‘åœ¨å‘½ä»¤è¡Œä¸­çš„ï¼Œå¹¶æ²¡æœ‰ç•Œé¢ï¼Œé‚£ä¹ˆâ€è„šæœ¬è¯­è¨€â€Pythonå¦‚ä½•æ­å»ºGUIç•Œé¢å‘¢ï¼Ÿ å…¶å®Pythonæ”¯æŒå¤šç§å›¾å½¢ç•Œé¢åº“ï¼Œå¦‚Tk(Tkinter)ã€wxPythonã€PyQtç­‰ï¼Œè™½ç„¶Pythonè‡ªå¸¦Tkinterï¼Œæ— éœ€é¢å¤–å®‰è£…åŒ…ï¼Œä½†æˆ‘æ›´æ¨èä½¿ç”¨PyQtï¼Œä¸€æ˜¯å› ä¸ºå®ƒå®Œå…¨åŸºäºQtï¼Œè·¨å¹³å°ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œæœ‰åŠ©äºäº†è§£Qtçš„è¯­æ³•ï¼ŒäºŒæ˜¯Qtæä¾›äº†Designerè®¾è®¡å·¥å…·ï¼Œç•Œé¢è®¾è®¡ä¸Šå¯ä»¥æ‹–æ§ä»¶æå®šï¼Œéå¸¸æ–¹ä¾¿ï¼Œå¤§å¤§èŠ‚çœæ—¶é—´ã€‚ æœ€æ–°ç‰ˆæœ¬ï¼šPyQt 5.x å®˜ç½‘ï¼ˆå¯èƒ½éœ€è¦ç¿»å¢™ï¼‰ï¼šhttps://www.riverbankcomputing.com/software/pyqt/ å¤§å®¶æ„Ÿå…´è¶£çš„è¯ï¼Œé™¤å»å®˜ç½‘ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¯å‚è€ƒçš„èµ„æºï¼š Python Wiki: PyQt PyQt/Tutorials PyQt5 tutorialï¼šè‹±æ–‡åŸç‰ˆ PyQt4 tutorialï¼šä¸­æ–‡ç‰ˆã€è‹±æ–‡åŸç‰ˆ Qt5 Documentation ä¸­æ–‡å‚è€ƒä¹¦ï¼šPyQt5å¿«é€Ÿå¼€å‘ä¸å®æˆ˜ åŸºäºQtçš„Python IDE Eric å®‰è£…1pip install pyqt5 ä¸‹è½½é€Ÿåº¦æ…¢çš„è¯ï¼Œå¯ä»¥åˆ°PyPIä¸Šä¸‹è½½ç¦»çº¿ç‰ˆå®‰è£…ã€‚å¦å¤–æˆ‘æ¨èä½¿ç”¨Qt Designeræ¥è®¾è®¡ç•Œé¢ï¼Œå¦‚æœä½ è£…çš„æ˜¯Anacondaçš„è¯ï¼Œå°±å·²ç»è‡ªå¸¦äº†designer.exeï¼Œä¾‹å¦‚æˆ‘çš„æ˜¯åœ¨ï¼šD:\\ProgramData\\Anaconda3\\Library\\bin\\ï¼Œå¦‚æœæ˜¯æ™®é€šçš„Pythonç¯å¢ƒï¼Œåˆ™éœ€è¦è‡ªè¡Œå®‰è£…ï¼š 1pip install pyqt5-tools å®‰è£…å®Œæˆåï¼Œdesigner.exeåº”è¯¥åœ¨Pythonå®‰è£…ç›®å½•ä¸‹ï¼šxxx\\Lib\\site-packages\\pyqt5_tools\\ã€‚ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç ç”Ÿæˆä¸€ä¸ªç®€å•çš„ç•Œé¢ï¼š 1234567891011import sysfrom PyQt5.QtWidgets import QApplication, QWidgetif __name__ == '__main__': app = QApplication(sys.argv) window = QWidget() window.setWindowTitle('Hello World!') window.show() sys.exit(app.exec_()) ç•Œé¢è®¾è®¡æ ¹æ®æˆ‘ä»¬çš„æŒ‘æˆ˜å†…å®¹ï¼Œè§£å†³æ€è·¯æ˜¯ä½¿ç”¨Qt Designeræ¥è®¾è®¡ç•Œé¢ï¼Œä½¿ç”¨Pythonå®Œæˆä»£ç é€»è¾‘ã€‚æ‰“å¼€designer.exeï¼Œä¼šå¼¹å‡ºåˆ›å»ºæ–°çª—ä½“çš„çª—å£ï¼Œæˆ‘ä»¬ç›´æ¥ç‚¹å‡»â€œcreateâ€ï¼š ç•Œé¢çš„å·¦ä¾§æ˜¯Qtçš„å¸¸ç”¨æ§ä»¶â€Widget Boxâ€ï¼Œå³ä¾§æœ‰ä¸€ä¸ªæ§ä»¶å±æ€§çª—å£â€Property Editorâ€ï¼Œå…¶ä½™æš‚æ—¶ç”¨ä¸åˆ°ã€‚æœ¬ä¾‹ä¸­æˆ‘ä»¬åªç”¨åˆ°äº†â€Push Buttonâ€æ§ä»¶å’Œâ€Labelâ€æ§ä»¶ï¼šæœ€ä¸Šé¢çš„ä¸‰ä¸ªLabelæ§ä»¶ç”¨äºæ˜¾ç¤ºå›¾ç‰‡ï¼Œå¯ä»¥åœ¨å±æ€§çª—å£è°ƒæ•´å®ƒçš„å¤§å°ï¼Œæˆ‘ä»¬ç»Ÿä¸€è°ƒæ•´åˆ°150Ã—150ï¼š å¦å¤–ï¼Œæ§ä»¶ä¸Šæ˜¾ç¤ºçš„æ–‡å­—â€textâ€å±æ€§å’Œæ§ä»¶çš„åå­—â€objectNameâ€å±æ€§éœ€è¦ä¿®æ”¹ï¼Œä¾¿äºæ˜¾ç¤ºå’Œä»£ç è°ƒç”¨ã€‚å¯ä»¥æŒ‰ç…§ä¸‹é¢æˆ‘æ¨èçš„å‘½åï¼š æ§ä»¶ æ˜¾ç¤ºå†…å®¹text æ§ä»¶åobjectName PushButton æ‰“å¼€æ‘„åƒå¤´ btnOpenCamera PushButton æ•è·å›¾ç‰‡ btnCapture PushButton æ‰“å¼€å›¾ç‰‡ btnReadImage PushButton ç°åº¦åŒ– btnGray PushButton é˜ˆå€¼åˆ†å‰²(Otsu) btnThreshold Label æ‘„åƒå¤´ labelCamera Label æ•è·å›¾ labelCapture Label ç»“æœå›¾ labelResult è¿™æ ·å¤§è‡´ç•Œé¢å°±å‡ºæ¥äº†ï¼Œå¾ˆç®€å•ï¼š æŒ‰é’®äº‹ä»¶å¦‚æœä½ ä¹‹å‰æœ‰è¿‡ä¸€äº›GUIå¼€å‘ç»éªŒï¼Œæ¯”å¦‚MFCï¼ŒWinFormç­‰ï¼Œå°±çŸ¥é“GUIæ˜¯é€šè¿‡äº‹ä»¶é©±åŠ¨çš„ï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæ¯”å¦‚å‰é¢æˆ‘ä»¬å·²ç»è®¾è®¡å¥½äº†ç•Œé¢ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦å®ç°â€æ‰“å¼€æ‘„åƒå¤´â€åˆ°â€é˜ˆå€¼åˆ†å‰²â€è¿™5ä¸ªæŒ‰é’®çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯ç»™æ¯ä¸ªæŒ‰é’®æŒ‡å®šä¸€ä¸ªâ€å‡½æ•°â€ï¼Œé€»è¾‘ä»£ç å†™åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ã€‚è¿™ç§å‡½æ•°å°±ç§°ä¸ºäº‹ä»¶ï¼ŒQtä¸­ç§°ä¸ºæ§½è¿æ¥ã€‚ ç‚¹å‡»Designerå·¥å…·æ çš„â€Edit Signals/Slotsâ€æŒ‰é’®ï¼Œè¿›å…¥æ§½å‡½æ•°ç¼–è¾‘ç•Œé¢ï¼Œç‚¹å‡»æ—è¾¹çš„â€Edit Widgetsâ€å¯ä»¥æ¢å¤æ­£å¸¸è§†å›¾ï¼š ç„¶åç‚¹å‡»æŒ‰é’®å¹¶æ‹–åŠ¨ï¼Œå½“äº§ç”Ÿç±»ä¼¼äºç”µè·¯ä¸­çš„æ¥åœ°ç¬¦å·æ—¶é‡Šæ”¾é¼ æ ‡ï¼Œå‚çœ‹ä¸‹é¢åŠ¨å›¾ï¼š åœ¨å¼¹å‡ºçš„é…ç½®çª—å£ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å·¦ä¾§æ˜¯æŒ‰é’®çš„å¸¸ç”¨äº‹ä»¶ï¼Œæˆ‘ä»¬é€‰æ‹©ç‚¹å‡»äº‹ä»¶â€clicked()â€ï¼Œç„¶åæ·»åŠ ä¸€ä¸ªåä¸ºâ€btnOpenCamera_Clicked()â€çš„æ§½å‡½æ•°ï¼š é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç»™äº”ä¸ªæŒ‰é’®æ·»åŠ äº”ä¸ªæ§½å‡½æ•°ï¼Œæœ€ç»ˆç»“æœå¦‚ä¸‹ï¼š åˆ°æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ç•Œé¢è®¾è®¡çš„æ‰€æœ‰å·¥ä½œï¼ŒæŒ‰ä¸‹Ctrl+Sä¿å­˜å½“å‰çª—å£ä¸º.uiæ–‡ä»¶ã€‚.uiæ–‡ä»¶å…¶å®æ˜¯æŒ‰ç…§XMLæ ¼å¼æ ‡è®°çš„å†…å®¹ï¼Œå¯ä»¥ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å°†.uiæ–‡ä»¶æ‰“å¼€çœ‹çœ‹ã€‚ uiæ–‡ä»¶è½¬pyä»£ç å› ä¸ºæˆ‘ä»¬æ˜¯ç”¨Designerå·¥å…·è®¾è®¡å‡ºçš„ç•Œé¢ï¼Œå¹¶ä¸æ˜¯ç”¨Pythonä»£ç æ•²å‡ºæ¥çš„ï¼Œæ‰€ä»¥è¦æƒ³çœŸæ­£è¿è¡Œï¼Œéœ€è¦ä½¿ç”¨pyuic5å°†uiæ–‡ä»¶è½¬æˆpyæ–‡ä»¶ã€‚pyuic5.exeé»˜è®¤åœ¨%\\Scripts\\ä¸‹ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯åœ¨ï¼šD:\\ProgramData\\Anaconda3\\Scripts\\ã€‚ æ‰“å¼€cmdå‘½ä»¤è¡Œï¼Œåˆ‡æ¢åˆ°uiæ–‡ä»¶çš„ä¿å­˜ç›®å½•ã€‚Windowsä¸‹æœ‰ä¸ªå°æŠ€å·§ï¼Œå¯ä»¥åœ¨ç›®å½•çš„åœ°å€æ è¾“å…¥cmdï¼Œä¸€æ­¥åˆ‡æ¢åˆ°å½“å‰ç›®å½•ï¼š ç„¶åæ‰§è¡Œè¿™æ¡æŒ‡ä»¤ï¼š 1pyuic5 -o mainForm.py using_pyqt_create_ui.ui å¦‚æœå‡ºç°pyuic5ä¸æ˜¯å†…éƒ¨å‘½ä»¤çš„é”™è¯¯ï¼Œè¯´æ˜pyuic5çš„è·¯å¾„æ²¡æœ‰åœ¨ç¯å¢ƒå˜é‡é‡Œï¼Œæ·»åŠ ä¸‹å°±å¥½äº†ã€‚æ‰§è¡Œæ­£å¸¸çš„è¯ï¼Œå°±ä¼šç”ŸæˆmainForm.pyæ–‡ä»¶ï¼Œé‡Œé¢åº”è¯¥åŒ…å«ä¸€ä¸ªåä¸ºâ€Ui_MainWindowâ€çš„ç±»ã€‚ ç¼–å†™é€»è¾‘ä»£ç  ç»éªŒä¹‹è°ˆï¼šmainForm.pyæ–‡ä»¶æ˜¯æ ¹æ®uiæ–‡ä»¶ç”Ÿæˆçš„ï¼Œä¹Ÿå°±æ˜¯è¯´é‡æ–°ç”Ÿæˆä¼šè¦†ç›–æ‰ã€‚æ‰€ä»¥ä¸ºäº†ä½¿ç•Œé¢ä¸é€»è¾‘åˆ†ç¦»ï¼Œæˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ªé€»è¾‘æ–‡ä»¶ã€‚ åœ¨åŒä¸€å·¥ä½œç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªâ€mainEntry.pyâ€çš„æ–‡ä»¶ï¼Œå­˜æ”¾é€»è¾‘ä»£ç ã€‚ä»£ç ä¸­çš„æ¯éƒ¨åˆ†æˆ‘éƒ½å†™å¾—æ¯”è¾ƒç‹¬ç«‹ï¼Œæ²¡æœ‰å°è£…æˆå‡½æ•°ï¼Œä¾¿äºç†è§£ã€‚ä»£ç çœ‹ä¸Šå»å¾ˆé•¿ï¼Œä½†å¾ˆç®€å•ï¼Œå¯ä»¥æ¯ä¸ªæ¨¡å—å•ç‹¬çœ‹ï¼Œæœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æˆ‘åšäº†æ³¨é‡Šï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126import sysimport cv2from PyQt5 import QtCore, QtGui, QtWidgetsfrom PyQt5.QtCore import *from PyQt5.QtGui import *from PyQt5.QtWidgets import QFileDialog, QMainWindowfrom mainForm import Ui_MainWindowclass PyQtMainEntry(QMainWindow, Ui_MainWindow): def __init__(self): super().__init__() self.setupUi(self) self.camera = cv2.VideoCapture(0) self.is_camera_opened = False # æ‘„åƒå¤´æœ‰æ²¡æœ‰æ‰“å¼€æ ‡è®° # å®šæ—¶å™¨ï¼š30msæ•è·ä¸€å¸§ self._timer = QtCore.QTimer(self) self._timer.timeout.connect(self._queryFrame) self._timer.setInterval(30) def btnOpenCamera_Clicked(self): ''' æ‰“å¼€å’Œå…³é—­æ‘„åƒå¤´ ''' self.is_camera_opened = ~self.is_camera_opened if self.is_camera_opened: self.btnOpenCamera.setText(\"å…³é—­æ‘„åƒå¤´\") self._timer.start() else: self.btnOpenCamera.setText(\"æ‰“å¼€æ‘„åƒå¤´\") self._timer.stop() def btnCapture_Clicked(self): ''' æ•è·å›¾ç‰‡ ''' # æ‘„åƒå¤´æœªæ‰“å¼€ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ if not self.is_camera_opened: return self.captured = self.frame # åé¢è¿™å‡ è¡Œä»£ç å‡ ä¹éƒ½ä¸€æ ·ï¼Œå¯ä»¥å°è¯•å°è£…æˆä¸€ä¸ªå‡½æ•° rows, cols, channels = self.captured.shape bytesPerLine = channels * cols # Qtæ˜¾ç¤ºå›¾ç‰‡æ—¶ï¼Œéœ€è¦å…ˆè½¬æ¢æˆQImgageç±»å‹ QImg = QImage(self.captured.data, cols, rows, bytesPerLine, QImage.Format_RGB888) self.labelCapture.setPixmap(QPixmap.fromImage(QImg).scaled( self.labelCapture.size(), Qt.KeepAspectRatio, Qt.SmoothTransformation)) def btnReadImage_Clicked(self): ''' ä»æœ¬åœ°è¯»å–å›¾ç‰‡ ''' # æ‰“å¼€æ–‡ä»¶é€‰å–å¯¹è¯æ¡† filename, _ = QFileDialog.getOpenFileName(self, 'æ‰“å¼€å›¾ç‰‡') if filename: self.captured = cv2.imread(str(filename)) # OpenCVå›¾åƒä»¥BGRé€šé“å­˜å‚¨ï¼Œæ˜¾ç¤ºæ—¶éœ€è¦ä»BGRè½¬åˆ°RGB self.captured = cv2.cvtColor(self.captured, cv2.COLOR_BGR2RGB) rows, cols, channels = self.captured.shape bytesPerLine = channels * cols QImg = QImage(self.captured.data, cols, rows, bytesPerLine, QImage.Format_RGB888) self.labelCapture.setPixmap(QPixmap.fromImage(QImg).scaled( self.labelCapture.size(), Qt.KeepAspectRatio, Qt.SmoothTransformation)) def btnGray_Clicked(self): ''' ç°åº¦åŒ– ''' # å¦‚æœæ²¡æœ‰æ•è·å›¾ç‰‡ï¼Œåˆ™ä¸æ‰§è¡Œæ“ä½œ if not hasattr(self, \"captured\"): return self.cpatured = cv2.cvtColor(self.captured, cv2.COLOR_RGB2GRAY) rows, columns = self.cpatured.shape bytesPerLine = columns # ç°åº¦å›¾æ˜¯å•é€šé“ï¼Œæ‰€ä»¥éœ€è¦ç”¨Format_Indexed8 QImg = QImage(self.cpatured.data, columns, rows, bytesPerLine, QImage.Format_Indexed8) self.labelResult.setPixmap(QPixmap.fromImage(QImg).scaled( self.labelResult.size(), Qt.KeepAspectRatio, Qt.SmoothTransformation)) def btnThreshold_Clicked(self): ''' Otsuè‡ªåŠ¨é˜ˆå€¼åˆ†å‰² ''' if not hasattr(self, \"captured\"): return _, self.cpatured = cv2.threshold( self.cpatured, 0, 255, cv2.THRESH_BINARY + cv2.THRESH_OTSU) rows, columns = self.cpatured.shape bytesPerLine = columns # é˜ˆå€¼åˆ†å‰²å›¾ä¹Ÿæ˜¯å•é€šé“ï¼Œä¹Ÿéœ€è¦ç”¨Format_Indexed8 QImg = QImage(self.cpatured.data, columns, rows, bytesPerLine, QImage.Format_Indexed8) self.labelResult.setPixmap(QPixmap.fromImage(QImg).scaled( self.labelResult.size(), Qt.KeepAspectRatio, Qt.SmoothTransformation)) @QtCore.pyqtSlot() def _queryFrame(self): ''' å¾ªç¯æ•è·å›¾ç‰‡ ''' ret, self.frame = self.camera.read() img_rows, img_cols, channels = self.frame.shape bytesPerLine = channels * img_cols cv2.cvtColor(self.frame, cv2.COLOR_BGR2RGB, self.frame) QImg = QImage(self.frame.data, img_cols, img_rows, bytesPerLine, QImage.Format_RGB888) self.labelCamera.setPixmap(QPixmap.fromImage(QImg).scaled( self.labelCamera.size(), Qt.KeepAspectRatio, Qt.SmoothTransformation))if __name__ == \"__main__\": app = QtWidgets.QApplication(sys.argv) window = PyQtMainEntry() window.show() sys.exit(app.exec_()) æœ¬æ–‡åªæ˜¯æŠ›ç –å¼•ç‰ï¼Œä»‹ç»äº†PyQt5çš„ç®€å•ä½¿ç”¨ï¼Œæƒ³è¦æ·±å…¥å­¦ä¹ ï¼Œå¯ä»¥å‚è€ƒæœ¬æ–‡å¼€å¤´çš„å‚è€ƒèµ„æ–™å™¢(â—Ë‡âˆ€Ë‡â—) å¼•ç”¨ æœ¬èŠ‚æºç ","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"PyQt","slug":"PyQt","permalink":"http://www.codec.wang/tags/PyQt/"}]},{"title":"Python+OpenCVæ•™ç¨‹æŒ‘æˆ˜ä»»åŠ¡ï¼šç”»åŠ¨æ€æ—¶é’Ÿ","slug":"Python-OpenCVæ•™ç¨‹æŒ‘æˆ˜ä»»åŠ¡1ï¼šç”»åŠ¨æ€æ—¶é’Ÿ","date":"2017-12-09T09:29:34.000Z","updated":"2020-04-07T04:51:38.853Z","comments":true,"path":"opencv-python-clock-drawing/","link":"","permalink":"http://www.codec.wang/opencv-python-clock-drawing/","excerpt":"æŒ‘æˆ˜ä»»åŠ¡ï¼šä½¿ç”¨OpenCVç»˜åˆ¶ä¸€ä¸ªéšç³»ç»Ÿæ—¶é—´åŠ¨æ€å˜åŒ–çš„æ—¶é’Ÿã€‚","text":"æŒ‘æˆ˜ä»»åŠ¡ï¼šä½¿ç”¨OpenCVç»˜åˆ¶ä¸€ä¸ªéšç³»ç»Ÿæ—¶é—´åŠ¨æ€å˜åŒ–çš„æ—¶é’Ÿã€‚ æŒ‘æˆ˜å†…å®¹ å®Œæˆå¦‚ä¸‹å›¾æ‰€å±•ç¤ºçš„åŠ¨æ€æ—¶é’Ÿï¼Œæ—¶é’Ÿéœ€éšç³»ç»Ÿæ—¶é—´å˜åŒ–ï¼Œä¸­é—´æ˜¾ç¤ºå½“å‰æ—¥æœŸã€‚ å…¶å®æœ¬æ¬¡ä»»åŠ¡æ¶‰åŠçš„OpenCVçŸ¥è¯†å¹¶ä¸å¤šï¼Œä½†æœ‰åŠ©äºæå‡å¤§å®¶çš„ç¼–ç¨‹å®è·µèƒ½åŠ›ã€‚ æŒ‘æˆ˜é¢˜ä¸ä¼šåšä¹Ÿæœ¨æœ‰å…³ç³»ï¼Œä½†è¯·åŠ¡å¿…åœ¨è‡ªè¡Œå°è¯•åï¼Œå†çœ‹ä¸‹é¢çš„è§£ç­”å™¢ï¼Œä¸ç„¶â€¦æˆ‘ä¹Ÿæ²¡åŠæ³•(ï¿£â–½ï¿£)â€ æŒ‘æˆ˜è§£ç­”æ–¹æ¡ˆæœ¬æ¬¡æŒ‘æˆ˜ä»»åŠ¡æ—¨åœ¨æå‡å¤§å®¶çš„åŠ¨æ‰‹å®è·µèƒ½åŠ›ï¼Œè§£å†³å®é™…é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—å…ˆæœ‰ä¸ªè§£é¢˜æ€è·¯å’Œæ–¹æ¡ˆã€‚è§‚å¯Ÿä¸‹å¸¸è§çš„æ—¶é’Ÿè¡¨ç›˜ï¼š æ•´ä¸ªè¡¨ç›˜å…¶å®åªæœ‰3æ ¹è¡¨é’ˆåœ¨åŠ¨ï¼Œæ‰€ä»¥å¯ä»¥å…ˆç”»å‡ºé™æ€è¡¨ç›˜ï¼Œç„¶åè·å–ç³»ç»Ÿå½“å‰æ—¶é—´ï¼Œæ ¹æ®æ—¶é—´å®æ—¶åŠ¨æ€ç»˜åˆ¶3æ ¹è¡¨é’ˆå°±è§£å†³äº†ã€‚ ç»˜åˆ¶è¡¨ç›˜è¡¨ç›˜ä¸Šåªæœ‰60æ¡åˆ†/ç§’åˆ»çº¿å’Œ12æ¡å°æ—¶åˆ»çº¿ï¼Œå½“ç„¶è¿˜æœ‰è¡¨ç›˜çš„å¤–éƒ¨è½®å»“åœ†ï¼Œä¹Ÿå°±æ˜¯é‡ç‚¹åœ¨å¦‚ä½•ç”»72æ ¹çº¿ã€‚å…ˆæŠŠç®€å•çš„åœ†ç”»å‡ºæ¥ï¼š 123456789101112131415import cv2import mathimport datetimeimport numpy as npmargin = 5 # ä¸Šä¸‹å·¦å³è¾¹è·radius = 220 # åœ†çš„åŠå¾„center = (center_x, center_y) = (225, 225) # åœ†å¿ƒ# 1. æ–°å»ºä¸€ä¸ªç”»æ¿å¹¶å¡«å……æˆç™½è‰²img = np.zeros((450, 450, 3), np.uint8)img[:] = (255, 255, 255)# 2. ç”»å‡ºåœ†ç›˜cv2.circle(img, center, radius, (0, 0, 0), thickness=5) å‰é¢æˆ‘ä»¬ä½¿ç”¨OpenCVç”»ç›´çº¿çš„æ—¶å€™ï¼Œéœ€çŸ¥é“ç›´çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹åæ ‡ï¼Œé‚£ä¹ˆç”»72æ ¹çº¿å°±å˜æˆäº†è·å–72ç»„åæ ‡ã€‚ åœ¨å¹³é¢åæ ‡ç³»ä¸‹ï¼Œå·²çŸ¥åŠå¾„å’Œè§’åº¦çš„è¯ï¼ŒAç‚¹çš„åæ ‡å¯ä»¥è¡¨ç¤ºä¸ºï¼š$$\\begin{matrix} x=r\\times \\cos\\alpha \\newline y=r\\times \\sin\\alpha\\end{matrix}$$ å…ˆåªè€ƒè™‘å°†åæ ‡ç³»åŸç‚¹ç§»åŠ¨åˆ°å·¦ä¸Šè§’ï¼Œè§’åº¦ä¾ç„¶æ˜¯å¹³é¢åæ ‡ç³»ä¸­çš„é€†æ—¶é’ˆè®¡ç®—ï¼Œé‚£ä¹ˆæ–°åæ ‡æ˜¯ï¼š $$\\begin{matrix} x=r+r\\times \\cos\\alpha \\newline y=r+r\\times \\sin\\alpha\\end{matrix}$$ å¯¹äº60æ¡åˆ†/ç§’åˆ»çº¿ï¼Œåˆ»çº¿é—´çš„å¤¹è§’æ˜¯360Â°/60=6Â°ï¼Œå¯¹äºå°æ—¶åˆ»çº¿ï¼Œè§’åº¦æ˜¯360Â°/12=30Â°ï¼Œè¿™æ ·å°±å¾—åˆ°äº†72ç»„èµ·ç‚¹åæ ‡ï¼Œé‚£æ€ä¹ˆå¾—åˆ°ç»ˆç‚¹åæ ‡å‘¢ï¼Ÿå…¶å®åŒæ ·çš„åŸç†ï¼Œç”¨ä¸€ä¸ªåŒå¿ƒçš„å°åœ†æ¥è®¡ç®—å¾—åˆ°Bç‚¹ï¼š é€šè¿‡A/Bä¸¤ç‚¹å°±å¯ä»¥ç”»å‡ºç›´çº¿ï¼š 123456789101112131415161718192021222324pt1 = []# 3. ç”»å‡º60æ¡ç§’å’Œåˆ†é’Ÿçš„åˆ»çº¿for i in range(60): # æœ€å¤–éƒ¨åœ†ï¼Œè®¡ç®—Aç‚¹ x1 = center_x+(radius-margin)*math.cos(i*6*np.pi/180.0) y1 = center_y+(radius-margin)*math.sin(i*6*np.pi/180.0) pt1.append((int(x1), int(y1))) # åŒå¿ƒå°åœ†ï¼Œè®¡ç®—Bç‚¹ x2 = center_x+(radius-15)*math.cos(i*6*np.pi/180.0) y2 = center_y+(radius-15)*math.sin(i*6*np.pi/180.0) cv2.line(img, pt1[i], (int(x2), int(y2)), (0, 0, 0), thickness=2)# 4. ç”»å‡º12æ¡å°æ—¶çš„åˆ»çº¿for i in range(12): # 12æ¡å°æ—¶åˆ»çº¿åº”è¯¥æ›´é•¿ä¸€ç‚¹ x = center_x+(radius-25)*math.cos(i*30*np.pi/180.0) y = center_y+(radius-25)*math.sin(i*30*np.pi/180.0) # è¿™é‡Œç”¨åˆ°äº†å‰é¢çš„pt1 cv2.line(img, pt1[i*5], (int(x), int(y)), (0, 0, 0), thickness=5)# åˆ°è¿™é‡ŒåŸºæœ¬çš„è¡¨ç›˜å›¾å°±å·²ç»ç”»å‡ºæ¥äº† è§’åº¦æ¢ç®—æ¥ä¸‹æ¥ç®—æ˜¯ä¸€ä¸ªå°éš¾ç‚¹ï¼Œé¦–å…ˆæ—¶é’Ÿçš„èµ·å§‹åæ ‡åœ¨æ­£å¸¸äºŒç»´åæ ‡ç³»çš„90Â°æ–¹å‘ï¼Œå…¶æ¬¡æ—¶é’Ÿè·Ÿå›¾åƒä¸€æ ·ï¼Œéƒ½æ˜¯é¡ºæ—¶é’ˆè®¡ç®—è§’åº¦çš„ï¼Œæ‰€ä»¥ä¸‰è€…éœ€è¦ç»Ÿä¸€ä¸‹ï¼š å› ä¸ºè§’åº¦æ˜¯å®Œå…¨å¯¹ç§°çš„ï¼Œé¡ºé€†æ—¶é’ˆæ²¡æœ‰å½±å“ï¼Œæ‰€ä»¥å¹³é¢åæ ‡ç³»å®Œå…¨ä¸ç”¨ç†ä¼šï¼Œæ”¾åœ¨è¿™é‡Œåªæ˜¯ä¾¿äºå¤§å®¶ç†è§£ã€‚å¯¹äºæ—¶é’Ÿåæ ‡å’Œå›¾åƒåæ ‡ï¼Œæ—¶é’Ÿ0çš„0Â°å¯¹åº”å›¾åƒçš„270Â°ï¼Œæ—¶é’Ÿ15çš„90Â°å¯¹åº”å›¾åƒçš„360Â°ï¼Œæ—¶é’Ÿ30çš„180Â°å¯¹åº”å›¾åƒçš„450Â°ï¼ˆ360Â°+90Â°ï¼‰â€¦ æ‰€ä»¥ä¸¤è€…ä¹‹é—´çš„å…³ç³»ä¾¿æ˜¯ï¼š 12è®¡ç®—è§’åº¦ &#x3D; æ—¶é’Ÿè§’åº¦+270Â°è®¡ç®—è§’åº¦ &#x3D; è®¡ç®—è§’åº¦ if è®¡ç®—è§’åº¦&lt;&#x3D;360Â° else è®¡ç®—è§’åº¦-360Â° åŒæ­¥æ—¶é—´Pythonä¸­å¦‚ä½•è·å–å½“å‰æ—¶é—´å’Œæ·»åŠ æ—¥æœŸæ–‡å­—éƒ½æ¯”è¾ƒç®€å•ï¼Œçœ‹ä»£ç å°±è¡Œï¼Œæˆ‘å°±ä¸è§£é‡Šäº†ã€‚ä»£ç ä¸­è§’åº¦è®¡ç®—æˆ‘æ¢äº†ä¸€ç§æ–¹å¼ï¼Œå…¶å®æ˜¯ä¸€æ ·çš„ï¼Œçœ‹ä½ èƒ½ä¸èƒ½çœ‹æ‡‚(â—Ë‡âˆ€Ë‡â—)ï¼š 1234567891011121314151617181920212223242526272829303132333435while(1): # ä¸æ–­æ‹·è´è¡¨ç›˜å›¾ï¼Œæ‰èƒ½æ›´æ–°ç»˜åˆ¶ï¼Œä¸ç„¶ä¼šé‡å åœ¨ä¸€èµ· temp = np.copy(img) # 5. è·å–ç³»ç»Ÿæ—¶é—´ï¼Œç”»å‡ºåŠ¨æ€çš„æ—¶-åˆ†-ç§’ä¸‰æ¡åˆ»çº¿ now_time = datetime.datetime.now() hour, minute, second = now_time.hour, now_time.minute, now_time.second # ç”»ç§’åˆ»çº¿ # OpenCVä¸­çš„è§’åº¦æ˜¯é¡ºæ—¶é’ˆè®¡ç®—çš„ï¼Œæ‰€ä»¥éœ€è¦è½¬æ¢ä¸‹ sec_angle = second*6+270 if second &lt;= 15 else (second-15)*6 sec_x = center_x+(radius-margin)*math.cos(sec_angle*np.pi/180.0) sec_y = center_y+(radius-margin)*math.sin(sec_angle*np.pi/180.0) cv2.line(temp, center, (int(sec_x), int(sec_y)), (203, 222, 166), 2) # ç”»åˆ†åˆ»çº¿ min_angle = minute*6+270 if minute &lt;= 15 else (minute-15)*6 min_x = center_x+(radius-35)*math.cos(min_angle*np.pi/180.0) min_y = center_y+(radius-35)*math.sin(min_angle*np.pi/180.0) cv2.line(temp, center, (int(min_x), int(min_y)), (186, 199, 137), 8) # ç”»æ—¶åˆ»çº¿ hour_angle = hour*30+270 if hour &lt;= 3 else (hour-3)*30 hour_x = center_x+(radius-65)*math.cos(hour_angle*np.pi/180.0) hour_y = center_y+(radius-65)*math.sin(hour_angle*np.pi/180.0) cv2.line(temp, center, (int(hour_x), int(hour_y)), (169, 198, 26), 15) # 6. æ·»åŠ å½“å‰æ—¥æœŸæ–‡å­— font = cv2.FONT_HERSHEY_SIMPLEX time_str = now_time.strftime(\"%d/%m/%Y\") cv2.putText(img, time_str, (135, 275), font, 1, (0, 0, 0), 2) cv2.imshow('clocking', temp) if cv2.waitKey(1) == 27: # æŒ‰ä¸‹ESCé”®é€€å‡º break æœ¬æ­¤æŒ‘æˆ˜æ—¨åœ¨é”»ç‚¼ä¸€æ­¥æ­¥è§£å†³å®é™…é—®é¢˜çš„æ€è·¯ï¼ˆè™½ç„¶æœ‰ç‚¹æ•°å­¦çŸ¥è¯†(ï¿£â–½ï¿£)â€ï¼‰ï¼Œå¤§å®¶å†æ¥å†å‰å™¢ï¼ å¼•ç”¨ æœ¬èŠ‚æºç ","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"PyQt","slug":"PyQt","permalink":"http://www.codec.wang/tags/PyQt/"}]},{"title":"Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡6ï¼šé¼ æ ‡ç»˜å›¾","slug":"Python-OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡6ï¼šé¼ æ ‡ç»˜å›¾","date":"2017-12-09T09:28:34.000Z","updated":"2020-04-07T04:53:41.991Z","comments":true,"path":"opencv-python-extra-drawing-with-mouse/","link":"","permalink":"http://www.codec.wang/opencv-python-extra-drawing-with-mouse/","excerpt":"å­¦ä¹ å¦‚ä½•ç”¨é¼ æ ‡å®æ—¶ç»˜å›¾ã€‚","text":"å­¦ä¹ å¦‚ä½•ç”¨é¼ æ ‡å®æ—¶ç»˜å›¾ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ æ•è·é¼ æ ‡äº‹ä»¶ OpenCVå‡½æ•°ï¼šcv2.setMouseCallback() æ•™ç¨‹çŸ¥é“é¼ æ ‡åœ¨å“ªå„¿OpenCVä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªé¼ æ ‡çš„å›è°ƒå‡½æ•°æ¥è·å–é¼ æ ‡å½“å‰çš„ä½ç½®ã€å½“å‰çš„äº‹ä»¶å¦‚å·¦é”®æŒ‰ä¸‹/å·¦é”®é‡Šæ”¾æˆ–æ˜¯å³é”®å•å‡»ç­‰ç­‰ï¼Œç„¶åæ‰§è¡Œç›¸åº”çš„åŠŸèƒ½ã€‚ ä½¿ç”¨cv2.setMouseCallback()æ¥åˆ›å»ºé¼ æ ‡çš„å›è°ƒå‡½æ•°ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨å·¦é”®å•å‡»çš„æ—¶å€™ï¼Œæ‰“å°å‡ºå½“å‰é¼ æ ‡çš„ä½ç½®ï¼š 12345678910111213141516171819import cv2import numpy as np# é¼ æ ‡çš„å›è°ƒå‡½æ•°def mouse_event(event, x, y, flags, param): # é€šè¿‡eventåˆ¤æ–­å…·ä½“æ˜¯ä»€ä¹ˆäº‹ä»¶ï¼Œè¿™é‡Œæ˜¯å·¦é”®æŒ‰ä¸‹ if event == cv2.EVENT_LBUTTONDOWN: print((x, y))img = np.zeros((512, 512, 3), np.uint8)cv2.namedWindow('image')# å®šä¹‰é¼ æ ‡çš„å›è°ƒå‡½æ•°cv2.setMouseCallback('image', mouse_event)while(True): cv2.imshow('image', img) # æŒ‰ä¸‹ESCé”®é€€å‡º if cv2.waitKey(20) == 27: break ä¸Šé¢çš„ä»£ç å…ˆå®šä¹‰é¼ æ ‡çš„å›è°ƒå‡½æ•°mouse_event()ï¼Œç„¶ååœ¨å›è°ƒå‡½æ•°ä¸­åˆ¤æ–­æ˜¯å¦æ˜¯å·¦é”®å•å‡»äº‹ä»¶ EVENT_LBUTTONDOWNï¼Œæ˜¯çš„è¯å°±æ‰“å°å‡ºåæ ‡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°æ ¼å¼æ˜¯å›ºå®šçš„ï¼Œä¸è¦éšæ„æ›´æ”¹ã€‚ é‚£é™¤äº†å·¦é”®å•å‡»ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›äº‹ä»¶å‘¢ï¼Ÿå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ‰“å°å‡ºæ¥ï¼š 123# è·å–æ‰€æœ‰çš„äº‹ä»¶events = [i for i in dir(cv2) if 'EVENT' in i]print(events) ç»¼åˆå®ä¾‹ç°åœ¨æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªç»¼åˆçš„ä¾‹å­ï¼Œè¿™ä¸ªå®ä¾‹ä¼šå¸®åŠ©ä½ ç†è§£å›¾åƒäº¤äº’çš„ä¸€äº›æ€æƒ³ï¼š åœ¨å›¾åƒä¸Šç”¨é¼ æ ‡ç”»å›¾ï¼Œå¯ä»¥ç”»åœ†æˆ–çŸ©å½¢ï¼ŒæŒ‰mé”®åœ¨ä¸¤ç§æ¨¡å¼ä¸‹åˆ‡æ¢ã€‚å·¦é”®æŒ‰ä¸‹æ—¶å¼€å§‹ç”»å›¾ï¼Œç§»åŠ¨åˆ°å“ªå„¿ç”»åˆ°å“ªå„¿ï¼Œå·¦é”®é‡Šæ”¾æ—¶ç»“æŸç”»å›¾ã€‚å¬ä¸Šå»å¾ˆå¤æ‚ï¼Œæ˜¯å—ï¼Ÿä¸€æ­¥æ­¥æ¥çœ‹ï¼š ç”¨é¼ æ ‡ç”»å›¾ï¼šéœ€è¦å®šä¹‰é¼ æ ‡çš„å›è°ƒå‡½æ•°mouse_event ç”»åœ†æˆ–çŸ©å½¢ï¼šéœ€è¦å®šä¹‰ä¸€ä¸ªç”»å›¾çš„æ¨¡å¼mode å·¦é”®å•å‡»ã€ç§»åŠ¨ã€é‡Šæ”¾ï¼šéœ€è¦æ•è·ä¸‰ä¸ªä¸åŒçš„äº‹ä»¶ å¼€å§‹ç”»å›¾ï¼Œç»“æŸç”»å›¾ï¼šéœ€è¦å®šä¹‰ä¸€ä¸ªç”»å›¾çš„æ ‡è®°ä½drawing å¥½ï¼Œå¼€å§‹codingå§ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041import cv2import numpy as npdrawing = False # æ˜¯å¦å¼€å§‹ç”»å›¾mode = True # Trueï¼šç”»çŸ©å½¢ï¼ŒFalseï¼šç”»åœ†start = (-1, -1)def mouse_event(event, x, y, flags, param): global start, drawing, mode # å·¦é”®æŒ‰ä¸‹ï¼šå¼€å§‹ç”»å›¾ if event == cv2.EVENT_LBUTTONDOWN: drawing = True start = (x, y) # é¼ æ ‡ç§»åŠ¨ï¼Œç”»å›¾ elif event == cv2.EVENT_MOUSEMOVE: if drawing: if mode: cv2.rectangle(img, start, (x, y), (0, 255, 0), 1) else: cv2.circle(img, (x, y), 5, (0, 0, 255), -1) # å·¦é”®é‡Šæ”¾ï¼šç»“æŸç”»å›¾ elif event == cv2.EVENT_LBUTTONUP: drawing = False if mode: cv2.rectangle(img, start, (x, y), (0, 255, 0), 1) else: cv2.circle(img, (x, y), 5, (0, 0, 255), -1)img = np.zeros((512, 512, 3), np.uint8)cv2.namedWindow('image')cv2.setMouseCallback('image', mouse_event)while(True): cv2.imshow('image', img) # æŒ‰ä¸‹måˆ‡æ¢æ¨¡å¼ if cv2.waitKey(1) == ord('m'): mode = not mode elif cv2.waitKey(1) == 27: break æ•ˆæœåº”è¯¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å°ç»“ è¦ç”¨é¼ æ ‡ç»˜å›¾ï¼Œéœ€è¦ç”¨cv2.setMouseCallback()å®šä¹‰å›è°ƒå‡½æ•°ï¼Œç„¶ååœ¨å›è°ƒå‡½æ•°ä¸­æ ¹æ®ä¸åŒçš„eventäº‹ä»¶ï¼Œæ‰§è¡Œä¸åŒçš„åŠŸèƒ½ã€‚ ç»ƒä¹ 1.ï¼ˆé€‰åšï¼‰å®ç°ç”¨é¼ æ ‡ç”»çŸ©å½¢ï¼Œè·Ÿå®ä¾‹å·®ä¸å¤šï¼Œä½†åªå®æ—¶ç”»ä¸€ä¸ªï¼Œç±»ä¼¼ä¸‹é¢åŠ¨å›¾ï¼š 2.ï¼ˆé€‰åšï¼‰åšä¸€ä¸ªåœ¨ç™½è‰²é¢æ¿ä¸Šç»˜å›¾çš„ç®€å•ç¨‹åºï¼Œå¯ç”¨æ»‘åŠ¨æ¡è°ƒæ•´é¢œè‰²å’Œç¬”åˆ·å¤§å°ã€‚ å¼•ç”¨ æœ¬èŠ‚æºç  Mouse as a Paint-Brush","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"ç»˜å›¾","slug":"ç»˜å›¾","permalink":"http://www.codec.wang/tags/%E7%BB%98%E5%9B%BE/"}]},{"title":"Python+OpenCVæ•™ç¨‹8ï¼šç»˜å›¾åŠŸèƒ½","slug":"Python-OpenCVæ•™ç¨‹8ï¼šç»˜å›¾åŠŸèƒ½","date":"2017-12-09T03:29:48.000Z","updated":"2020-04-07T04:44:26.210Z","comments":true,"path":"opencv-python-drawing-function/","link":"","permalink":"http://www.codec.wang/opencv-python-drawing-function/","excerpt":"å­¦ä¹ ç”»çº¿ã€åœ†å’ŒçŸ©å½¢ç­‰å¤šç§å‡ ä½•å½¢çŠ¶ï¼Œç»™å›¾ç‰‡æ·»åŠ æ–‡å­—ã€‚","text":"å­¦ä¹ ç”»çº¿ã€åœ†å’ŒçŸ©å½¢ç­‰å¤šç§å‡ ä½•å½¢çŠ¶ï¼Œç»™å›¾ç‰‡æ·»åŠ æ–‡å­—ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ ç»˜åˆ¶å„ç§å‡ ä½•å½¢çŠ¶ã€æ·»åŠ æ–‡å­— OpenCVå‡½æ•°ï¼šcv2.line(), cv2.circle(), cv2.rectangle(), cv2.ellipse(), cv2.putText() æ•™ç¨‹å‚æ•°è¯´æ˜ç»˜åˆ¶å½¢çŠ¶çš„å‡½æ•°æœ‰ä¸€äº›å…±åŒçš„å‚æ•°ï¼Œæå‰åœ¨æ­¤è¯´æ˜ä¸€ä¸‹ï¼š imgï¼šè¦ç»˜åˆ¶å½¢çŠ¶çš„å›¾ç‰‡ colorï¼šç»˜åˆ¶çš„é¢œè‰² å½©è‰²å›¾å°±ä¼ å…¥BGRçš„ä¸€ç»„å€¼ï¼Œå¦‚è“è‰²å°±æ˜¯(255,0,0) ç°åº¦å›¾ï¼Œä¼ å…¥ä¸€ä¸ªç°åº¦å€¼å°±è¡Œ thicknessï¼šçº¿å®½ï¼Œé»˜è®¤ä¸º1ï¼›å¯¹äºçŸ©å½¢/åœ†ä¹‹ç±»çš„å°é—­å½¢çŠ¶è€Œè¨€ï¼Œä¼ å…¥-1è¡¨ç¤ºå¡«å……å½¢çŠ¶ éœ€è¦å¯¼å…¥çš„æ¨¡å—å’Œæ˜¾ç¤ºå›¾ç‰‡çš„é€šç”¨ä»£ç ï¼š 123456import cv2import numpy as npimport matplotlib.pyplot as pltcv2.imshow('img', img)cv2.waitKey(0) ä¸Šå›¾å°±æ˜¯æœ¬æ•™ç¨‹ç»˜åˆ¶çš„æœ€ç»ˆæ•ˆæœï¼Œä¸‹é¢ä¸€æ­¥æ­¥æ¥çœ‹ï¼š ç”»çº¿ç”»ç›´çº¿åªéœ€æŒ‡å®šèµ·ç‚¹å’Œç»ˆç‚¹çš„åæ ‡å°±è¡Œï¼š 1234# åˆ›å»ºä¸€å‰¯é»‘è‰²çš„å›¾ç‰‡img = np.zeros((512, 512, 3), np.uint8)# ç”»ä¸€æ¡çº¿å®½ä¸º5çš„è“è‰²ç›´çº¿ï¼Œå‚æ•°2ï¼šèµ·ç‚¹ï¼Œå‚æ•°3ï¼šç»ˆç‚¹cv2.line(img, (0, 0), (512, 512), (255, 0, 0), 5) ç»éªŒä¹‹è°ˆï¼šæ‰€æœ‰ç»˜å›¾å‡½æ•°å‡ä¼šç›´æ¥å½±å“åŸå›¾ç‰‡ï¼Œè¿™ç‚¹è¦æ³¨æ„ã€‚ ç”»çŸ©å½¢ç”»çŸ©å½¢éœ€è¦çŸ¥é“å·¦ä¸Šè§’å’Œå³ä¸‹è§’çš„åæ ‡ï¼š 12# ç”»ä¸€ä¸ªç»¿è‰²è¾¹æ¡†çš„çŸ©å½¢ï¼Œå‚æ•°2ï¼šå·¦ä¸Šè§’åæ ‡ï¼Œå‚æ•°3ï¼šå³ä¸‹è§’åæ ‡cv2.rectangle(img, (384, 0), (510, 128), (0, 255, 0), 3) ç”»åœ†ç”»åœ†éœ€è¦æŒ‡å®šåœ†å¿ƒå’ŒåŠå¾„ï¼Œæ³¨æ„ä¸‹é¢çš„ä¾‹å­ä¸­çº¿å®½=-1ä»£è¡¨å¡«å……ï¼š 12# ç”»ä¸€ä¸ªå¡«å……çº¢è‰²çš„åœ†ï¼Œå‚æ•°2ï¼šåœ†å¿ƒåæ ‡ï¼Œå‚æ•°3ï¼šåŠå¾„cv2.circle(img, (447, 63), 63, (0, 0, 255), -1) ç”»æ¤­åœ†ç”»æ¤­åœ†éœ€è¦çš„å‚æ•°æ¯”è¾ƒå¤šï¼Œè¯·å¯¹ç…§åé¢çš„ä»£ç ç†è§£è¿™å‡ ä¸ªå‚æ•°ï¼š å‚æ•°2ï¼šæ¤­åœ†ä¸­å¿ƒ(x,y) å‚æ•°3ï¼šx/yè½´çš„é•¿åº¦ å‚æ•°4ï¼šangleâ€”æ¤­åœ†çš„æ—‹è½¬è§’åº¦ å‚æ•°5ï¼šstartAngleâ€”æ¤­åœ†çš„èµ·å§‹è§’åº¦ å‚æ•°6ï¼šendAngleâ€”æ¤­åœ†çš„ç»“æŸè§’åº¦ ç»éªŒä¹‹è°ˆï¼šOpenCVä¸­åŸç‚¹åœ¨å·¦ä¸Šè§’ï¼Œæ‰€ä»¥è¿™é‡Œçš„è§’åº¦æ˜¯ä»¥é¡ºæ—¶é’ˆæ–¹å‘è®¡ç®—çš„ã€‚ 12# åœ¨å›¾ä¸­å¿ƒç”»ä¸€ä¸ªå¡«å……çš„åŠåœ†cv2.ellipse(img, (256, 256), (100, 50), 0, 0, 180, (255, 0, 0), -1) ç”»å¤šè¾¹å½¢ç”»å¤šè¾¹å½¢éœ€è¦æŒ‡å®šä¸€ç³»åˆ—å¤šè¾¹å½¢çš„é¡¶ç‚¹åæ ‡ï¼Œç›¸å½“äºä»ç¬¬ä¸€ä¸ªç‚¹åˆ°ç¬¬äºŒä¸ªç‚¹ç”»ç›´çº¿ï¼Œå†ä»ç¬¬äºŒä¸ªç‚¹åˆ°ç¬¬ä¸‰ä¸ªç‚¹ç”»ç›´çº¿â€¦. OpenCVä¸­éœ€è¦å…ˆå°†å¤šè¾¹å½¢çš„é¡¶ç‚¹åæ ‡éœ€è¦å˜æˆé¡¶ç‚¹æ•°Ã—1Ã—2ç»´çš„çŸ©é˜µï¼Œå†æ¥ç»˜åˆ¶ï¼š 12345# å®šä¹‰å››ä¸ªé¡¶ç‚¹åæ ‡pts = np.array([[10, 5], [50, 10], [70, 20], [20, 30]], np.int32)# é¡¶ç‚¹ä¸ªæ•°ï¼š4ï¼ŒçŸ©é˜µå˜æˆ4*1*2ç»´pts = pts.reshape((-1, 1, 2))cv2.polylines(img, [pts], True, (0, 255, 255)) cv2.polylines()çš„å‚æ•°3å¦‚æœæ˜¯Falseçš„è¯ï¼Œå¤šè¾¹å½¢å°±ä¸é—­åˆã€‚ ç»éªŒä¹‹è°ˆï¼šå¦‚æœéœ€è¦ç»˜åˆ¶å¤šæ¡ç›´çº¿ï¼Œä½¿ç”¨cv2.polylines()è¦æ¯”cv2.line()é«˜æ•ˆå¾ˆå¤šï¼Œä¾‹å¦‚ï¼š 12345# ä½¿ç”¨cv2.polylines()ç”»å¤šæ¡ç›´çº¿line1 = np.array([[100, 20], [300, 20]], np.int32).reshape((-1, 1, 2))line2 = np.array([[100, 60], [300, 60]], np.int32).reshape((-1, 1, 2))line3 = np.array([[100, 100], [300, 100]], np.int32).reshape((-1, 1, 2))cv2.polylines(img, [line1, line2, line3], True, (0, 255, 255)) æ·»åŠ æ–‡å­—ä½¿ç”¨cv2.putText()æ·»åŠ æ–‡å­—ï¼Œå®ƒçš„å‚æ•°ä¹Ÿæ¯”è¾ƒå¤šï¼ŒåŒæ ·è¯·å¯¹ç…§åé¢çš„ä»£ç ç†è§£è¿™å‡ ä¸ªå‚æ•°ï¼š å‚æ•°2ï¼šè¦æ·»åŠ çš„æ–‡æœ¬ å‚æ•°3ï¼šæ–‡å­—çš„èµ·å§‹åæ ‡ï¼ˆå·¦ä¸‹è§’ä¸ºèµ·ç‚¹ï¼‰ å‚æ•°4ï¼šå­—ä½“ å‚æ•°5ï¼šæ–‡å­—å¤§å°ï¼ˆç¼©æ”¾æ¯”ä¾‹ï¼‰ 1234# æ·»åŠ æ–‡å­—font = cv2.FONT_HERSHEY_SIMPLEXcv2.putText(img, 'ex2tron', (10, 500), font, 4, (255, 255, 255), 2, lineType=cv2.LINE_AA) å­—ä½“å¯å‚è€ƒï¼šHersheyFontsã€‚å¦å¤–ï¼Œè¿™é‡Œæœ‰ä¸ªçº¿å‹lineTypeå‚æ•°ï¼ŒLINE_AAè¡¨ç¤ºæŠ—é”¯é½¿çº¿å‹ï¼Œå…·ä½“å¯è§LineTypes å°ç»“ cv2.line()ç”»ç›´çº¿ï¼Œcv2.circle()ç”»åœ†ï¼Œcv2.rectangle()ç”»çŸ©å½¢ï¼Œcv2.ellipse()ç”»æ¤­åœ†ï¼Œcv2.polylines()ç”»å¤šè¾¹å½¢ï¼Œcv2.putText()æ·»åŠ æ–‡å­—ã€‚ ç”»å¤šæ¡ç›´çº¿æ—¶ï¼Œcv2.polylines()è¦æ¯”cv2.line()é«˜æ•ˆå¾ˆå¤šã€‚ ç»ƒä¹  ä½ èƒ½ç”¨å·²å­¦çš„ç»˜å›¾åŠŸèƒ½ç”»å‡ºOpenCVçš„logoå—ï¼Ÿ(æç¤ºï¼šæ¤­åœ†å’Œåœ†) æ¥å£æ–‡æ¡£ cv2.line() cv2.circle() cv2.rectangle() cv2.ellipse() cv2.putText() cv2.polylines() å¼•ç”¨ æœ¬èŠ‚æºç  LineTypes Drawing Functions in OpenCV","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"ç»˜å›¾","slug":"ç»˜å›¾","permalink":"http://www.codec.wang/tags/%E7%BB%98%E5%9B%BE/"}]},{"title":"Python-OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡5ï¼šä»¿å°„å˜æ¢ä¸é€è§†å˜æ¢","slug":"Python-OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡5ï¼šä»¿å°„å˜æ¢ä¸é€è§†å˜æ¢","date":"2017-12-08T07:36:53.000Z","updated":"2020-04-07T15:41:44.398Z","comments":true,"path":"opencv-python-extra-warpaffine-warpperspective/","link":"","permalink":"http://www.codec.wang/opencv-python-extra-warpaffine-warpperspective/","excerpt":"å¸¸è§çš„2Då›¾åƒå˜æ¢ä»åŸç†ä¸Šè®²ä¸»è¦åŒ…æ‹¬åŸºäº2Ã—3çŸ©é˜µçš„ä»¿å°„å˜æ¢å’ŒåŸºäº3Ã—3çŸ©é˜µé€è§†å˜æ¢ã€‚","text":"å¸¸è§çš„2Då›¾åƒå˜æ¢ä»åŸç†ä¸Šè®²ä¸»è¦åŒ…æ‹¬åŸºäº2Ã—3çŸ©é˜µçš„ä»¿å°„å˜æ¢å’ŒåŸºäº3Ã—3çŸ©é˜µé€è§†å˜æ¢ã€‚ ä»¿å°„å˜æ¢åŸºæœ¬çš„å›¾åƒå˜æ¢å°±æ˜¯äºŒç»´åæ ‡çš„å˜æ¢ï¼šä»ä¸€ç§äºŒç»´åæ ‡(x,y)åˆ°å¦ä¸€ç§äºŒç»´åæ ‡(u,v)çš„çº¿æ€§å˜æ¢ï¼š $$\\begin{matrix} u=a_1x+b_1y+c_1 \\newline v=a_2x+b_2y+c_2 \\end{matrix}$$å¦‚æœå†™æˆçŸ©é˜µçš„å½¢å¼ï¼Œå°±æ˜¯ï¼š$$\\left[ \\begin{matrix} u \\newline v \\end{matrix} \\right] = \\left[ \\begin{matrix} a_1 &amp; b_1 \\newline a_2 &amp; b_2 \\end{matrix} \\right] \\left[ \\begin{matrix} x \\newline y \\end{matrix} \\right]+\\left[ \\begin{matrix} c_1 \\newline c_2 \\end{matrix} \\right]$$ä½œå¦‚ä¸‹å®šä¹‰ï¼š$$R=\\left[ \\begin{matrix} a_1 &amp; b_1 \\newline a_2 &amp; b_2 \\end{matrix} \\right], t=\\left[ \\begin{matrix} c_1 \\newline c_2 \\end{matrix} \\right],T=\\left[ \\begin{matrix} R &amp; t \\end{matrix} \\right]$$çŸ©é˜µT(2Ã—3)å°±ç§°ä¸ºä»¿å°„å˜æ¢çš„å˜æ¢çŸ©é˜µï¼ŒRä¸ºçº¿æ€§å˜æ¢çŸ©é˜µï¼Œtä¸ºå¹³ç§»çŸ©é˜µï¼Œç®€å•æ¥è¯´ï¼Œä»¿å°„å˜æ¢å°±æ˜¯çº¿æ€§å˜æ¢+å¹³ç§»ã€‚å˜æ¢åç›´çº¿ä¾ç„¶æ˜¯ç›´çº¿ï¼Œå¹³è¡Œçº¿ä¾ç„¶æ˜¯å¹³è¡Œçº¿ï¼Œç›´çº¿é—´çš„ç›¸å¯¹ä½ç½®å…³ç³»ä¸å˜ï¼Œå› æ­¤éå…±çº¿çš„ä¸‰ä¸ªå¯¹åº”ç‚¹ä¾¿å¯ç¡®å®šå”¯ä¸€çš„ä¸€ä¸ªä»¿å°„å˜æ¢ï¼Œçº¿æ€§å˜æ¢4ä¸ªè‡ªç”±åº¦+å¹³ç§»2ä¸ªè‡ªç”±åº¦â†’ä»¿å°„å˜æ¢è‡ªç”±åº¦ä¸º6ã€‚ æ¥çœ‹ä¸‹OpenCVä¸­å¦‚ä½•å®ç°ä»¿å°„å˜æ¢ï¼š 12345678910111213141516171819import cv2import numpy as npimport matplotlib.pyplot as pltimg = cv2.imread('drawing.jpg')rows, cols = img.shape[:2]# å˜æ¢å‰çš„ä¸‰ä¸ªç‚¹pts1 = np.float32([[50, 65], [150, 65], [210, 210]])# å˜æ¢åçš„ä¸‰ä¸ªç‚¹pts2 = np.float32([[50, 100], [150, 65], [100, 250]])# ç”Ÿæˆå˜æ¢çŸ©é˜µM = cv2.getAffineTransform(pts1, pts2)dst = cv2.warpAffine(img, M, (cols, rows))plt.subplot(121), plt.imshow(img), plt.title('input')plt.subplot(122), plt.imshow(dst), plt.title('output')plt.show() ä¸‰ä¸ªç‚¹æˆ‘å·²ç»åœ¨å›¾ä¸­æ ‡è®°äº†å‡ºæ¥ã€‚ç”¨cv2.getAffineTransform()ç”Ÿæˆå˜æ¢çŸ©é˜µï¼Œæ¥ä¸‹æ¥å†ç”¨cv2.warpAffine()å®ç°å˜æ¢ã€‚ æ€è€ƒï¼šä¸‰ä¸ªç‚¹æˆ‘æ ‡è®°çš„æ˜¯çº¢è‰²ï¼Œä¸ºä»€ä¹ˆMatplotlibæ˜¾ç¤ºå‡ºæ¥æ˜¯ä¸‹é¢è¿™ç§é¢œè‰²ï¼Ÿï¼ˆç»ƒä¹ ï¼‰ å…¶å®å¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾å’Œç¿»è½¬ç­‰å˜æ¢å°±æ˜¯å¯¹åº”äº†ä¸åŒçš„ä»¿å°„å˜æ¢çŸ©é˜µï¼Œä¸‹é¢åˆ†åˆ«æ¥çœ‹ä¸‹ã€‚ å¹³ç§» å¹³ç§»å°±æ˜¯xå’Œyæ–¹å‘ä¸Šçš„ç›´æ¥ç§»åŠ¨ï¼Œå¯ä»¥ä¸Šä¸‹/å·¦å³ç§»åŠ¨ï¼Œè‡ªç”±åº¦ä¸º2ï¼Œå˜æ¢çŸ©é˜µå¯ä»¥è¡¨ç¤ºä¸ºï¼š$$\\left[ \\begin{matrix} u \\newline v \\end{matrix} \\right] = \\left[ \\begin{matrix} 1 &amp; 0 \\newline 0 &amp; 1 \\end{matrix} \\right] \\left[ \\begin{matrix} x \\newline y \\end{matrix} \\right]+\\left[ \\begin{matrix} t_x \\newline t_y \\end{matrix} \\right]$$ æ—‹è½¬ æ—‹è½¬æ˜¯åæ ‡è½´æ–¹å‘é¥¶åŸç‚¹æ—‹è½¬ä¸€å®šçš„è§’åº¦Î¸ï¼Œè‡ªç”±åº¦ä¸º1ï¼Œä¸åŒ…å«å¹³ç§»ï¼Œå¦‚é¡ºæ—¶é’ˆæ—‹è½¬å¯ä»¥è¡¨ç¤ºä¸ºï¼š$$\\left[ \\begin{matrix} u \\newline v \\end{matrix} \\right] = \\left[ \\begin{matrix} \\cos \\theta &amp; -\\sin \\theta \\newline \\sin \\theta &amp; \\cos \\theta \\end{matrix} \\right] \\left[ \\begin{matrix} x \\newline y \\end{matrix} \\right]+\\left[ \\begin{matrix} 0 \\newline 0 \\end{matrix} \\right]$$ æ€è€ƒï¼šå¦‚æœä¸æ˜¯ç»•åŸç‚¹ï¼Œè€Œæ˜¯å¯å˜ç‚¹ï¼Œè‡ªç”±åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿï¼ˆè¯·çœ‹ä¸‹æ–‡åˆšä½“å˜æ¢ï¼‰ ç¿»è½¬ç¿»è½¬æ˜¯xæˆ–yæŸä¸ªæ–¹å‘æˆ–å…¨éƒ¨æ–¹å‘ä¸Šå–åï¼Œè‡ªç”±åº¦ä¸º2ï¼Œæ¯”å¦‚è¿™é‡Œä»¥å‚ç›´ç¿»è½¬ä¸ºä¾‹ï¼š$$\\left[ \\begin{matrix} u \\newline v \\end{matrix} \\right] = \\left[ \\begin{matrix} 1 &amp; 0 \\newline 0 &amp; -1 \\end{matrix} \\right] \\left[ \\begin{matrix} x \\newline y \\end{matrix} \\right]+\\left[ \\begin{matrix} 0 \\newline 0 \\end{matrix} \\right]$$ åˆšä½“å˜æ¢æ—‹è½¬+å¹³ç§»ä¹Ÿç§°åˆšä½“å˜æ¢ï¼ˆRigid Transformï¼‰ï¼Œå°±æ˜¯è¯´å¦‚æœå›¾åƒå˜æ¢å‰åä¸¤ç‚¹é—´çš„è·ç¦»ä»ç„¶ä¿æŒä¸å˜ï¼Œé‚£ä¹ˆè¿™ç§å˜åŒ–å°±ç§°ä¸ºåˆšä½“å˜æ¢ã€‚åˆšä½“å˜æ¢åŒ…æ‹¬äº†å¹³ç§»ã€æ—‹è½¬å’Œç¿»è½¬ï¼Œè‡ªç”±åº¦ä¸º3ã€‚å˜æ¢çŸ©é˜µå¯ä»¥è¡¨ç¤ºä¸ºï¼š $$\\left[ \\begin{matrix} u \\newline v \\end{matrix} \\right] = \\left[ \\begin{matrix} \\cos \\theta &amp; -\\sin \\theta \\newline \\sin \\theta &amp; \\cos \\theta \\end{matrix} \\right] \\left[ \\begin{matrix} x \\newline y \\end{matrix} \\right]+\\left[ \\begin{matrix} t_x \\newline t_y \\end{matrix} \\right]$$ ç”±äºåªæ˜¯æ—‹è½¬å’Œå¹³ç§»ï¼Œåˆšä½“å˜æ¢ä¿æŒäº†ç›´çº¿é—´çš„é•¿åº¦ä¸å˜ï¼Œæ‰€ä»¥ä¹Ÿç§°æ¬§å¼å˜æ¢ï¼ˆå˜åŒ–å‰åä¿æŒæ¬§æ°è·ç¦»ï¼‰ã€‚ ç¼©æ”¾ ç¼©æ”¾æ˜¯xå’Œyæ–¹å‘çš„å°ºåº¦ï¼ˆå€æ•°ï¼‰å˜æ¢ï¼Œåœ¨æœ‰äº›èµ„æ–™ä¸Šéç­‰æ¯”ä¾‹çš„ç¼©æ”¾ä¹Ÿç§°ä¸ºæ‹‰ä¼¸/æŒ¤å‹ï¼Œç­‰æ¯”ä¾‹ç¼©æ”¾è‡ªç”±åº¦ä¸º1ï¼Œéç­‰æ¯”ä¾‹ç¼©æ”¾è‡ªç”±åº¦ä¸º2ï¼ŒçŸ©é˜µå¯ä»¥è¡¨ç¤ºä¸ºï¼š$$\\left[ \\begin{matrix} u \\newline v \\end{matrix} \\right] = \\left[ \\begin{matrix} s_x &amp; 0 \\newline 0 &amp; s_y \\end{matrix} \\right] \\left[ \\begin{matrix} x \\newline y \\end{matrix} \\right]+\\left[ \\begin{matrix} 0 \\newline 0 \\end{matrix} \\right]$$ ç›¸ä¼¼å˜æ¢ç›¸ä¼¼å˜æ¢åˆç§°ç¼©æ”¾æ—‹è½¬ï¼Œç›¸ä¼¼å˜æ¢åŒ…å«äº†æ—‹è½¬ã€ç­‰æ¯”ä¾‹ç¼©æ”¾å’Œå¹³ç§»ç­‰å˜æ¢ï¼Œè‡ªç”±åº¦ä¸º4ã€‚åœ¨OpenCVä¸­ï¼Œæ—‹è½¬å°±æ˜¯ç”¨ç›¸ä¼¼å˜æ¢å®ç°çš„ï¼š è‹¥ç¼©æ”¾æ¯”ä¾‹ä¸ºscaleï¼Œæ—‹è½¬è§’åº¦ä¸ºÎ¸ï¼Œæ—‹è½¬ä¸­å¿ƒæ˜¯$ (center_x,center_y) $ï¼Œåˆ™ä»¿å°„å˜æ¢å¯ä»¥è¡¨ç¤ºä¸ºï¼š $$\\left[ \\begin{matrix} u \\newline v \\end{matrix} \\right] = \\left[ \\begin{matrix} \\alpha &amp; \\beta \\newline -\\beta &amp; \\alpha \\end{matrix} \\right] \\left[ \\begin{matrix} x \\newline y \\end{matrix} \\right]+\\left[ \\begin{matrix} (1-\\alpha)center_x-\\beta center_y \\newline \\beta center_x+(1-\\alpha)center_y \\end{matrix} \\right]$$å…¶ä¸­ï¼Œ$$\\alpha=scale \\cdot \\cos \\theta,\\beta=scale \\cdot \\sin \\theta$$ ç›¸ä¼¼å˜æ¢ç›¸æ¯”åˆšä½“å˜æ¢åŠ äº†ç¼©æ”¾ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šä¿æŒæ¬§æ°è·ç¦»ä¸å˜ï¼Œä½†ç›´çº¿é—´çš„å¤¹è§’ä¾ç„¶ä¸å˜ã€‚ ç»éªŒä¹‹è°ˆï¼šOpenCVä¸­é»˜è®¤æŒ‰ç…§é€†æ—¶é’ˆæ—‹è½¬å™¢~ æ€»ç»“ä¸€ä¸‹ï¼ˆåŸå›¾[#è®¡ç®—æœºè§†è§‰ï¼šç®—æ³•ä¸åº”ç”¨p39]ï¼‰ï¼š å˜æ¢ çŸ©é˜µ è‡ªç”±åº¦ ä¿æŒæ€§è´¨ å¹³ç§» [I, t]ï¼ˆ2Ã—3ï¼‰ 2 æ–¹å‘/é•¿åº¦/å¤¹è§’/å¹³è¡Œæ€§/ç›´çº¿æ€§ åˆšä½“ [R, t]ï¼ˆ2Ã—3ï¼‰ 3 é•¿åº¦/å¤¹è§’/å¹³è¡Œæ€§/ç›´çº¿æ€§ ç›¸ä¼¼ [sR, t]ï¼ˆ2Ã—3ï¼‰ 4 å¤¹è§’/å¹³è¡Œæ€§/ç›´çº¿æ€§ ä»¿å°„ [T]ï¼ˆ2Ã—3ï¼‰ 6 å¹³è¡Œæ€§/ç›´çº¿æ€§ é€è§† [T]ï¼ˆ3Ã—3ï¼‰ 8 ç›´çº¿æ€§ é€è§†å˜æ¢å‰é¢ä»¿å°„å˜æ¢åä¾ç„¶æ˜¯å¹³è¡Œå››è¾¹å½¢ï¼Œå¹¶ä¸èƒ½åšåˆ°ä»»æ„çš„å˜æ¢ã€‚ é€è§†å˜æ¢ï¼ˆPerspective Transformationï¼‰æ˜¯å°†äºŒç»´çš„å›¾ç‰‡æŠ•å½±åˆ°ä¸€ä¸ªä¸‰ç»´è§†å¹³é¢ä¸Šï¼Œç„¶åå†è½¬æ¢åˆ°äºŒç»´åæ ‡ä¸‹ï¼Œæ‰€ä»¥ä¹Ÿç§°ä¸ºæŠ•å½±æ˜ å°„ï¼ˆProjective Mappingï¼‰ã€‚ç®€å•æ¥è¯´å°±æ˜¯äºŒç»´â†’ä¸‰ç»´â†’äºŒç»´çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚$$\\begin{matrix} X=a_1 x + b_1 y + c_1 \\newline Y=a_2 x + b_2 y + c_2 \\newline Z=a_3 x + b_3 y + c_3 \\end{matrix}$$è¿™æ¬¡æˆ‘å†™æˆé½æ¬¡çŸ©é˜µçš„å½¢å¼ï¼š$$\\left[ \\begin{matrix} X \\newline Y \\newline Z \\end{matrix} \\right] = \\left[ \\begin{matrix} a_1 &amp; b_1 &amp; c_1 \\newline a_2 &amp; b_2 &amp; c_2 \\newline a_3 &amp; b_3 &amp; c_3 \\end{matrix} \\right] \\left[ \\begin{matrix} x \\newline y \\newline 1 \\end{matrix} \\right]$$å…¶ä¸­ï¼Œ$ \\left[ \\begin{matrix} a_1 &amp; b_1 \\newline a_2 &amp; b_2 \\newline \\end{matrix} \\right] $è¡¨ç¤ºçº¿æ€§å˜æ¢ï¼Œ$ \\left[ \\begin{matrix} a_3 &amp; b_3 \\end{matrix} \\right] $äº§ç”Ÿé€è§†å˜æ¢ï¼Œå…¶ä½™è¡¨ç¤ºå¹³ç§»å˜æ¢ï¼Œå› æ­¤ä»¿å°„å˜æ¢æ˜¯é€è§†å˜æ¢çš„å­é›†ã€‚æ¥ä¸‹æ¥å†é€šè¿‡é™¤ä»¥Zè½´è½¬æ¢æˆäºŒç»´åæ ‡ï¼š$$x^{â€™}=\\frac{X}{Z}=\\frac{a_1x+b_1y+c_1}{a_3x+b_3y+c_3 }$$ $$y^{â€™}=\\frac{Y}{Z}=\\frac{a_2x+b_2y+c_2}{a_3x+b_3y+c_3 }$$ é€è§†å˜æ¢ç›¸æ¯”ä»¿å°„å˜æ¢æ›´åŠ çµæ´»ï¼Œå˜æ¢åä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å››è¾¹å½¢ï¼Œä½†ä¸ä¸€å®šæ˜¯å¹³è¡Œå››è¾¹å½¢ï¼Œæ‰€ä»¥éœ€è¦éå…±çº¿çš„å››ä¸ªç‚¹æ‰èƒ½å”¯ä¸€ç¡®å®šï¼ŒåŸå›¾ä¸­çš„ç›´çº¿å˜æ¢åä¾ç„¶æ˜¯ç›´çº¿ã€‚å› ä¸ºå››è¾¹å½¢åŒ…æ‹¬äº†æ‰€æœ‰çš„å¹³è¡Œå››è¾¹å½¢ï¼Œæ‰€ä»¥é€è§†å˜æ¢åŒ…æ‹¬äº†æ‰€æœ‰çš„ä»¿å°„å˜æ¢ã€‚ OpenCVä¸­é¦–å…ˆæ ¹æ®å˜æ¢å‰åçš„å››ä¸ªç‚¹ç”¨cv2.getPerspectiveTransform()ç”Ÿæˆ3Ã—3çš„å˜æ¢çŸ©é˜µï¼Œç„¶åå†ç”¨cv2.warpPerspective()è¿›è¡Œé€è§†å˜æ¢ã€‚å®æˆ˜æ¼”ç»ƒä¸€ä¸‹ï¼š 123456789101112131415img = cv2.imread('card.jpg')# åŸå›¾ä¸­å¡ç‰‡çš„å››ä¸ªè§’ç‚¹pts1 = np.float32([[148, 80], [437, 114], [94, 247], [423, 288]])# å˜æ¢ååˆ†åˆ«åœ¨å·¦ä¸Šã€å³ä¸Šã€å·¦ä¸‹ã€å³ä¸‹å››ä¸ªç‚¹pts2 = np.float32([[0, 0], [320, 0], [0, 178], [320, 178]])# ç”Ÿæˆé€è§†å˜æ¢çŸ©é˜µM = cv2.getPerspectiveTransform(pts1, pts2)# è¿›è¡Œé€è§†å˜æ¢ï¼Œå‚æ•°3æ˜¯ç›®æ ‡å›¾åƒå¤§å°dst = cv2.warpPerspective(img, M, (320, 178))plt.subplot(121), plt.imshow(img[:, :, ::-1]), plt.title('input')plt.subplot(122), plt.imshow(dst[:, :, ::-1]), plt.title('output')plt.show() ä»£ç ä¸­æœ‰ä¸ªimg[:, :, ::-1]è¿˜è®°å¾—å—ï¼Ÿå¿˜è®°çš„è¯ï¼Œè¯·çœ‹ç»ƒä¹ ã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬åé¢å­¦ä¹ äº†ç‰¹å¾æå–ä¹‹åï¼Œå°±å¯ä»¥è‡ªåŠ¨è¯†åˆ«è§’ç‚¹äº†ã€‚é€è§†å˜æ¢æ˜¯ä¸€é¡¹å¾ˆé…·çš„åŠŸèƒ½ã€‚æ¯”å¦‚æˆ‘ä»¬ç»å¸¸ä¼šç”¨æ‰‹æœºå»æ‹èº«ä»½è¯å’Œæ–‡ä»¶ï¼Œæ— è®ºä½ æ€ä¹ˆæ‹ï¼Œè²Œä¼¼éƒ½æ‹ä¸æ­£æˆ–è€…æœ‰è¾¹æ¡†ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡æ‰‹æœºä¸Šé¢ä¸€äº›æ‰«æç±»è½¯ä»¶ï¼Œæ¯”å¦‚â€æ‰«æå…¨èƒ½ç‹â€œï¼Œâ€Office Lensâ€œï¼Œå®ƒä»¬èƒ½å¾ˆå¥½åœ°çŸ«æ­£å›¾ç‰‡ï¼Œè¿™äº›è½¯ä»¶å°±æ˜¯åº”ç”¨é€è§†å˜æ¢å®ç°çš„ã€‚ ç»ƒä¹  è¯·å¤ä¹ ï¼šæ— æŸä¿å­˜å’ŒMatplotlibä½¿ç”¨ã€‚ å¼•ç”¨ æœ¬èŠ‚æºç  è®¡ç®—æœºè§†è§‰ï¼šç®—æ³•ä¸åº”ç”¨ ç»´åŸºç™¾ç§‘ï¼šä»¿å°„å˜æ¢ å¦‚ä½•é€šä¿—åœ°è®²è§£ã€Œä»¿å°„å˜æ¢ã€è¿™ä¸ªæ¦‚å¿µï¼Ÿ","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"å›¾åƒå˜æ¢","slug":"å›¾åƒå˜æ¢","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/"}]},{"title":"Python+OpenCVæ•™ç¨‹7ï¼šå›¾åƒå‡ ä½•å˜æ¢","slug":"Python-OpenCVæ•™ç¨‹7ï¼šå›¾åƒå‡ ä½•å˜æ¢","date":"2017-12-08T06:36:53.000Z","updated":"2020-04-07T04:44:08.412Z","comments":true,"path":"opencv-python-image-geometric-transformation/","link":"","permalink":"http://www.codec.wang/opencv-python-image-geometric-transformation/","excerpt":"å­¦ä¹ å¦‚ä½•æ—‹è½¬ã€å¹³ç§»ã€ç¼©æ”¾å’Œç¿»è½¬å›¾ç‰‡ã€‚","text":"å­¦ä¹ å¦‚ä½•æ—‹è½¬ã€å¹³ç§»ã€ç¼©æ”¾å’Œç¿»è½¬å›¾ç‰‡ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ å®ç°æ—‹è½¬ã€å¹³ç§»å’Œç¼©æ”¾å›¾ç‰‡ OpenCVå‡½æ•°ï¼šcv2.resize(), cv2.flip(), cv2.warpAffine() æ•™ç¨‹ å›¾åƒçš„å‡ ä½•å˜æ¢ä»åŸç†ä¸Šçœ‹ä¸»è¦åŒ…æ‹¬ä¸¤ç§ï¼šåŸºäº2Ã—3çŸ©é˜µçš„ä»¿å°„å˜æ¢ï¼ˆå¹³ç§»ã€ç¼©æ”¾ã€æ—‹è½¬å’Œç¿»è½¬ç­‰ï¼‰ã€åŸºäº3Ã—3çŸ©é˜µçš„é€è§†å˜æ¢ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯å‚è€ƒç•ªå¤–ç¯‡ï¼šä»¿å°„å˜æ¢ä¸é€è§†å˜æ¢ã€‚ ç¼©æ”¾å›¾ç‰‡ç¼©æ”¾å°±æ˜¯è°ƒæ•´å›¾ç‰‡çš„å¤§å°ï¼Œä½¿ç”¨cv2.resize()å‡½æ•°å®ç°ç¼©æ”¾ã€‚å¯ä»¥æŒ‰ç…§æ¯”ä¾‹ç¼©æ”¾ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§æŒ‡å®šçš„å¤§å°ç¼©æ”¾ï¼š 1234567891011import cv2img = cv2.imread('drawing.jpg')# æŒ‰ç…§æŒ‡å®šçš„å®½åº¦ã€é«˜åº¦ç¼©æ”¾å›¾ç‰‡res = cv2.resize(img, (132, 150))# æŒ‰ç…§æ¯”ä¾‹ç¼©æ”¾ï¼Œå¦‚x,yè½´å‡æ”¾å¤§ä¸€å€res2 = cv2.resize(img, None, fx=2, fy=2, interpolation=cv2.INTER_LINEAR)cv2.imshow('shrink', res), cv2.imshow('zoom', res2)cv2.waitKey(0) æˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šç¼©æ”¾æ–¹æ³•interpolationï¼Œæ›´ä¸“ä¸šç‚¹å«æ’å€¼æ–¹æ³•ï¼Œé»˜è®¤æ˜¯INTER_LINEARï¼Œå…¨éƒ¨å¯ä»¥å‚è€ƒï¼šInterpolationFlags ç¿»è½¬å›¾ç‰‡é•œåƒç¿»è½¬å›¾ç‰‡ï¼Œå¯ä»¥ç”¨cv2.flip()å‡½æ•°ï¼š 1dst = cv2.flip(img, 1) å…¶ä¸­ï¼Œå‚æ•°2 = 0ï¼šå‚ç›´ç¿»è½¬(æ²¿xè½´)ï¼Œå‚æ•°2 &gt; 0: æ°´å¹³ç¿»è½¬(æ²¿yè½´)ï¼Œå‚æ•°2 &lt; 0: æ°´å¹³å‚ç›´ç¿»è½¬ã€‚ å¹³ç§»å›¾ç‰‡è¦å¹³ç§»å›¾ç‰‡ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸‹é¢è¿™æ ·ä¸€ä¸ªçŸ©é˜µï¼Œtx,tyæ˜¯å‘xå’Œyæ–¹å‘å¹³ç§»çš„è·ç¦»ï¼š $$ M = \\left[ \\begin{matrix} 1 &amp; 0 &amp; t_x \\newline 0 &amp; 1 &amp; t_y \\end{matrix} \\right]$$ å¹³ç§»æ˜¯ç”¨ä»¿å°„å˜æ¢å‡½æ•°cv2.warpAffine()å®ç°çš„ï¼š 12345678910111213# å¹³ç§»å›¾ç‰‡import numpy as nprows, cols = img.shape[:2]# å®šä¹‰å¹³ç§»çŸ©é˜µï¼Œéœ€è¦æ˜¯numpyçš„float32ç±»å‹# xè½´å¹³ç§»100ï¼Œyè½´å¹³ç§»50M = np.float32([[1, 0, 100], [0, 1, 50]])# ç”¨ä»¿å°„å˜æ¢å®ç°å¹³ç§»dst = cv2.warpAffine(img, M, (cols, rows))cv2.imshow('shift', dst)cv2.waitKey(0) æ—‹è½¬å›¾ç‰‡æ—‹è½¬åŒå¹³ç§»ä¸€æ ·ï¼Œä¹Ÿæ˜¯ç”¨ä»¿å°„å˜æ¢å®ç°çš„ï¼Œå› æ­¤ä¹Ÿéœ€è¦å®šä¹‰ä¸€ä¸ªå˜æ¢çŸ©é˜µã€‚OpenCVç›´æ¥æä¾›äº† cv2.getRotationMatrix2D()å‡½æ•°æ¥ç”Ÿæˆè¿™ä¸ªçŸ©é˜µï¼Œè¯¥å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼š å‚æ•°1ï¼šå›¾ç‰‡çš„æ—‹è½¬ä¸­å¿ƒ å‚æ•°2ï¼šæ—‹è½¬è§’åº¦(æ­£ï¼šé€†æ—¶é’ˆï¼Œè´Ÿï¼šé¡ºæ—¶é’ˆ) å‚æ•°3ï¼šç¼©æ”¾æ¯”ä¾‹ï¼Œ0.5è¡¨ç¤ºç¼©å°ä¸€åŠ 123456# 45Â°æ—‹è½¬å›¾ç‰‡å¹¶ç¼©å°ä¸€åŠM = cv2.getRotationMatrix2D((cols / 2, rows / 2), 45, 0.5)dst = cv2.warpAffine(img, M, (cols, rows))cv2.imshow('rotation', dst)cv2.waitKey(0) å°ç»“ cv2.resize()ç¼©æ”¾å›¾ç‰‡ï¼Œå¯ä»¥æŒ‰æŒ‡å®šå¤§å°ç¼©æ”¾ï¼Œä¹Ÿå¯ä»¥æŒ‰æ¯”ä¾‹ç¼©æ”¾ã€‚ cv2.flip()ç¿»è½¬å›¾ç‰‡ï¼Œå¯ä»¥æŒ‡å®šæ°´å¹³/å‚ç›´/æ°´å¹³å‚ç›´ç¿»è½¬ä¸‰ç§æ–¹å¼ã€‚ å¹³ç§»/æ—‹è½¬æ˜¯é ä»¿å°„å˜æ¢cv2.warpAffine()å®ç°çš„ã€‚ æ¥å£æ–‡æ¡£ cv2.resize() cv2.filp() cv2.warpAffine() cv2.getRotationMatrix2D() å¼•ç”¨ æœ¬èŠ‚æºç  Geometric Transformations of Images","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"å‡ ä½•å˜æ¢","slug":"å‡ ä½•å˜æ¢","permalink":"http://www.codec.wang/tags/%E5%87%A0%E4%BD%95%E5%8F%98%E6%8D%A2/"}]},{"title":"Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡4ï¼šOtsué˜ˆå€¼æ³•","slug":"Python-OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡4ï¼šOtsué˜ˆå€¼æ³•","date":"2017-12-08T04:48:05.000Z","updated":"2020-04-07T04:54:28.424Z","comments":true,"path":"opencv-python-extra-otsu-thresholding/","link":"","permalink":"http://www.codec.wang/opencv-python-extra-otsu-thresholding/","excerpt":"å¤§éƒ¨åˆ†å›¾åƒå¤„ç†ä»»åŠ¡éƒ½éœ€è¦å…ˆè¿›è¡ŒäºŒå€¼åŒ–æ“ä½œï¼Œé˜ˆå€¼çš„é€‰å–å¾ˆå…³é”®ï¼ŒOtsué˜ˆå€¼æ³•ä¼šè‡ªåŠ¨è®¡ç®—é˜ˆå€¼ã€‚","text":"å¤§éƒ¨åˆ†å›¾åƒå¤„ç†ä»»åŠ¡éƒ½éœ€è¦å…ˆè¿›è¡ŒäºŒå€¼åŒ–æ“ä½œï¼Œé˜ˆå€¼çš„é€‰å–å¾ˆå…³é”®ï¼ŒOtsué˜ˆå€¼æ³•ä¼šè‡ªåŠ¨è®¡ç®—é˜ˆå€¼ã€‚ Otsué˜ˆå€¼æ³•ï¼ˆæ—¥æœ¬äººå¤§æ´¥å±•ä¹‹æå‡ºçš„ï¼Œä¹Ÿå¯ç§°å¤§æ´¥ç®—æ³•ï¼‰éå¸¸é€‚ç”¨äºåŒå³°å›¾ç‰‡ï¼Œå•¥æ„æ€å‘¢ï¼Ÿ Otsu N. A threshold selection method from gray-level histograms[J]. IEEE transactions on systems, man, and cybernetics, 1979, 9(1): 62-66. ä»€ä¹ˆæ˜¯åŒå³°å›¾ç‰‡ï¼ŸåŒå³°å›¾ç‰‡å°±æ˜¯æŒ‡å›¾ç‰‡çš„ç°åº¦ç›´æ–¹å›¾ä¸Šæœ‰ä¸¤ä¸ªå³°å€¼ï¼Œç›´æ–¹å›¾å°±æ˜¯æ¯ä¸ªå€¼ï¼ˆ0~255ï¼‰çš„åƒç´ ç‚¹ä¸ªæ•°ç»Ÿè®¡ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»ã€‚ Otsuç®—æ³•å‡è®¾è¿™å‰¯å›¾ç‰‡ç”±å‰æ™¯è‰²å’ŒèƒŒæ™¯è‰²ç»„æˆï¼Œé€šè¿‡ç»Ÿè®¡å­¦æ–¹æ³•ï¼ˆæœ€å¤§ç±»é—´æ–¹å·®ï¼‰é€‰å–ä¸€ä¸ªé˜ˆå€¼ï¼Œå°†å‰æ™¯å’ŒèƒŒæ™¯å°½å¯èƒ½åˆ†å¼€ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ä»£ç ï¼Œç„¶åè¯¦ç»†è¯´æ˜ä¸‹ç®—æ³•åŸç†ã€‚ ä»£ç ç¤ºä¾‹ä¸‹é¢è¿™æ®µä»£ç å¯¹æ¯”äº†ä½¿ç”¨å›ºå®šé˜ˆå€¼å’ŒOtsué˜ˆå€¼åçš„ä¸åŒç»“æœï¼š å¦å¤–ï¼Œå¯¹å«å™ªç‚¹çš„å›¾åƒï¼Œå…ˆè¿›è¡Œæ»¤æ³¢æ“ä½œæ•ˆæœä¼šæ›´å¥½ã€‚ 1234567891011121314import cv2from matplotlib import pyplot as pltimg = cv2.imread('noisy.jpg', 0)# å›ºå®šé˜ˆå€¼æ³•ret1, th1 = cv2.threshold(img, 100, 255, cv2.THRESH_BINARY)# Otsué˜ˆå€¼æ³•ret2, th2 = cv2.threshold(img, 0, 255, cv2.THRESH_BINARY + cv2.THRESH_OTSU)# å…ˆè¿›è¡Œé«˜æ–¯æ»¤æ³¢ï¼Œå†ä½¿ç”¨Otsué˜ˆå€¼æ³•blur = cv2.GaussianBlur(img, (5, 5), 0)ret3, th3 = cv2.threshold(blur, 0, 255, cv2.THRESH_BINARY + cv2.THRESH_OTSU) ä¸‹é¢æˆ‘ä»¬ç”¨MatplotlibæŠŠåŸå›¾ã€ç›´æ–¹å›¾å’Œé˜ˆå€¼å›¾éƒ½æ˜¾ç¤ºå‡ºæ¥ï¼š 123456789101112131415161718192021222324images = [img, 0, th1, img, 0, th2, blur, 0, th3]titles = ['Original', 'Histogram', 'Global(v=100)', 'Original', 'Histogram', \"Otsu's\", 'Gaussian filtered Image', 'Histogram', \"Otsu's\"]for i in range(3): # ç»˜åˆ¶åŸå›¾ plt.subplot(3, 3, i * 3 + 1) plt.imshow(images[i * 3], 'gray') plt.title(titles[i * 3], fontsize=8) plt.xticks([]), plt.yticks([]) # ç»˜åˆ¶ç›´æ–¹å›¾plt.histï¼Œravelå‡½æ•°å°†æ•°ç»„é™æˆä¸€ç»´ plt.subplot(3, 3, i * 3 + 2) plt.hist(images[i * 3].ravel(), 256) plt.title(titles[i * 3 + 1], fontsize=8) plt.xticks([]), plt.yticks([]) # ç»˜åˆ¶é˜ˆå€¼å›¾ plt.subplot(3, 3, i * 3 + 3) plt.imshow(images[i * 3 + 2], 'gray') plt.title(titles[i * 3 + 2], fontsize=8) plt.xticks([]), plt.yticks([])plt.show() å¯ä»¥çœ‹åˆ°ï¼ŒOtsué˜ˆå€¼æ˜æ˜¾ä¼˜äºå›ºå®šé˜ˆå€¼ï¼Œçœå»äº†ä¸æ–­å°è¯•é˜ˆå€¼åˆ¤æ–­æ•ˆæœå¥½åçš„è¿‡ç¨‹ã€‚å…¶ä¸­ï¼Œç»˜åˆ¶ç›´æ–¹å›¾æ—¶ï¼Œä½¿ç”¨äº†numpyä¸­çš„ravel()å‡½æ•°ï¼Œå®ƒä¼šå°†åŸçŸ©é˜µå‹ç¼©æˆä¸€ç»´æ•°ç»„ï¼Œä¾¿äºç”»ç›´æ–¹å›¾ã€‚ Otsuç®—æ³•è¯¦è§£Otsué˜ˆå€¼æ³•å°†æ•´å¹…å›¾åˆ†ä¸ºå‰æ™¯ï¼ˆç›®æ ‡ï¼‰å’ŒèƒŒæ™¯ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›ç¬¦å·è§„å®šï¼š $ T $ï¼šåˆ†å‰²é˜ˆå€¼ $ N_0 $ï¼šå‰æ™¯åƒç´ ç‚¹æ•° $ N_1 $ï¼šèƒŒæ™¯åƒç´ ç‚¹æ•° $ \\omega_0 $ï¼šå‰æ™¯çš„åƒç´ ç‚¹æ•°å æ•´å¹…å›¾åƒçš„æ¯”ä¾‹ $ \\omega_1 $ï¼šèƒŒæ™¯çš„åƒç´ ç‚¹æ•°å æ•´å¹…å›¾åƒçš„æ¯”ä¾‹ $ \\mu_0 $ï¼šå‰æ™¯çš„å¹³å‡åƒç´ å€¼ $ \\mu_1 $ï¼šèƒŒæ™¯çš„å¹³å‡åƒç´ å€¼ $ \\mu $ï¼šæ•´å¹…å›¾çš„å¹³å‡åƒç´ å€¼ $ rows\\times cols $ï¼šå›¾åƒçš„è¡Œæ•°å’Œåˆ—æ•° ç»“åˆä¸‹å›¾ä¼šæ›´å®¹æ˜“ç†è§£ä¸€äº›ï¼Œæœ‰ä¸€å‰¯å¤§å°ä¸º4Ã—4çš„å›¾ç‰‡ï¼Œå‡è®¾é˜ˆå€¼Tä¸º1ï¼Œé‚£ä¹ˆï¼š å…¶å®å¾ˆå¥½ç†è§£ï¼Œ$ N_0+N_1 $å°±æ˜¯æ€»çš„åƒç´ ç‚¹ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯è¡Œæ•°ä¹˜åˆ—æ•°ï¼š$$N_0+N_1=rows\\times cols$$$ \\omega_0 $å’Œ$ \\omega_1 $æ˜¯å‰/èƒŒæ™¯æ‰€å çš„æ¯”ä¾‹ï¼Œä¹Ÿå°±æ˜¯ï¼š$$\\omega_0=\\frac{N_0}{rows\\times cols}$$$$\\omega_1=\\frac{N_1}{rows\\times cols}$$$$\\omega_0+\\omega_1=1 \\tag{1}$$æ•´å¹…å›¾çš„å¹³å‡åƒç´ å€¼å°±æ˜¯ï¼š$$\\mu=\\omega_0\\times \\mu_0+\\omega_1\\times \\mu_1 \\tag{2}$$ æ­¤æ—¶ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‰æ™¯$ \\mu_0 $ä¸èƒŒæ™¯$ \\mu_1 $çš„æ–¹å·®$ g $ï¼š $$g=\\omega_0(\\mu_0-\\mu)^2+\\omega_1(\\mu_1-\\mu)^2 \\tag{3}$$ å°†å‰è¿°çš„1/2/3å…¬å¼æ•´åˆåœ¨ä¸€èµ·ï¼Œä¾¿æ˜¯ï¼š $$g=\\omega_0\\omega_1(\\mu_0-\\mu_1)^2$$ $ g $å°±æ˜¯å‰æ™¯ä¸èƒŒæ™¯ä¸¤ç±»ä¹‹é—´çš„æ–¹å·®ï¼Œè¿™ä¸ªå€¼è¶Šå¤§ï¼Œè¯´æ˜å‰æ™¯å’ŒèƒŒæ™¯çš„å·®åˆ«ä¹Ÿå°±è¶Šå¤§ï¼Œæ•ˆæœè¶Šå¥½ã€‚Otsuç®—æ³•ä¾¿æ˜¯éå†é˜ˆå€¼Tï¼Œä½¿å¾—$ g $æœ€å¤§ï¼Œæ‰€ä»¥åˆç§°ä¸ºæœ€å¤§ç±»é—´æ–¹å·®æ³•ã€‚åŸºæœ¬ä¸ŠåŒå³°å›¾ç‰‡çš„é˜ˆå€¼Tåœ¨ä¸¤å³°ä¹‹é—´çš„è°·åº•ã€‚ æ¥å£æ–‡æ¡£ cv2.ThresholdTypes cv2.GaussianBlur() å¼•ç”¨ æœ¬èŠ‚æºç  numpy.ravel Otsuâ€™s Method(wikipedia) Image Thresholding ä¸€ç»´OTSUæ³•ã€æœ€å°äº¤å‰ç†µæ³•ã€äºŒç»´OTSUæ³•åŠC++æºç  Otsu N. A threshold selection method from gray-level histograms[J]. IEEE transactions on systems, man, and cybernetics, 1979, 9(1): 62-66.","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"é˜ˆå€¼","slug":"é˜ˆå€¼","permalink":"http://www.codec.wang/tags/%E9%98%88%E5%80%BC/"}]},{"title":"Python+OpenCVæ•™ç¨‹6ï¼šé˜ˆå€¼åˆ†å‰²","slug":"Python-OpenCVæ•™ç¨‹6ï¼šé˜ˆå€¼åˆ†å‰²","date":"2017-12-07T13:14:44.000Z","updated":"2020-04-07T04:43:45.351Z","comments":true,"path":"opencv-python-image-thresholding/","link":"","permalink":"http://www.codec.wang/opencv-python-image-thresholding/","excerpt":"å­¦ä¹ ä½¿ç”¨ä¸åŒçš„é˜ˆå€¼æ–¹æ³•â€äºŒå€¼åŒ–â€å›¾åƒã€‚","text":"å­¦ä¹ ä½¿ç”¨ä¸åŒçš„é˜ˆå€¼æ–¹æ³•â€äºŒå€¼åŒ–â€å›¾åƒã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ ä½¿ç”¨å›ºå®šé˜ˆå€¼ã€è‡ªé€‚åº”é˜ˆå€¼å’ŒOtsué˜ˆå€¼æ³•â€äºŒå€¼åŒ–â€å›¾åƒ OpenCVå‡½æ•°ï¼šcv2.threshold(), cv2.adaptiveThreshold() æ•™ç¨‹å›ºå®šé˜ˆå€¼åˆ†å‰²å›ºå®šé˜ˆå€¼åˆ†å‰²å¾ˆç›´æ¥ï¼Œä¸€å¥è¯è¯´å°±æ˜¯åƒç´ ç‚¹å€¼å¤§äºé˜ˆå€¼å˜æˆä¸€ç±»å€¼ï¼Œå°äºé˜ˆå€¼å˜æˆå¦ä¸€ç±»å€¼ã€‚ 123456789import cv2# ç°åº¦å›¾è¯»å…¥img = cv2.imread('gradient.jpg', 0)# é˜ˆå€¼åˆ†å‰²ret, th = cv2.threshold(img, 127, 255, cv2.THRESH_BINARY)cv2.imshow('thresh', th)cv2.waitKey(0) cv2.threshold()ç”¨æ¥å®ç°é˜ˆå€¼åˆ†å‰²ï¼Œretæ˜¯return valueç¼©å†™ï¼Œä»£è¡¨å½“å‰çš„é˜ˆå€¼ï¼Œæš‚æ—¶ä¸ç”¨ç†ä¼šã€‚å‡½æ•°æœ‰4ä¸ªå‚æ•°ï¼š å‚æ•°1ï¼šè¦å¤„ç†çš„åŸå›¾ï¼Œä¸€èˆ¬æ˜¯ç°åº¦å›¾ å‚æ•°2ï¼šè®¾å®šçš„é˜ˆå€¼ å‚æ•°3ï¼šæœ€å¤§é˜ˆå€¼ï¼Œä¸€èˆ¬ä¸º255 å‚æ•°4ï¼šé˜ˆå€¼çš„æ–¹å¼ï¼Œä¸»è¦æœ‰5ç§ï¼Œè¯¦æƒ…ï¼šThresholdTypes ä¸‹é¢ç»“åˆä»£ç ç†è§£ä¸‹è¿™5ç§é˜ˆå€¼æ–¹å¼ï¼š 1234567891011121314151617181920import matplotlib.pyplot as plt# åº”ç”¨5ç§ä¸åŒçš„é˜ˆå€¼æ–¹æ³•ret, th1 = cv2.threshold(img, 127, 255, cv2.THRESH_BINARY)ret, th2 = cv2.threshold(img, 127, 255, cv2.THRESH_BINARY_INV)ret, th3 = cv2.threshold(img, 127, 255, cv2.THRESH_TRUNC)ret, th4 = cv2.threshold(img, 127, 255, cv2.THRESH_TOZERO)ret, th5 = cv2.threshold(img, 127, 255, cv2.THRESH_TOZERO_INV)titles = ['Original', 'BINARY', 'BINARY_INV', 'TRUNC', 'TOZERO', 'TOZERO_INV']images = [img, th1, th2, th3, th4, th5]# ä½¿ç”¨Matplotlibæ˜¾ç¤ºfor i in range(6): plt.subplot(2, 3, i + 1) plt.imshow(images[i], 'gray') plt.title(titles[i], fontsize=8) plt.xticks([]), plt.yticks([]) # éšè—åæ ‡è½´plt.show() ç»éªŒä¹‹è°ˆï¼šå¾ˆå¤šäººè¯¯ä»¥ä¸ºé˜ˆå€¼åˆ†å‰²å°±æ˜¯äºŒå€¼åŒ–ã€‚ä»ä¸Šå›¾ä¸­å¯ä»¥å‘ç°ï¼Œä¸¤è€…å¹¶ä¸ç­‰åŒï¼Œé˜ˆå€¼åˆ†å‰²ç»“æœæ˜¯ä¸¤ç±»å€¼ï¼Œè€Œä¸æ˜¯ä¸¤ä¸ªå€¼ï¼Œæ‰€ä»¥æ•™ç¨‹å¼€å¤´æˆ‘æŠŠäºŒå€¼åŒ–åŠ äº†å¼•å·ã€‚ è‡ªé€‚åº”é˜ˆå€¼çœ‹å¾—å‡ºæ¥å›ºå®šé˜ˆå€¼æ˜¯åœ¨æ•´å¹…å›¾ç‰‡ä¸Šåº”ç”¨ä¸€ä¸ªé˜ˆå€¼è¿›è¡Œåˆ†å‰²ï¼Œå®ƒå¹¶ä¸é€‚ç”¨äºæ˜æš—åˆ†å¸ƒä¸å‡çš„å›¾ç‰‡ã€‚ cv2.adaptiveThreshold()è‡ªé€‚åº”é˜ˆå€¼ä¼šæ¯æ¬¡å–å›¾ç‰‡çš„ä¸€å°éƒ¨åˆ†è®¡ç®—é˜ˆå€¼ï¼Œè¿™æ ·å›¾ç‰‡ä¸åŒåŒºåŸŸçš„é˜ˆå€¼å°±ä¸å°½ç›¸åŒã€‚å®ƒæœ‰5ä¸ªå‚æ•°ï¼Œå…¶å®å¾ˆå¥½ç†è§£ï¼Œå…ˆçœ‹ä¸‹æ•ˆæœï¼š 12345678910111213141516171819# è‡ªé€‚åº”é˜ˆå€¼å¯¹æ¯”å›ºå®šé˜ˆå€¼img = cv2.imread('sudoku.jpg', 0)# å›ºå®šé˜ˆå€¼ret, th1 = cv2.threshold(img, 127, 255, cv2.THRESH_BINARY)# è‡ªé€‚åº”é˜ˆå€¼th2 = cv2.adaptiveThreshold( img, 255, cv2.ADAPTIVE_THRESH_MEAN_C, cv2.THRESH_BINARY, 11, 4)th3 = cv2.adaptiveThreshold( img, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 17, 6)titles = ['Original', 'Global(v = 127)', 'Adaptive Mean', 'Adaptive Gaussian']images = [img, th1, th2, th3]for i in range(4): plt.subplot(2, 2, i + 1), plt.imshow(images[i], 'gray') plt.title(titles[i], fontsize=8) plt.xticks([]), plt.yticks([])plt.show() å‚æ•°1ï¼šè¦å¤„ç†çš„åŸå›¾ å‚æ•°2ï¼šæœ€å¤§é˜ˆå€¼ï¼Œä¸€èˆ¬ä¸º255 å‚æ•°3ï¼šå°åŒºåŸŸé˜ˆå€¼çš„è®¡ç®—æ–¹å¼ ADAPTIVE_THRESH_MEAN_Cï¼šå°åŒºåŸŸå†…å–å‡å€¼ ADAPTIVE_THRESH_GAUSSIAN_Cï¼šå°åŒºåŸŸå†…åŠ æƒæ±‚å’Œï¼Œæƒé‡æ˜¯ä¸ªé«˜æ–¯æ ¸ å‚æ•°4ï¼šé˜ˆå€¼æ–¹å¼ï¼ˆè·Ÿå‰é¢è®²çš„é‚£5ç§ç›¸åŒï¼‰ å‚æ•°5ï¼šå°åŒºåŸŸçš„é¢ç§¯ï¼Œå¦‚11å°±æ˜¯11*11çš„å°å— å‚æ•°6ï¼šæœ€ç»ˆé˜ˆå€¼ç­‰äºå°åŒºåŸŸè®¡ç®—å‡ºçš„é˜ˆå€¼å†å‡å»æ­¤å€¼ å¦‚æœä½ æ²¡çœ‹æ‡‚ä¸Šé¢çš„å‚æ•°ä¹Ÿä¸è¦ç´§ï¼Œæš‚æ—¶ä¼šç”¨å°±è¡Œï¼Œå½“ç„¶æˆ‘å»ºè®®ä½ è°ƒæ•´ä¸‹å‚æ•°çœ‹çœ‹ä¸åŒçš„ç»“æœã€‚ Otsué˜ˆå€¼åœ¨å‰é¢å›ºå®šé˜ˆå€¼ä¸­ï¼Œæˆ‘ä»¬æ˜¯éšä¾¿é€‰äº†ä¸€ä¸ªé˜ˆå€¼å¦‚127ï¼Œé‚£å¦‚ä½•çŸ¥é“æˆ‘ä»¬é€‰çš„è¿™ä¸ªé˜ˆå€¼æ•ˆæœå¥½ä¸å¥½å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¸æ–­å°è¯•ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•åœ¨å¾ˆå¤šæ–‡çŒ®ä¸­éƒ½è¢«ç§°ä¸ºç»éªŒé˜ˆå€¼ã€‚Otsué˜ˆå€¼æ³•å°±æä¾›äº†ä¸€ç§è‡ªåŠ¨é«˜æ•ˆçš„äºŒå€¼åŒ–æ–¹æ³•ï¼Œä¸è¿‡æˆ‘ä»¬ç›´æ–¹å›¾è¿˜æ²¡å­¦ï¼Œè¿™é‡Œæš‚æ—¶ç•¥è¿‡ã€‚ å¥½å§ï¼Œæˆ‘çŸ¥é“æˆ‘æ¿€èµ·äº†ä½ çš„å…´è¶£ï¼Œ~ o(ï¿£â–½ï¿£)oï¼Œæœ‰èƒ½åŠ›çš„ç«¥é‹å¯ä»¥çœ‹ä¸‹ç»ƒä¹ é¢˜ã€‚ å°ç»“ cv2.threshold()ç”¨æ¥è¿›è¡Œå›ºå®šé˜ˆå€¼åˆ†å‰²ã€‚å›ºå®šé˜ˆå€¼ä¸é€‚ç”¨äºå…‰çº¿ä¸å‡åŒ€çš„å›¾ç‰‡ï¼Œæ‰€ä»¥ç”¨ cv2.adaptiveThreshold()è¿›è¡Œè‡ªé€‚åº”é˜ˆå€¼åˆ†å‰²ã€‚ äºŒå€¼åŒ–è·Ÿé˜ˆå€¼åˆ†å‰²å¹¶ä¸ç­‰åŒã€‚é’ˆå¯¹ä¸åŒçš„å›¾ç‰‡ï¼Œå¯ä»¥é‡‡ç”¨ä¸åŒçš„é˜ˆå€¼æ–¹æ³•ã€‚ ç»ƒä¹  Otsué˜ˆå€¼æ˜¯ä¸€ç§é«˜æ•ˆçš„äºŒå€¼åŒ–ç®—æ³•ï¼Œè¯·é˜…è¯»ç•ªå¤–ç¯‡ï¼šOtsué˜ˆå€¼æ³• æ¥å£æ–‡æ¡£ cv2.threshold() cv2.adaptiveThreshold() cv2.ThresholdTypes() å¼•ç”¨ æœ¬èŠ‚æºç  Image Thresholding","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"é˜ˆå€¼","slug":"é˜ˆå€¼","permalink":"http://www.codec.wang/tags/%E9%98%88%E5%80%BC/"}]},{"title":"Python+OpenCVæ•™ç¨‹5ï¼šé¢œè‰²ç©ºé—´è½¬æ¢","slug":"Python-OpenCVæ•™ç¨‹5ï¼šé¢œè‰²ç©ºé—´è½¬æ¢","date":"2017-12-07T07:21:19.000Z","updated":"2020-04-07T04:43:13.915Z","comments":true,"path":"opencv-python-changing-colorspaces/","link":"","permalink":"http://www.codec.wang/opencv-python-changing-colorspaces/","excerpt":"å­¦ä¹ å¦‚ä½•è¿›è¡Œå›¾ç‰‡çš„é¢œè‰²ç©ºé—´è½¬æ¢ï¼Œè§†é¢‘ä¸­è¿½è¸ªç‰¹å®šé¢œè‰²çš„ç‰©ä½“ã€‚","text":"å­¦ä¹ å¦‚ä½•è¿›è¡Œå›¾ç‰‡çš„é¢œè‰²ç©ºé—´è½¬æ¢ï¼Œè§†é¢‘ä¸­è¿½è¸ªç‰¹å®šé¢œè‰²çš„ç‰©ä½“ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ é¢œè‰²ç©ºé—´è½¬æ¢ï¼Œå¦‚BGRâ†”Grayï¼ŒBGRâ†”HSVç­‰ è¿½è¸ªè§†é¢‘ä¸­ç‰¹å®šé¢œè‰²çš„ç‰©ä½“ OpenCVå‡½æ•°ï¼šcv2.cvtColor(), cv2.inRange() æ•™ç¨‹é¢œè‰²ç©ºé—´è½¬æ¢123456789import cv2img = cv2.imread('lena.jpg')# è½¬æ¢ä¸ºç°åº¦å›¾img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)cv2.imshow('img', img)cv2.imshow('gray', img_gray)cv2.waitKey(0) cv2.cvtColor()ç”¨æ¥è¿›è¡Œé¢œè‰²æ¨¡å‹è½¬æ¢ï¼Œå‚æ•°1æ˜¯è¦è½¬æ¢çš„å›¾ç‰‡ï¼Œå‚æ•°2æ˜¯è½¬æ¢æ¨¡å¼ï¼Œ COLOR_BGR2GRAYè¡¨ç¤ºBGRâ†’Grayï¼Œå¯ç”¨ä¸‹é¢çš„ä»£ç æ˜¾ç¤ºæ‰€æœ‰çš„è½¬æ¢æ¨¡å¼ï¼š 12flags = [i for i in dir(cv2) if i.startswith('COLOR_')]print(flags) ç»éªŒä¹‹è°ˆï¼šé¢œè‰²è½¬æ¢å…¶å®æ˜¯æ•°å­¦è¿ç®—ï¼Œå¦‚ç°åº¦åŒ–æœ€å¸¸ç”¨çš„æ˜¯ï¼šgray=R*0.299+G*0.587+B*0.114ã€‚ è§†é¢‘ä¸­ç‰¹å®šé¢œè‰²ç‰©ä½“è¿½è¸ªHSVæ˜¯ä¸€ä¸ªå¸¸ç”¨äºé¢œè‰²è¯†åˆ«çš„æ¨¡å‹ï¼Œç›¸æ¯”BGRæ›´æ˜“åŒºåˆ†é¢œè‰²ï¼Œè½¬æ¢æ¨¡å¼ç”¨COLOR_BGR2HSVè¡¨ç¤ºã€‚ ç»éªŒä¹‹è°ˆï¼šOpenCVä¸­è‰²è°ƒHèŒƒå›´ä¸º[0,179]ï¼Œé¥±å’Œåº¦Sæ˜¯[0,255]ï¼Œæ˜åº¦Væ˜¯[0,255]ã€‚è™½ç„¶Hçš„ç†è®ºæ•°å€¼æ˜¯0Â°~360Â°ï¼Œä½†8ä½å›¾åƒåƒç´ ç‚¹çš„æœ€å¤§å€¼æ˜¯255ï¼Œæ‰€ä»¥OpenCVä¸­é™¤ä»¥äº†2ï¼ŒæŸäº›è½¯ä»¶å¯èƒ½ä½¿ç”¨ä¸åŒçš„å°ºåº¦è¡¨ç¤ºï¼Œæ‰€ä»¥åŒå…¶ä»–è½¯ä»¶æ··ç”¨æ—¶ï¼Œè®°å¾—å½’ä¸€åŒ–ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªä½¿ç”¨HSVæ¥åªæ˜¾ç¤ºè§†é¢‘ä¸­è“è‰²ç‰©ä½“çš„ä¾‹å­ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š æ•è·è§†é¢‘ä¸­çš„ä¸€å¸§ ä»BGRè½¬æ¢åˆ°HSV æå–è“è‰²èŒƒå›´çš„ç‰©ä½“ åªæ˜¾ç¤ºè“è‰²ç‰©ä½“ 123456789101112131415161718192021222324252627import numpy as npcapture = cv2.VideoCapture(0)# è“è‰²çš„èŒƒå›´ï¼Œä¸åŒå…‰ç…§æ¡ä»¶ä¸‹ä¸ä¸€æ ·ï¼Œå¯çµæ´»è°ƒæ•´lower_blue = np.array([100, 110, 110])upper_blue = np.array([130, 255, 255])while(True): # 1.æ•è·è§†é¢‘ä¸­çš„ä¸€å¸§ ret, frame = capture.read() # 2.ä»BGRè½¬æ¢åˆ°HSV hsv = cv2.cvtColor(frame, cv2.COLOR_BGR2HSV) # 3.inRange()ï¼šä»‹äºlower/upperä¹‹é—´çš„ä¸ºç™½è‰²ï¼Œå…¶ä½™é»‘è‰² mask = cv2.inRange(hsv, lower_blue, upper_blue) # 4.åªä¿ç•™åŸå›¾ä¸­çš„è“è‰²éƒ¨åˆ† res = cv2.bitwise_and(frame, frame, mask=mask) cv2.imshow('frame', frame) cv2.imshow('mask', mask) cv2.imshow('res', res) if cv2.waitKey(1) == ord('q'): break å…¶ä¸­ï¼Œbitwise_and()å‡½æ•°æš‚æ—¶ä¸ç”¨ç®¡ï¼Œåé¢ä¼šè®²åˆ°ã€‚é‚£è“è‰²çš„HSVå€¼çš„ä¸Šä¸‹é™lowerå’ŒupperèŒƒå›´æ˜¯æ€ä¹ˆå¾—åˆ°çš„å‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬å…ˆæŠŠæ ‡å‡†è“è‰²çš„BGRå€¼ç”¨cvtColor()è½¬æ¢ä¸‹ï¼š 123blue = np.uint8([[[255, 0, 0]]])hsv_blue = cv2.cvtColor(blue, cv2.COLOR_BGR2HSV)print(hsv_blue) # [[[120 255 255]]] ç»“æœæ˜¯[120, 255, 255]ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æŠŠè“è‰²çš„èŒƒå›´è°ƒæ•´æˆäº†ä¸Šé¢ä»£ç é‚£æ ·ã€‚ ç»éªŒä¹‹è°ˆï¼šLabé¢œè‰²ç©ºé—´ä¹Ÿç»å¸¸ç”¨æ¥åšé¢œè‰²è¯†åˆ«ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥äº†è§£ä¸‹ã€‚ å°ç»“ cv2.cvtColor()å‡½æ•°ç”¨æ¥è¿›è¡Œé¢œè‰²ç©ºé—´è½¬æ¢ï¼Œå¸¸ç”¨BGRâ†”Grayï¼ŒBGRâ†”HSVã€‚ HSVé¢œè‰²æ¨¡å‹å¸¸ç”¨äºé¢œè‰²è¯†åˆ«ã€‚è¦æƒ³çŸ¥é“æŸç§é¢œè‰²åœ¨HSVä¸‹çš„å€¼ï¼Œå¯ä»¥å°†å®ƒçš„BGRå€¼ç”¨cvtColor()è½¬æ¢å¾—åˆ°ã€‚ ç»ƒä¹  å°è¯•åœ¨è§†é¢‘ä¸­åŒæ—¶æå–çº¢è‰²ã€è“è‰²ã€ç»¿è‰²çš„ç‰©ä½“ã€‚ï¼ˆæ•ˆæœå¦‚ä¸‹ï¼‰ æ¥å£æ–‡æ¡£ cv2.cvtColor() cv2.inRange() cv2.bitwise_and() å¼•ç”¨ æœ¬èŠ‚æºç  Changing Colorspaces","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"HSV","slug":"HSV","permalink":"http://www.codec.wang/tags/HSV/"}]},{"title":"Python+OpenCVæ•™ç¨‹4ï¼šå›¾åƒåŸºæœ¬æ“ä½œ","slug":"Python-OpenCVæ•™ç¨‹4ï¼šå›¾åƒåŸºæœ¬æ“ä½œ","date":"2017-12-07T04:13:15.000Z","updated":"2020-04-07T04:42:36.501Z","comments":true,"path":"opencv-python-basic-operations/","link":"","permalink":"http://www.codec.wang/opencv-python-basic-operations/","excerpt":"å­¦ä¹ è·å–å’Œä¿®æ”¹åƒç´ ç‚¹çš„å€¼ï¼ŒROIæ„Ÿå…´è¶£åŒºåŸŸï¼Œé€šé“åˆ†ç¦»åˆå¹¶ç­‰åŸºæœ¬æ“ä½œã€‚","text":"å­¦ä¹ è·å–å’Œä¿®æ”¹åƒç´ ç‚¹çš„å€¼ï¼ŒROIæ„Ÿå…´è¶£åŒºåŸŸï¼Œé€šé“åˆ†ç¦»åˆå¹¶ç­‰åŸºæœ¬æ“ä½œã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ è®¿é—®å’Œä¿®æ”¹å›¾ç‰‡åƒç´ ç‚¹çš„å€¼ è·å–å›¾ç‰‡çš„å®½ã€é«˜ã€é€šé“æ•°ç­‰å±æ€§ äº†è§£æ„Ÿå…´è¶£åŒºåŸŸROI åˆ†ç¦»å’Œåˆå¹¶å›¾åƒé€šé“ æ•™ç¨‹è·å–å’Œä¿®æ”¹åƒç´ ç‚¹å€¼æˆ‘ä»¬å…ˆè¯»å…¥ä¸€å¼ å›¾ç‰‡ï¼š 123import cv2img = cv2.imread('lena.jpg') é€šè¿‡è¡Œåˆ—çš„åæ ‡æ¥è·å–æŸåƒç´ ç‚¹çš„å€¼ï¼Œå¯¹äºå½©è‰²å›¾ï¼Œç»“æœæ˜¯B,G,Rä¸‰ä¸ªå€¼çš„åˆ—è¡¨ï¼Œå¯¹äºç°åº¦å›¾æˆ–å•é€šé“å›¾ï¼Œåªæœ‰ä¸€ä¸ªå€¼ï¼š 123456px = img[100, 90]print(px) # [103 98 197]# åªè·å–è“è‰²blueé€šé“çš„å€¼px_blue = img[100, 90, 0]print(px_blue) # 103 è¿˜è®°å¾—å—ï¼Ÿè¡Œå¯¹åº”yï¼Œåˆ—å¯¹åº”xï¼Œæ‰€ä»¥å…¶å®æ˜¯img[y, x]ï¼Œéœ€è¦æ³¨æ„å™¢(â—Ë‡âˆ€Ë‡â—)ã€‚å®¹æ˜“æ··æ·†çš„è¯ï¼Œå¯ä»¥åªè®°è¡Œå’Œåˆ—ï¼Œè¡Œåœ¨å‰ï¼Œåˆ—åœ¨åã€‚ ä¿®æ”¹åƒç´ çš„å€¼ä¹Ÿæ˜¯åŒæ ·çš„æ–¹å¼ï¼š 12img[100, 90] = [255, 255, 255]print(img[100, 90]) # [255 255 255] ç»éªŒä¹‹è°ˆï¼šè¿˜æœ‰ä¸€ç§æ€§èƒ½æ›´å¥½çš„æ–¹å¼ï¼Œè·å–ï¼šimg.item(100,100,0)ï¼Œä¿®æ”¹ï¼šimg.itemset((100,100,0),255)ï¼Œä½†è¿™ç§æ–¹å¼åªèƒ½B,G,Ré€ä¸€è¿›è¡Œã€‚ æ³¨æ„ï¼šè¿™æ­¥æ“ä½œåªæ˜¯å†…å­˜ä¸­çš„imgåƒç´ ç‚¹å€¼å˜äº†ï¼Œå› ä¸ºæ²¡æœ‰ä¿å­˜ï¼Œæ‰€ä»¥åŸå›¾å¹¶æ²¡æœ‰æ›´æ”¹ã€‚ å›¾ç‰‡å±æ€§img.shapeè·å–å›¾åƒçš„å½¢çŠ¶ï¼Œå›¾ç‰‡æ˜¯å½©è‰²çš„è¯ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«è¡Œæ•°ï¼ˆé«˜åº¦ï¼‰ã€åˆ—æ•°ï¼ˆå®½åº¦ï¼‰å’Œé€šé“æ•°çš„å…ƒç»„ï¼Œç°åº¦å›¾åªè¿”å›è¡Œæ•°å’Œåˆ—æ•°ï¼š 1234print(img.shape) # (263, 247, 3)# å½¢çŠ¶ä¸­åŒ…æ‹¬è¡Œæ•°ã€åˆ—æ•°å’Œé€šé“æ•°height, width, channels = img.shape# imgæ˜¯ç°åº¦å›¾çš„è¯ï¼šheight, width = img.shape img.dtypeè·å–å›¾åƒæ•°æ®ç±»å‹ï¼š 1print(img.dtype) # uint8 ç»éªŒä¹‹è°ˆï¼šå¤šæ•°é”™è¯¯æ˜¯å› ä¸ºæ•°æ®ç±»å‹ä¸å¯¹å¯¼è‡´çš„ï¼Œæ‰€ä»¥å¥å£®çš„ä»£ç åº”è¯¥å¯¹è¿™ä¸ªå±æ€§åŠ ä»¥åˆ¤æ–­ã€‚ img.sizeè·å–å›¾åƒæ€»åƒç´ æ•°ï¼š 1print(img.size) # 263*247*3=194883 ROIROIï¼šRegion of Interestï¼Œæ„Ÿå…´è¶£åŒºåŸŸã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæ¯”å¦‚æˆ‘ä»¬è¦æ£€æµ‹çœ¼ç›ï¼Œå› ä¸ºçœ¼ç›è‚¯å®šåœ¨è„¸ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬æ„Ÿå…´è¶£çš„åªæœ‰è„¸è¿™éƒ¨åˆ†ï¼Œå…¶ä»–éƒ½ä¸careï¼Œæ‰€ä»¥å¯ä»¥å•ç‹¬æŠŠè„¸æˆªå–å‡ºæ¥ï¼Œè¿™æ ·å°±å¯ä»¥å¤§å¤§èŠ‚çœè®¡ç®—é‡ï¼Œæé«˜è¿è¡Œé€Ÿåº¦ã€‚ æˆªå–ROIéå¸¸ç®€å•ï¼ŒæŒ‡å®šå›¾ç‰‡çš„èŒƒå›´å³å¯ï¼ˆåé¢æˆ‘ä»¬å­¦äº†ç‰¹å¾åï¼Œå°±å¯ä»¥è‡ªåŠ¨æˆªå–è¾£ï¼Œ(à¸‡ â€¢_â€¢)à¸‡ï¼‰ï¼š 1234# æˆªå–è„¸éƒ¨ROIface = img[100:200, 115:188]cv2.imshow('face', face)cv2.waitKey(0) é€šé“åˆ†å‰²ä¸åˆå¹¶å½©è‰²å›¾çš„BGRä¸‰ä¸ªé€šé“æ˜¯å¯ä»¥åˆ†å¼€å•ç‹¬è®¿é—®çš„ï¼Œä¹Ÿå¯ä»¥å°†å•ç‹¬çš„ä¸‰ä¸ªé€šé“åˆå¹¶æˆä¸€å‰¯å›¾åƒã€‚åˆ†åˆ«ä½¿ç”¨cv2.split()å’Œcv2.merge()ï¼š 12b, g, r = cv2.split(img)img = cv2.merge((b, g, r)) split()å‡½æ•°æ¯”è¾ƒè€—æ—¶ï¼Œæ›´é«˜æ•ˆçš„æ–¹å¼æ˜¯ç”¨numpyä¸­çš„ç´¢å¼•ï¼Œå¦‚æå–Bé€šé“ï¼š 123b = img[:, :, 0]cv2.imshow('blue', b)cv2.waitKey(0) å°ç»“ img[y,x]è·å–/è®¾ç½®åƒç´ ç‚¹å€¼ï¼Œimg.shapeï¼šå›¾ç‰‡çš„å½¢çŠ¶ï¼ˆè¡Œæ•°ã€åˆ—æ•°ã€é€šé“æ•°ï¼‰,img.dtypeï¼šå›¾åƒçš„æ•°æ®ç±»å‹ã€‚ img[y1:y2,x1:x2]è¿›è¡ŒROIæˆªå–ï¼Œcv2.split()/cv2.merge()é€šé“åˆ†å‰²/åˆå¹¶ã€‚æ›´æ¨èçš„è·å–å•é€šé“æ–¹å¼ï¼šb = img[:, :, 0]ã€‚ ç»ƒä¹  æ‰“å¼€lena.jpgï¼Œå°†å¸½å­éƒ¨åˆ†ï¼ˆé«˜ï¼š25120ï¼Œå®½ï¼š50220ï¼‰çš„çº¢è‰²é€šé“æˆªå–å‡ºæ¥å¹¶æ˜¾ç¤ºã€‚ æ¥å£æ–‡æ¡£ cv2.split() cv2.merge() å¼•ç”¨ æœ¬èŠ‚æºç  Basic Operations on Images","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"ROI","slug":"ROI","permalink":"http://www.codec.wang/tags/ROI/"}]},{"title":"Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡3ï¼šæ»‘åŠ¨æ¡","slug":"Python-OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡3ï¼šæ»‘åŠ¨æ¡","date":"2017-12-06T14:23:11.000Z","updated":"2020-04-07T04:54:38.499Z","comments":true,"path":"opencv-python-extra-trackbar/","link":"","permalink":"http://www.codec.wang/opencv-python-extra-trackbar/","excerpt":"å­¦ä¹ ä½¿ç”¨æ»‘åŠ¨æ¡åŠ¨æ€è°ƒæ•´å‚æ•°ã€‚","text":"å­¦ä¹ ä½¿ç”¨æ»‘åŠ¨æ¡åŠ¨æ€è°ƒæ•´å‚æ•°ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ æ»‘åŠ¨æ¡çš„ä½¿ç”¨é¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ»‘åŠ¨æ¡ï¼Œå¦‚cv2.createTrackbar(&#39;R&#39;,&#39;image&#39;,0,255,call_back)ï¼Œå…¶ä¸­ å‚æ•°1ï¼šæ»‘åŠ¨æ¡çš„åç§° å‚æ•°2ï¼šæ‰€åœ¨çª—å£çš„åç§° å‚æ•°3ï¼šå½“å‰çš„å€¼ å‚æ•°4ï¼šæœ€å¤§å€¼ å‚æ•°5ï¼šå›è°ƒå‡½æ•°åç§°ï¼Œå›è°ƒå‡½æ•°é»˜è®¤æœ‰ä¸€ä¸ªè¡¨ç¤ºå½“å‰å€¼çš„å‚æ•° åˆ›å»ºå¥½ä¹‹åï¼Œå¯ä»¥åœ¨å›è°ƒå‡½æ•°ä¸­è·å–æ»‘åŠ¨æ¡çš„å€¼ï¼Œä¹Ÿå¯ä»¥ç”¨ï¼šcv2.getTrackbarPos()å¾—åˆ°ï¼Œå…¶ä¸­ï¼Œå‚æ•°1æ˜¯æ»‘åŠ¨æ¡çš„åç§°ï¼Œå‚æ•°2æ˜¯çª—å£çš„åç§°ã€‚ RGBè°ƒè‰²æ¿ä¸‹é¢æˆ‘ä»¬å®ç°ä¸€ä¸ªRGBçš„è°ƒè‰²æ¿ï¼Œç†è§£ä¸‹æ»‘åŠ¨æ¡çš„ç”¨æ³•ï¼š 1234567891011121314151617181920212223242526import cv2import numpy as np# å›è°ƒå‡½æ•°ï¼Œxè¡¨ç¤ºæ»‘å—çš„ä½ç½®ï¼Œæœ¬ä¾‹æš‚ä¸ä½¿ç”¨def nothing(x): passimg = np.zeros((300, 512, 3), np.uint8)cv2.namedWindow('image')# åˆ›å»ºRGBä¸‰ä¸ªæ»‘åŠ¨æ¡cv2.createTrackbar('R', 'image', 0, 255, nothing)cv2.createTrackbar('G', 'image', 0, 255, nothing)cv2.createTrackbar('B', 'image', 0, 255, nothing)while(True): cv2.imshow('image', img) if cv2.waitKey(1) == 27: break # è·å–æ»‘å—çš„å€¼ r = cv2.getTrackbarPos('R', 'image') g = cv2.getTrackbarPos('G', 'image') b = cv2.getTrackbarPos('B', 'image') # è®¾å®šimgçš„é¢œè‰² img[:] = [b, g, r] å°ç»“ cv2.createTrackbar()ç”¨æ¥åˆ›å»ºæ»‘åŠ¨æ¡ï¼Œå¯ä»¥åœ¨å›è°ƒå‡½æ•°ä¸­æˆ–ä½¿ç”¨cv2.getTrackbarPos()å¾—åˆ°æ»‘å—çš„ä½ç½® æ¥å£æ–‡æ¡£ cv2.createTrackbar() cv2.getTrackbarPos() å¼•ç”¨ æœ¬èŠ‚æºç  Trackbar as the Color Palette","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"æ»‘åŠ¨æ¡","slug":"æ»‘åŠ¨æ¡","permalink":"http://www.codec.wang/tags/%E6%BB%91%E5%8A%A8%E6%9D%A1/"}]},{"title":"Python+OpenCVæ•™ç¨‹3ï¼šæ‰“å¼€æ‘„åƒå¤´","slug":"Python-OpenCVæ•™ç¨‹3ï¼šæ‰“å¼€æ‘„åƒå¤´","date":"2017-12-06T08:38:02.000Z","updated":"2019-05-02T15:09:34.866Z","comments":true,"path":"opencv-python-open-camera/","link":"","permalink":"http://www.codec.wang/opencv-python-open-camera/","excerpt":"å­¦ä¹ æ‰“å¼€æ‘„åƒå¤´æ•è·ç…§ç‰‡ã€æ’­æ”¾æœ¬åœ°è§†é¢‘ã€å½•åˆ¶è§†é¢‘ç­‰ã€‚","text":"å­¦ä¹ æ‰“å¼€æ‘„åƒå¤´æ•è·ç…§ç‰‡ã€æ’­æ”¾æœ¬åœ°è§†é¢‘ã€å½•åˆ¶è§†é¢‘ç­‰ã€‚å›¾ç‰‡/è§†é¢‘ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ æ‰“å¼€æ‘„åƒå¤´å¹¶æ•è·ç…§ç‰‡ æ’­æ”¾æœ¬åœ°è§†é¢‘ï¼Œå½•åˆ¶è§†é¢‘ OpenCVå‡½æ•°ï¼šcv2.VideoCapture(), cv2.VideoWriter() æ•™ç¨‹æ‰“å¼€æ‘„åƒå¤´è¦ä½¿ç”¨æ‘„åƒå¤´ï¼Œéœ€è¦ä½¿ç”¨cv2.VideoCapture(0)åˆ›å»ºVideoCaptureå¯¹è±¡ï¼Œå‚æ•°0æŒ‡çš„æ˜¯æ‘„åƒå¤´çš„ç¼–å·ï¼Œå¦‚æœä½ ç”µè„‘ä¸Šæœ‰ä¸¤ä¸ªæ‘„åƒå¤´çš„è¯ï¼Œè®¿é—®ç¬¬2ä¸ªæ‘„åƒå¤´å°±å¯ä»¥ä¼ å…¥1ï¼Œä¾æ­¤ç±»æ¨ã€‚ 1234567891011121314# æ‰“å¼€æ‘„åƒå¤´å¹¶ç°åº¦åŒ–æ˜¾ç¤ºimport cv2capture = cv2.VideoCapture(0)while(True): # è·å–ä¸€å¸§ ret, frame = capture.read() # å°†è¿™å¸§è½¬æ¢ä¸ºç°åº¦å›¾ gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY) cv2.imshow('frame', gray) if cv2.waitKey(1) == ord('q'): break capture.read()å‡½æ•°è¿”å›çš„ç¬¬1ä¸ªå‚æ•°ret(return valueç¼©å†™)æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰è¿™ä¸€å¸§æ˜¯å¦è·å–æ­£ç¡®ã€‚cv2.cvtColor()ç”¨æ¥è½¬æ¢é¢œè‰²ï¼Œè¿™é‡Œå°†å½©è‰²å›¾è½¬æˆç°åº¦å›¾ã€‚ å¦å¤–ï¼Œé€šè¿‡cap.get(propId)å¯ä»¥è·å–æ‘„åƒå¤´çš„ä¸€äº›å±æ€§ï¼Œæ¯”å¦‚æ•è·çš„åˆ†è¾¨ç‡ï¼Œäº®åº¦å’Œå¯¹æ¯”åº¦ç­‰ã€‚propIdæ˜¯ä»0~18çš„æ•°å­—ï¼Œä»£è¡¨ä¸åŒçš„å±æ€§ï¼Œå®Œæ•´çš„å±æ€§åˆ—è¡¨å¯ä»¥å‚è€ƒï¼šVideoCapturePropertiesã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨cap.set(propId,value)æ¥ä¿®æ”¹å±æ€§å€¼ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬åœ¨whileä¹‹å‰æ·»åŠ ä¸‹é¢çš„ä»£ç ï¼š 12345678# è·å–æ•è·çš„åˆ†è¾¨ç‡# propIdå¯ä»¥ç›´æ¥å†™æ•°å­—ï¼Œä¹Ÿå¯ä»¥ç”¨OpenCVçš„ç¬¦å·è¡¨ç¤ºwidth, height = capture.get(3), capture.get(4)print(width, height)# ä»¥åŸåˆ†è¾¨ç‡çš„ä¸€å€æ¥æ•è·capture.set(cv2.CAP_PROP_FRAME_WIDTH, width * 2)capture.set(cv2.CAP_PROP_FRAME_HEIGHT, height * 2) ç»éªŒä¹‹è°ˆï¼šæŸäº›æ‘„åƒå¤´è®¾å®šåˆ†è¾¨ç‡ç­‰å‚æ•°æ—¶ä¼šæ— æ•ˆï¼Œå› ä¸ºå®ƒæœ‰å›ºå®šçš„åˆ†è¾¨ç‡å¤§å°æ”¯æŒï¼Œä¸€èˆ¬å¯åœ¨æ‘„åƒå¤´çš„èµ„æ–™é¡µä¸­æ‰¾åˆ°ã€‚ æ’­æ”¾æœ¬åœ°è§†é¢‘è·Ÿæ‰“å¼€æ‘„åƒå¤´ä¸€æ ·ï¼Œå¦‚æœæŠŠæ‘„åƒå¤´çš„ç¼–å·æ¢æˆè§†é¢‘çš„è·¯å¾„å°±å¯ä»¥æ’­æ”¾æœ¬åœ°è§†é¢‘äº†ã€‚å›æƒ³ä¸€ä¸‹cv2.waitKey()ï¼Œå®ƒçš„å‚æ•°è¡¨ç¤ºæš‚åœæ—¶é—´ï¼Œæ‰€ä»¥è¿™ä¸ªå€¼è¶Šå¤§ï¼Œè§†é¢‘æ’­æ”¾é€Ÿåº¦è¶Šæ…¢ï¼Œåä¹‹ï¼Œæ’­æ”¾é€Ÿåº¦è¶Šå¿«ï¼Œé€šå¸¸è®¾ç½®ä¸º25æˆ–30ã€‚ 12345678910# æ’­æ”¾æœ¬åœ°è§†é¢‘capture = cv2.VideoCapture('demo_video.mp4')while(capture.isOpened()): ret, frame = capture.read() gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY) cv2.imshow('frame', gray) if cv2.waitKey(30) == ord('q'): break å½•åˆ¶è§†é¢‘ä¹‹å‰æˆ‘ä»¬ä¿å­˜å›¾ç‰‡ç”¨çš„æ˜¯cv2.imwrite()ï¼Œè¦ä¿å­˜è§†é¢‘ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªVideoWriterçš„å¯¹è±¡ï¼Œéœ€è¦ç»™å®ƒä¼ å…¥å››ä¸ªå‚æ•°ï¼š è¾“å‡ºçš„æ–‡ä»¶åï¼Œå¦‚â€™output.aviâ€™ ç¼–ç æ–¹å¼FourCCç  å¸§ç‡FPS è¦ä¿å­˜çš„åˆ†è¾¨ç‡å¤§å° FourCCæ˜¯ç”¨æ¥æŒ‡å®šè§†é¢‘ç¼–ç æ–¹å¼çš„å››å­—èŠ‚ç ï¼Œæ‰€æœ‰çš„ç¼–ç å¯å‚è€ƒVideo Codecsã€‚å¦‚MJPGç¼–ç å¯ä»¥è¿™æ ·å†™ï¼š cv2.VideoWriter_fourcc(*&#39;MJPG&#39;)æˆ–cv2.VideoWriter_fourcc(&#39;M&#39;,&#39;J&#39;,&#39;P&#39;,&#39;G&#39;) 12345678910111213141516capture = cv2.VideoCapture(0)# å®šä¹‰ç¼–ç æ–¹å¼å¹¶åˆ›å»ºVideoWriterå¯¹è±¡fourcc = cv2.VideoWriter_fourcc(*'MJPG')outfile = cv2.VideoWriter('output.avi', fourcc, 25., (640, 480))while(capture.isOpened()): ret, frame = capture.read() if ret: outfile.write(frame) # å†™å…¥æ–‡ä»¶ cv2.imshow('frame', frame) if cv2.waitKey(1) == ord('q'): break else: break å°ç»“ ä½¿ç”¨cv2.VideoCapture()åˆ›å»ºè§†é¢‘å¯¹è±¡ï¼Œç„¶ååœ¨å¾ªç¯ä¸­ä¸€å¸§å¸§æ˜¾ç¤ºå›¾åƒã€‚å‚æ•°ä¼ å…¥æ•°å­—æ—¶ï¼Œä»£è¡¨æ‰“å¼€æ‘„åƒå¤´ï¼Œä¼ å…¥æœ¬åœ°è§†é¢‘è·¯å¾„æ—¶ï¼Œè¡¨ç¤ºæ’­æ”¾æœ¬åœ°è§†é¢‘ã€‚ cap.get(propId)è·å–è§†é¢‘å±æ€§ï¼Œcap.set(propId,value)è®¾ç½®è§†é¢‘å±æ€§ã€‚ cv2.VideoWriter()åˆ›å»ºè§†é¢‘å†™å…¥å¯¹è±¡ï¼Œç”¨æ¥å½•åˆ¶/ä¿å­˜è§†é¢‘ã€‚ ç»ƒä¹  è¯·å…ˆé˜…è¯»ç•ªå¤–ç¯‡ï¼šæ»‘åŠ¨æ¡ï¼Œç„¶åå®ç°ä¸€ä¸ªå¯ä»¥æ‹–åŠ¨æ»‘å—æ’­æ”¾è§†é¢‘çš„åŠŸèƒ½ã€‚ï¼ˆæç¤ºï¼šéœ€è¦ç”¨åˆ° cv2.CAP_PROP_FRAME_COUNTå’Œcv2.CAP_PROP_POS_FRAMESä¸¤ä¸ªå±æ€§ï¼‰ã€‚ æ¥å£æ–‡æ¡£ VideoCapture Object VideoWriter Object cv2.cvtColor() å¼•ç”¨ æœ¬èŠ‚æºç  Video Codecs by FOURCC Getting Started with Videos","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}]},{"title":"Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡2ï¼šæ— æŸä¿å­˜å’ŒMatplotlibä½¿ç”¨","slug":"Python-OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡2ï¼šæ— æŸä¿å­˜å’ŒMatplotlibä½¿ç”¨","date":"2017-12-06T07:55:15.000Z","updated":"2020-04-07T04:55:18.324Z","comments":true,"path":"opencv-python-extra-high-quality-save-and-using-matplotlib/","link":"","permalink":"http://www.codec.wang/opencv-python-extra-high-quality-save-and-using-matplotlib/","excerpt":"äº†è§£å¸¸ç”¨å›¾ç‰‡æ ¼å¼å’ŒOpenCVé«˜è´¨é‡ä¿å­˜å›¾ç‰‡çš„æ–¹å¼ï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨Matplotlibæ˜¾ç¤ºOpenCVå›¾åƒã€‚","text":"äº†è§£å¸¸ç”¨å›¾ç‰‡æ ¼å¼å’ŒOpenCVé«˜è´¨é‡ä¿å­˜å›¾ç‰‡çš„æ–¹å¼ï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨Matplotlibæ˜¾ç¤ºOpenCVå›¾åƒã€‚ æ— æŸä¿å­˜äº‹å®ä¸Šï¼Œæˆ‘ä»¬æ—¥å¸¸çœ‹åˆ°çš„å¤§éƒ¨åˆ†å›¾ç‰‡éƒ½æ˜¯å‹ç¼©è¿‡çš„ï¼Œé‚£ä¹ˆéƒ½æœ‰å“ªäº›å¸¸è§çš„å›¾ç‰‡æ ¼å¼å‘¢ï¼Ÿ å¸¸ç”¨å›¾ç‰‡æ ¼å¼ bmp å…¨ç§°ï¼šBitmap ä¸å‹ç¼© jpg å…¨ç§°ï¼šJoint Photographic Experts Group æœ‰æŸå‹ç¼©æ–¹å¼ png å…¨ç§°ï¼šPortable Network Graphics æ— æŸå‹ç¼©æ–¹å¼ ç®€å•æ¥è¯´ï¼ŒåŒä¸€ä¸ªæ–‡ä»¶ä¿å­˜æˆä¸åŒçš„æ ¼å¼åï¼Œæ–‡ä»¶å¤§å°ä¸Šbmpè‚¯å®šæ˜¯æœ€å¤§çš„ï¼Œè€Œpngå’Œjpgï¼Œä¸åŒçš„å‹ç¼©æ¯”ç»“æœä¼šæœ‰æ‰€ä¸åŒã€‚å¯ä»¥ç”¨ç”»å›¾å·¥å…·æ–°å»ºä¸€å‰¯100Ã—100çš„å›¾åƒï¼Œåˆ†åˆ«ä¿å­˜æˆè¿™ä¸‰ç§æ ¼å¼æ¥éªŒè¯ï¼š é«˜è´¨é‡ä¿å­˜ç”¨cv2.imwrite()ä¿å­˜å›¾ç‰‡æ—¶ï¼Œå¯ä»¥ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆè¯·å‚è€ƒæ¥å£æ–‡æ¡£ï¼‰ï¼Œç”¨äºæ§åˆ¶ä¿å­˜è´¨é‡ï¼š cv2.IMWRITE_JPEG_QUALITYï¼šjpgè´¨é‡æ§åˆ¶ï¼Œå–å€¼0~100ï¼Œå€¼è¶Šå¤§ï¼Œè´¨é‡è¶Šå¥½ï¼Œé»˜è®¤ä¸º95 cv2.IMWRITE_PNG_COMPRESSIONï¼špngè´¨é‡æ§åˆ¶ï¼Œå–å€¼0~9ï¼Œå€¼è¶Šå¤§ï¼Œå‹ç¼©æ¯”è¶Šé«˜ï¼Œé»˜è®¤ä¸º1 è¿˜æœ‰è¯¸å¦‚CV_IMWRITE_WEBP_QUALITYçš„å‚é‡ï¼Œä¸å¸¸ç”¨ï¼Œè¯·å‚è€ƒï¼šImwriteFlagsã€‚ ä¸¾ä¾‹æ¥è¯´ï¼ŒåŸå›¾lena.jpgçš„åˆ†è¾¨ç‡æ˜¯350Ã—350ï¼Œå¤§å°49.7KBã€‚æˆ‘ä»¬æŠŠå®ƒè½¬æˆä¸åŒæ ¼å¼çœ‹ä¸‹ï¼š 123456789101112131415161718import cv2new_img = cv2.imread('lena.jpg')# bmpcv2.imwrite('img_bmp.bmp',new_img) # æ–‡ä»¶å¤§å°ï¼š359KB# jpg é»˜è®¤95%è´¨é‡cv2.imwrite('img_jpg95.jpg',new_img) # æ–‡ä»¶å¤§å°ï¼š52.3KB# jpg 20%è´¨é‡cv2.imwrite('img_jpg20.jpg',new_img,[int(cv2.IMWRITE_JPEG_QUALITY),20]) # æ–‡ä»¶å¤§å°ï¼š8.01KB# jpg 100%è´¨é‡cv2.imwrite('img_jpg100.jpg',new_img,[int(cv2.IMWRITE_JPEG_QUALITY),100]) # æ–‡ä»¶å¤§å°ï¼š82.5KB# png é»˜è®¤1å‹ç¼©æ¯”cv2.imwrite('img_png1.png',new_img) # æ–‡ä»¶å¤§å°ï¼š240KB# png 9å‹ç¼©æ¯”cv2.imwrite('img_png9.png',new_img,[int(cv2.IMWRITE_PNG_COMPRESSION),9]) # æ–‡ä»¶å¤§å°ï¼š207KB å¯ä»¥çœ‹åˆ°ï¼š bmpæ–‡ä»¶æ˜¯æœ€å¤§çš„ï¼Œæ²¡æœ‰ä»»ä½•å‹ç¼©ï¼ˆ1ä¸ªåƒç´ ç‚¹1byteï¼Œ3é€šé“çš„å½©è‰²å›¾æ€»å¤§å°ï¼š350Ã—350Ã—3/1024 â‰ˆ 359 KBï¼‰ jpg/pngæœ¬èº«å°±æœ‰å‹ç¼©çš„ï¼Œæ‰€ä»¥å°±ç®—æ˜¯100%çš„è´¨é‡ä¿å­˜ï¼Œä½“ç§¯ä¹Ÿæ¯”bmpå°å¾ˆå¤š jpgçš„å®¹é‡ä¼˜åŠ¿å¾ˆæ˜æ˜¾ï¼Œè¿™ä¹Ÿæ˜¯å®ƒä¸ºä»€ä¹ˆå¦‚æ­¤æµè¡Œçš„åŸå›  æ€è€ƒï¼šä¸ºä»€ä¹ˆåŸå›¾49.7KBï¼Œä¿å­˜æˆbmpæˆ–å…¶ä»–æ ¼å¼åè€Œå¤§äº†å‘¢ï¼Ÿ è¿™æ˜¯ä¸ªå¾ˆæœ‰è¶£çš„é—®é¢˜ï¼Œå¾ˆå¤šç«¥é‹éƒ½é—®è¿‡æˆ‘ã€‚è¿™é‡Œéœ€è¦æ˜ç¡®çš„æ˜¯ä¿å­˜æ–°æ ¼å¼æ—¶ï¼Œå®¹é‡å¤§å°è·ŸåŸå›¾çš„å®¹é‡æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œè€Œæ˜¯å–å†³äºåŸå›¾çš„åˆ†è¾¨ç‡å¤§å°å’ŒåŸå›¾æœ¬èº«çš„å†…å®¹ï¼ˆå‹ç¼©æ–¹å¼ï¼‰ï¼Œæ‰€ä»¥lena.jpgä¿å­˜æˆä¸å‹ç¼©çš„bmpæ ¼å¼æ—¶ï¼Œå®¹é‡å¤§å°å°±æ˜¯å›ºå®šçš„350Ã—350Ã—3/1024 â‰ˆ 359 KBï¼›å¦å¤–ï¼Œå®¹é‡å˜å¤§ä¸ä»£è¡¨ç”»è´¨æå‡å™¢ï¼Œä¸ç„¶å°±é€†å¤©äº†~ MatplotlibMatplotlibæ˜¯Pythonçš„ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„ç»˜å›¾åº“ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å»å®˜ç½‘å­¦ä¹ æ›´å¤šå†…å®¹ã€‚ æ˜¾ç¤ºç°åº¦å›¾12345678import cv2import matplotlib.pyplot as pltimg = cv2.imread('lena.jpg', 0)# ç°åº¦å›¾æ˜¾ç¤ºï¼Œcmap(color map)è®¾ç½®ä¸ºgrayplt.imshow(img, cmap='gray')plt.show() ç»“æœå¦‚ä¸‹ï¼š æ˜¾ç¤ºå½©è‰²å›¾OpenCVä¸­çš„å›¾åƒæ˜¯ä»¥BGRçš„é€šé“é¡ºåºå­˜å‚¨çš„ï¼Œä½†Matplotlibæ˜¯ä»¥RGBæ¨¡å¼æ˜¾ç¤ºçš„ï¼Œæ‰€ä»¥ç›´æ¥åœ¨Matplotlibä¸­æ˜¾ç¤ºOpenCVå›¾åƒä¼šå‡ºç°é—®é¢˜ï¼Œå› æ­¤éœ€è¦è½¬æ¢ä¸€ä¸‹: 1234567891011121314151617import cv2import matplotlib.pyplot as pltimg = cv2.imread('lena.jpg')img2 = img[:, :, ::-1]# æˆ–ä½¿ç”¨# img2 = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)# æ˜¾ç¤ºä¸æ­£ç¡®çš„å›¾plt.subplot(121),plt.imshow(img) # æ˜¾ç¤ºæ­£ç¡®çš„å›¾plt.subplot(122)plt.xticks([]), plt.yticks([]) # éšè—xå’Œyè½´plt.imshow(img2)plt.show() img[:,:,0]è¡¨ç¤ºå›¾ç‰‡çš„è“è‰²é€šé“ï¼Œimg[:,:,::-1]å°±è¡¨ç¤ºBGRç¿»è½¬ï¼Œå˜æˆRGBï¼Œè¯´æ˜ä¸€ä¸‹ï¼š ç†Ÿæ‚‰Pythonçš„ç«¥é‹åº”è¯¥çŸ¥é“ï¼Œå¯¹ä¸€ä¸ªå­—ç¬¦ä¸²sç¿»è½¬å¯ä»¥è¿™æ ·å†™ï¼šs[::-1]ï¼Œâ€™abcâ€™å˜æˆâ€™cbaâ€™ï¼Œ-1è¡¨ç¤ºé€†åºã€‚å›¾ç‰‡æ˜¯äºŒç»´çš„ï¼Œæ‰€ä»¥å®Œæ•´åœ°å¤åˆ¶ä¸€å‰¯å›¾åƒå°±æ˜¯ï¼š 1img2 = img[:,:] # å†™å…¨å°±æ˜¯ï¼šimg2 = img[0:height,0:width] è€Œå›¾ç‰‡æ˜¯æœ‰ä¸‰ä¸ªé€šé“ï¼Œç›¸å½“äºä¸€ä¸ªé•¿åº¦ä¸º3çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥é€šé“ç¿»è½¬ä¸å›¾ç‰‡å¤åˆ¶ç»„åˆèµ·æ¥ä¾¿æ˜¯img[:,:,::-1]ã€‚ ç»“æœå¦‚ä¸‹ï¼š åŠ è½½å’Œä¿å­˜å›¾ç‰‡ä¸ä½¿ç”¨OpenCVï¼ŒMatplotlibä¹Ÿå¯ä»¥åŠ è½½å’Œä¿å­˜å›¾ç‰‡ï¼š 12345678import matplotlib.image as pliimg = pli.imread('lena.jpg')plt.imshow(img)# ä¿å­˜å›¾ç‰‡ï¼Œéœ€æ”¾åœ¨show()å‡½æ•°ä¹‹å‰plt.savefig('lena2.jpg')plt.show() æ¥å£æ–‡æ¡£ cv2.imwrite() ImwriteFlags å¼•ç”¨ æœ¬èŠ‚æºç  èŠä¸€èŠå‡ ç§å¸¸ç”¨webå›¾ç‰‡æ ¼å¼ Matplotlibå®˜ç½‘","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"},{"name":"Matplotlib","slug":"Matplotlib","permalink":"http://www.codec.wang/tags/Matplotlib/"}]},{"title":"Python+OpenCVæ•™ç¨‹2ï¼šåŸºæœ¬å…ƒç´ -å›¾ç‰‡","slug":"Python-OpenCVæ•™ç¨‹2ï¼šåŸºæœ¬å…ƒç´ -å›¾ç‰‡","date":"2017-12-06T07:52:06.000Z","updated":"2020-04-07T04:41:46.757Z","comments":true,"path":"opencv-python-basic-element-image/","link":"","permalink":"http://www.codec.wang/opencv-python-basic-element-image/","excerpt":"å­¦ä¹ å¦‚ä½•åŠ è½½å›¾ç‰‡ï¼Œæ˜¾ç¤ºå¹¶ä¿å­˜å›¾ç‰‡ã€‚","text":"å­¦ä¹ å¦‚ä½•åŠ è½½å›¾ç‰‡ï¼Œæ˜¾ç¤ºå¹¶ä¿å­˜å›¾ç‰‡ã€‚å›¾ç‰‡ç­‰å¯åˆ°æºç å¤„ä¸‹è½½ã€‚ ç›®æ ‡ åŠ è½½å›¾ç‰‡ï¼Œæ˜¾ç¤ºå›¾ç‰‡ï¼Œä¿å­˜å›¾ç‰‡ OpenCVå‡½æ•°ï¼šcv2.imread(), cv2.imshow(), cv2.imwrite() æ•™ç¨‹å¤§éƒ¨åˆ†äººå¯èƒ½éƒ½çŸ¥é“ç”µè„‘ä¸Šçš„å½©è‰²å›¾æ˜¯ä»¥RGB(çº¢-ç»¿-è“ï¼ŒRed-Green-Blue)é¢œè‰²æ¨¡å¼æ˜¾ç¤ºçš„ï¼Œä½†OpenCVä¸­å½©è‰²å›¾æ˜¯ä»¥B-G-Ré€šé“é¡ºåºå­˜å‚¨çš„ï¼Œç°åº¦å›¾åªæœ‰ä¸€ä¸ªé€šé“ã€‚ å›¾åƒåæ ‡çš„èµ·å§‹ç‚¹æ˜¯åœ¨å·¦ä¸Šè§’ï¼Œæ‰€ä»¥è¡Œå¯¹åº”çš„æ˜¯yï¼Œåˆ—å¯¹åº”çš„æ˜¯xï¼š åŠ è½½å›¾ç‰‡ä½¿ç”¨cv2.imread()æ¥è¯»å…¥ä¸€å¼ å›¾ç‰‡ï¼š 1234import cv2# åŠ è½½ç°åº¦å›¾img = cv2.imread('lena.jpg', 0) å‚æ•°1ï¼šå›¾ç‰‡çš„æ–‡ä»¶å å¦‚æœå›¾ç‰‡æ”¾åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ï¼Œç›´æ¥å†™æ–‡ä»¶åå°±è¡Œäº†ï¼Œå¦‚â€™lena.jpgâ€™ å¦åˆ™éœ€è¦ç»™å‡ºç»å¯¹è·¯å¾„ï¼Œå¦‚â€™D:\\OpenCVSamples\\lena.jpgâ€™ å‚æ•°2ï¼šè¯»å…¥æ–¹å¼ï¼Œçœç•¥å³é‡‡ç”¨é»˜è®¤å€¼ cv2.IMREAD_COLORï¼šå½©è‰²å›¾ï¼Œé»˜è®¤å€¼(1) cv2.IMREAD_GRAYSCALEï¼šç°åº¦å›¾(0) cv2.IMREAD_UNCHANGEDï¼šåŒ…å«é€æ˜é€šé“çš„å½©è‰²å›¾(-1) ç»éªŒä¹‹è°ˆï¼šè·¯å¾„ä¸­ä¸èƒ½æœ‰ä¸­æ–‡å™¢ï¼Œå¹¶ä¸”æ²¡æœ‰åŠ è½½æˆåŠŸçš„è¯æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œprint(img)çš„ç»“æœä¸ºNoneï¼Œåé¢å¤„ç†æ‰ä¼šæŠ¥é”™ï¼Œç®—æ˜¯ä¸ªå°å‘ã€‚ æ˜¾ç¤ºå›¾ç‰‡ä½¿ç”¨cv2.imshow()æ˜¾ç¤ºå›¾ç‰‡ï¼Œçª—å£ä¼šè‡ªé€‚åº”å›¾ç‰‡çš„å¤§å°ï¼š 12cv2.imshow('lena', img)cv2.waitKey(0) å‚æ•°1æ˜¯çª—å£çš„åå­—ï¼Œå‚æ•°2æ˜¯è¦æ˜¾ç¤ºçš„å›¾ç‰‡ã€‚ä¸åŒçª—å£ä¹‹é—´ç”¨çª—å£ååŒºåˆ†ï¼Œæ‰€ä»¥çª—å£åç›¸åŒå°±è¡¨ç¤ºæ˜¯åŒä¸€ä¸ªçª—å£ï¼Œæ˜¾ç¤ºç»“æœå¦‚ä¸‹ï¼š cv2.waitKey()æ˜¯è®©ç¨‹åºæš‚åœçš„æ„æ€ï¼Œå‚æ•°æ˜¯ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’msï¼‰ã€‚æ—¶é—´ä¸€åˆ°ï¼Œä¼šç»§ç»­æ‰§è¡Œæ¥ä¸‹æ¥çš„ç¨‹åºï¼Œä¼ å…¥0çš„è¯è¡¨ç¤ºä¸€ç›´ç­‰å¾…ã€‚ç­‰å¾…æœŸé—´ä¹Ÿå¯ä»¥è·å–ç”¨æˆ·çš„æŒ‰é”®è¾“å…¥ï¼šk = cv2.waitKey(0)ï¼ˆç»ƒä¹ 1ï¼‰ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥å…ˆç”¨cv2.namedWindow()åˆ›å»ºä¸€ä¸ªçª—å£ï¼Œä¹‹åå†æ˜¾ç¤ºå›¾ç‰‡ï¼š 1234# å…ˆå®šä¹‰çª—å£ï¼Œåæ˜¾ç¤ºå›¾ç‰‡cv2.namedWindow('lena2', cv2.WINDOW_NORMAL)cv2.imshow('lena2', img)cv2.waitKey(0) å‚æ•°1ä¾æ—§æ˜¯çª—å£çš„åå­—ï¼Œå‚æ•°2é»˜è®¤æ˜¯cv2.WINDOW_AUTOSIZEï¼Œè¡¨ç¤ºçª—å£å¤§å°è‡ªé€‚åº”å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºcv2.WINDOW_NORMALï¼Œè¡¨ç¤ºçª—å£å¤§å°å¯è°ƒæ•´ã€‚å›¾ç‰‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘ç”¨åè€…ã€‚ ä¿å­˜å›¾ç‰‡ä½¿ç”¨cv2.imwrite()ä¿å­˜å›¾ç‰‡ï¼Œå‚æ•°1æ˜¯åŒ…å«åç¼€åçš„æ–‡ä»¶åï¼š 1cv2.imwrite('lena_gray.jpg', img) Niceï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•å‘ï¼Œå†æ¥å†å‰å™¢(â—â€™â—¡â€™â—) å°ç»“ cv2.imread()è¯»å…¥å›¾ç‰‡ã€cv2.imshow()æ˜¾ç¤ºå›¾ç‰‡ã€cv2.imwrite()ä¿å­˜å›¾ç‰‡ã€‚ ç»ƒä¹  æ‰“å¼€lena.jpgå¹¶æ˜¾ç¤ºï¼Œå¦‚æœæŒ‰ä¸‹â€™sâ€™ï¼Œå°±ä¿å­˜å›¾ç‰‡ä¸ºâ€™lena_save.bmpâ€™ï¼Œå¦åˆ™å°±ç»“æŸç¨‹åºã€‚ Matplotlibæ˜¯Pythonä¸­å¸¸ç”¨çš„ä¸€ä¸ªç»˜å›¾åº“ï¼Œè¯·å­¦ä¹ ç•ªå¤–ç¯‡ï¼šæ— æŸä¿å­˜å’ŒMatplotlibä½¿ç”¨ã€‚ æ¥å£æ–‡æ¡£ Mat Object cv2.imread() cv2.imshow() cv2.imwrite() cv.namedWindow() å¼•ç”¨ æœ¬èŠ‚æºç  Getting Started with Images","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}]},{"title":"Python+OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡1ï¼šä»£ç æ€§èƒ½ä¼˜åŒ–","slug":"Python-OpenCVæ•™ç¨‹ç•ªå¤–ç¯‡1ï¼šä»£ç æ€§èƒ½ä¼˜åŒ–","date":"2017-12-06T07:51:52.000Z","updated":"2019-05-11T11:42:29.351Z","comments":true,"path":"opencv-python-extra-code-optimization/","link":"","permalink":"http://www.codec.wang/opencv-python-extra-code-optimization/","excerpt":"å­¦ä¹ å¦‚ä½•è¯„ä¼°å’Œä¼˜åŒ–ä»£ç æ€§èƒ½ã€‚ï¼ˆæœ¬èŠ‚è¿˜æ²¡æ›´æ–°å®Œâ€¦â€¦â€¦â€¦ï¼‰","text":"å­¦ä¹ å¦‚ä½•è¯„ä¼°å’Œä¼˜åŒ–ä»£ç æ€§èƒ½ã€‚ï¼ˆæœ¬èŠ‚è¿˜æ²¡æ›´æ–°å®Œâ€¦â€¦â€¦â€¦ï¼‰ å®Œæˆä¸€é¡¹ä»»åŠ¡å¾ˆé‡è¦ï¼Œé«˜æ•ˆåœ°å®Œæˆæ›´é‡è¦ã€‚å›¾åƒå¤„ç†æ˜¯å¯¹çŸ©é˜µçš„æ“ä½œï¼Œæ•°æ®é‡å·¨å¤§ã€‚å¦‚æœä»£ç å†™çš„ä¸å¥½ï¼Œæ€§èƒ½å·®è·å°†å¾ˆå¤§ï¼Œæ‰€ä»¥è¿™èŠ‚æˆ‘ä»¬æ¥äº†è§£ä¸‹å¦‚ä½•è¯„ä¼°å’Œæå‡ä»£ç æ€§èƒ½ã€‚ è¯„ä¼°ä»£ç è¿è¡Œæ—¶é—´123456import cv2start = cv2.getTickCount()# è¿™é‡Œå†™æµ‹è¯•ä»£ç ...end = cv2.getTickCount()print((end - start) / cv2.getTickFrequency()) è¿™æ®µä»£ç å°±æ˜¯ç”¨æ¥æµ‹é‡ç¨‹åºè¿è¡Œæ—¶é—´çš„ï¼ˆå•ä½ï¼šsï¼‰ï¼Œå…¶ä¸­cv2.getTickCount()å‡½æ•°å¾—åˆ°ç”µè„‘å¯åŠ¨ä»¥æ¥çš„æ—¶é’Ÿå‘¨æœŸæ•°ï¼Œcv2.getTickFrequency()è¿”å›ä½ ç”µè„‘çš„ä¸»é¢‘ï¼Œå‰åç›¸å‡å†é™¤ä»¥ä¸»é¢‘å°±æ˜¯ä½ ä»£ç çš„è¿è¡Œæ—¶é—´ï¼ˆè¿™æ ·è§£é‡Šå¹¶ä¸å®Œå…¨å‡†ç¡®ï¼Œä½†èƒ½ç†è§£å°±è¡Œï¼‰ã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥ç”¨Pythonä¸­çš„timeæ¨¡å—è®¡æ—¶ï¼š 123456import timestart = time.clock()# è¿™é‡Œå†™æµ‹è¯•ä»£ç ...end = time.clock()print(end - start) ç»éªŒä¹‹è°ˆï¼šå¦‚æœä½ ä½¿ç”¨çš„æ˜¯IPythonæˆ–Jupyter Notebookå¼€å‘ç¯å¢ƒï¼Œæ€§èƒ½åˆ†æå°†ä¼šéå¸¸æ–¹ä¾¿ï¼Œè¯¦æƒ…è¯·å‚è€ƒï¼šTiming and Profiling in IPython ä¼˜åŒ–åŸåˆ™ æ•°æ®å…ƒç´ å°‘æ—¶ç”¨Pythonè¯­æ³•ï¼Œæ•°æ®å…ƒç´ å¤šæ—¶ç”¨Numpyï¼š 1234567x = 10z = np.uint8([10])# å°è¯•æ¯”è¾ƒä¸‹é¢ä¸‰å¥è¯å„è‡ªçš„è¿è¡Œæ—¶é—´y = x * x * x # (1.6410249677846285e-06)y = x**3 # (2.461537451676943e-06)y = z * z * z # æœ€æ…¢ (3.1179474387907945e-05) æ‰€ä»¥Numpyçš„è¿è¡Œé€Ÿåº¦å¹¶ä¸ä¸€å®šæ¯”Pythonæœ¬èº«è¯­æ³•å¿«ï¼Œå…ƒç´ æ•°é‡è¾ƒå°‘æ—¶ï¼Œè¯·ç”¨Pythonæœ¬èº«æ ¼å¼ã€‚ å°½é‡é¿å…ä½¿ç”¨å¾ªç¯ï¼Œå°¤å…¶åµŒå¥—å¾ªç¯ï¼Œå› ä¸ºæå…¶æ…¢ï¼ï¼ï¼ ä¼˜å…ˆä½¿ç”¨OpenCV/Numpyä¸­å°è£…å¥½çš„å‡½æ•° å°½é‡å°†æ•°æ®å‘é‡åŒ–ï¼Œå˜æˆNumpyçš„æ•°æ®æ ¼å¼ å°½é‡é¿å…æ•°ç»„çš„å¤åˆ¶æ“ä½œ æ¥å£æ–‡æ¡£ cv2.getTickCount() cv2.getTickFrequency() å¼•ç”¨ æœ¬èŠ‚æºç  Python Optimization Techniques Timing and Profiling in IPython Advanced Numpy","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}]},{"title":"Python+OpenCVæ•™ç¨‹1ï¼šç®€ä»‹ä¸å®‰è£…","slug":"Python-OpenCVæ•™ç¨‹1ï¼šç®€ä»‹ä¸å®‰è£…","date":"2017-12-06T07:50:59.000Z","updated":"2020-04-07T04:41:05.345Z","comments":true,"path":"opencv-python-introduction-and-installation/","link":"","permalink":"http://www.codec.wang/opencv-python-introduction-and-installation/","excerpt":"ç›¸ä¿¡å¤§éƒ¨åˆ†äººçŸ¥é“çš„OpenCVéƒ½æ˜¯ç”¨C++æ¥å¼€å‘çš„ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘æ¨èä½¿ç”¨Pythonå‘¢ï¼Ÿ","text":"ç›¸ä¿¡å¤§éƒ¨åˆ†äººçŸ¥é“çš„OpenCVéƒ½æ˜¯ç”¨C++æ¥å¼€å‘çš„ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘æ¨èä½¿ç”¨Pythonå‘¢ï¼Ÿ æœ¬æ•™ç¨‹ç¿»è¯‘è‡ªOpenCVå®˜æ–¹è‹±æ–‡æ•™ç¨‹ï¼Œæˆ‘æŒ‰ç…§ä½¿ç”¨åº¦å’Œéš¾æ˜“åº¦ç¿»è¯‘ï¼Œé‡æ–°ç¼–å†™äº†å¤§é‡åŸåˆ›å†…å®¹ï¼Œå°†ä¸å¸¸ç”¨å’Œè¾ƒéš¾çš„éƒ¨åˆ†å†™æˆç•ªå¤–ç¯‡ï¼Œæµ…æ˜¾æ˜“æ‡‚ï¼Œå¾ˆeasyçš„è¾£ã€‚æ¯èŠ‚çš„æºç ã€å›¾ç‰‡å’Œç»ƒä¹ é¢˜ç­”æ¡ˆå‡å¯åœ¨å¼•ç”¨å¤„æ‰¾åˆ°å™¢(âŠ™oâŠ™) Pythonç…§æ ·å¿«ï¼ä¼—æ‰€å‘¨çŸ¥ï¼Œè™½ç„¶Pythonè¯­æ³•ç®€æ´ï¼Œç¼–å†™é«˜æ•ˆï¼Œä½†ç›¸æ¯”C/C++è¿è¡Œæ…¢å¾ˆå¤šã€‚ç„¶è€ŒPythonè¿˜æœ‰ä¸ªé‡è¦çš„ç‰¹æ€§ï¼šå®ƒæ˜¯ä¸€é—¨èƒ¶æ°´è¯­è¨€ï¼Pythonå¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰©å±•C/C++ã€‚OpenCV-Pythonå°±æ˜¯ç”¨PythonåŒ…è£…äº†C++çš„å®ç°ï¼ŒèƒŒåå®é™…å°±æ˜¯C++çš„ä»£ç åœ¨è·‘ï¼Œæ‰€ä»¥ä»£ç çš„è¿è¡Œé€Ÿåº¦è·ŸåŸç”ŸC/C++é€Ÿåº¦ä¸€æ ·å¿«ã€‚ æˆ‘ä¸¾ä¸¤ä¸ªç®€å•çš„ä¾‹å­å°±ä¸€ç›®äº†ç„¶äº†ï¼šä¸€ä¸ªæ˜¯è¯»å…¥å›¾ç‰‡ï¼Œå¦ä¸€ä¸ªæ˜¯è°ƒæ•´å›¾ç‰‡çš„å¯¹æ¯”åº¦å’Œäº®åº¦ï¼š å¯ä»¥çœ‹åˆ°æŸäº›æƒ…å†µä¸‹Pythonçš„è¿è¡Œé€Ÿåº¦ç”šè‡³å¥½äºC++ï¼Œä»£ç è¡Œæ•°ä¹Ÿç›´æ¥å°‘ä¸€åŠå¤šï¼å¦å¤–ï¼Œå›¾åƒæ˜¯çŸ©é˜µæ•°æ®ï¼ŒOpenCV-PythonåŸç”Ÿæ”¯æŒNumpyï¼Œç›¸å½“äºPythonä¸­çš„Matlabï¼Œä¸ºçŸ©é˜µè¿ç®—ã€ç§‘å­¦è®¡ç®—æä¾›äº†æå¤§çš„ä¾¿åˆ©æ€§ã€‚ äººå·¥æ™ºèƒ½æµªæ½®è¿‘äº›å¹´ï¼Œäººå·¥æ™ºèƒ½ç›¸å…³æŠ€æœ¯çš„å¿«é€Ÿå‘å±•å¤§å®¶æœ‰ç›®å…±ç¹ï¼Œä¸å¿…å¤šè¯´ã€‚åœ¨ç¼–ç¨‹è¯­è¨€æ–¹é¢ï¼Œæ›´å¤šäººå¸Œæœ›çš„æ˜¯å…·å¤‡é«˜æ•ˆå¼€å‘æ•ˆç‡ã€è·¨å¹³å°ã€é«˜åº¦æ‰©å±•æ€§çš„è¯­è¨€ï¼Œå°¤å…¶æ˜¯ä¸€äº›AIå·¨å¤´ä¼˜å…ˆæ¨å‡ºæ”¯æŒPythonè¯­è¨€çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œå¦‚Facebookçš„PyTorchã€Googleçš„Tensorflowç­‰ï¼Œå¯ä»¥è¯´Pythonæ˜¯åå‰¯å…¶å®çš„â€œç½‘çº¢è¯­è¨€â€äº†ã€‚ ä»TIOBEç¼–ç¨‹è¯­è¨€æ’è¡Œæ¦œä¹Ÿå¯ä»¥çœ‹åˆ°ï¼ŒPythonå‘å±•è¿…çŒ›ï¼Œå·²ç»é€¼è¿‘C++çš„ä»½é¢ã€‚è¿™ä¸ªæ’è¡Œæ¦œæ¯æœˆæ›´æ–°ï¼Œæˆ‘å°±ä¸æˆªå›¾äº†ï¼Œç¼–å†™æ—¶TOP5ï¼šJava/C/C++/Python/C#ã€‚ äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Python å¦‚æœä½ æç§‘ç ”ç”¨ï¼Œæœæ–­æ”¾å¼ƒC++ï¼ˆMatlabï¼Ÿå‡ºé—¨å·¦æ‹ï¼‰ å¦‚æœä½ æ˜¯å¿«é€ŸåŸå‹å¼€å‘ï¼ŒéªŒè¯æ–¹æ¡ˆï¼Œæœæ–­æ”¾å¼ƒC++ å¦‚æœä½ æ‡’çš„é…ç½®OpenCVç¯å¢ƒï¼Œæœæ–­æ”¾å¼ƒC++ å¦‚æœä½ çš„ç¨‹åºæ˜¯åœ¨æ”¯æŒPythonçš„è¾ƒé«˜ç¡¬ä»¶ç¯å¢ƒä¸‹è¿è¡Œï¼Œæœæ–­æ”¾å¼ƒC++ å¦‚æœä½ æ‹…å¿ƒPythonå†™ä¸äº†ç•Œé¢ï¼Œé‚£æ˜¯ä½ çš„é—®é¢˜o_o â€¦. é™¤éä½ çš„ç¨‹åºæ˜¯MFCæˆ–å·²ç»ç”¨C++ç¼–å†™å…¶ä»–æ¨¡å—æˆ–æ˜¯åµŒå…¥å¼è®¾å¤‡ï¼Œé‚£å°±ç”¨C++å§ â€œäººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Pythonï¼ï¼ï¼â€ å®‰è£… æœ¬æ•™ç¨‹ç¼–å†™æ—¶ä½¿ç”¨çš„è½¯ä»¶ç‰ˆæœ¬æ˜¯ï¼šOpenCV 3.xï¼ŒPython 3.xã€‚ è¦å®‰è£…OpenCVï¼Œåªéœ€cmdä¸‹çš„ä¸€æ¡æŒ‡ä»¤ï¼š 1pip install opencv-python pipæ˜¯Pythonçš„åŒ…ç®¡ç†å™¨ï¼Œå¦‚æœä½ è¿˜æ²¡å®‰è£…Pythonï¼Œå¼ºçƒˆæ¨èå®‰è£…Anacondaï¼Œå®ƒåŒ…å«äº†å¤§é‡çš„ç§‘å­¦è®¡ç®—åŒ…ï¼Œä¸ç”¨åæœŸä¸€ä¸ªä¸ªå®‰è£…ã€‚å³ä½¿ä½ å·²ç»è£…äº†Pythonä¹Ÿæ²¡æœ‰å½±å“ï¼ŒAnacondaç›¸å½“äºè™šæ‹Ÿç¯å¢ƒï¼Œäº’ä¸å¹²æ‰°ã€‚ å®‰è£…æ­¥éª¤è¿›å…¥Anacondaå®˜ç½‘ï¼Œä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„å®‰è£…æ–‡ä»¶ï¼Œé€Ÿåº¦æ¯”è¾ƒæ…¢çš„è¯ï¼Œå¯ä»¥å»æ¸…åå¼€æºé•œåƒç«™ã€‚ Windowsç‰ˆä¸‹è½½çš„æ˜¯exeæ–‡ä»¶ï¼ŒåŒå‡»å¯ä»¥ç›´æ¥å®‰è£…ï¼Œå®‰è£…æ—¶è®°å¾—å‹¾é€‰ Add Anaconda to my PATH environment variableï¼Œæ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚ Linuxç‰ˆä¸‹è½½çš„æ˜¯shæ–‡ä»¶ï¼Œä¸‹è½½å®Œæˆåï¼Œç»ˆç«¯åˆ‡æ¢åˆ°ä¸‹è½½ç›®å½•ï¼Œæ‰§è¡Œbash Anaconda3-xx.shï¼ŒLinuxç‰ˆä¹Ÿä¼šæç¤ºæ·»åŠ ç¯å¢ƒå˜é‡ï¼Œè®°å¾—è¾“yeså°±è¡Œã€‚ å®‰è£…æµ‹è¯•Pythonå®‰è£…å¥½ä¹‹åï¼Œå¯ä»¥åœ¨cmdä¸­è¾“å…¥python --versionæ¥æŸ¥çœ‹Pythonçš„ç‰ˆæœ¬ä¿¡æ¯ã€‚å¯¹äºOpenCVï¼Œæ‰“å¼€Pythonçš„å¼€å‘ç¯å¢ƒï¼Œè¾“å…¥import cv2ï¼Œè¿è¡Œæ²¡æœ‰æŠ¥é”™è¯´æ˜ä¸€åˆ‡æ­£å¸¸ã€‚è¦æŸ¥çœ‹OpenCVçš„ç‰ˆæœ¬ï¼Œå¯ä»¥ï¼š 1print(cv2.__version__) # '3.4.1' Pythonå¼€å‘ç¯å¢ƒæˆ‘ç”¨çš„æ˜¯Visual Studio Codeï¼Œä¹Ÿå¯ä»¥ç”¨PyCharm/Atom/Jupyter Notebook(Anacondaè‡ªå¸¦)ï¼Œæˆ–è€…ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œæ•²ï¼Œè‡ªå·±ä¹ æƒ¯å°±è¡Œã€‚ å¸¸è§é—®é¢˜ pipè¯†åˆ«ä¸äº†ï¼šç¯å¢ƒå˜é‡ä¸­æ²¡æœ‰pipçš„ç›®å½•ï¼Œæ‰¾åˆ°pipç›®å½•ï¼Œæ·»åŠ åˆ°ç”¨æˆ·ï¼ˆæˆ–ç³»ç»Ÿï¼‰å˜é‡çš„pathä¸­ã€‚ ä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ï¼šå¯åˆ°æ­¤å¤„ä¸‹è½½ç¦»çº¿ç‰ˆã€‚ä¸‹è½½å®Œæˆåï¼Œcmdåˆ‡æ¢åˆ°ä¸‹è½½ç›®å½•ï¼Œè¾“å…¥ pip install æ–‡ä»¶åå®‰è£…ã€‚ å­¦ä¹ è½¯ä»¶ä¸ºäº†ä¾¿äºå­¦ä¹ OpenCVï¼Œæˆ‘å†™äº†ä¸€ä¸ªæ•™å­¦æ¬¾è½¯ä»¶LearnOpenCVEduï¼Œç›®å‰åªå¼€å‘äº†ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œæœ‰å…´è¶£çš„ç«¥é‹å¯ä»¥æ”¯æŒä¸€ä¸‹å™¢ğŸ˜Š ç»éªŒä¹‹è°ˆï¼šè™½ç„¶ä»ä¸€å¼€å§‹æˆ‘å°±æ¨èå¤§å®¶ä½¿ç”¨OpenCV-Pythonè¿›è¡Œå›¾åƒå¤„ç†ï¼Œä½†æƒ³è¦æ·±å…¥ç†è§£OpenCVï¼ŒC++è¿˜æ˜¯å¿…é¡»çš„ï¼Œå°¤å…¶æ˜¯OpenCVæºç ï¼ å¼•ç”¨ æœ¬èŠ‚æºç  ç½‘ç»œèµ„æ–™ OpenCV Docså®˜æ–¹æ–‡æ¡£ OpenCV å®˜æ–¹Github å®˜æ–¹è‹±æ–‡æ•™ç¨‹ï¼šOpenCV-Python Tutorials LearnOpenCVã€LearnOpenCV Github Numpy Quickstart Tutorial OpenCV ä¸­æ–‡æ•™ç¨‹ ä¹¦ç± Programming Computer Vision with Pythonã€ä¸­æ–‡ä¹¦ https://www.pyimagesearch.com/practical-python-opencv/ åæ ¡è§†è§‰ç ”ç©¶æ‰€/è¯¾ç¨‹ å¡å†…åŸºæ¢…éš†å¤§å­¦ å¤šä¼¦å¤šå¤§å­¦","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}]},{"title":"Brand7 2.0æ›´å\"å“ç‰Œæ¼†\"æ­£å¼ä¸Šæ¶å’¯ï¼","slug":"Brand7-2-0æ›´åå“ç‰Œæ¼†æ­£å¼ä¸Šæ¶å’¯ï¼","date":"2017-11-26T11:04:32.000Z","updated":"2020-04-07T04:38:41.178Z","comments":true,"path":"brand7-2-release/","link":"","permalink":"http://www.codec.wang/brand7-2-release/","excerpt":"éš”äº†ä¸€å¹´æ›´æ–°ï¼Œè‰¯å¿ƒéƒ½æœ‰ç‚¹ç—›äº†( â•¯â–¡â•° )","text":"éš”äº†ä¸€å¹´æ›´æ–°ï¼Œè‰¯å¿ƒéƒ½æœ‰ç‚¹ç—›äº†( â•¯â–¡â•° ) ç¤ºå¨çš„äººåšçš„ä¸å¯¹çš„è¯ï¼Œå¼•èµ·ç¤ºå¨çš„äººå‘¢ï¼Ÿ â€”â€”ã€Šè¾©æŠ¤äººã€‹ å½“åˆBrand7å†™å®Œçš„æ—¶å€™ï¼Œä¸€ç›´æƒ³å†™ä¸€ä¸ªå…³äºç”µå½±çš„APPï¼Œç”šè‡³åšå‡ºäº†é›å½¢ï¼šMovieBackdropsï¼Œå¯æƒœï¼Œæ—¶é—´ä¸å¤šï¼Œäº‹æƒ…å´å¾ˆå¤šã€‚å‰æ®µæ—¶é—´é—­å…³ï¼Œæ‘¸ç€è‡ªå·±çš„è‰¯å¿ƒï¼Œç»ˆäºæŠŠBrand7æ›´æ–°äº†ä¸€æŠŠï¼Œæ¥çœ‹çœ‹æ›´æ–°å†…å®¹å§ï¼š å“ç‰Œæ¼†ï¼ˆBrand7ï¼‰æ˜¯ä¸€æ¬¾Win10 UWPçŒœå“ç‰Œçš„å°æ¸¸æˆï¼Œé‡Œé¢æ¶µç›–äº†æ±½è½¦ã€å¨±ä¹ã€æ—¶å°šã€ç”Ÿæ´»ã€é¤é¥®ã€ç§‘æŠ€ã€æ—…æ¸¸ä¸ƒä¸ªç±»åˆ«çš„550ä¸ªå“ç‰Œã€‚Ver2.0.1æ›´æ–°æ—¥å¿—å¦‚ä¸‹ï¼š æ›´åâ€œå“ç‰Œæ¼†â€ å…¨æ–°Logo å…¨æ–°å¯åŠ¨ç•Œé¢ æ–°å¢50ä¸ªå“ç‰Œï¼Œç°å…±550ä¸ªå“ç‰Œ å…¨é¢ä¸­æ–‡ç‰ˆï¼ˆè‹±æ–‡è¢«å¾ˆå¤šäººåæ§½çœ‹ä¸æ‡‚( â•¯â–¡â•° )ï¼‰ ç•Œé¢UIè°ƒæ•´ å¯ä»¥åœ¨Win10åº”ç”¨å•†åº—ä¸­æœç´¢â€œå“ç‰Œæ¼†â€è¿›è¡Œä¸‹è½½ï¼Œæˆ–ç‚¹å‡»æ­¤å¤„ã€‚ ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"Brand7","slug":"Brand7","permalink":"http://www.codec.wang/tags/Brand7/"},{"name":"å“ç‰Œæ¼†","slug":"å“ç‰Œæ¼†","permalink":"http://www.codec.wang/tags/%E5%93%81%E7%89%8C%E6%BC%86/"}]},{"title":"ã€è§†è§‰ä¸å›¾åƒã€‘OpenCVç¯‡ï¼šPython+OpenCVå®ç”¨æ•™ç¨‹","slug":"Python-OpenCVæ•™ç¨‹ï¼ˆç›®å½•ï¼‰","date":"2017-10-10T14:22:13.000Z","updated":"2020-04-07T03:57:57.581Z","comments":true,"path":"opencv-python/","link":"","permalink":"http://www.codec.wang/opencv-python/","excerpt":"ç›®å½•","text":"ç›®å½• å…¥é—¨ç¯‡ ç®€ä»‹ä¸å®‰è£…ï¼ˆäº†è§£å®‰è£…OpenCV-Pythonï¼‰ | ç•ªå¤–ç¯‡1ï¼šä»£ç æ€§èƒ½ä¼˜åŒ– åŸºæœ¬å…ƒç´ -å›¾ç‰‡ï¼ˆå›¾ç‰‡è½½å…¥/æ˜¾ç¤º/ä¿å­˜ï¼‰ | ç•ªå¤–ç¯‡2ï¼šæ— æŸä¿å­˜å’ŒMatplotlibä½¿ç”¨ æ‰“å¼€æ‘„åƒå¤´ï¼ˆæ‰“å¼€æ‘„åƒå¤´æ•è·å›¾ç‰‡/æ’­æ”¾ä¿å­˜è§†é¢‘ï¼‰ | ç•ªå¤–ç¯‡3ï¼šæ»‘åŠ¨æ¡ å›¾åƒåŸºæœ¬æ“ä½œï¼ˆè®¿é—®åƒç´ ç‚¹/ROI/é€šé“åˆ†ç¦»åˆå¹¶/å›¾ç‰‡å±æ€§ï¼‰ é¢œè‰²ç©ºé—´è½¬æ¢ï¼ˆé¢œè‰²ç©ºé—´è½¬æ¢/è¿½è¸ªç‰¹å®šé¢œè‰²ç‰©ä½“ï¼‰ é˜ˆå€¼åˆ†å‰²ï¼ˆé˜ˆå€¼åˆ†å‰²/äºŒå€¼åŒ–ï¼‰ | ç•ªå¤–ç¯‡4ï¼šOtsué˜ˆå€¼æ³• å›¾åƒå‡ ä½•å˜æ¢ï¼ˆæ—‹è½¬/å¹³ç§»/ç¼©æ”¾/ç¿»è½¬ï¼‰ | ç•ªå¤–ç¯‡5ï¼šä»¿å°„å˜æ¢ä¸é€è§†å˜æ¢ ç»˜å›¾åŠŸèƒ½ï¼ˆç”»çº¿/ç”»åœ†/ç”»çŸ©å½¢/æ·»åŠ æ–‡å­—ï¼‰ | ç•ªå¤–ç¯‡6ï¼šé¼ æ ‡ç»˜å›¾ æŒ‘æˆ˜ä»»åŠ¡ï¼šç”»åŠ¨æ€æ—¶é’Ÿ | æ‹“å±•æŒ‘æˆ˜ï¼šPyQt5ç¼–å†™GUIç•Œé¢ åŸºç¡€ç¯‡ å›¾åƒæ··åˆï¼ˆç®—æ•°è¿ç®—/æ··åˆ/æŒ‰ä½è¿ç®—ï¼‰ | ç•ªå¤–ç¯‡7ï¼šäº®åº¦ä¸å¯¹æ¯”åº¦ å¹³æ»‘å›¾åƒï¼ˆå·ç§¯/æ»¤æ³¢/æ¨¡ç³Š/é™å™ªï¼‰ | ç•ªå¤–ç¯‡8ï¼šå·ç§¯åŸºç¡€(å›¾ç‰‡è¾¹æ¡†) è¾¹ç¼˜æ£€æµ‹ï¼ˆCanny/Sobelï¼‰ | ç•ªå¤–ç¯‡9ï¼šå›¾åƒæ¢¯åº¦ è…èš€ä¸è†¨èƒ€ï¼ˆå½¢æ€å­¦æ“ä½œ/è…èš€/è†¨èƒ€/å¼€è¿ç®—/é—­è¿ç®—ï¼‰ è½®å»“ ï¼ˆå¯»æ‰¾/ç»˜åˆ¶è½®å»“ï¼‰ | ç•ªå¤–ç¯‡10ï¼šè½®å»“å±‚çº§ è½®å»“ç‰¹å¾ ï¼ˆé¢ç§¯/å‘¨é•¿/æœ€å°å¤–æ¥çŸ©(åœ†)/å½¢çŠ¶åŒ¹é…ï¼‰ | ç•ªå¤–ç¯‡11ï¼šå‡¸åŒ…åŠæ›´å¤šè½®å»“ç‰¹å¾ ç›´æ–¹å›¾ï¼ˆè®¡ç®—ç»˜åˆ¶ç›´æ–¹å›¾/å‡è¡¡åŒ–ï¼‰ æ¨¡æ¿åŒ¹é…ï¼ˆå¤§å›¾ä¸­æ‰¾å°å›¾ï¼‰ éœå¤«å˜æ¢ï¼ˆæå–ç›´çº¿/åœ†ï¼‰ æŒ‘æˆ˜ä»»åŠ¡ï¼šè½¦é“æ£€æµ‹","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"http://www.codec.wang/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Python","slug":"Python","permalink":"http://www.codec.wang/tags/Python/"},{"name":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}]},{"title":"ã€åˆ©å™¨ã€‘GitKrakenï¼šé…·ç‚«çš„Git GUIå®¢æˆ·ç«¯","slug":"ã€åˆ©å™¨ã€‘GitKrakenï¼šé…·ç‚«çš„Git GUIå®¢æˆ·ç«¯","date":"2017-10-05T09:33:20.000Z","updated":"2020-04-07T03:50:49.653Z","comments":true,"path":"tools-gitkraken/","link":"","permalink":"http://www.codec.wang/tools-gitkraken/","excerpt":"ä¸å–œæ¬¢æ•²å‘½ä»¤ï¼Ÿé‚£ä¹ˆè¿™æ¬¾é…·ç‚«çš„Gitå®¢æˆ·ç«¯è®©ä½ é€¼æ ¼æ»¡æ»¡ï¼","text":"ä¸å–œæ¬¢æ•²å‘½ä»¤ï¼Ÿé‚£ä¹ˆè¿™æ¬¾é…·ç‚«çš„Gitå®¢æˆ·ç«¯è®©ä½ é€¼æ ¼æ»¡æ»¡ï¼ çœŸæ­£çš„å¿˜è®°æ˜¯ä¸éœ€è¦åŠªåŠ›çš„ã€‚â€”â€”ã€Šå¤§é±¼æµ·æ£ ã€‹ åºŸè¯ä¸€æ®µå…ˆï¼šä»¥å‰ä¸Šç­çš„æ—¶å€™ï¼Œå…¬å¸é‡Œç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿç”¨çš„æ˜¯perforceï¼Œä½ åº”è¯¥ã€å¯èƒ½æ²¡å¬è¿‡( â•¯â–¡â•° )ã€‚æ€»ä¹‹ï¼Œå°±æ˜¯é›†ä¸­å¼ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿï¼Œç›¸æ¯”äºgitçš„åˆ†å¸ƒå¼æœ‰å¾ˆå¤šç¼ºé™·ï¼Œå…·ä½“å¯ä»¥çœ‹â€œé›†ä¸­å¼vsåˆ†å¸ƒå¼â€ã€‚ä½†ä½œä¸ºä¸€æ¬¾å•†ä¸šè½¯ä»¶ï¼Œperforceæä¾›çš„ä¼˜ç§€å®¢æˆ·ç«¯ä½“éªŒè¿˜æ˜¯ç›¸å½“ä¸é”™çš„ã€‚ä½¿ç”¨gitåï¼Œä¸€ç›´éƒ½æ˜¯æ•²å‘½ä»¤çš„ï¼Œä¸€æ˜¯å› ä¸ºä¹ æƒ¯ï¼Œæ¯•ç«Ÿç ä»£ç é€¼æ ¼é«˜å˜›ï¼ŒäºŒæ˜¯å› ä¸ºgitçš„GUIå®¢æˆ·ç«¯è¦ä¸å¾ˆä¸‘ï¼Œè¦ä¸åŠŸèƒ½æ‰æ€¥ï¼Œæ€»ä¹‹ä¸æƒ³ç”¨ã€‚ä¹‹åï¼Œä½“éªŒäº†è¿™ä¸ªè½¯ä»¶ï¼ŒåˆåŒç±»ä¼¼çš„SourceTreeå¯¹æ¯”äº†ä¸‹ï¼Œæ— å¥ˆï¼Œæˆ‘ï¼Œè¿˜æ˜¯å–œæ¬¢é¢œå€¼é«˜çš„~ o(ï¿£â–½ï¿£)oå¦å¤–ï¼Œä»¥å‰å¤–æ•™è€å¸ˆæé—®è¯´ã€ŠåŠ å‹’æ¯”æµ·ç›—2ã€‹ä¸­çš„é‚£ä¸ªæ€ªç‰©å«å•¥ï¼Œé˜…ç‰‡æ— æ•°çš„æˆ‘ï¼Œé‚£å¤©ç«Ÿç„¶æ²¡å›ç­”ä¸Šï¼Œè£…é€¼å¤±è´¥ï¼Œæ‰€ä»¥å¯¹è¿™åªâ€œæŒªå¨æµ·æ€ªkrakenâ€å½±å“ç‰¹åˆ«æ·±åˆ»ã€‚å¥½äº†ï¼Œå¼€å§‹æ­£é¢˜å§~ å®˜ç½‘/ä¸‹è½½ï¼šGitKraken GitKrakenå¯¹Windows/Linux/Macä¸‰å¤§ä¸»æµå¹³å°éƒ½æ”¯æŒï¼Œå…¶æ–¹ä¾¿ä¹‹å¤„åœ¨äºï¼Œå®ƒä¸éœ€è¦å®‰è£…é…ç½®ï¼ŒåŒå‡»æ‰“å¼€å°±å¯ä»¥äº†ã€‚æ‰“å¼€ä¹‹åï¼Œå¯ä»¥é€‰æ‹©ç”¨Githubè´¦å·ç™»é™†ï¼Œéœ€è¦Githubæˆæƒï¼š æ‰“å¼€/å…‹éš†/åˆå§‹åŒ–GitKrankenæ”¯æŒæ‰“å¼€æœ¬åœ°ä»“åº“ï¼Œä»æŒ‡å®šçš„URLæˆ–Githubã€Gitlabã€Bitbucketç­‰ä¸Šé¢ç›´æ¥å…‹éš†ã€‚å‰é¢æˆ‘ä»¬å·²ç»ç”¨Githubç›´æ¥ç™»é™†äº†ï¼Œæ‰€ä»¥ï¼Œä»Githubå…‹éš†æ—¶ï¼Œä¼šç›´æ¥åˆ—å‡ºä½ å½“å‰çš„æ‰€æœ‰ä»“åº“é¡¹ç›®ï¼Œéå¸¸æ–¹ä¾¿ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è¿æ¥åˆ°Gitlab/Bitbucketå¹³å°ï¼š åˆå§‹åŒ–/æ–°å»ºé¡¹ç›®ä¹Ÿéå¸¸æ–¹ä¾¿ï¼Œåœ¨Inité€‰é¡¹ä¸­ï¼Œå¯ä»¥é€‰æ‹©åˆå§‹åŒ–ä¸€ä¸ªæœ¬åœ°ä»“åº“æˆ–ç±»ä¼¼Githubä¹‹ç±»çš„è¿œç¨‹ä»“åº“ã€‚GitKrakenåˆå§‹åŒ–æ—¶è¿˜æä¾›äº†.gitignoreçš„æ–‡ä»¶çš„ç›¸å…³æ¨¡æ¿ï¼š ç•Œé¢/åŠŸèƒ½æ‰“å¼€ä¸€ä¸ªä»“åº“åï¼Œä¸»ç•Œé¢å¦‚ä¸‹å›¾ï¼Œé…·ç‚«ç®€æ´ï¼Œé¡¶éƒ¨æä¾›äº†å¸¸ç”¨çš„GitåŠŸèƒ½ï¼Œå°±ä¸ç»†è¯´äº†ã€‚æˆ‘ä¸»è¦æåŠä¸€ä¸‹ï¼Œå¦‚ä½•è¿›è¡Œç‰ˆæœ¬å·®åˆ†ï¼š åœ¨æäº¤æ—¥å¿—çš„ä¸»ç•Œé¢ï¼Œå¦‚æœè¦æ¯”è¾ƒä»»æ„ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å·®åˆ†ï¼ŒæŒ‰ä½Ctrlé”®ï¼Œé€‰æ‹©è¦æ¯”è¾ƒçš„ç‰ˆæœ¬ï¼Œå³è¾¹ä¼šè‡ªåŠ¨åˆ—å‡ºä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´æ‰€ä¿®æ”¹çš„æ–‡ä»¶ï¼Œç‚¹å‡»æ–‡ä»¶å°±å¯ä»¥çœ‹åˆ°diffäº†ï¼š å½“ç„¶ï¼Œæœ€æ–°ç‰ˆæœ¬ï¼ˆæœ¬æ–‡ä½¿ç”¨çš„æ˜¯3.1ç‰ˆæœ¬ï¼‰çš„GitKrakenæä¾›äº†Mergeå’ŒDiffå·¥å…·çš„è‡ªå®šä¹‰ï¼ˆFile-Preferences-Generalä¸­è®¾ç½®ï¼‰ï¼Œæ¯”å¦‚è¯´æˆ‘æœ€å¸¸ç”¨çš„Mergeå·¥å…·æ˜¯WinMergeï¼Œå°±å¯ä»¥åœ¨è¿™é‡Œé…ç½®ã€‚ æŠ›ç –å¼•ç‰ï¼Œå¤§è‡´ä»‹ç»äº†ä¸€ä¸‹ï¼Œå…¶å®ç†Ÿæ‚‰Gitçš„è¯ï¼Œè¿™ä¸ªå·¥å…·ä½¿ç”¨èµ·æ¥è¿˜æ˜¯è›®ç®€å•çš„~ o(ï¿£â–½ï¿£)o 2019å¹´3æœˆ19æ—¥æ›´æ–°ï¼šæœ€è¿‘æˆ‘ä¸€ç›´ç”¨VSCodeï¼Œé›†æˆçš„gitåŠŸèƒ½å†åŠ ä¸Šgitlensè¿™æ¬¾æ’ä»¶ï¼Œä½“éªŒä¹Ÿå¾ˆæ£’ã€‚ ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"åˆ©å™¨ç¯‡","slug":"åˆ©å™¨ç¯‡","permalink":"http://www.codec.wang/categories/%E5%88%A9%E5%99%A8%E7%AF%87/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://www.codec.wang/tags/Git/"},{"name":"GitKraken","slug":"GitKraken","permalink":"http://www.codec.wang/tags/GitKraken/"}]},{"title":"ã€åˆ©å™¨ã€‘ä¸ƒç‰›äº‘ï¼šæ¯æœˆå…è´¹10Gçš„å›¾åºŠ","slug":"ã€åˆ©å™¨ã€‘ä¸ƒç‰›äº‘ï¼šæ¯æœˆå…è´¹10Gçš„å›¾åºŠ","date":"2017-09-18T11:55:38.000Z","updated":"2020-04-07T03:49:03.065Z","comments":true,"path":"tools-qiniuyun/","link":"","permalink":"http://www.codec.wang/tools-qiniuyun/","excerpt":"éšç€è¶Šæ¥è¶Šå¤šçš„äººå¼€å§‹ä½¿ç”¨Markdownå†™è‡ªå·±çš„ç‹¬ç«‹åšå®¢ï¼Œä¸€ä¸ªå¥½ç”¨ç¨³å®šçš„å›¾åºŠæ˜¯å¿…ä¸å¯å°‘çš„äº†ã€‚","text":"éšç€è¶Šæ¥è¶Šå¤šçš„äººå¼€å§‹ä½¿ç”¨Markdownå†™è‡ªå·±çš„ç‹¬ç«‹åšå®¢ï¼Œä¸€ä¸ªå¥½ç”¨ç¨³å®šçš„å›¾åºŠæ˜¯å¿…ä¸å¯å°‘çš„äº†ã€‚ å¯¹æ¯”åœ¨ä¸ƒç‰›äº‘ä¹‹å‰ï¼Œæˆ‘ä½¿ç”¨è¿‡å›½å¤–çš„Cloud Appå’Œé˜¿é‡Œäº‘çš„OSSå¯¹è±¡å­˜å‚¨ã€‚ é¦–å…ˆï¼Œå›½å¤–çš„ä¸œè¥¿åœ¨å›½å†…ç¨³å®šæ€§å’Œé€Ÿåº¦éƒ½æ˜¯ç›¸å¯¹è¾ƒå·®çš„ï¼Œæˆ‘è¯•ç€åœ¨é˜¿é‡Œäº‘å’ŒCloud Appä¸Šä¸Šä¼ åŒä¸€å¼ å›¾ç‰‡å¹¶ç”Ÿæˆå¤–é“¾ï¼ŒCloud Appè¦æ¯”é˜¿é‡Œçš„åŠ è½½é€Ÿåº¦å»¶è¿Ÿ1-2sï¼Œé˜¿é‡ŒåŸºæœ¬ç§’å¼€ã€‚ é˜¿é‡Œçš„OSSå¯¹è±¡å­˜å‚¨è™½ç„¶å¾ˆç¨³å®šï¼Œä½†æ˜¯å¹¶ä¸æä¾›å…è´¹çš„ç©ºé—´ã€‚ç›¸å¯¹æ¥è¯´ï¼Œä¸ƒç‰›äº‘æä¾›çš„æ¯æœˆ10Gå…è´¹æµé‡ï¼Œå¯¹äºåšå®¢æ¥è¯´ï¼Œç»°ç»°æœ‰ä½™äº†ã€‚ å¦å¤–ï¼Œä¸ƒç‰›äº‘æä¾›äº†è¯¸å¤šçš„å›¾ç‰‡å¤„ç†æ¥å£ï¼Œå¦‚æ°´å°ã€æ ¼å¼è½¬æ¢ã€ç¼©æ”¾ç­‰ï¼Œå¾ˆå®ç”¨ï¼Œå¾ˆå¼ºå¤§ã€‚ ä½¿ç”¨æ³¨å†Œå¹¶ç™»é™†ä¸ƒç‰›äº‘ï¼Œåœ¨ä¸ƒç‰›äº‘çš„äº§å“åˆ—è¡¨ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªå¯¹è±¡å­˜å‚¨ï¼Œå¦‚è¿™é‡Œå–åä¸ºpicblogï¼š åˆ›å»ºå¥½ä¹‹åï¼Œä¸ƒç‰›äº‘ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæµ‹è¯•åŸŸåï¼š è¿™ä¸ªåŸŸåå°±æ˜¯ä½ æ–‡ä»¶çš„å‰ç¼€äº†ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬ç‚¹å‡»â€å†…å®¹ç®¡ç†â€ï¼Œç‚¹å‡»â€ä¸Šä¼ æ–‡ä»¶â€ï¼Œé€‰æ‹©ä¸€å¹…å›¾ç‰‡ä¸Šä¼ ã€‚ä¸Šä¼ å®Œæˆåï¼Œå¤åˆ¶è¯¥æ–‡ä»¶çš„å¤–é“¾åœ°å€ï¼š è¿™ä¸ªåœ°å€å°±æ˜¯ä½ çš„å¤–é“¾åœ°å€è¾£ï¼Œä½ å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è®¿é—®ï¼Œæ¯”å¦‚ï¼šmysql_demo ç»‘å®šåŸŸåæ·»åŠ äºŒçº§åŸŸåä¸ƒç‰›äº‘é»˜è®¤çš„æµ‹è¯•åŸŸåæœ‰æ—¶é—´é™åˆ¶ï¼Œè²Œä¼¼ä¸€ä¸ªæœˆå°±è¿‡æœŸä¸èƒ½ç”¨äº†ã€‚æ‰€ä»¥ï¼Œä½ å¦‚æœå·²ç»è´­ä¹°äº†åŸŸåçš„è¯ï¼Œå¯ä»¥åœ¨è¿™é‡Œç»‘å®šè‡ªå·±çš„äºŒçº§åŸŸåï¼Œè¿™æ ·æ—¢å¥½è®°åˆæ–¹ä¾¿ç®¡ç†ã€‚ æ¯”å¦‚ï¼Œè¿™é‡Œæˆ‘å·²ç»åœ¨ä¸‡ç½‘ä¸Šè´­ä¹°äº†ex2tron.xinçš„åŸŸåï¼Œè¿™é‡Œæˆ‘æ¼”ç¤ºå¦‚ä½•å°†ä¸ƒç‰›äº‘çš„å­˜å‚¨ç©ºé—´ç»‘å®špic.ex2tron.xinè¿™ä¸ªåŸŸåã€‚ åœ¨ä¸ƒç‰›äº‘çš„å­˜å‚¨ç©ºé—´é¡µé¢ï¼Œç‚¹å‡»â€ç»‘å®šåŸŸåâ€ï¼Œåªéœ€è¦åœ¨åŠ é€ŸåŸŸåå¤„å¡«å†™è¦ç»‘å®šçš„åŸŸåï¼Œå…¶ä»–é¡¹ä¿æŒé»˜è®¤å³å¯ï¼š 1åŠ é€ŸåŸŸåï¼š pic.ex2tron.xin åˆ›å»ºåï¼Œç³»ç»Ÿä¼šé…ç½®ä¸€æ®µæ—¶é—´ï¼Œç­‰å¾…å¤„ç†å®Œæˆï¼Œä¼šæ˜¾ç¤ºä¸€ä¸ªè¯¸å¦‚xxx.qiniudns.comçš„CNAMEè®°å½•å€¼ï¼Œè®°ä¸‹æ­¤å€¼ï¼Œåé¢è¦ç”¨åˆ°ã€‚ æ·»åŠ åŸŸåè§£ææ‰“å¼€ä¸‡ç½‘çš„åŸŸåæ§åˆ¶å°ï¼Œæ·»åŠ ä¸€æ¡CNAMEçš„è§£æï¼š 1234è®°å½•ç±»å‹ï¼šCNAMEä¸»æœºè®°å½•ï¼špicè®°å½•å€¼ï¼šxxx.qiniudns.com# å…¶ä»–é€‰å‹ä¿æŒé»˜è®¤ è¿™æ ·ï¼Œä½ ä¸Šä¼ çš„å›¾ç‰‡å¤–é“¾å°±æ˜¯ï¼šhttp://pic.ex2tron.xin/filename.pngä¹‹ç±»çš„äº†ã€‚ æ·»åŠ å›¾ç‰‡æ ·å¼åˆ©ç”¨ä¸ƒç‰›äº‘åšå›¾åºŠçš„å¦å¤–ä¸€ä¸ªå¼ºå¤§ä¹‹å¤„åœ¨äºä¸°å¯Œçš„å›¾ç‰‡æ ·å¼ã€‚ç‚¹å‡»â€å›¾ç‰‡æ ·å¼â€-â€œæ–°å»ºå›¾ç‰‡æ ·å¼â€ï¼Œä¸ƒç‰›äº‘æä¾›äº†å¦‚ä¸‹å¾ˆå¤šç§åœºæ™¯ï¼š æ¯”å¦‚ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©â€æŒ‡å®šå®½é«˜ï¼Œå¼ºè¡Œç¼©æ”¾+æ‰“å›¾ç‰‡æ°´å°â€ï¼Œç„¶åæ·»åŠ ä¸€ä¸ªæ–‡å­—æ°´å°ï¼Œå¯ä»¥è°ƒæ•´æ–‡å­—çš„å­—ä½“æ ·å¼ï¼Œä½ç½®ç­‰ç­‰ï¼š è°ƒæ•´å¥½ä¹‹åï¼Œä¸ºæ ·å¼å–ä¸ªåç§°ï¼Œå¦‚webpicï¼Œè¿™æ ·ï¼Œåªè¦åœ¨åŸæ¥å¤–é“¾çš„åé¢æ·»åŠ -webpicå°±å¯ä»¥äº†ï¼š 1http:&#x2F;&#x2F;pic.ex2tron.xin&#x2F;filename.png-webpic å…¶ä¸­-è¿™ä¸ªè¿æ¥ç¬¦å¯ä»¥é€šè¿‡å­˜å‚¨ç©ºé—´æ§åˆ¶é¢æ¿çš„â€æ ·å¼åˆ†éš”ç¬¦è®¾ç½®â€ä¸­è¿›è¡Œä¿®æ”¹ã€‚ å›¾åºŠå·¥å…·å¯¹äºä¸ƒç‰›äº‘ï¼Œæ¯å¼ å›¾ç‰‡éƒ½åœ¨ç½‘é¡µç«¯ä¸Šä¼ è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œæ‰€ä»¥ç”¨ä¸€äº›å›¾åºŠå®¢æˆ·ç«¯å·¥å…·ä¼šæ›´åŠ å¿«é€Ÿã€‚ è¿™é‡Œæ¨èä¸¤æ¬¾å·¥å…·ï¼š MPicå›¾åºŠç¥å™¨ã€‚æ‰“å¼€è½¯ä»¶åï¼Œè®¾ç½®å¥½è‡ªå·±çš„AKå’ŒSKï¼ˆå¯åœ¨ä¸ƒç‰›äº‘çš„ä¸ªäººä¸­å¿ƒ-å¯†é’¥ç®¡ç†ä¸­çœ‹åˆ°ï¼‰ã€‚MPicæ”¯æŒæ–‡ä»¶æ‹–æ‹½ä¸Šä¼ ï¼Œç‚¹å‡»å¤åˆ¶å°±å¯ä»¥å¤åˆ¶å¤–é“¾ï¼Œéå¸¸æ–¹ä¾¿ï¼š ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"åˆ©å™¨ç¯‡","slug":"åˆ©å™¨ç¯‡","permalink":"http://www.codec.wang/categories/%E5%88%A9%E5%99%A8%E7%AF%87/"}],"tags":[{"name":"ä¸ƒç‰›","slug":"ä¸ƒç‰›","permalink":"http://www.codec.wang/tags/%E4%B8%83%E7%89%9B/"},{"name":"å›¾åºŠ","slug":"å›¾åºŠ","permalink":"http://www.codec.wang/tags/%E5%9B%BE%E5%BA%8A/"}]},{"title":"Hexoè½»æ¾æ­åšå®¢(4)ï¼šè‡ªæœ‰æœåŠ¡å™¨éƒ¨ç½²","slug":"Hexoè½»æ¾æ­åšå®¢-4-ï¼šè‡ªæœ‰æœåŠ¡å™¨éƒ¨ç½²","date":"2017-09-13T14:11:12.000Z","updated":"2020-04-17T11:03:47.314Z","comments":true,"path":"hexo-blog-with-github-pages-4/","link":"","permalink":"http://www.codec.wang/hexo-blog-with-github-pages-4/","excerpt":"å°†åšå®¢æ”¾åœ¨Githubä¸Šæœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œæ¯”å¦‚å…è´¹ã€æ˜“ç®¡ç†ã€å…è´¹xxx.github.ioçš„åŸŸåç­‰ï¼Œä½†è®¿é—®é€Ÿåº¦å˜›ï¼Œå°±å¾ˆä¸€èˆ¬äº†ã€‚å¯¹äºå–œæ¬¢æŠ˜è…¾çš„ç«¥é‹ï¼Œå¦‚æœæœ‰ä¸€å°è‡ªå·±çš„æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥æŠŠåšå®¢éƒ¨ç½²åœ¨äº‘ä¸Šã€‚","text":"å°†åšå®¢æ”¾åœ¨Githubä¸Šæœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œæ¯”å¦‚å…è´¹ã€æ˜“ç®¡ç†ã€å…è´¹xxx.github.ioçš„åŸŸåç­‰ï¼Œä½†è®¿é—®é€Ÿåº¦å˜›ï¼Œå°±å¾ˆä¸€èˆ¬äº†ã€‚å¯¹äºå–œæ¬¢æŠ˜è…¾çš„ç«¥é‹ï¼Œå¦‚æœæœ‰ä¸€å°è‡ªå·±çš„æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥æŠŠåšå®¢éƒ¨ç½²åœ¨äº‘ä¸Šã€‚ ä¹‹å‰æˆ‘ä»¬è´­ä¹°äº†ç‹¬ç«‹åŸŸåwww.ex2tron.topï¼Œå¹¶å°†åŸŸåè§£æåˆ°äº†Githubã€‚ç°åœ¨æˆ‘ä»¬è¦æŠŠåšå®¢æ”¾åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œå¹¶ä¸”å°†åŸŸåè§£æåˆ°è¿™å°æœåŠ¡å™¨ï¼Œå¥½ï¼Œå¼€å¹²ï¼ è¯´æ˜ï¼šä»¥é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸ºä¾‹ï¼Œä¹‹å‰æˆ‘å·²ç»ä½¿ç”¨apacheéƒ¨ç½²äº†ä¸€ä¸ªwebåº”ç”¨ï¼Œæ‰€ä»¥æˆ‘åé¢ä¼šè®²åˆ°apacheå¦‚ä½•é…ç½®å¤šä¸ªåŸŸåã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨nginxï¼Œéƒ¨ç½²æµç¨‹éƒ½ç±»ä¼¼ã€‚ æœåŠ¡å™¨ç¯å¢ƒé…ç½®ç”¨ssh user@ipè¿æ¥åˆ°æœåŠ¡å™¨åï¼Œå…ˆæ›´æ–°ä¸‹ï¼š 12sudo apt updatesudo apt upgrade æŸ¥çœ‹gitæœ‰æ²¡æœ‰å®‰è£…ï¼š 1git --version # æ²¡å®‰è£…çš„è¯ï¼šsudo apt install git ä¸å»ºè®®ä½¿ç”¨rootè´¦å·ï¼Œæ‰€ä»¥è¿™é‡Œæ·»åŠ ä¸€ä¸ªåä¸ºgitçš„æ–°ç”¨æˆ·ï¼š 12adduser gitadduser git sudo # æ·»åŠ åˆ°sudoä¸­ åˆ‡æ¢åˆ°gitç”¨æˆ·ï¼Œå¹¶æ–°å»ºç”¨æˆ·ç›®å½•ï¼š 123su git # åˆ‡æ¢gitç”¨æˆ·cdmkdir .ssh &amp;&amp; cd .ssh ç„¶åå°†æœ¬åœ°PCä¸Šsshçš„id_rsa.pubæ–‡ä»¶å†…å®¹å¤åˆ¶åˆ°è¯¥ç›®å½•çš„authorized_keysæ–‡ä»¶ä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨vimç¼–è¾‘ï¼Œä¹Ÿå¯ä»¥åœ¨æœ¬æœºPCä¸Šä½¿ç”¨scpå‘½ä»¤ï¼ˆæ–°ç‰ˆWindows10éƒ½å·²ç»è‡ªå¸¦sshå’Œscpç­‰å·¥å…·ï¼Œå¯å‚è€ƒï¼šå¦‚ä½•ä½¿ç”¨Windows 10çš„OpenSSH Clientå’ŒServerï¼‰ï¼š 1scp .ssh/id_rsa.pub user@ip:/home/git/.ssh/authorized_keys è¿™ä¸ªæ—¶å€™å¯ä»¥é€€å‡ºsshè¿æ¥ï¼Œå¹¶ä½¿ç”¨gitç”¨æˆ·ç›´æ¥ç™»å½•äº†ï¼š 1ssh git@ip Gitè¿œç¨‹ä»“åº“åŠåŒæ­¥ æ­¤å¤„å¯å‚è€ƒæˆ‘ä¹‹å‰çš„Blogï¼šæ­å»ºè‡ªå·±çš„Github/GitæœåŠ¡å™¨ è·ŸGitHubä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦å»ºä¸€ä¸ªåšå®¢çš„è¿œç¨‹ä»“åº“ã€‚åœ¨gitç”¨æˆ·çš„ä¸»ç›®å½•ä¸‹åˆ›å»ºä»“åº“ç›®å½•ï¼š 1234mkdir /home/git/hexoblog.gitsudo chown -R git:git hexoblog.git # ä¸ä¿®æ”¹æƒé™çš„è¯ï¼Œæ— æ³•æ¨é€cd /home/git/hexoblog.gitgit init --bare # åˆå§‹åŒ–ä»“åº“ æ¥ä¸‹æ¥éœ€è¦ä¿®æ”¹æœ¬åœ°Hexoçš„é…ç½®æ–‡ä»¶_config.ymlã€‚é¦–å…ˆå°†urlæ”¹æˆä½ çš„æœåŠ¡å™¨å…¬ç½‘ipæˆ–åŸŸåï¼š 1url: http:&#x2F;&#x2F;www.ex2tron.top&#x2F; å…¶æ¬¡åœ¨deployé¡¹è¿™é‡Œï¼Œå¦‚æœä½ å°†åšå®¢æ¨é€åˆ°å¤šä¸ªå¹³å°çš„è¯ï¼Œç›´æ¥æ–°å¢ä¸€æ¡å°±è¡Œï¼š 123deploy:- type: git repo: git@47.101.xxx.xxx:&#x2F;home&#x2F;git&#x2F;hexoblog.git ç°åœ¨å¯ä»¥è¿è¡Œhexo g -dæ­£å¸¸pushäº†ã€‚ å¦‚æœhexo dæ¨é€çš„æ—¶å€™å‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š 12remote: fatal: Unable to create temporary file &#39;&#x2F;home&#x2F;git&#x2F;hexoblog.git&#x2F;.&#x2F;objects&#x2F;pack&#x2F;tmp_pack_XXXXXX&#39;: Permission deniedfatal: sha1 file &#39;&lt;stdout&gt;&#39; write error: Broken pipe è¯´æ˜æ˜¯gitæƒé™çš„åŸå› ï¼Œä½ æœ‰å¯èƒ½å°‘æ‰§è¡Œäº†è¿™å¥è¯å™¢ï¼šsudo chown -R git:git hexoblog.git apache2é…ç½®é¦–å…ˆè‡ªç„¶æ˜¯å®‰è£…apache2å’¯ï¼š 1sudo apt install apache2 åœ¨/var/www/ä¸‹é¢åˆ›å»ºç½‘ç«™çš„æ ¹ç›®å½•ï¼š 1sudo mkdir /var/www/html/hexoblog æ­£å¸¸æ¥è¯´ï¼Œè¿™æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡ä½¿ç”¨apacheé…ç½®ï¼Œåé¢ä¼šè®²åˆ°æˆ‘çš„æƒ…å†µã€‚ç¼–è¾‘apache2çš„é…ç½®æ–‡ä»¶ï¼š 1sudo vim /etc/apache2/sites-available/000-default.conf æ‰¾åˆ°DocumentRooté¡¹ï¼Œå¹¶åšå¦‚ä¸‹æ›´æ”¹ï¼š 1DocumentRoot /var/www/html/hexoblog æœ€åé‡å¯apacheç”Ÿæ•ˆï¼š 1sudo service apache2 restart å‰é¢æåˆ°è¿‡ï¼Œæˆ‘å·²ç»åœ¨apache2é…ç½®è¿‡ä¸€ä¸ªwebåº”ç”¨å’ŒåŸŸåäº†ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥åœ¨confæ–‡ä»¶ä¸­æ–°å¢ä¸€é¡¹é…ç½®ï¼š 1234567891011121314# ä¹‹å‰çš„ï¼š&lt;VirtualHost *:80&gt; ......&lt;&#x2F;VirtualHost&gt;# æ–°å¢çš„ï¼š&lt;VirtualHost *:80&gt; ServerName www.ex2tron.top ServerAlias www.ex2tron.top DocumentRoot &#x2F;var&#x2F;www&#x2F;html&#x2F;hexoblog&#x2F; &lt;Directory &quot;&#x2F;var&#x2F;www&#x2F;html&#x2F;hexoblog&#x2F;&quot;&gt; Order deny,allow Allow from all &lt;&#x2F;Directory&gt;&lt;&#x2F;VirtualHost&gt; åˆ›å»ºGité’©å­ç°åœ¨è¿œç¨‹ä»“åº“åˆ›å»ºå¥½äº†ï¼Œä½†æ˜¯éœ€è¦å°†Hexoçš„é™æ€HTMLæ–‡ä»¶ä¼ é€åˆ°/var/www/html/hexoblogä¸‹é¢æ‰è¡Œã€‚åˆ‡æ¢åˆ°è¿œç¨‹ä»“åº“hexoblog.gitç›®å½•ä¸‹é¢ï¼š 1cd /home/git/hexoblog.git/hooks/ åˆ›å»ºå¹¶ç¼–è¾‘ä¸€ä¸ªæ–°çš„é’©å­æ–‡ä»¶ï¼š 12sudo touch post-receivesudo vim post-receive åœ¨å…¶ä¸­åŠ å…¥ä¸¤è¡Œï¼š 12#!/bin/bashgit --work-tree=/var/www/html/hexoblog --git-dir=/home/git/hexoblog.git checkout -f èµ‹äºˆå¯æ‰§è¡Œæƒé™ç»™æ–‡ä»¶ï¼š 1sudo chmod +x post-receive æœ€åä¸€å®šè¦ç¡®ä¿gitç”¨æˆ·æœ‰æƒé™æ“ä½œåšå®¢ç›®å½•ï¼š 1sudo chown git:git -R /var/www/html è¿™æ ·ï¼Œæ¯æ¬¡hexo dçš„æ—¶å€™å°±ä¼šè‡ªåŠ¨åŒæ­¥æ–‡ä»¶åˆ°/var/www/html/hexoblog/åšå®¢ç›®å½•ä¸‹ã€‚æ­¤æ—¶ï¼Œè®¿é—®www.ex2tron.topä¾¿å¯ä»¥æµè§ˆä½ çš„åšå®¢è¾£ï¼Œå½“ç„¶åˆ«å¿˜äº†å°†ä½ çš„åŸŸåè§£æåˆ°æœåŠ¡å™¨IPå™¢ï¼Œawesomeï¼ å¼•ç”¨ Hexo+Github Pagesè½»æ¾æ­åšå®¢(3)ï¼šç»‘å®šç‹¬ç«‹åŸŸå apacheè§£æå¤šä¸ªåŸŸå ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://www.codec.wang/tags/Hexo/"},{"name":"Github","slug":"Github","permalink":"http://www.codec.wang/tags/Github/"},{"name":"é˜¿é‡Œäº‘","slug":"é˜¿é‡Œäº‘","permalink":"http://www.codec.wang/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"}]},{"title":"Hexoè½»æ¾æ­åšå®¢(3)ï¼šç»‘å®šç‹¬ç«‹åŸŸå","slug":"Hexoè½»æ¾æ­åšå®¢-3ï¼šç»‘å®šç‹¬ç«‹åŸŸå","date":"2017-09-13T13:25:24.000Z","updated":"2020-04-17T11:03:34.117Z","comments":true,"path":"hexo-blog-with-github-pages-3/","link":"","permalink":"http://www.codec.wang/hexo-blog-with-github-pages-3/","excerpt":"å«Œusername.github.ioä¸å¤Ÿé«˜å¤§ä¸Šï¼Ÿï¼Ÿé‚£å°±æ¥ä¸ªé«˜å¤§ä¸Šçš„ç‹¬ç«‹åŸŸåå§ã€‚","text":"å«Œusername.github.ioä¸å¤Ÿé«˜å¤§ä¸Šï¼Ÿï¼Ÿé‚£å°±æ¥ä¸ªé«˜å¤§ä¸Šçš„ç‹¬ç«‹åŸŸåå§ã€‚ è´­ä¹°åŸŸååŸŸåå¯ä»¥å»å¾ˆå¤šåœ°æ–¹è´­ä¹°ï¼Œé.com/.cnçš„åŸŸåä¹Ÿæ¯”è¾ƒä¾¿å®œï¼Œæˆ‘è¿™é‡Œä»¥ä¸‡ç½‘ä¸ºä¾‹ï¼Œæ‰“å¼€ä¸‡ç½‘ä¸»é¡µï¼š æŸ¥æ‰¾ä½ æƒ³è´­ä¹°çš„åŸŸåï¼Œæ¯”å¦‚æˆ‘è´­ä¹°``ex2tron.top`è¿™ä¸ªåŸŸåã€‚.topåŸŸåçš„ä»·æ ¼è¿˜æ˜¯å¾ˆä¾¿å®œçš„ï¼Œåˆ’ç®—ï¼š è´­ä¹°éœ€è¦ç™»é™†é˜¿é‡Œäº‘çš„è´¦å·ã€‚è´­ä¹°æˆåŠŸåï¼ŒæŒ‰ç…§æç¤ºè¿›è¡Œå®åè®¤è¯å’Œæ‹ç…§å¤‡æ¡ˆï¼Œè®¤è¯è¿‡ç¨‹éœ€è¦å‡ å¤©ã€‚ åŸŸåè§£æåŸŸåè®¤è¯å®Œæˆåï¼Œç™»é™†é˜¿é‡Œäº‘æ§åˆ¶å°ï¼Œåœ¨å·¦ä¾§å¯¼èˆªæ æ‰¾åˆ°â€åŸŸåä¸ç½‘ç«™ï¼ˆä¸‡ç½‘ï¼‰â€â€”â€”â€œäº‘è§£æDNSâ€ï¼š é€‰æ‹©ä½ çš„åŸŸåï¼Œç‚¹å‡»â€è§£æè®¾ç½®â€ï¼Œæˆ‘ä»¬æ·»åŠ ä¸‰æ¡è§£æï¼š è®°å½•ç±»å‹ï¼šCNAMEï¼Œä¸»æœºè®°å½•ï¼šwwwï¼Œè·¯çº¿ï¼šé»˜è®¤ï¼Œè®°å½•å€¼ï¼šusername.github.io è®°å½•ç±»å‹ï¼šAï¼Œä¸»æœºè®°å½•ï¼š@ï¼Œè·¯çº¿ï¼šé»˜è®¤ï¼Œè®°å½•å€¼ï¼š192.30.252.153 è®°å½•ç±»å‹ï¼šAï¼Œä¸»æœºè®°å½•ï¼š@ï¼Œè·¯çº¿ï¼šé»˜è®¤ï¼Œè®°å½•å€¼ï¼š192.30.252.154 ï¼ˆå›¾ä¸Šæ–‡å­—å°çš„è¯ï¼Œå¯ä»¥ç‚¹å‡»æŸ¥çœ‹å¤§å›¾ï¼‰ ç»‘å®šåŸŸåè®¾ç½®å®Œæˆåï¼Œåœ¨æœ¬åœ°çš„hexoåšå®¢çš„sourceç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªåä¸ºCNAMEçš„æ–‡ä»¶ï¼ˆæ²¡æœ‰ä»»ä½•åç¼€ï¼‰ï¼Œç¼–è¾‘æ–‡ä»¶å†…å®¹ä¸ºä½ çš„åŸŸåï¼Œå¦‚ex2tron.topã€‚è¿™é‡Œå¦‚æœåœ¨åŸŸåä¸ŠåŠ wwwçš„è¯ï¼Œè®¿é—®æ—¶ä¼šè·³è½¬åˆ°www.ex2tron.topï¼Œä¸ºäº†ç®€æ´èµ·è§ï¼Œæˆ‘è¿™é‡Œå°±ä¸åŠ äº†ã€‚ é…ç½®å®Œæˆåï¼Œé‡æ–°å‘å¸ƒåšå®¢å°±å¯ä»¥ç”¨ç‹¬ç«‹åŸŸåex2tron.topæ¥è®¿é—®åšå®¢è¾£( â€¢Ì€ Ï‰ â€¢Ì )âœ§ï¼š 12hexo cleanhexo g -d å¼•ç”¨ Hexoä¸ªäººå…è´¹åšå®¢(äº”) ä½¿ç”¨è‡ªå·±çš„åŸŸå ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://www.codec.wang/tags/Hexo/"},{"name":"Github","slug":"Github","permalink":"http://www.codec.wang/tags/Github/"}]},{"title":"Hexoè½»æ¾æ­åšå®¢(2)ï¼šåœ¨Githubä¸Šéƒ¨ç½²","slug":"Hexoè½»æ¾æ­åšå®¢-2ï¼šåœ¨Githubä¸Šéƒ¨ç½²","date":"2017-09-13T12:15:47.000Z","updated":"2020-04-17T11:03:58.102Z","comments":true,"path":"hexo-blog-with-github-pages-2/","link":"","permalink":"http://www.codec.wang/hexo-blog-with-github-pages-2/","excerpt":"ä½¿ç”¨å…è´¹çš„Github PagesæœåŠ¡æˆ–è€…éƒ¨ç½²åœ¨è‡ªå·±æœåŠ¡å™¨ä¸Šï¼Œåˆ«äººå°±å¯ä»¥è®¿é—®ä½ çš„åšå®¢å•¦ï¼","text":"ä½¿ç”¨å…è´¹çš„Github PagesæœåŠ¡æˆ–è€…éƒ¨ç½²åœ¨è‡ªå·±æœåŠ¡å™¨ä¸Šï¼Œåˆ«äººå°±å¯ä»¥è®¿é—®ä½ çš„åšå®¢å•¦ï¼ å…³è”Githubé¦–å…ˆç™»é™†Githubï¼Œæ²¡æœ‰è´¦å·çš„è¯ï¼Œå…ˆæ³¨å†Œä¸€ä¸ªã€‚æ–°å»ºä¸€ä¸ªåä¸ºusername.github.ioçš„ä»“åº“ï¼Œusernameå¿…é¡»ä¸ä½ çš„è´¦æˆ·åç›¸åŒï¼Œæ¯”å¦‚æˆ‘çš„å°±æ˜¯ex2tron.github.ioï¼Œè¿™å°±æ˜¯ä½ åšå®¢çš„åŸŸååœ°å€äº†ï¼ˆç»‘å®šç‹¬ç«‹åŸŸåä¹‹åå†è¯´ï¼‰ã€‚æ–°å»ºæ—¶æ³¨æ„å‹¾é€‰â€Initialize this repository with a READMEâ€œï¼Œå› ä¸ºè¿™ä¸ªä»“åº“å¿…é¡»ä¸èƒ½ä¸ºç©ºã€‚ å¦‚æœä½ æ˜¯gitæ–°ç”¨æˆ·çš„è¯ï¼Œæ¨èçœ‹ï¼šå»–é›ªå³°çš„Gitæ•™ç¨‹-è¿œç¨‹ä»“åº“ æ¥ä¸‹æ¥æ‰“å¼€åšå®¢ç›®å½•ä¸‹çš„_config.ymlé…ç½®æ–‡ä»¶ï¼Œå®šä½åˆ°æœ€åçš„deployé€‰é¡¹ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š 1234deploy: type: git repository: git@github.com:ex2tron/ex2tron.github.io.git branch: master æ³¨æ„å†’å·åé¢æœ‰ä¸ªç©ºæ ¼ï¼Œä¸ç„¶ä¼šå‡ºé”™æ»´~é…ç½®å¥½ä¹‹åï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥éƒ¨ç½²åˆ°Githubä¸Šäº†ï¼š 123$ hexo clean$ hexo g$ hexo d è¿™æ ·é€šè¿‡Githubæä¾›çš„åŸŸååœ°å€ï¼ˆå¦‚æˆ‘çš„ï¼šhttps://ex2tron.github.ioï¼‰å°±å¯ä»¥è®¿é—®ä½ çš„åšå®¢äº†ï¼Œç®€å•å¿«é€Ÿé«˜æ•ˆï¼ å‘å¸ƒæ–°åšå®¢åšå®¢æ­å»ºèµ·æ¥ä¹‹åï¼Œå°±å¯ä»¥ç”¨Markdownå†™åšå®¢è¾£ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œåˆ›å»ºæ–°åšå®¢ï¼ˆå¦‚åä¸ºï¼šæˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢ï¼‰ï¼š 1$ hexo new 'æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢' æ­¤å‘½ä»¤ä¼šåœ¨åšå®¢ç›®å½•\\source\\_posts\\ä¸‹ç”Ÿæˆâ€œæˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢.mdâ€æ–‡ä»¶ï¼Œè¿™å°±æ˜¯ä½ çš„åšå®¢æºæ–‡ä»¶å•¦ï¼Œæ–‡ä»¶å¼€å¤´å¦‚ä¸‹ï¼Œè®°å¾—å†’å·åé¢æœ‰ç©ºæ ¼å™¢ï¼Œä¸ç„¶ä¼šå‡ºé”™ï¼š 12345---title: æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢date: 2017-09-13 20:15:47tags: #æ–‡ç« æ ‡ç­¾ï¼Œæ ¼å¼ï¼š[1,2,3]--- ä¸ç†Ÿæ‚‰Markdownè¯­æ³•çš„å¯ä»¥çœ‹ï¼šMarkdown è¯­æ³•è¯´æ˜ã€‚å†™å®Œä¹‹åä¾ç„¶ä½¿ç”¨ä¹‹å‰çš„ä¸‰æ¡å‘½ä»¤å‘å¸ƒï¼š 123$ hexo clean$ hexo g$ hexo d åé¢ä¸¤æ¡æŒ‡ä»¤ä¹Ÿå¯ä»¥ç®€åŒ–ä¸ºä¸€æ¡ï¼š 1$ hexo g -d å¸¸å‡ºç°çš„é—®é¢˜ åœ¨hexo dè¿›è¡Œéƒ¨ç½²æ—¶ï¼Œå¦‚æœå‡ºç°ERROR Deployer not found: gitçš„é—®é¢˜ï¼Œå¯ä»¥å…ˆç”¨ä¸‹é¢çš„å‘½ä»¤ä¿®å¤ï¼š 1$ npm install hexo-deployer-git --save å¦‚æœä½ æ²¡é…ç½®è¿‡sshå¯¼è‡´éƒ¨ç½²å¤±è´¥ï¼ˆå¯ä»¥é€šè¿‡ssh -T username@example.comæ¥æµ‹è¯•sshæœ‰æ— é…ç½®æˆåŠŸï¼‰ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šé’ˆå¯¹githubæƒé™å¯¼è‡´hexoéƒ¨ç½²å¤±è´¥çš„è§£å†³æ–¹æ¡ˆ ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://www.codec.wang/tags/Hexo/"},{"name":"Github","slug":"Github","permalink":"http://www.codec.wang/tags/Github/"}]},{"title":"Hexoè½»æ¾æ­åšå®¢(1)ï¼šå®‰è£…Hexo","slug":"Hexoè½»æ¾æ­åšå®¢-1ï¼šå®‰è£…Hexo","date":"2017-09-13T08:07:06.000Z","updated":"2020-04-17T11:04:09.675Z","comments":true,"path":"hexo-blog-with-github-pages-1/","link":"","permalink":"http://www.codec.wang/hexo-blog-with-github-pages-1/","excerpt":"æƒ³ç”¨Github Pagesè½»æ¾æ­å»ºè‡ªå·±çš„åšå®¢ï¼Œç”¨Hexoï¼Œ10åˆ†é’Ÿï¼","text":"æƒ³ç”¨Github Pagesè½»æ¾æ­å»ºè‡ªå·±çš„åšå®¢ï¼Œç”¨Hexoï¼Œ10åˆ†é’Ÿï¼ åºŸè¯åŒºåŸŸï¼šæˆ‘åœ¨æ¥è§¦Hexoï¼ˆå¯ä»¥è¯»ä½œHack Soï¼‰ä¹‹å‰ï¼Œç»å¯¹æ²¡å°‘å°è¯•å»ºç«‹ä¸€ä¸ªå®Œå…¨è‡ªç”±ã€è‡ªå·±è¯´äº†ç®—çš„ç‹¬ç«‹åšå®¢ï¼šWordPresså®šä½é‡é‡çº§ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œç”Ÿæˆçš„æ˜¯åŠ¨æ€ç½‘ç«™ï¼Œä¾èµ–æ•°æ®åº“â€¦â€¦å¤ªç¹çäº†ï¼Œæ”¾å¼ƒè€ŒJekyllå’ŒHexoéƒ½æ˜¯é™æ€å»ºç«™å·¥å…·ï¼Œä½†Jekyllçš„ä¾èµ–é¡¹ä¹Ÿå¾ˆå¤šï¼Œä¹Ÿä¸ç®€çº¦ï¼Œä¸æƒ³ç”¨æœ€åæ‰æ˜¯åæ°”ç›¸å¯¹ä¸é«˜çš„Hexoï¼Œç›¸ä¿¡æˆ‘ï¼Œç†Ÿç»ƒçš„æƒ…å†µä¸‹ï¼Œ10åˆ†é’Ÿå°±å¯ä»¥æ­å‡ºæ¥ã€‚ ç®€ä»‹Hexoæ˜¯ä¸€ä¸ªå…è´¹çš„é™æ€Blogç”Ÿæˆå·¥å…·ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æŠŠä½ å†™çš„Markdownåšå®¢æ–‡ä»¶ç”Ÿæˆé™æ€ç½‘é¡µï¼ŒæŠŠè¿™ä¸ªç½‘é¡µæ”¾åœ¨Githubæˆ–è€…ä½ è‡ªå·±çš„æœåŠ¡å™¨ä¸Šå°±å¯ä»¥å¿«é€Ÿè®¿é—®äº†ã€‚è½¯ä»¶ç•Œï¼Œä»æ¥ä¸ç¼ºè‡ªåŠ¨åŒ–å·¥å…·(à¸‡ â€¢_â€¢)à¸‡ å®‰è£…å®˜ç½‘æ–‡æ¡£ï¼šHexo Docs Hexoå®‰è£…å‰ï¼Œä½ çš„ç”µè„‘ä¸Šéœ€è¦å…ˆæœ‰ä¸‹é¢è¿™ä¸¤ä¸ªä¸œè¥¿ï¼š Node.js Git å¦‚æœå·²ç»å®‰è£…äº†çš„è¯ï¼Œå‘½ä»¤è¡Œä¸‹ä¸€å¥è¯å°±å¥½å•¦ï¼š 1$ npm install -g hexo-cli åˆå§‹åŒ–åšå®¢ç›®å½•åœ¨ä½ çš„æœ¬åœ°æ–°å»ºä¸€ä¸ªå­˜æ”¾åšå®¢çš„ç›®å½•ï¼Œæ¯”å¦‚â€D:\\MyHexoBlogâ€œï¼Œç„¶ååœ¨è¿™ä¸ªç›®å½•å³é”®ï¼Œé€‰æ‹©â€Git Bash Hereâ€œï¼Œè¾“å…¥ä¸‹é¢ä¸¤æ¡å‘½ä»¤è¿›è¡Œåˆå§‹åŒ–ï¼š 12$ hexo init$ npm install åˆå§‹åŒ–å®Œæˆä¹‹åï¼Œä½ çš„ç›®å½•ç»“æ„åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š 12345678.â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source| â”œâ”€â”€ _drafts| â””â”€â”€ _postsâ””â”€â”€ themes å¦‚æœæ²¡æœ‰å‡ºé”™çš„è¯ï¼Œç»§ç»­æ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤å¯åŠ¨æœåŠ¡ï¼š 12$ hexo g $ hexo s å¯åŠ¨ä¹‹åï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼šhttp://localhost:4000/ï¼Œæ˜¯ä¸æ˜¯çœ‹åˆ°äº†æ¼‚äº®çš„Hexoåšå®¢é¡µé¢äº†ã€‚ä¸è¿‡ç›®å‰è¿™ä¸ªåšå®¢è¿˜æ˜¯è¿è¡Œåœ¨ä½ æœ¬æœºä¸Šçš„ï¼Œä¸‹ç¯‡æˆ‘ä»¬çœ‹ä¸€ä¸‹æ€ä¹ˆæ ·è®©åˆ«äººä¹Ÿèƒ½è®¿é—®è¿™ä¸ªåšå®¢ã€‚ å¼•ç”¨ Hexo Docs Hexo+Githubæ­å»ºä¸ªäººåšå®¢(ä¸€)â€”â€”å¼€å§‹æ­å»º ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://www.codec.wang/tags/Hexo/"},{"name":"Github","slug":"Github","permalink":"http://www.codec.wang/tags/Github/"}]},{"title":"ã€åˆ©å™¨ã€‘ç”¨VS Codeå†™Markdown","slug":"ã€åˆ©å™¨ã€‘ç”¨VSCodeå†™Markdown","date":"2017-09-11T07:11:22.000Z","updated":"2020-04-07T03:49:58.806Z","comments":true,"path":"tools-markdown-in-vscode/","link":"","permalink":"http://www.codec.wang/tools-markdown-in-vscode/","excerpt":"Markdownä»¥å…¶ç®€æ´ã€ä¼˜é›…æ•´é½çš„é£æ ¼ï¼Œæˆä¸ºç›®å‰éå¸¸æµè¡Œçš„åšå®¢æ–‡ä»¶æ ¼å¼ã€‚ç”šè‡³æœ‰äººè¯´ï¼šæ¯ä¸ªäººéƒ½åº”è¯¥ç”¨Markdownå†™åšå®¢","text":"Markdownä»¥å…¶ç®€æ´ã€ä¼˜é›…æ•´é½çš„é£æ ¼ï¼Œæˆä¸ºç›®å‰éå¸¸æµè¡Œçš„åšå®¢æ–‡ä»¶æ ¼å¼ã€‚ç”šè‡³æœ‰äººè¯´ï¼šæ¯ä¸ªäººéƒ½åº”è¯¥ç”¨Markdownå†™åšå®¢ã€‚å…³äºMarkdownç›¸è¾ƒå¯Œæ–‡æœ¬çš„ä¼˜åŠ¿ï¼Œæˆ‘å°±ä¸ç»†è¯´äº†ã€‚ Markdownç¼–è¾‘å™¨æ”¯æŒMarkdownçš„å·¥å…·æœ‰å¾ˆå¤šï¼Œå¤§å®¶å¯ä»¥å‚è€ƒç½‘ä¸Šï¼Œå¦‚è¿™ç¯‡æ–‡ç« ï¼šç å­—å¿…å¤‡ï¼š18 æ¬¾ä¼˜ç§€çš„ Markdown å†™ä½œå·¥å…· | 2015 å¹´åº¦ç›˜ç‚¹ã€‚å°±æˆ‘è‡ªå·±ç›®å‰åœ¨Windowsä¸Šä½¿ç”¨çš„è€Œè¨€æœ‰ï¼šç®€ä¹¦ã€æœ‰é“äº‘ç¬”è®°ã€Typoraã€VSCode ç®€ä¹¦æœ¬èº«å°±æ˜¯ä¸€ä¸ªåšå®¢å¹³å°ï¼Œæœ‰é“äº‘ç¬”è®°æ˜¯ç±»ä¼¼OneNoteå’Œå°è±¡ç¬”è¿¹çš„åº”ç”¨ã€‚å¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨è¿™ä¸¤ä¸ªå¹³å°çš„è¯ï¼Œå°±ä¸ç”¨å¤šè¯´äº†ã€‚ä½†å¦‚æœåªæ˜¯æƒ³ç”¨ä¸€ä¸ªå•çº¯çš„Markdownç¼–è¾‘å™¨çš„è¯ï¼Œæ¨èæè‡´ç®€æ´çš„Typoraã€‚è™½è¯´ç•Œé¢ç®€æ´ï¼Œä½†åŠŸèƒ½å¼ºå¤§ï¼Œä¸ä»…å†…ç½®äº†å¸¸è§çš„ä¸€äº›Markdownæ ·å¼ï¼Œè¿˜æ”¯æŒPDF/HTMLç­‰å¤šç§æ ¼å¼å¯¼å‡ºï¼Œæˆ‘å¸¸ç”¨çš„å°±æ˜¯Typoraï¼š ä½ æ˜¯ä¸€æšæ–‡é’çš„è¯ï¼Œåƒä¸‡ä¸è¦é”™è¿‡è¿™æ¬¾ç¼–è¾‘å™¨ã€‚ä¸è¿‡ï¼Œå¯¹äºç¨‹åºçŒ¿æ¥è¯´ï¼ŒVSCodeæ‰æ˜¾å¾—æ›´æœ‰å‘³é“ã€‚ ç”¨VSCodeå†™MarkdownVSCodeæ˜¯ç›®å‰å¾ˆç«çš„ä¸€æ¬¾ç¼–è¾‘å™¨ï¼Œå°±ä¸è¿‡å¤šä»‹ç»äº†ã€‚ç°åœ¨ç‰ˆæœ¬çš„VSCodeé»˜è®¤å·²ç»æ”¯æŒMarkdowné¢„è§ˆï¼Œæ— éœ€ä¸‹è½½æ’ä»¶ã€‚ç”¨VSCodeæ‰“å¼€mdæ–‡ä»¶æˆ–å°†å½“å‰æ–‡ä»¶æ›´æ”¹ä¸ºMarkdownæ ¼å¼å°±å¯ä»¥å¼€å§‹ä¹¦å†™äº†ï¼š VSCodeæ”¯æŒä¸¤ç§é¢„è§ˆæ–¹å¼ï¼š æŒ‰ä¸‹Ctrl+K Vï¼Œåƒä¸Šå›¾ä¸€æ ·å·¦å³åŒæ­¥å®æ—¶é¢„è§ˆ æŒ‰ä¸‹Ctrl+Shift+Vï¼Œåªé¢„è§ˆæœ€ç»ˆæ¸²æŸ“ç»“æœ å¦‚ä¸Šå›¾ï¼Œç¼–å†™å’Œé¢„è§ˆç•Œé¢æ˜¯å®æ—¶åŒæ­¥çš„ï¼Œä¸éœ€è¦çš„è¯ï¼Œå¯ä»¥æŒ‰ä¸‹Ctrl+,ç»„åˆé”®ï¼Œæ·»åŠ å¦‚ä¸‹ä¸¤æ¡è®¾ç½®ï¼š 12\"markdown.preview.scrollEditorWithPreview\": false,\"markdown.preview.scrollPreviewWithEditorSelection\": false å¦å¤–ï¼Œç›®å‰VSCodeé¢„è§ˆæ ·å¼ä¸­ï¼Œä¸­æ–‡çš„æ˜¾ç¤ºå¾ˆåˆ«æ‰­ã€‚æ‰€ä»¥å¯ä»¥ä¸‹è½½ç¬¬ä¸‰æ–¹çš„CSSæ ·å¼ï¼Œè¿™é‡Œæ¨èGithubé£æ ¼çš„CSS ä¸‹è½½å®Œæˆåï¼Œé…ç½®CSSæ–‡ä»¶çš„è®¾ç½®å¦‚ä¸‹å³å¯ï¼š 123\"markdown.styles\": [ \"file:///D:/markdown-github.css\"] å¦å¤–ï¼ŒVSCodeä¸­æœ‰å¾ˆå¤šMarkdownç›¸å…³çš„æ’ä»¶ï¼Œå¦‚Markdown All in Oneå’ŒMarkdown Theme Kitç­‰ï¼Œå¤§å®¶å¯ä»¥ä¸‹è½½ä¸‹æ¥å°è¯•ä¸€ä¸‹å“ˆï¼ å¼•ç”¨Markdown editing with Visual Studio Code ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"åˆ©å™¨ç¯‡","slug":"åˆ©å™¨ç¯‡","permalink":"http://www.codec.wang/categories/%E5%88%A9%E5%99%A8%E7%AF%87/"}],"tags":[{"name":"Markdown","slug":"Markdown","permalink":"http://www.codec.wang/tags/Markdown/"},{"name":"VSCode","slug":"VSCode","permalink":"http://www.codec.wang/tags/VSCode/"}]},{"title":"ã€åˆ©å™¨ã€‘MyCLIï¼šè‡ªåŠ¨è¡¥å…¨å’Œè¯­æ³•é«˜äº®çš„MySQLå‘½ä»¤è¡Œå·¥å…·","slug":"ã€åˆ©å™¨ã€‘MyCLIï¼šè‡ªåŠ¨è¡¥å…¨å’Œè¯­æ³•é«˜äº®çš„MySQLå‘½ä»¤è¡Œå·¥å…·","date":"2017-09-11T06:32:14.000Z","updated":"2020-04-07T03:51:13.241Z","comments":true,"path":"tools-mycli/","link":"","permalink":"http://www.codec.wang/tools-mycli/","excerpt":"mycliæ˜¯MySQLå‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒå…³é”®å­—è¯­æ³•é«˜äº®å’Œè‡ªåŠ¨è¡¥å…¨ï¼Œçœ‹ä¸Šé¢çš„åŠ¨å›¾ä½ å°±çŸ¥é“äº†ã€‚","text":"mycliæ˜¯MySQLå‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒå…³é”®å­—è¯­æ³•é«˜äº®å’Œè‡ªåŠ¨è¡¥å…¨ï¼Œçœ‹ä¸Šé¢çš„åŠ¨å›¾ä½ å°±çŸ¥é“äº†ã€‚ mycliä¸ä»…èƒ½åœ¨å‘½ä»¤è¡Œä¸­æç¤ºMySQLçš„å…³é”®å­—ï¼Œæ›´ç‰›æ°çš„æ˜¯æ•°æ®åº“åã€è¡¨åã€å­—æ®µåéƒ½å¯ä»¥æç¤ºï¼Œéå¸¸æ–¹ä¾¿ã€‚å¦‚æœä½ ç»å¸¸åœ¨å‘½ä»¤è¡Œé‡Œç MySQLå‘½ä»¤ï¼Œç›¸ä¿¡è¿™æ¬¾å·¥å…·ä¸€å®šä¼šè®©ä½ æ»¡æ„ã€‚ å®˜ç½‘ï¼šMyCLI å®‰è£…å…¶å®mycliæ˜¯ä¸€ä¸ªPythonçš„åŒ…ï¼Œæ‰€ä»¥ä½ å·²ç»å®‰è£…äº†Python(pip)çš„è¯ï¼Œç”¨ä¸‹é¢ä¸€æ¡æŒ‡ä»¤å°±å¥½äº†ï¼š 1pip install mycli å¦‚æœå‡ºç°é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒå®˜ç½‘ï¼Œæœ‰è¯¦ç»†çš„è¯´æ˜ã€‚ ä½¿ç”¨å®‰è£…å¥½ä¹‹åï¼Œåœ¨å‘½ä»¤è¡Œä¸‹ï¼Œå°†ä»¥å¾€ç™»é™†MySQLç”¨çš„mysqlæ¢æˆmycliï¼Œä¸ç”¨åŠ -pé€‰é¡¹å°±å¯ä»¥äº†ï¼š å¥½äº†ï¼Œå¤§å®¶è§‰å¾—å¥½ç”¨çš„è¯ï¼Œæ¬¢è¿æ‰©æ•£å™¢ï¼ ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"åˆ©å™¨ç¯‡","slug":"åˆ©å™¨ç¯‡","permalink":"http://www.codec.wang/categories/%E5%88%A9%E5%99%A8%E7%AF%87/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://www.codec.wang/tags/MySQL/"},{"name":"MyCLI","slug":"MyCLI","permalink":"http://www.codec.wang/tags/MyCLI/"}]},{"title":"ã€MySQLã€‘ä¸»ä»æœåŠ¡å™¨åŒæ­¥","slug":"ã€MySQLã€‘ä¸»ä»æœåŠ¡å™¨åŒæ­¥","date":"2017-07-29T08:20:15.000Z","updated":"2020-05-14T07:58:03.307Z","comments":true,"path":"mysql-master-slave/","link":"","permalink":"http://www.codec.wang/mysql-master-slave/","excerpt":"åœ¨è¿›å…¥æ­£é¢˜ä¹‹å‰ï¼Œå…ˆæ¥çœ‹ä¸‹ç†è®ºçŸ¥è¯†ï¼š","text":"åœ¨è¿›å…¥æ­£é¢˜ä¹‹å‰ï¼Œå…ˆæ¥çœ‹ä¸‹ç†è®ºçŸ¥è¯†ï¼š å¤šå°æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œæ˜¯æ„å»ºå¤§å‹åº”ç”¨ç¨‹åºçš„åŸºç¡€ã€‚è¿™æ ·åšæœ‰ç€å¾ˆå¤šä¼˜åŠ¿ï¼Œæ¯”å¦‚ï¼š åœ¨ä»æœåŠ¡å™¨ä¸Šè¿›è¡Œæ•°æ®å¤‡ä»½ï¼Œç¡®ä¿æ•°æ®å®‰å…¨ï¼› ä¸»æœåŠ¡å™¨å‡ºç°é—®é¢˜æ—¶ï¼Œåˆ‡æ¢åˆ°ä»æœåŠ¡å™¨ï¼› åœ¨ä»æœåŠ¡å™¨ä¸Šæ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼Œé™ä½ä¸»æœåŠ¡å™¨çš„å‹åŠ›ç­‰ç­‰ã€‚ ä¸»ä»åŒæ­¥ç®€è¦åŸç†MySQLä¸»ä»åŒæ­¥æ˜¯é€šè¿‡äºŒè¿›åˆ¶æ—¥å¿—æ¥å®ç°çš„ã€‚å…·ä½“æ¥è¯´ï¼Œä¸»æœºä¼šå°†æ•°æ®æ›´æ”¹æ“ä½œéƒ½è®°å½•åœ¨äºŒè¿›åˆ¶æ—¥å¿—ä¸­ ã€‚ç„¶åï¼Œä»æœº ä¼šæ¯éš”ä¸€å®šæ—¶é—´æ£€æµ‹è¿™ä¸ªä¸»æœºäºŒè¿›åˆ¶æ–‡ä»¶çš„å˜åŒ–ï¼Œå¦‚æœ‰æ›´æ–°ï¼Œä»æœºå°±ä¼šæ›´æ–°æ—¥å¿—ä¸­æœ€æ–°çš„ä¸€æ¡ã€‚ å…·ä½“å®ç°æˆ‘ä¸¤å°ç”µè„‘çš„ç³»ç»Ÿé…ç½®å¦‚ä¸‹ï¼š 1234# ä¸»æœº/masterï¼šWindows 10/WAMP 3.0.6/MySQL 5.7.14/IPï¼š192.168.1.102# ä»æœº/slaveï¼šUbuntu 16.04/LAMP/MySQL 5.7.19/IPï¼š192.168.1.112 ä¸»ä»æœºçš„MySQLç‰ˆæœ¬å’Œç³»ç»Ÿæ—¶é—´è¦å°½é‡ä¿æŒä¸€è‡´ï¼Œä¸ä¸€è‡´çš„è¯ï¼Œä¸»æœºç‰ˆæœ¬è¦ä½äºä»æœºç‰ˆæœ¬ã€‚ ä¸»æœºé…ç½®åˆ›å»ºä¸€ä¸ªåŒæ­¥è´¦å·ï¼Œå¹¶èµ‹äºˆreplication slaveçš„æƒé™ï¼š 12grant replication slave on *.* to 'rep_slave'@'192.168.1.%' identified by 'repslavepwd';flush privileges; æ›´æ”¹ä¸»æœºmy.inié…ç½®æ–‡ä»¶ï¼š å› ä¸ºæˆ‘çš„ä¸»æœºæ˜¯Windowsç³»ç»Ÿ+WAMPç¯å¢ƒï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹my.inié…ç½®æ–‡ä»¶ï¼Œæˆ‘çš„è·¯å¾„æ˜¯ï¼šD:\\wamp64\\bin\\mysql\\mysql5.7.14\\my.iniã€‚æ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°[mysqld]é…ç½®èŠ‚ç‚¹ï¼Œæ·»åŠ å¦‚ä¸‹ä¸¤é¡¹é…ç½®ï¼š 12345[mysqld]; æ•°æ®åº“å”¯ä¸€IDï¼Œä¸»ä»æœºä¸èƒ½é‡å¤server-id = 1; æŒ‡å®šäºŒè¿›åˆ¶æ—¥å¿—å­˜æ”¾è·¯å¾„ï¼Œåªæœ‰æ–‡ä»¶åçš„è¯ï¼Œé»˜è®¤å­˜æ”¾åœ¨mysqlçš„dataç›®å½•ä¸‹log-bin = mysql-bin é™¤å»ä¸Šé¢ä¸¤å¿…å¤‡é¡¹ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ‹“å±•å¯é€‰é…ç½®ï¼Œå¦‚ï¼š 12345; ä»¥ä¸‹ä¸ºå¯é€‰é…ç½®é¡¹; éœ€è¦åŒæ­¥çš„æ•°æ®åº“åï¼Œå¦‚æœæœ‰å¤šä¸ªï¼ŒæŒ‰æ­¤æ ¼å¼å¤šå†™å‡ è¡Œå³å¯ï¼Œä¸æŒ‡å®šçš„è¯ï¼Œé»˜è®¤å…¨éƒ¨åŒæ­¥; binlog-do-db = database; ä¸éœ€è¦å¤‡ä»½çš„æ•°æ®åº“å; binlog-ignore-db = database é‡å¯MySQLæœåŠ¡ï¼š å¯¹äºWAMPï¼Œå¯ä»¥åœ¨å³ä¸‹è§’å·¦é”®å•å‡»ï¼Œé€‰æ‹©MySQLé‡å¯ï¼š ä¹Ÿå¯ä»¥ç”¨å‘½ä»¤è¡Œé‡å¯ï¼š 12&gt; net stop wampmysqld64&gt; net start wampmysqld64 æŸ¥çœ‹ä¸»æœºçŠ¶æ€ï¼š å¾—åˆ°log-binæ—¥å¿—çš„æ–‡ä»¶åå’Œåç§»é‡ï¼Œè¿™ä¸¤ä¸ªå€¼åœ¨åé¢ä»æœºé…ç½®ä¸­ä¼šç”¨åˆ°ï¼š 1&gt; show master status; ä»æœºé…ç½®ä¿®æ”¹my.cnfé…ç½®æ–‡ä»¶ã€‚æˆ‘çš„ä»æœºæ˜¯Ubuntuç³»ç»Ÿ+LAMPç¯å¢ƒï¼Œé»˜è®¤çš„å®Œæ•´é…ç½®æ–‡ä»¶æ˜¯: /etc/mysql/mysql.conf.d/mysqld.cnfï¼Œå¹¶ä¸”æ˜¯åªè¯»æ–‡ä»¶ï¼Œæ‰€ä»¥å¯ä»¥å°†è¿™ä¸ªæ–‡ä»¶æ‹·è´ä¸€ä»½ï¼Œç„¶åä¿®æ”¹æ­¤æ–‡ä»¶ã€‚åŒæ ·æ‰¾åˆ°[mysqld]é…ç½®èŠ‚ç‚¹ï¼Œæ·»åŠ server-idçš„é…ç½®é¡¹ï¼š 123[mysqld]# æ•°æ®åº“å”¯ä¸€IDï¼Œä¸»ä»æœºä¸èƒ½é‡å¤server-id = 2 ç„¶åï¼Œå°†æ­¤æ–‡ä»¶æ‹·è´åˆ°/etc/mysqlä¸‹ï¼Œå¹¶å‘½åä¸ºmy.cnfï¼š 1$ sudo cp /home/ex2tron/Desktop/mysqld.cnf /etc/mysql/my.cnf é‡å¯mysqlæœåŠ¡ï¼š 1$ sudo service mysql restart é…ç½®åŒæ­¥ä¿¡æ¯ï¼š è¿™é‡Œéœ€è¦ä¸»æœºçš„ç›¸å…³ä¿¡æ¯ï¼Œç”¨æˆ·åå’Œå¯†ç å°±æ˜¯ä¹‹å‰ä¸»æœºä¸Šæˆæƒçš„é‚£ä¸ªç”¨æˆ·åå¯†ç ï¼Œlog_fileå’Œlog_posæ˜¯ä¹‹å‰çš„æ—¥å¿—åå’Œåç§»é‡ã€‚è®°å¾—é…ç½®ä¹‹å‰å…ˆstop slaveï¼š 1234567&gt; stop slave;&gt; change master to master_host = '192.168.1.102', master_user = 'rep_slave', master_password = 'repslavepwd', master_log_file = 'mysql-bin.000002', master_log_pos = 3046;&gt; start slave; æ˜¾ç¤ºä»æœºçŠ¶æ€ï¼š ä¸Šè¿°é…ç½®å®Œæˆåï¼Œè¾“å…¥show slave status\\Gï¼›ï¼Œå¦‚æœå‡ºç° 12Slave_IO_Running: YesSlave_SQL_Running: Yes åˆ™è¯´æ˜ä¸€åˆ‡æ­£å¸¸ï¼Œé…ç½®å®Œæˆã€‚ ä½†å¦‚æœå‡ºç°ç±»ä¼¼ä¸‹å›¾è¿™ç§æƒ…å†µï¼Œåˆ™è¯´æ˜å­˜åœ¨é—®é¢˜ï¼š è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦ä¸€æ­¥æ­¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ£€æŸ¥ï¼š é˜²ç«å¢™æ˜¯å¦å¼€æ”¾3306ç«¯å£ï¼Ÿ é…ç½®æ—¶å¯†ç æ˜¯å¦æ­£ç¡®ï¼Ÿ é…ç½®æ—¶åç§»é‡log_posæ˜¯å¦æ­£ç¡®ï¼Ÿ ç½‘ç»œæ˜¯å¦å¯ä»¥pingé€šï¼Ÿ ä¸€èˆ¬éƒ½ä¼šåœ¨è¿™é‡Œå‡ºç°é—®é¢˜ï¼Œæˆ‘æ˜¯å› ä¸ºé˜²ç«å¢™çš„åŸå› ã€‚æŒ‰ç…§è¿™å‡ æ¡æ£€æŸ¥ä¸‹æ¥ï¼Œåº”è¯¥éƒ½èƒ½è§£å†³ã€‚ é…ç½®æ²¡é—®é¢˜çš„è¯ï¼Œå¯ä»¥åœ¨ä¸»æœºä¸Šè¾“å…¥show processlist\\G;æ¥æŸ¥çœ‹ä¸»ä»æœºè¿æ¥ï¼š åŒæ­¥æµ‹è¯• åœ¨ä¸»æœºä¸Šé€šè¿‡create database testsync;åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ ä»æœºä¸Šshow databases;æŸ¥çœ‹ï¼Œå¦‚æœå‡ºç°testsyncåˆ™æµ‹è¯•é€šè¿‡ï¼š å¼•ç”¨ æºç ï¼šmysql_master_slave_sync.sh","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://www.codec.wang/tags/MySQL/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://www.codec.wang/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"}]},{"title":"Qt+OpenCVç¯å¢ƒæ­å»º","slug":"Qt-OpenCVç¯å¢ƒæ­å»º","date":"2017-07-27T00:17:00.000Z","updated":"2020-04-07T04:47:01.817Z","comments":true,"path":"qt-opencv-installation-guide/","link":"","permalink":"http://www.codec.wang/qt-opencv-installation-guide/","excerpt":"Windowsä¸‹çš„é…ç½® å¿µå¿µä¸å¿˜ï¼Œå¿…æœ‰å›å“ã€‚â€”â€”ã€Šä¸€ä»£å®—å¸ˆã€‹ æˆ‘ç”µè„‘ä¸Šå®‰è£…çš„Qtç‰ˆæœ¬ä¿¡æ¯ï¼šQt 5.8/Qt Creator 4.2.1/MinGW 5.3.0","text":"Windowsä¸‹çš„é…ç½® å¿µå¿µä¸å¿˜ï¼Œå¿…æœ‰å›å“ã€‚â€”â€”ã€Šä¸€ä»£å®—å¸ˆã€‹ æˆ‘ç”µè„‘ä¸Šå®‰è£…çš„Qtç‰ˆæœ¬ä¿¡æ¯ï¼šQt 5.8/Qt Creator 4.2.1/MinGW 5.3.0 Qtå®˜æ–¹ä¸‹è½½ é¦–å…ˆç”¨CMakeç¼–è¯‘OpenCV3.2ï¼Œå‚è€ƒï¼šCMakeç¼–è¯‘OpenCV3.2ï¼ˆQtå¹³å°ï¼‰ã€‚é’ˆå¯¹Qt5.8+OpenCV3.2æˆ‘å·²ç»ç¼–è¯‘å¥½äº†ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½ã€‚ ç¼–è¯‘å¥½ä¹‹åï¼ŒæŠŠä¸‹é¢ä¸‰ä¸ªæ–‡ä»¶å¤¹æå–å‡ºæ¥æ”¾åœ¨ä¸€ä¸ªæ–°ç›®å½•ä¸‹ï¼Œæ¯”å¦‚ï¼šD:\\QtOpenCV OpenCVå®‰è£…ç›®å½•ä¸‹çš„build\\includeæ–‡ä»¶å¤¹ CMakeç”Ÿæˆåçš„libæ–‡ä»¶å¤¹ CMakeç”Ÿæˆåçš„binæ–‡ä»¶å¤¹ æ”¾å¥½ä¹‹åï¼Œå°†ä¸Šå›¾binçš„è·¯å¾„ï¼ˆD:\\QtOpenCV\\binï¼‰æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œæ­¤æ—¶æœ€å¥½é‡å¯èµ„æºç®¡ç†å™¨æˆ–æ³¨é”€ä¸€ä¸‹ï¼Œä»¥ä½¿å¾—ç¯å¢ƒå˜é‡æ›´æ”¹ç”Ÿæ•ˆã€‚ ç„¶åæ‰“å¼€Qtçš„proæ–‡ä»¶ï¼Œåœ¨SOURCESå‰é¢æ·»åŠ å¦‚ä¸‹çš„OpenCVçš„ä¾èµ–é¡¹ï¼š 1234567891011# INCLUDEPATH å¤´æ–‡ä»¶è·¯å¾„INCLUDEPATH += D:\\QtOpenCV\\include\\opencv\\ D:\\QtOpenCV\\include\\opencv2\\ D:\\QtOpenCV\\include# LIBS åº“æ–‡ä»¶ï¼Œ-LæŒ‡å®šåº“è·¯å¾„ -llibæŒ‡å®šç¨‹åºç”¨åˆ°çš„libåº“# ä½¿ç”¨ä¸‹é¢æ–¹æ³•åŒ…å«æ‰€æœ‰åº“# LIBS += -L D:\\QtOpenCV\\lib\\libopencv_*.a# æˆ–ä½¿ç”¨ä¸‹é¢æ–¹æ³•åªåŒ…å«è¦ä½¿ç”¨çš„åº“LIBS += -L D:\\QtOpenCV\\lib\\ -llibopencv_highgui320.dll.a\\ -llibopencv_imgproc320.dll.a è¿™æ ·å°±é…ç½®å®Œæˆå•¦ï¼Œè¿™é‡Œæœ‰ä¸€äº›OpenCVçš„ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹ï¼šC++ OpenCVç¤ºä¾‹ Ubuntuä¸‹çš„é…ç½®Ubuntuä¸‹å¦‚æœä¸ç”¨CMakeè‡ªè¡Œå®‰è£…çš„è¯ï¼Œå°±ç®€å•å¤šäº†ï¼Œåœ¨ç»ˆç«¯é‡Œé¢è¾“å…¥ä¸‹é¢å‡ æ¡æŒ‡ä»¤å°±æå®šäº†ï¼š 12345# å®‰è£…Qt5sudo apt-get install cmake qt5-default qtcreator# å®‰è£…opencvsudo apt-get install libopencv-devsudo apt-get install libcv-dev åŒæ ·ï¼Œåœ¨Qtçš„proæ–‡ä»¶ä¸­æ·»åŠ OpenCVçš„ä¾èµ–é¡¹å°±å¯ä»¥è°ƒç”¨äº†ï¼š 12345678INCLUDEPATH += /usr/include\\ /usr/include/opencv\\ /usr/include/opencv2LIBS += -L/usr/lib\\ -llibopencv_highgui\\ -llibopencv_core\\ -llibopencv_imgproc\\ -llibopencv_calib3d å¦‚æœLIBSåƒä¸Šé¢è¿™æ ·åŠ ä¸è¿›å»çš„è¯ï¼Œå¯ä»¥ä¸€ä¸ªä¸€ä¸ªåŠ ï¼Œæ¯”å¦‚ï¼š 12LIBS += -L/usr/lib/libopencv_highgui.soLIBS += -L/usr/lib/libopencv_core.so å¦å¤–ï¼Œä¸åŒç‰ˆæœ¬å’Œä¸åŒå¹³å°åº“çš„ä½ç½®å¯èƒ½ä¸åŒï¼Œæ¯”å¦‚æ ‘è“æ´¾ä¸‹ï¼Œåº“æ–‡ä»¶å¯èƒ½åœ¨ï¼š 1LIBS += -L/usr/lib/arm-linux-gnueabihf\\ ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"CMake","slug":"CMake","permalink":"http://www.codec.wang/tags/CMake/"},{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Qt","slug":"Qt","permalink":"http://www.codec.wang/tags/Qt/"}]},{"title":"CMakeç¼–è¯‘OpenCV3.2ï¼ˆQtå¹³å°ï¼‰","slug":"CMakeç¼–è¯‘OpenCV3-2ï¼ˆQtå¹³å°ï¼‰","date":"2017-07-26T14:25:29.000Z","updated":"2020-04-07T04:39:01.936Z","comments":true,"path":"cmake-make-opencv/","link":"","permalink":"http://www.codec.wang/cmake-make-opencv/","excerpt":"æœ€è¿‘ï¼Œéœ€è¦åœ¨Windowsä¸‹æ­å»ºä¸€ä¸ªQtå’ŒOpenCVçš„ç¯å¢ƒï¼Œå¯æƒœå®˜æ–¹OpenCV3.2çš„buildé‡Œé¢å¹¶ä¸æ˜¯é’ˆå¯¹Qtå¹³å°çš„ã€‚æ‰€ä»¥ï¼Œéœ€è¦ç”¨CMakeç¼–è¯‘OpenCVçš„æºç ã€‚","text":"æœ€è¿‘ï¼Œéœ€è¦åœ¨Windowsä¸‹æ­å»ºä¸€ä¸ªQtå’ŒOpenCVçš„ç¯å¢ƒï¼Œå¯æƒœå®˜æ–¹OpenCV3.2çš„buildé‡Œé¢å¹¶ä¸æ˜¯é’ˆå¯¹Qtå¹³å°çš„ã€‚æ‰€ä»¥ï¼Œéœ€è¦ç”¨CMakeç¼–è¯‘OpenCVçš„æºç ã€‚ CMake V3.9.0 OpenCV V3.2.0 Qt V5.8.0 æ‰€æœ‰çš„å¤§äººéƒ½æ›¾ç»æ˜¯å°å­©ï¼Œè™½ç„¶åªæœ‰å°‘æ•°çš„äººè®°å¾—ã€‚ All grown-ups were once childrenâ€¦ but only few of them remember it.ã€Šå°ç‹å­ã€‹ ç¼–è¯‘æ­¥éª¤å®‰è£…å®ŒCMakeåï¼Œæ‰“å¼€cmake-guiï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š é€‰æ‹©OpenCV3.2æºç æ‰€åœ¨ä½ç½®ï¼Œæˆ‘çš„æ˜¯åœ¨ï¼šD:\\ProgramFiles\\OpenCV3\\sources é€‰æ‹©ç¼–è¯‘ç”Ÿæˆçš„ç›®å½• æœ€åç‚¹å‡»â€Configureâ€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š é€‰æ‹©â€œMinGW Makefilesâ€å¹¶å‹¾é€‰â€œSpecify native compilersâ€ï¼Œç‚¹å‡»â€œNextâ€ï¼š è¿™é‡Œåˆ†åˆ«é€‰æ‹©Qtå®‰è£…ç›®å½•ä¸‹gccå’Œg++çš„è·¯å¾„ï¼Œç‚¹å‡»â€œFinishâ€ï¼Œç­‰å¾…é…ç½®å®Œæˆã€‚ é…ç½®å®Œæˆåï¼Œå‹¾é€‰â€œWITH_OPENGLâ€å’Œâ€œWITH_QTâ€ï¼Œç‚¹å‡»â€œGenerateâ€å°±å¯ä»¥äº†ã€‚å¦‚æœå‘ç”Ÿé”™è¯¯ï¼š å°†Qtçš„ç›¸å…³è·¯å¾„é…ç½®å¦‚ä¸‹ï¼š å…ˆç‚¹å‡»â€œConfigureâ€ï¼Œå†æ¬¡ç‚¹å‡»â€œGenerateâ€å°±å¯ä»¥ç”Ÿæˆäº†ã€‚ç„¶ååœ¨cmdä¸‹åˆ‡æ¢åˆ°ç”Ÿæˆçš„ç›®å½•ï¼Œæˆ‘çš„æ˜¯D:\\OpenCVBuildï¼Œæ‰§è¡Œå‘½ä»¤ï¼šmingw32-makeå¼€å§‹ç¼–è¯‘ï¼ˆ25åˆ†é’Ÿå·¦å³ï¼‰ï¼š ç¼–è¯‘å¥½ä¹‹åï¼Œå†æ‰§è¡Œmingw32-make installå°±å®Œæˆäº†ã€‚ ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"CMake","slug":"CMake","permalink":"http://www.codec.wang/tags/CMake/"},{"name":"OpenCV","slug":"OpenCV","permalink":"http://www.codec.wang/tags/OpenCV/"},{"name":"Qt","slug":"Qt","permalink":"http://www.codec.wang/tags/Qt/"}]},{"title":"ã€äº‘æœåŠ¡ã€‘æ­å»ºè‡ªå·±çš„Github/GitæœåŠ¡å™¨","slug":"ã€äº‘æœåŠ¡ã€‘æ­å»ºè‡ªå·±çš„Github-GitæœåŠ¡å™¨","date":"2017-06-04T11:38:56.000Z","updated":"2020-04-07T03:53:46.869Z","comments":true,"path":"set-up-your-own-git-server/","link":"","permalink":"http://www.codec.wang/set-up-your-own-git-server/","excerpt":"Githubæ˜¯ç›®å‰æœ€æµè¡Œçš„æ‰˜ç®¡å¼€æºä»£ç çš„è¿œç¨‹ä»“åº“ï¼Œä½†å¦‚æœæƒ³è¦åˆ›å»ºç§æœ‰ä»“åº“ï¼Œä¸å…¬å¼€ä»£ç çš„è¯ï¼ŒGithubæ˜¯æ”¶è´¹çš„ã€‚","text":"Githubæ˜¯ç›®å‰æœ€æµè¡Œçš„æ‰˜ç®¡å¼€æºä»£ç çš„è¿œç¨‹ä»“åº“ï¼Œä½†å¦‚æœæƒ³è¦åˆ›å»ºç§æœ‰ä»“åº“ï¼Œä¸å…¬å¼€ä»£ç çš„è¯ï¼ŒGithubæ˜¯æ”¶è´¹çš„ã€‚ä½†åƒæˆ‘ä»¬è¿™ç§ç©·è‹¦çš„å­©å­ï¼Œåªèƒ½é€‰æ‹©è‡ªå·±æ­ä¸€ä¸ªGitæœåŠ¡å™¨å’¯ã€‚ 2019-1-8æ›´æ–°ï¼šå¾®è½¯æ”¶è´­Githubåï¼Œç§æœ‰ä»£ç åº“ä»æ­¤å…è´¹ï¼ï¼å–œå¤§æ™®å¥”å•Šï¼ æˆ‘ä»¬éœ€è¦ä¸€å°Linuxç”µè„‘ï¼Œå¯ä»¥å½“ä½œå±€åŸŸç½‘å†…çš„Githubã€‚å½“ç„¶å¦‚æœä½ æœ‰é˜¿é‡Œäº‘ä¹‹ç±»çš„æœåŠ¡å™¨çš„è¯å°±æ›´å¥½äº†ï¼Œæœ‰ç½‘çš„åœ°æ–¹å°±å¯ä»¥push/pullä»£ç ï¼Œæˆ‘è¿™é‡Œä»¥è‡ªå·±çš„æœ¬åœ°Ubuntuç”µè„‘ä¸ºä¾‹ï¼š å®‰è£…Git1sudo apt-get install git ä¸€å¥è¯ï¼Œæ²¡å•¥å¥½è¯´çš„(+_+) æ–°å»ºgitç”¨æˆ·å¹¶é…ç½®åˆ›å»ºç”¨äºè¿è¡ŒGitæœåŠ¡çš„ç”¨æˆ·gitï¼Œæ–°å»ºè´¦å·æ—¶ï¼Œä¼šæç¤ºä½ è¾“å…¥è¯¥ç”¨æˆ·çš„å¯†ç ï¼Œå…¶ä»–ä¿æŒé»˜è®¤å³å¯ï¼š 1sudo adduser git adduseræŒ‡ä»¤ä¼šåœ¨/homeç›®å½•ä¸‹ç”Ÿæˆä»¥gitåå‘½åçš„æ–‡ä»¶å¤¹ï¼Œä»£è¡¨gitç”¨æˆ·ç›®å½•ï¼š 1ls /home åœ¨gitç”¨æˆ·ç›®å½•ä¸‹æ–°å»º.sshæ–‡ä»¶å¤¹å’Œauthorized_keysæ–‡ä»¶ï¼š 12mkdir /home/git/.sshtouch /home/git/.ssh/authorized_keys ç†Ÿæ‚‰sshçš„åŒå­¦åº”è¯¥çŸ¥é“authorized_keysæ–‡ä»¶ç”¨äºæ”¶é›†æ‰€æœ‰éœ€è¦ç™»å½•åˆ°æ­¤GitæœåŠ¡å™¨çš„å®¢æˆ·ç«¯å…¬é’¥ï¼Œä¸€è¡Œä¸€ä¸ªã€‚å¦‚æœä½ å·²ç»ç”Ÿæˆè¿‡sshå¯†é’¥çš„è¯ï¼ŒWindowsç³»ç»Ÿä¼šåœ¨C:\\Users\\ç”¨æˆ·å\\.ssh\\ï¼ŒLinuxç³»ç»Ÿä¸€èˆ¬åœ¨/home/user/.ssh/ä¸‹ï¼Œæ²¡æœ‰ç”Ÿæˆçš„è¯ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„æŒ‡ä»¤ç”Ÿæˆï¼š 1ssh-keygen -t rsa å°†id_rsa.pubä¸­çš„å†…å®¹æ‹·è´åˆ°æœåŠ¡å™¨çš„authorized_keysæ–‡ä»¶ä¸­ï¼š 1echo \"pub_key_content\" &gt;&gt; /home/git/.ssh/authorized_keys æ–°å»ºä»“åº“ç°åœ¨å…¶å®å°±è·ŸGithubä¸€æ ·çš„æµç¨‹äº†ï¼Œé¦–å…ˆåœ¨å»ºç«‹ä¸€ä¸ªæ–°ä»“åº“ï¼Œæ¯”å¦‚åœ¨/home/git/reposä¸‹ï¼š 123mkdir /home/git/reposcd /home/git/repos/sudo git init --bare sample.git ç„¶åå°†sample.gitä»“åº“çš„ç”¨æˆ·å’Œç»„éƒ½æ”¹æˆgitï¼š 1sudo chown -R git:git sample.git è¿™æ ·å°±å»ºå¥½äº†è¿œç¨‹ä»“åº“ï¼Œæ¥ä¸‹æ¥ä½ å¯ä»¥å°†å·²æœ‰çš„æœ¬åœ°ä»“åº“å…³è”æˆ–è€…å…‹éš†åˆ°æœ¬åœ°ï¼š 1git remote add origin git@server_ip:/home/git/repos/sample.git 1git clone git@server_ip:/home/git/repos/sample.git è¿˜æœ‰ç‚¹å°é—®é¢˜~å‰é¢æ–°å»ºç”¨æˆ·çš„æ­¥éª¤å®Œæˆåï¼Œgitç”¨æˆ·æ˜¯å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ç™»é™†æœåŠ¡å™¨çš„ï¼Œå› æ­¤éœ€è¦ç¦æ­¢gitç”¨æˆ·ç™»é™†shellï¼Œç¼–è¾‘/etc/passwdæ–‡ä»¶ï¼Œæ‰¾åˆ°gitçš„ä¸€è¡Œï¼š 1git:x:1001:1001:,,,:/home/git:/bin/bash å°†å¯åŠ¨ç¯å¢ƒæ”¹ä¸ºï¼š 1git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell git-shellæ˜¯ä¸€ä¸ªæ¯æ¬¡ä¸€ç™»å½•å°±é€€å‡ºçš„ç¨‹åºï¼Œè¿™æ ·é…ç½®ä¹‹åï¼Œgitç”¨æˆ·å¯ä»¥ä½¿ç”¨sshç®¡ç†ä»“åº“ï¼Œä½†æ— æ³•ç™»é™†shellã€‚ å¼•ç”¨ å»–é›ªå³°Gitæ•™ç¨‹ ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢ï¼ŒExcelsior!","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"Github","slug":"Github","permalink":"http://www.codec.wang/tags/Github/"},{"name":"Build","slug":"Build","permalink":"http://www.codec.wang/tags/Build/"},{"name":"Git Sever","slug":"Git-Sever","permalink":"http://www.codec.wang/tags/Git-Sever/"}]},{"title":"ç¼–ç¨‹å‘½åæ³•","slug":"ç¼–ç¨‹å‘½åæ³•","date":"2015-03-31T08:20:15.000Z","updated":"2020-05-14T08:18:22.882Z","comments":true,"path":"naming-convention/","link":"","permalink":"http://www.codec.wang/naming-convention/","excerpt":"æˆ‘ä»¬éƒ½çŸ¥é“ç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œéœ€è¦éµå®ˆä¸€å®šçš„ç¼–ç¨‹è§„èŒƒã€‚å¯¹äºå˜é‡çš„å‘½åè§„èŒƒï¼Œæœ‰äº›æ˜¯ç¼–ç¨‹è¯­è¨€æœ¬èº«çš„è§„åˆ™ï¼Œå¦‚C#ä¸­å˜é‡åä¸­ä¸èƒ½åŒ…å«ç©ºæ ¼ã€å°æ•°ç‚¹ç­‰ç­‰ï¼›æœ‰äº›åˆ™æ˜¯å¼€å‘äººå‘˜æˆ–ä¼ä¸šçš„ç¼–ç¨‹é£æ ¼æˆ–åˆ¶çº¦ã€‚","text":"æˆ‘ä»¬éƒ½çŸ¥é“ç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œéœ€è¦éµå®ˆä¸€å®šçš„ç¼–ç¨‹è§„èŒƒã€‚å¯¹äºå˜é‡çš„å‘½åè§„èŒƒï¼Œæœ‰äº›æ˜¯ç¼–ç¨‹è¯­è¨€æœ¬èº«çš„è§„åˆ™ï¼Œå¦‚C#ä¸­å˜é‡åä¸­ä¸èƒ½åŒ…å«ç©ºæ ¼ã€å°æ•°ç‚¹ç­‰ç­‰ï¼›æœ‰äº›åˆ™æ˜¯å¼€å‘äººå‘˜æˆ–ä¼ä¸šçš„ç¼–ç¨‹é£æ ¼æˆ–åˆ¶çº¦ã€‚ ç›®å‰å½¢æˆçš„æœ€ä¸ºå¸¸ç”¨çš„å˜é‡å‘½åè§„çº¦ä¸»è¦æœ‰ä¸‰ç§ï¼š é©¼å³°å¼å¤§å°å†™/å°é©¼å³°å‘½åæ³•: Lower Camel Case Pascalå‘½åæ³•/å¤§é©¼å³°å‘½åæ³•: Pascal Case /Upper Camel Case åŒˆç‰™åˆ©å‘½åæ³•: Hungarian é©¼å³°å‘½åæ³•(Camel Case)é©¼å³°å¼å¤§å°å†™æ¥è‡ªPerlè¯­è¨€ã€‚ç»„æˆå˜é‡åçš„ç¬¬ä¸€ä¸ªå•è¯ä»¥å°å†™å­—æ¯å¼€å¤´ï¼Œå…¶ä½™å•è¯éƒ½ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œå•è¯ä¹‹é—´ä¸ä»¥ç©ºæ ¼åˆ†éš”æˆ–è¿æ¥å·ï¼ˆ-ï¼‰ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰è¿æ¥ã€‚å¦‚: 123gendermyNamestudentInfoNumber å› ä¸ºè¿™äº›é«˜ä½èµ·ä¼çš„å­—ç¬¦å¾ˆåƒéª†é©¼çš„ä¾§å½±ï¼Œæ‰€ä»¥ç§°ä¸ºå°é©¼å³°å‘½åæ³•ã€‚ ä»¥å‰çš„å‘½åè§„çº¦å¸¸ä½¿ç”¨ä¸‹åˆ’çº¿ä½œä¸ºå˜é‡åä¸­å„ä¸ªå•è¯ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚å¦‚input_student_name()ã€employee_counterã€‚è¿™ç§å½¢å¼ç›®å‰åœ¨åµŒå…¥å¼/Unixç­‰Cç¼–ç¨‹ç¯å¢ƒä¸‹ï¼Œè¿˜è¾ƒä¸ºæ™®éã€‚ä½†ç°åœ¨å·²ç»æ·˜æ±°ã€‚ Pascalå‘½åæ³•(Pascal Case)åˆç§°å¤§é©¼å³°å¼å‘½åæ³•ï¼Œæºè‡ªäºPascalè¯­è¨€çš„å‘½åæƒ¯ä¾‹ã€‚ä¸é©¼å³°å‘½åæ³•ç±»ä¼¼ï¼Œåªä¸è¿‡ç»„æˆå˜é‡åçš„æ‰€æœ‰å•è¯é¦–å­—æ¯éƒ½å¤§å†™ã€‚å¦‚: 123GenderMyNameStudentInfoNumber è¿™æ ·å¼€å‘äººå‘˜å¯ä»¥å¾ˆæ˜ç¡®çš„çœ‹å‡ºå˜é‡çš„å­—æ¯ç»„åˆã€‚ åŒˆç‰™åˆ©å‘½åæ³•(Hungarian)è¿™ç§æ–¹æ³•è¦æ±‚åœ¨æ¯ä¸ªå˜é‡åçš„å‰é¢åŠ ä¸Šè¡¨ç¤ºå˜é‡æ•°æ®ç±»å‹æˆ–ç”¨é€”çš„å°å†™å­—æ¯ã€‚ å½“ç„¶ï¼Œè¿™ç§æ–¹æ³•åœ¨OOPé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­åŸºæœ¬ä¸è¢«é‡‡ç”¨ï¼Œå› ä¸ºç±»ä¼¼C#/Javaä¸­æœ‰ä¸Šç™¾ç§ç±»å‹ï¼Œå¾ˆå®¹æ˜“æ··æ·†ã€‚ä½†å¯ä»¥äº†è§£ä¸€ä¸‹ï¼Œå®ƒåŒ…æ‹¬ç³»ç»ŸåŒˆç‰™åˆ©å‘½åæ³•å’ŒåŒˆç‰™åˆ©åº”ç”¨å‘½åæ³•ï¼š ç³»ç»ŸåŒˆç‰™åˆ©å‘½åæ³•ä¸­ï¼Œå‰ç¼€å­—æ¯è¯´æ˜å˜é‡çš„æ•°æ®ç±»å‹ã€‚å¦‚iGenderã€strMyNameï¼Œiä»£è¡¨intå‹ï¼Œsträ»£è¡¨stringå‹ã€‚ åŒˆç‰™åˆ©åº”ç”¨å‘½åæ³•ä¸­ï¼Œå‰ç¼€è¯´æ˜å˜é‡ç”¨é€”ã€‚å¦‚pCircleSizeï¼Œpä»£è¡¨æŒ‡é’ˆã€‚ C#æ¨èå‘½åæ³• ç±»åã€ç±»çš„å±æ€§å’Œæ–¹æ³•é‡‡ç”¨Pascalå‘½åæ³• å˜é‡ã€å¯¹è±¡é‡‡ç”¨é©¼å³°å‘½åæ³• ä»…ä¸ºä¸ªäººæ€»ç»“ï¼Œå¦‚æœ‰é—®é¢˜å»ºè®®ï¼Œè¯·åé¦ˆä¸æˆ‘ï¼Œè°¢è°¢ï¼","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"å‘½å","slug":"å‘½å","permalink":"http://www.codec.wang/tags/%E5%91%BD%E5%90%8D/"}]},{"title":"CRä¸LF(æ“ä½œç³»ç»Ÿâ€œä¸‹ä¸€è¡Œâ€çš„ä¸åŒ)","slug":"CRä¸LF-æ“ä½œç³»ç»Ÿâ€œä¸‹ä¸€è¡Œâ€çš„ä¸åŒ","date":"2014-10-23T15:31:24.000Z","updated":"2020-05-15T11:46:46.638Z","comments":true,"path":"cr-lf/","link":"","permalink":"http://www.codec.wang/cr-lf/","excerpt":"åœ¨æœ€åˆçš„ç”µæŠ¥é€šè®¯æ—¶ä»£ï¼Œæ–‡æœ¬æ¯è¯»å–åˆ°ä¸€è¡Œçš„æœ«å°¾ï¼Œä¾¿éœ€è¦å°†çº¸å¼ å‘ä¸‹æ»šåŠ¨ä¸€è¡Œï¼ˆæ¢è¡Œï¼‰ï¼Œå¹¶å°†æ‰“å°å¤´ä»æœ€å³è¾¹å›åˆ°å·¦è¾¹å¼€å¤´ï¼ˆå›è½¦ï¼‰ã€‚ä¸‹é¢è¿™ä¸ªå›¾è¿˜æ˜¯æŒºå½¢è±¡çš„ï¼š","text":"åœ¨æœ€åˆçš„ç”µæŠ¥é€šè®¯æ—¶ä»£ï¼Œæ–‡æœ¬æ¯è¯»å–åˆ°ä¸€è¡Œçš„æœ«å°¾ï¼Œä¾¿éœ€è¦å°†çº¸å¼ å‘ä¸‹æ»šåŠ¨ä¸€è¡Œï¼ˆæ¢è¡Œï¼‰ï¼Œå¹¶å°†æ‰“å°å¤´ä»æœ€å³è¾¹å›åˆ°å·¦è¾¹å¼€å¤´ï¼ˆå›è½¦ï¼‰ã€‚ä¸‹é¢è¿™ä¸ªå›¾è¿˜æ˜¯æŒºå½¢è±¡çš„ï¼š å› æ­¤ASCIIå­—ç¬¦ä¸­ä¾¿æœ‰äº†LFï¼šLine Feed(0x0A)ï¼ŒCRï¼šCarriage Return(0x0D)ã€‚ä½†ç°ä»£è®¡ç®—æœºå¹¶ä¸éœ€è¦ä¸¤ä¸ªå­—ç¬¦æ¥è¡¨ç¤ºä¸‹ä¸€è¡Œï¼Œå› æ­¤åœ¨è®¾è®¡æ“ä½œç³»ç»Ÿæ—¶å¤§å®¶å°±äº§ç”Ÿäº†åˆ†æ­§ã€‚ä¸ºèŠ‚çœèµ„æºï¼Œæœ‰çš„è®¾è®¡è€…é€‰æ‹©ç”¨ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºã€‚å› ä¸ºè¿™ä¸ªé€‰æ‹©çš„ä¸åŒï¼Œå¯¼è‡´äº†ä¸åŒOSçš„æ¢è¡Œç¬¦çš„ä¸åŒã€‚ å¦‚ä¸‹å›¾ï¼Œå‚è€ƒç»´åŸºç™¾ç§‘ï¼ŒMac OS 2001å¹´ä¹‹å‰é‡‡ç”¨çš„æ˜¯CRï¼Œä¹‹åç”¨çš„æ˜¯LFï¼ŒUnix/Linuxé‡‡ç”¨LFï¼Œè€ŒWindowsé‡‡ç”¨çš„æ˜¯CRLFã€‚ CR: Carriage Returnåœ¨ASCIIç ä¸­ä»£è¡¨å›è½¦ï¼Œç¬¦å·ï¼š\\rï¼ˆreturnï¼‰ï¼Œåå…­è¿›åˆ¶ç ï¼š0x0Dï¼ˆåè¿›åˆ¶ç 13ï¼ŒäºŒè¿›åˆ¶ç 0000 1101ï¼‰ã€‚ä¸€ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸‹ä¸€è¡Œã€‚ LF: Line Feedåœ¨ASCIIç ä¸­ä»£è¡¨æ¢è¡Œç¬¦ï¼Œç¬¦å·ï¼š\\nï¼ˆnewlineï¼‰ï¼Œåå…­è¿›åˆ¶ç ï¼š0x0Aï¼ˆåè¿›åˆ¶ç 10ï¼ŒäºŒè¿›åˆ¶ç 0000 1010ï¼‰ã€‚ä¸€ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸‹ä¸€è¡Œã€‚ CRLFWindowså’ŒDosç³»ç»Ÿé‡‡ç”¨å›è½¦+æ¢è¡Œä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸‹ä¸€è¡Œã€‚ äº’ç›¸è½¬æ¢é‚£åœ¨ç¨‹åºç¼–å†™ä¸­ï¼Œæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿé€šå¸¸åœ¨ç¼–å†™è·¨å¹³å°çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œä¸€ä¸ªå¹³å°ä½¿ç”¨å¦å¤–ä¸€ä¸ªå¹³å°çš„æ–‡æœ¬æ–‡ä»¶ï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜ã€‚ä¸€äº›æ–‡æœ¬/ä»£ç ç¼–è¾‘å™¨ä¼šè‡ªå¸¦è½¬æ¢æ“ä½œï¼Œä¾‹å¦‚ä¼˜ç§€çš„è·¨å¹³å°ç¼–è¾‘å™¨Notepad++ï¼Œå¯ä»¥é€šè¿‡èœå•æ â€œè§†å›¾â€-&gt;â€œæ˜¾ç¤ºè¡Œå°¾ç¬¦â€æ¥æŸ¥çœ‹ä¸€è¡Œæœ«å°¾çš„å­—ç¬¦ï¼š æ‰“å¼€åç»“æœå¦‚ä¸‹ï¼Œå›  ä¸ºæ˜¯åœ¨Windowså¹³å°ä¸‹ï¼Œæ‰€ä»¥è¡Œæœ«æ˜¯CRLFï¼š æˆ‘ä»¬å¯ä»¥é€šè¿‡â€œç¼–è¾‘â€-&gt;â€œæ¡£æ¡ˆæ ¼å¼è½¬æ¢â€æ¥è¿›è¡Œä¸‰ç§å¹³å°çš„æ¢è¡Œç¬¦æ ¼å¼åˆ‡æ¢ï¼š ä¾‹å¦‚è½¬æ¢ä¸ºUNIXæ ¼å¼åï¼Œè¡Œæœ«å°¾æ˜¾ç¤ºä¸ºLFï¼š Linuxç³»ç»Ÿä¹Ÿæœ‰è‡ªå·±çš„è½¬æ¢å‘½ä»¤ï¼Œæœ‰å…´è¶£è€…å¯ä»¥è‡ªè¡ŒæŸ¥é˜…èµ„æ–™ã€‚ ä»…ä¸ºä¸ªäººæ€»ç»“ï¼Œå¦‚æœ‰é—®é¢˜å»ºè®®ï¼Œè¯·åé¦ˆä¸æˆ‘ï¼Œè°¢è°¢ï¼ å¼•ç”¨ newline cr æ¢è¡Œ","categories":[{"name":"Buildç¯‡","slug":"Buildç¯‡","permalink":"http://www.codec.wang/categories/Build%E7%AF%87/"}],"tags":[{"name":"æ¢è¡Œç¬¦","slug":"æ¢è¡Œç¬¦","permalink":"http://www.codec.wang/tags/%E6%8D%A2%E8%A1%8C%E7%AC%A6/"},{"name":"å›è½¦","slug":"å›è½¦","permalink":"http://www.codec.wang/tags/%E5%9B%9E%E8%BD%A6/"},{"name":"æ¢è¡Œ","slug":"æ¢è¡Œ","permalink":"http://www.codec.wang/tags/%E6%8D%A2%E8%A1%8C/"}]}]}